window.txEval=function(source,target){if(typeof source=="function"){return source.call(target||this)}else{if(typeof source=="string"){return(target)?target.eval(source):this.eval(source)}}};(function(){try{EditorJSLoader.readyState="loading"}catch(u){}var c=document,j=window,p=c.documentElement,d=false,w=true,k=null,s;if(typeof JSON!=="object"){JSON={}}(function(){function B(H){return H<10?"0"+H:H}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+B(this.getUTCMonth()+1)+"-"+B(this.getUTCDate())+"T"+B(this.getUTCHours())+":"+B(this.getUTCMinutes())+":"+B(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var A=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,D=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,E,z,G={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},F;
function e(H){D.lastIndex=0;return D.test(H)?'"'+H.replace(D,function(I){var J=G[I];return typeof J==="string"?J:"\\u"+("0000"+I.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+H+'"'}function C(O,L){var J,I,P,H,M=E,K,N=L[O];if(N&&typeof N==="object"&&typeof N.toJSON==="function"){N=N.toJSON(O)}if(typeof F==="function"){N=F.call(L,O,N)}switch(typeof N){case"string":return e(N);case"number":return isFinite(N)?String(N):"null";case"boolean":case"null":return String(N);case"object":if(!N){return"null"}E+=z;K=[];if(Object.prototype.toString.apply(N)==="[object Array]"){H=N.length;for(J=0;J<H;J+=1){K[J]=C(J,N)||"null"}P=K.length===0?"[]":E?"[\n"+E+K.join(",\n"+E)+"\n"+M+"]":"["+K.join(",")+"]";E=M;return P}if(F&&typeof F==="object"){H=F.length;for(J=0;J<H;J+=1){if(typeof F[J]==="string"){I=F[J];P=C(I,N);if(P){K.push(e(I)+(E?": ":":")+P)}}}}else{for(I in N){if(Object.prototype.hasOwnProperty.call(N,I)){P=C(I,N);if(P){K.push(e(I)+(E?": ":":")+P)}}}}P=K.length===0?"{}":E?"{\n"+E+K.join(",\n"+E)+"\n"+M+"}":"{"+K.join(",")+"}";
E=M;return P}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(K,I,J){var H;E="";z="";if(typeof J==="number"){for(H=0;H<J;H+=1){z+=" "}}else{if(typeof J==="string"){z=J}}F=I;if(I&&typeof I!=="function"&&(typeof I!=="object"||typeof I.length!=="number")){throw new Error("JSON.stringify")}return C("",{"":K})}}if(typeof JSON.parse!=="function"){JSON.parse=function(K,H){var J;function I(O,N){var M,L,P=O[N];if(P&&typeof P==="object"){for(M in P){if(Object.prototype.hasOwnProperty.call(P,M)){L=I(P,M);if(L!==undefined){P[M]=L}else{delete P[M]}}}}return H.call(O,N,P)}K=String(K);A.lastIndex=0;if(A.test(K)){K=K.replace(A,function(L){return"\\u"+("0000"+L.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(K.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){J=txEval("("+K+")");return typeof H==="function"?I({"":J},""):J}throw new SyntaxError("JSON.parse")
}}}());var v={};(function(){Object.extend=function(C,E){for(var D in E){C[D]=E[D]}return C};j.Class={create:function(){return function(){this.initialize.apply(this,arguments)}}};j.$break={};Function.prototype.bind=function(){var C=this,E=$A(arguments),D=E.shift();return function(){return C.apply(D,E.concat($A(arguments)))}};Function.prototype.bindAsEventListener=function(){var C=this,E=$A(arguments),D=E.shift();return function(F){return C.apply(D,[F||j.event].concat(E))}};var B=function(E){var C=arguments;if(C.length>1){for(var D=0,G=[],F=C.length;D<F;D++){G.push(v(C[D]))}return G}if(typeof E=="string"){E=c.getElementById(E)}return E};v=B;var A=navigator.userAgent.toLowerCase();var e=function(C){return A.indexOf(C)!=-1};var z=function(C){return C.test(A)};Object.extend(v,{chrome:e("chrome"),safari:e("safari")&&e("chrome")==d,gecko:e("firefox"),gecko_ver:e("firefox")?parseFloat(A.replace(/.*firefox\/([\d\.]+).*/g,"$1")):0,msie:e("msie")||e("trident"),msie_ver:e("msie")||e("trident")?(function(){return e("msie")?parseFloat(A.split("msie")[1]):parseFloat(A.split("rv:")[1])
})():0,msie_docmode:c.documentMode||0,webkit:e("applewebkit"),webkit_ver:e("applewebkit")?parseFloat(A.replace(/.*safari\//g,"")):0,opera:e("opera"),presto:e("presto"),os_win:e("win"),os_win7:e("windows nt 6.1"),os_win8:e("windows nt 6.2"),os_win8_1:e("windows nt 6.3"),os_mac:e("mac"),iphone:e("iphone"),ipod:e("ipod"),ipad:e("ipad"),ios:e("like mac os x")&&e("mobile"),ios_ver:(e("like mac os x")&&e("mobile"))?parseFloat(A.replace(/^.*os (\d+)([_\d]*) .*$/g,"$1.$2").replace(/_/g,"")):0,android:e("android"),android_ver:e("android")?parseFloat(A.replace(/.*android[\s]*([\d\.]+).*/g,"$1")):0,blackberry:e("blackberry"),winphone:e("windows phone os"),wince:e("windows ce")});Object.extend(v,{msie_std:(v.msie&&!c.selection),msie_nonstd:(v.msie&&!!c.selection),msie6:(v.msie&&6<=v.msie_ver&&v.msie_ver<7)});Object.extend(v,{extend:Object.extend,browser:function(){if(v.msie){return"msie"}else{if(v.gecko){return"firefox"}else{if(v.chrome){return"chrome"}else{if(v.webkit){return"safari"}else{if(v.opera){return"opera"
}else{return""}}}}}}()});j.$must=function(E,C){var D=v(E);if(!D){throw new Error("[Exception] "+C+": cannot find element: id='"+E+"'")}return D};j.txlib=B})();(function(){v.extend(v,{classNames:function(e){return e.className.split(" ")},hasClassName:function(z,e){if(e&&z.className){var A=z.className.split(/\s+/);return A.contains(e)}return d},addClassName:function(e,z){if(!this.hasClassName(e,z)){e.className+=" "+z}},removeClassName:function(z,e){var A=z.className.split(/\s+/);z.className=A.without(e).compact().join(" ")},visible:function(e){return v.getStyle(e,"display")!="none"},toggle:function(e){e=v(e);v[v.visible(e)?"hide":"show"](e);return e},show:function(e){v(e).style.display="block";return e},hide:function(e){v(e).style.display="none";return e}})})();v.extend(v,{getStyle:function(z,A){z=v(z);A=A=="float"?"cssFloat":A.camelize();var B=z.style[A];if(!B){var e=c.defaultView.getComputedStyle(z,k);B=e?e[A]:k}if(A=="opacity"){return B?parseFloat(B):1}return B=="auto"?k:B},setStyle:function(e,A,z){e=v(e);
var C=e.style;for(var B in A){if(A.hasOwnProperty(B)){if(B==="opacity"){v.setOpacity(e,A[B])}else{C[(B==="float"||B==="cssFloat")?(C.styleFloat===s?"cssFloat":"styleFloat"):(z?B:B.camelize())]=A[B]}}}return e},setStyleProperty:function(e,A){var z=w;this.setStyle(e,A,z)},getOpacity:function(e){return v(e).getStyle("opacity")},setOpacity:function(e,z){e=v(e);e.style.opacity=(z==1||z==="")?"":(z<0.00001)?0:z;return e},applyCSSText:function(A,z){var e=A.createElement("style");e.setAttribute("type","text/css");if(e.styleSheet){e.styleSheet.cssText=z}else{e.textContent=z}A.getElementsByTagName("head")[0].appendChild(e)}});(function(){if(v.msie_nonstd){v.getStyle=function(z,A){z=v(z);A=(A=="float"||A=="cssFloat")?"styleFloat":A.camelize();var B=z.style[A];if(!B&&z.currentStyle){B=z.currentStyle[A]}if(A=="opacity"){if(B=(v.getStyle(z,"filter")||"").match(/alpha\(opacity=(.*)\)/)){if(B[1]){return parseFloat(B[1])/100}}return 1}if(B=="auto"){if((A=="width"||A=="height")&&(v.getStyle(z,"display")!="none")){return z["offset"+A.capitalize()]+"px"
}return k}return B}}if(v.msie_nonstd){v.setOpacity=function(z,C){z=v(z);var B=v.getStyle(z,"filter"),A=z.style;if(C==1||C===""){A.filter=B.replace(/alpha\([^\)]*\)/gi,"");return z}else{if(C<0.00001){C=0}}A.filter=B.replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+(C*100)+")";return z}}if(v.gecko){v.extend(v,{setOpacity:function(z,A){z=v(z);z.style.opacity=(A==1)?0.999999:(A==="")?"":(A<0.00001)?0:A;return z}})}v.JSONHelper={encodeURIComponentReplacer:function(z,A){if(typeof A==="string"){if(!e(A)){return encodeURIComponent(A)}}return A},decodeURIComponentReviver:function(z,A){if(typeof A==="string"){if(!e(A)){return decodeURIComponent(A)}else{return JSON.parse(A,arguments.callee)}}return A}};var e=function(z){return(z.charAt(0)=="["&&z.charAt(z.length-1)=="]")}})();(function(){v.extend(v,{cumulativeOffset:function(z){var e=0,A=0;do{e+=z.offsetTop||0;A+=z.offsetLeft||0;z=z.offsetParent}while(z);return[A,e]},positionedOffset:function(z){var e=0,B=0;do{e+=z.offsetTop||0;B+=z.offsetLeft||0;
z=z.offsetParent;if(z){if(z.tagName=="BODY"){break}var A=v.getStyle(z,"position");if(A=="relative"||A=="absolute"){break}}}while(z);return[B,e]},getDimensions:function(A){var E=v.getStyle(A,"display");if(E!="none"&&E!=k){return{width:A.offsetWidth,height:A.offsetHeight}}var z=A.style;var D=z.visibility;var B=z.position;var e=z.display;z.visibility="hidden";z.position="absolute";z.display="block";var F=A.clientWidth;var C=A.clientHeight;z.display=e;z.position=B;z.visibility=D;return{width:F,height:C}},getCoords:function(F,B){var A=B||false;var z=F.offsetWidth;var C=F.offsetHeight;var D={left:0,top:0,right:0,bottom:0};var E;while(F){D.left+=F.offsetLeft||0;D.top+=F.offsetTop||0;F=F.offsetParent;if(A){if(F){if(F.tagName=="BODY"){break}E=v.getStyle(F,"position");if(E!=="static"){break}}}}D.right=D.left+z;D.bottom=D.top+C;return D},getCoordsTarget:function(e){return this.getCoords(e,w)}});if(v.webkit){v.cumulativeOffset=function(z){var e=0,A=0;do{e+=z.offsetTop||0;A+=z.offsetLeft||0;if(z.offsetParent==c.body){if(v.getStyle(z,"position")=="absolute"){break
}}z=z.offsetParent}while(z);return[A,e]}}})();(function(){v.extend(v,{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,element:function(e){return v(e.target||e.srcElement)},isLeftClick:function(e){return(((e.which)&&(e.which==1))||((e.button)&&(e.button==1)))},pointerX:function(e){return e.pageX||(e.clientX+(c.documentElement.scrollLeft||c.body.scrollLeft))},pointerY:function(e){return e.pageY||(e.clientY+(c.documentElement.scrollTop||c.body.scrollTop))},stop:function(e){if(e.preventDefault){e.preventDefault();e.stopPropagation()}else{e.returnValue=d;e.cancelBubble=w}},findElement:function(A,z){var e=v.element(A);while(e.parentNode&&(!e.tagName||!e.tagName.toUpperCase||(e.tagName.toUpperCase()!=z.toUpperCase()))){e=e.parentNode}return e},observers:d,_observeAndCache:function(B,A,z,e){if(!this.observers){this.observers=[]}if(B.addEventListener){this.observers.push([B,A,z,e]);
B.addEventListener(A,z,e)}else{if(B.attachEvent){this.observers.push([B,A,z,e]);B.attachEvent("on"+A,z)}}},simulateEvent:function(D,z,C){var E=v.observers;if(!E){return}for(var A=0,B=E.length;A<B;A++){var e=E[A];if(e&&e[1]===z&&e[0]===D){e[2](C)}}},unloadCache:function(){if(!v.observers){return}for(var e=0,z=v.observers.length;e<z;e++){v.stopObserving.apply(this,v.observers[e]);v.observers[e][0]=k}v.observers=d},observe:function(B,A,z,e){B=v(B);e=e||d;if(A=="keypress"&&(v.webkit||B.attachEvent)){A="keydown"}v._observeAndCache(B,A,z,e)},stopObserving:function(C,B,A,z){C=v(C);z=z||d;if(B=="keypress"&&(v.webkit||C.attachEvent)){B="keydown"}if(C.removeEventListener){C.removeEventListener(B,A,z)}else{if(C.detachEvent){try{C.detachEvent("on"+B,A)}catch(D){}}}}});if(v.msie){v.observe(window,"unload",v.unloadCache,d)}})();(function(){v.extend(Object,{clone:function(e){return Object.extend({},e)}});v.extend(v,{isPrimitiveType:function(z){var e=new v.Set("string","number","boolean","date","function");
return e.contains(typeof z)},deepcopy:function(B,e){var A=B;if(!e){return A}for(var z in e){switch(typeof(e[z])){case"string":case"number":case"boolean":case"date":case"function":A[z]=e[z];break;default:if(e[z]){if(e[z].constructor==Array){A[z]=[].concat(e[z])}else{A[z]=A[z]||{};this.deepcopy(A[z],e[z])}}else{A[z]=k}break}}return A}})})();(function(){v.extend(String,{interpret:function(e){return e==k?"":String(e)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});v.extend(String.prototype,{gsub:function(C,A){var e="",B=this,z;A=arguments.callee.prepareReplacement(A);while(B.length>0){if(z=B.match(C)){e+=B.slice(0,z.index);e+=String.interpret(A(z));B=B.slice(z.index+z[0].length)}else{e+=B,B=""}}return e},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"")},toQueryParams:function(B){var e=this.strip().match(/([^?#]*)(#.*)?$/);if(!e){return{}}var A={};var z=k;e[1].split(B||"&").each(function(F){var E=k,C=k;
var D=F.match(/([\w_]+)=(.*)/);if(D){z=E=decodeURIComponent(D[1]);if(D[2]){C=decodeURIComponent(D[2])}}else{if(z){E=z;C=A[E];C+="&"+decodeURIComponent(F)}else{return}}if(E in A){if(A[E].constructor!=Array){A[E]=[A[E]]}A[E].push(C)}else{A[E]=C}});return A},toArray:function(){return this.split("")},times:function(A){var e="";for(var z=0;z<A;z++){e+=this}return e},camelize:function(){var B=this.split("-"),e=B.length;if(e==1){return B[0]}var A=this.charAt(0)=="-"?B[0].charAt(0).toUpperCase()+B[0].substring(1):B[0];for(var z=1;z<e;z++){A+=B[z].charAt(0).toUpperCase()+B[z].substring(1)}return A},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},include:function(e){return this.indexOf(e)>-1},empty:function(){return this==""},blank:function(){return/^\s*$/.test(this)}});String.prototype.gsub.prepareReplacement=function(z){if(typeof z=="function"){return z}var e=new Template(z);return function(A){return e.evaluate(A)}};v.extend(String.prototype,{trim:function(){return this.replace(/(^\s*)|(\s*$)/g,"")
},getRegExp:function(){return this.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\//g,"\\/").replace(/\?/g,"\\?").replace(/\^/g,"\\^").replace(/\)/g,"\\)").replace(/\(/g,"\\(").replace(/\]/g,"\\]").replace(/\[/g,"\\[").replace(/\$/g,"\\$").replace(/\+/g,"\\+").replace(/\|/g,"\\|").replace(/&/g,"(&|&amp;)")},toNumber:function(){return(isNaN(this)?0:parseInt(this,10))},toFloat:function(){return(isNaN(this)?0:parseFloat(this))},getRealLength:function(){var A=this;var e=0;for(var z=0;z<A.length;z++){e+=(escape(A.charAt(z)).charAt(1)=="u")?2:1}return e},cutRealLength:function(A){var B=this;var e=0;for(var z=0;z<B.length;z++){e+=(escape(B.charAt(z)).charAt(1)=="u")?2:1;if(e>A){return B.substring(0,z-3).concat("...")}}return B},getCut:function(e){return this.cutRealLength(e)},parsePx:function(){if(this==k||this.length==0){return 0}else{if(this.indexOf("px")>-1){return this.substring(0,this.indexOf("px")).toNumber()}else{return this.toNumber()}}},toPx:function(){if(this.indexOf("px")>-1){return this+""
}else{return this+"px"}},isPx:function(){var e=this;if(e.trim()==""){return false}else{if(e.indexOf("px")!=-1){e=this.parsePx()}}return !isNaN(e)},toByteUnit:function(){return this.toNumber().toByteUnit()},toCurrency:function(){var z=this;for(var e=0;e<Math.floor((z.length-(1+e))/3);e++){z=z.substring(0,z.length-(4*e+3))+","+z.substring(z.length-(4*e+3))}return z},replaceAll:function(e,z){e=e.replace(new RegExp("(\\W)","g"),"\\$1");z=z.replace(new RegExp("\\$","g"),"$$$$");return this.replace(new RegExp(e,"gm"),z)}})})();(function(){v.extend(Number.prototype,{toPaddedString:function(A,z){var e=this.toString(z||10);return"0".times(A-e.length)+e},toTime:function(){return Math.floor(this/60).toString().toPaddedString(2)+":"+(this%60).toString().toPaddedString(2)},toByteUnit:function(){var A;var e=["GB","MB","KB"];if(this==0){return"0"+e[2]}for(var z=0;z<e.length;z++){A=this/Math.pow(1024,3-z);if(A<1){continue}return(Math.round(A*10)/10)+e[z]}return"1"+e[2]},toPx:function(){return this.toString()+"px"
},parsePx:function(){return this+0},isPx:function(){return w},toNumber:function(){return this+0},toCurrency:function(){return this.toString().toCurrency()},getRegExp:function(){return this.toString().getRegExp()}})})();(function(){v.extend(Array.prototype,{each:function(A){try{for(var z=0,B=this.length;z<B;z++){A(this[z])}}catch(C){if(C!=$break){throw C}}return this},indexOf:function(z){for(var e=0;e<this.length;e++){if(this[e]==z){return e}}return -1},map:function(A){for(var e=[],z=0,B=this.length;z<B;++z){e[z]=A(this[z])}return e},include:function(e){return this.contains(e)},contains:function(e){return this.indexOf(e)>=0},pluck:function(z){var e=[];this.each(function(A){e.push(A[z])});return e},find:function(B){for(var z=0,e=this.length;z<e;z++){var A=this[z];if(B(A,z)){return A}}return k},findAll:function(C){var A=[];for(var z=0,e=this.length;z<e;z++){var B=this[z];if(C(B,z)){A.push(B)}}return A},inject:function(C,A){for(var z=0,e=this.length;z<e;z++){var B=this[z];C=A(C,B,z)}return C
},without:function(){var e=$A(arguments);return this.findAll(function(z){return !e.include(z)})},last:function(){return this[this.length-1]},flatten:function(){return this.inject([],function(z,e){return z.concat(e&&e.constructor==Array?e.flatten():[e])})},compact:function(){return this.findAll(function(e){return(e!=k)&&(e!="")})},uniq:function(e){return this.inject([],function(B,A,z){if(0==z||(e?B.last()!=A:!B.contains(A))){B.push(A)}return B})},toMap:function(z){var e={};this.each(function(A){e[A[z]]=A});return e}});Array.prototype.select=Array.prototype.findAll;Array.prototype.detect=Array.prototype.find;j.$A=function(A){if(!A){return[]}if(typeof A.toArray==="function"){return A.toArray()}else{var B=[];for(var z=0,e=A.length;z<e;z++){B.push(A[z])}return B}};v.Set=function(){var z=arguments;for(var A=0,e=z.length;A<e;A++){this[z[A]]=w}};v.Set.prototype.contains=function(e){return e in this};v.objectToQueryString=function(A){var B=[];for(var e in A){if(A.hasOwnProperty(e)){var z=A[e];if(z===k||z===s){z=""
}B.push(encodeURIComponent(e)+"="+encodeURIComponent(z))}}return B.join("&")}})();(function(){if(typeof(HTMLElement)!=s+""){var A=HTMLElement.prototype;var z=A.__proto__={__proto__:A.__proto__};if(HTMLElement.prototype.__defineSetter__){z.__defineSetter__("innerText",function(D){this.textContent=D})}if(HTMLElement.prototype.__defineGetter__){z.__defineGetter__("innerText",function(){return this.textContent})}}if(typeof(XMLDocument)!=s+""){var C=XMLDocument;if(C.prototype.__defineGetter__){C.prototype.__defineGetter__("xml",function(){return(new XMLSerializer()).serializeToString(this)})}}if(typeof(Node)!=s+""){if(Node.prototype&&Node.prototype.__defineGetter__){Node.prototype.__defineGetter__("xml",function(){return(new XMLSerializer()).serializeToString(this)})}}if(typeof(c.implementation)!=s+""){if(c.implementation.hasFeature("XPath","3.0")){if(typeof(C)!=s+""){C.prototype.selectNodes=function(F,H){if(!H){H=this}var G=this.defaultNS;var D=this.evaluate(F,H,{normalResolver:this.createNSResolver(this.documentElement),lookupNamespaceURI:function(J){switch(J){case"dflt":return G;
default:return this.normalResolver.lookupNamespaceURI(J)}}},XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,k);var I=[];for(var E=0;E<D.snapshotLength;E++){I[E]=D.snapshotItem(E)}return I};C.prototype.setProperty=function(E,D){if(E=="SelectionNamespaces"&&D.indexOf("xmlns:dflt")==0){this.defaultNS=D.replace(/^.*=\'(.+)\'/,"$1")}};C.prototype.defaultNS;C.prototype.selectSingleNode=function(E,F){if(!F){F=this}var D=this.selectNodes(E,F);if(D.length>0){return D[0]}else{return k}};C.prototype.createNode=function(D,F,E){if(D==1){return this.createElementNS(E,F)}else{return k}}}if(typeof(Element)!=s+""){Element.prototype.selectNodes=function(D){if(this.ownerDocument.selectNodes){return this.ownerDocument.selectNodes(D,this)}else{throw"For XML Elements Only"}};Element.prototype.selectSingleNode=function(D){if(this.ownerDocument.selectSingleNode){return this.ownerDocument.selectSingleNode(D,this)}else{throw"For XML Elements Only"}};Element.prototype.text;var B=Element.prototype;var e=B.__proto__={__proto__:B.__proto__};
if(Element.prototype.__defineSetter__){e.__defineSetter__("text",function(D){this.textContent=D})}if(Element.prototype.__defineGetter__){e.__defineGetter__("text",function(){return this.textContent})}if(j.origElement){j.origElement.prototype.selectNodes=Element.prototype.selectNodes;j.origElement.prototype.selectSingleNode=Element.prototype.selectSingleNode}}}}})();j.$tx=v;var g=j.goog=j.goog||{};g.global=j;g.LOCALE="en";g.provide=function(e){g.exportPath_(e)};g.exportPath_=function(A,e,D){var B=A.split(".");var C=D||g.global;if(!(B[0] in C)&&C.execScript){C.execScript("var "+B[0])}for(var z;B.length&&(z=B.shift());){if(!B.length&&g.isDef(e)){C[z]=e}else{if(C[z]){C=C[z]}else{C=C[z]={}}}}};g.abstractMethod=function(){throw Error("unimplemented abstract method")};g.typeOf=function(A){var z=typeof A;if(z=="object"){if(A){if(A instanceof Array){return"array"}else{if(A instanceof Object){return z}}var e=Object.prototype.toString.call((A));if(e=="[object Window]"){return"object"}if((e=="[object Array]"||typeof A.length=="number"&&isTypeOfUndefined(A.splice)!=s+""&&typeof A.propertyIsEnumerable!=s+""&&!A.propertyIsEnumerable("splice"))){return"array"
}if((e=="[object Function]"||typeof A.call!=s+""&&typeof A.propertyIsEnumerable!=s+""&&!A.propertyIsEnumerable("call"))){return"function"}}else{return k+""}}else{if(z=="function"&&typeof A.call==s+""){return"object"}}return z};g.isDef=function(e){return e!==s};g.isNull=function(e){return e===k};g.isDefAndNotNull=function(e){return e!=k};g.isArray=function(e){return g.typeOf(e)=="array"};g.isArrayLike=function(z){var e=g.typeOf(z);return e=="array"||e=="object"&&typeof z.length=="number"};g.isDateLike=function(e){return g.isObject(e)&&typeof e.getFullYear=="function"};g.isString=function(e){return typeof e=="string"};g.isBoolean=function(e){return typeof e=="boolean"};g.isNumber=function(e){return typeof e=="number"};g.isFunction=function(e){return g.typeOf(e)=="function"};g.isObject=function(z){var e=g.typeOf(z);return e=="object"||e=="array"||e=="function"};g.getUid=function(e){return e[g.UID_PROPERTY_]||(e[g.UID_PROPERTY_]=++g.uidCounter_)};g.UID_PROPERTY_="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36);
g.uidCounter_=0;Object.prototype.clone;g.bindNative_=function(e,A,z){return(e.call.apply(e.bind,arguments))};g.bindJs_=function(z,C,A){var e=C||g.global;if(arguments.length>2){var B=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(D,B);return z.apply(e,D)}}else{return function(){return z.apply(e,arguments)}}};g.bind=function(e,A,z){if(Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1){g.bind=g.bindNative_}else{g.bind=g.bindJs_}return g.bind.apply(k,arguments)};g.partial=function(z,A){var e=Array.prototype.slice.call(arguments,1);return function(){var B=Array.prototype.slice.call(arguments);B.unshift.apply(B,e);return z.apply(this,B)}};g.now=Date.now||(function(){return +new Date()});g.inherits=function(z,e){function A(){}A.prototype=e.prototype;z.superClass_=e.prototype;z.prototype=new A();z.prototype.constructor=z};g.base=function(C,e,E){var A=arguments.callee.caller;
if(A.superClass_){return A.superClass_.constructor.apply(C,Array.prototype.slice.call(arguments,1))}var z=Array.prototype.slice.call(arguments,2);var D=d;for(var B=C.constructor;B;B=B.superClass_&&B.superClass_.constructor){if(B.prototype[e]===A){D=w}else{if(D){return B.prototype[e].apply(C,z)}}}if(C[e]===A){return C.constructor.prototype[e].apply(C,z)}else{throw Error("goog.base called from a method of one name to a method of a different name")}};g.provide("goog.string");g.provide("goog.string.Unicode");g.string.Unicode={NBSP:"\xa0"};g.string.startsWith=function(z,e){return z.lastIndexOf(e,0)==0};g.string.isEmpty=function(e){return/^[\s\xa0]*$/.test(e)};g.string.stripNewlines=function(e){return e.replace(/ ?(\r\n|\r|\n)+/g," ")};g.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")};g.string.trim=function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};g.string.htmlEscape=function(z,e){if(e){return z.replace(g.string.amperRe_,"&amp;").replace(g.string.ltRe_,"&lt;").replace(g.string.gtRe_,"&gt;").replace(g.string.quotRe_,"&quot;")
}else{if(!g.string.allRe_.test(z)){return z}if(z.indexOf("&")!=-1){z=z.replace(g.string.amperRe_,"&amp;")}if(z.indexOf("<")!=-1){z=z.replace(g.string.ltRe_,"&lt;")}if(z.indexOf(">")!=-1){z=z.replace(g.string.gtRe_,"&gt;")}if(z.indexOf('"')!=-1){z=z.replace(g.string.quotRe_,"&quot;")}return z}};g.string.amperRe_=/&/g;g.string.ltRe_=/</g;g.string.gtRe_=/>/g;g.string.quotRe_=/\"/g;g.string.allRe_=/[&<>\"]/;g.string.contains=function(z,e){return z.indexOf(e)!=-1};g.string.buildString=function(e){return Array.prototype.join.call(arguments,"")};g.string.compareVersions=function(z,M){var A=0;var H=g.string.trim(String(z)).split(".");var G=g.string.trim(String(M)).split(".");var D=Math.max(H.length,G.length);for(var E=0;A==0&&E<D;E++){var e=H[E]||"";var L=G[E]||"";var I=new RegExp("(\\d*)(\\D*)","g");var C=new RegExp("(\\d*)(\\D*)","g");do{var K=I.exec(e)||["","",""];var J=C.exec(L)||["","",""];if(K[0].length==0&&J[0].length==0){break}var F=K[1].length==0?0:parseInt(K[1],10);var B=J[1].length==0?0:parseInt(J[1],10);
A=g.string.compareElements_(F,B)||g.string.compareElements_(K[2].length==0,J[2].length==0)||g.string.compareElements_(K[2],J[2])}while(A==0)}return A};g.string.compareElements_=function(z,e){if(z<e){return -1}else{if(z>e){return 1}}return 0};g.string.uniqueStringCounter_=Math.random()*2147483648|0;g.string.createUniqueString=function(){return"goog_"+g.string.uniqueStringCounter_++};g.provide("goog.userAgent");g.userAgent.ASSUME_IE=d;g.userAgent.ASSUME_GECKO=d;g.userAgent.ASSUME_WEBKIT=d;g.userAgent.ASSUME_MOBILE_WEBKIT=d;g.userAgent.ASSUME_OPERA=d;g.userAgent.BROWSER_KNOWN_=g.userAgent.ASSUME_IE||g.userAgent.ASSUME_GECKO||g.userAgent.ASSUME_MOBILE_WEBKIT||g.userAgent.ASSUME_WEBKIT||g.userAgent.ASSUME_OPERA;g.userAgent.getUserAgentString=function(){return g.global.navigator?g.global.navigator.userAgent:k};g.userAgent.getNavigator=function(){return g.global.navigator};g.userAgent.init_=function(){g.userAgent.detectedOpera_=d;g.userAgent.detectedIe_=d;g.userAgent.detectedWebkit_=d;g.userAgent.detectedMobile_=d;
g.userAgent.detectedGecko_=d;var z;if(!g.userAgent.BROWSER_KNOWN_&&(z=g.userAgent.getUserAgentString())){var e=g.userAgent.getNavigator();g.userAgent.detectedOpera_=g.string.startsWith(z,"Opera");g.userAgent.detectedIe_=!g.userAgent.detectedOpera_&&(g.string.contains(z,"MSIE")||g.string.contains(z,"Trident"));g.userAgent.detectedWebkit_=!g.userAgent.detectedOpera_&&g.string.contains(z,"WebKit");g.userAgent.detectedMobile_=g.userAgent.detectedWebkit_&&g.string.contains(z,"Mobile");g.userAgent.detectedGecko_=!g.userAgent.detectedOpera_&&!g.userAgent.detectedWebkit_&&!g.userAgent.detectedIe_&&e.product=="Gecko"}};if(!g.userAgent.BROWSER_KNOWN_){g.userAgent.init_()}g.userAgent.OPERA=g.userAgent.BROWSER_KNOWN_?g.userAgent.ASSUME_OPERA:g.userAgent.detectedOpera_;g.userAgent.IE=g.userAgent.BROWSER_KNOWN_?g.userAgent.ASSUME_IE:g.userAgent.detectedIe_;g.userAgent.GECKO=g.userAgent.BROWSER_KNOWN_?g.userAgent.ASSUME_GECKO:g.userAgent.detectedGecko_;g.userAgent.WEBKIT=g.userAgent.BROWSER_KNOWN_?g.userAgent.ASSUME_WEBKIT||g.userAgent.ASSUME_MOBILE_WEBKIT:g.userAgent.detectedWebkit_;
g.userAgent.MOBILE=g.userAgent.ASSUME_MOBILE_WEBKIT||g.userAgent.detectedMobile_;g.userAgent.SAFARI=g.userAgent.WEBKIT;g.userAgent.determinePlatform_=function(){var e=g.userAgent.getNavigator();return e&&e.platform||""};g.userAgent.PLATFORM=g.userAgent.determinePlatform_();g.userAgent.ASSUME_MAC=d;g.userAgent.ASSUME_WINDOWS=d;g.userAgent.ASSUME_LINUX=d;g.userAgent.ASSUME_X11=d;g.userAgent.PLATFORM_KNOWN_=g.userAgent.ASSUME_MAC||g.userAgent.ASSUME_WINDOWS||g.userAgent.ASSUME_LINUX||g.userAgent.ASSUME_X11;g.userAgent.initPlatform_=function(){g.userAgent.detectedMac_=g.string.contains(g.userAgent.PLATFORM,"Mac");g.userAgent.detectedWindows_=g.string.contains(g.userAgent.PLATFORM,"Win");g.userAgent.detectedLinux_=g.string.contains(g.userAgent.PLATFORM,"Linux");g.userAgent.detectedX11_=!!g.userAgent.getNavigator()&&g.string.contains(g.userAgent.getNavigator()["appVersion"]||"","X11")};if(!g.userAgent.PLATFORM_KNOWN_){g.userAgent.initPlatform_()}g.userAgent.MAC=g.userAgent.PLATFORM_KNOWN_?g.userAgent.ASSUME_MAC:g.userAgent.detectedMac_;
g.userAgent.WINDOWS=g.userAgent.PLATFORM_KNOWN_?g.userAgent.ASSUME_WINDOWS:g.userAgent.detectedWindows_;g.userAgent.LINUX=g.userAgent.PLATFORM_KNOWN_?g.userAgent.ASSUME_LINUX:g.userAgent.detectedLinux_;g.userAgent.X11=g.userAgent.PLATFORM_KNOWN_?g.userAgent.ASSUME_X11:g.userAgent.detectedX11_;g.userAgent.determineVersion_=function(){var z="",C;if(g.userAgent.OPERA&&g.global.opera){var B=g.global.opera.version;z=typeof B=="function"?B():B}else{if(g.userAgent.GECKO){C=/rv\:([^\);]+)(\)|;)/}else{if(g.userAgent.IE){C=/MSIE\s+([^\);]+)(\)|;)/}else{if(g.userAgent.WEBKIT){C=/WebKit\/(\S+)/}}}if(C){var e=C.exec(g.userAgent.getUserAgentString());z=e?e[1]:""}}if(g.userAgent.IE){var A=g.userAgent.getDocumentMode_();if(A>parseFloat(z)){return String(A)}}return z};g.userAgent.getDocumentMode_=function(){var e=g.global.document;return e?e.documentMode:s};g.userAgent.VERSION=g.userAgent.determineVersion_();g.userAgent.isVersionCache_={};g.userAgent.isVersion=function(e){return g.userAgent.isVersionCache_[e]||(g.userAgent.isVersionCache_[e]=g.string.compareVersions(g.userAgent.VERSION,e)>=0)
};g.userAgent.isDocumentModeCache_={};g.userAgent.isDocumentMode=function(e){return g.userAgent.isDocumentModeCache_[e]||(g.userAgent.isDocumentModeCache_[e]=g.userAgent.IE&&c.documentMode&&c.documentMode>=e)};g.provide("goog.array");g.provide("goog.array.ArrayLike");g.NATIVE_ARRAY_PROTOTYPES=w;g.array.ArrayLike;g.array.peek=function(e){return e[e.length-1]};g.array.ARRAY_PROTOTYPE_=Array.prototype;g.array.indexOf=g.NATIVE_ARRAY_PROTOTYPES&&g.array.ARRAY_PROTOTYPE_.indexOf?function(e,A,z){return g.array.ARRAY_PROTOTYPE_.indexOf.call(e,A,z)}:function(e,C,z){var B=z==k?0:(z<0?Math.max(0,e.length+z):z);if(g.isString(e)){if(!g.isString(C)||C.length!=1){return -1}return e.indexOf(C,B)}for(var A=B;A<e.length;A++){if(A in e&&e[A]===C){return A}}return -1};g.array.forEach=g.NATIVE_ARRAY_PROTOTYPES&&g.array.ARRAY_PROTOTYPE_.forEach?function(e,A,z){g.array.ARRAY_PROTOTYPE_.forEach.call(e,A,z)}:function(e,D,C){var z=e.length;var A=g.isString(e)?e.split(""):e;for(var B=0;B<z;B++){if(B in A){D.call(C,A[B],B,e)
}}};g.array.forEachRight=function(e,D,C){var z=e.length;var A=g.isString(e)?e.split(""):e;for(var B=z-1;B>=0;--B){if(B in A){D.call(C,A[B],B,e)}}};g.array.filter=g.NATIVE_ARRAY_PROTOTYPES&&g.array.ARRAY_PROTOTYPE_.filter?function(e,A,z){return g.array.ARRAY_PROTOTYPE_.filter.call(e,A,z)}:function(C,D,e){var A=C.length;var E=[];var G=0;var F=g.isString(C)?C.split(""):C;for(var B=0;B<A;B++){if(B in F){var z=F[B];if(D.call(e,z,B,C)){E[G++]=z}}}return E};g.array.map=g.NATIVE_ARRAY_PROTOTYPES&&g.array.ARRAY_PROTOTYPE_.map?function(e,A,z){return g.array.ARRAY_PROTOTYPE_.map.call(e,A,z)}:function(e,E,D){var z=e.length;var C=new Array(z);var A=g.isString(e)?e.split(""):e;for(var B=0;B<z;B++){if(B in A){C[B]=E.call(D,A[B],B,e)}}return C};g.array.some=g.NATIVE_ARRAY_PROTOTYPES&&g.array.ARRAY_PROTOTYPE_.some?function(e,A,z){return g.array.ARRAY_PROTOTYPE_.some.call(e,A,z)}:function(e,D,C){var z=e.length;var A=g.isString(e)?e.split(""):e;for(var B=0;B<z;B++){if(B in A&&D.call(C,A[B],B,e)){return w}}return d
};g.array.every=g.NATIVE_ARRAY_PROTOTYPES&&g.array.ARRAY_PROTOTYPE_.every?function(e,A,z){return g.array.ARRAY_PROTOTYPE_.every.call(e,A,z)}:function(e,D,C){var z=e.length;var A=g.isString(e)?e.split(""):e;for(var B=0;B<z;B++){if(B in A&&!D.call(C,A[B],B,e)){return d}}return w};g.array.contains=function(e,z){return g.array.indexOf(e,z)>=0};g.array.isEmpty=function(e){return e.length==0};g.array.clear=function(e){if(!g.isArray(e)){for(var z=e.length-1;z>=0;z--){delete e[z]}}e.length=0};g.array.insertAt=function(e,A,z){g.array.splice(e,z,0,A)};g.array.remove=function(e,A){var z=g.array.indexOf(e,A);var B;if((B=z>=0)){g.array.removeAt(e,z)}return B};g.array.removeAt=function(e,z){return g.array.ARRAY_PROTOTYPE_.splice.call(e,z,1).length==1};g.array.concat=function(e){return g.array.ARRAY_PROTOTYPE_.concat.apply(g.array.ARRAY_PROTOTYPE_,arguments)};g.array.clone=function(z){if(g.isArray(z)){return g.array.concat((z))}else{var B=[];for(var A=0,e=z.length;A<e;A++){B[A]=z[A]}return B}};g.array.toArray=function(e){if(g.isArray(e)){return g.array.concat((e))
}return g.array.clone((e))};g.array.splice=function(e,z,A,B){return g.array.ARRAY_PROTOTYPE_.splice.apply(e,g.array.slice(arguments,1))};g.array.slice=function(z,A,e){if(arguments.length<=2){return g.array.ARRAY_PROTOTYPE_.slice.call(z,A)}else{return g.array.ARRAY_PROTOTYPE_.slice.call(z,A,e)}};g.array.sort=function(e,z){g.array.ARRAY_PROTOTYPE_.sort.call(e,z||g.array.defaultCompare)};g.array.equals=function(A,z,D){if(!g.isArrayLike(A)||!g.isArrayLike(z)||A.length!=z.length){return d}var e=A.length;var C=D||g.array.defaultCompareEquality;for(var B=0;B<e;B++){if(!C(A[B],z[B])){return d}}return w};g.array.compare=function(z,e,A){return g.array.equals(z,e,A)};g.array.defaultCompare=function(z,e){return z>e?1:z<e?-1:0};g.array.defaultCompareEquality=function(z,e){return z===e};g.array.repeat=function(z,B){var A=[];for(var e=0;e<B;e++){A[e]=z}return A};g.provide("goog.dom.classes");g.dom.classes.get=function(e){var z=e.className;return z&&typeof z.split=="function"?z.split(/\s+/):[]};g.dom.classes.add=function(B,C){var A=g.dom.classes.get(B);
var z=g.array.slice(arguments,1);var e=g.dom.classes.add_(A,z);B.className=A.join(" ");return e};g.dom.classes.add_=function(A,e){var B=0;for(var z=0;z<e.length;z++){if(!g.array.contains(A,e[z])){A.push(e[z]);B++}}return B==e.length};g.provide("goog.object");g.object.forEach=function(B,A,z){for(var e in B){A.call(z,B[e],e,B)}};g.object.filter=function(C,B,A){var z={};for(var e in C){if(B.call(A,C[e],e,C)){z[e]=C[e]}}return z};g.object.map=function(C,B,A){var z={};for(var e in C){z[e]=B.call(A,C[e],e,C)}return z};g.object.every=function(B,A,z){for(var e in B){if(!A.call(z,B[e],e,B)){return d}}return w};g.object.getCount=function(z){var A=0;for(var e in z){A++}return A};g.object.contains=function(e,z){return g.object.containsValue(e,z)};g.object.getValues=function(B){var A=[];var z=0;for(var e in B){A[z++]=B[e]}return A};g.object.getKeys=function(B){var A=[];var z=0;for(var e in B){A[z++]=e}return A};g.object.containsValue=function(z,A){for(var e in z){if(z[e]==A){return w}}return d};g.object.isEmpty=function(z){for(var e in z){return d
}return w};g.object.clear=function(z){for(var e in z){delete z[e]}};g.object.remove=function(z,e){var A;if((A=e in z)){delete z[e]}return A};g.object.add=function(z,e,A){if(e in z){throw Error('The object already contains the key "'+e+'"')}g.object.set(z,e,A)};g.object.get=function(A,e,z){if(e in A){return A[e]}return z};g.object.set=function(A,e,z){A[e]=z};g.object.clone=function(A){var z={};for(var e in A){z[e]=A[e]}return z};g.object.PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];g.object.extend=function(C,D){var A,B;for(var z=1;z<arguments.length;z++){B=arguments[z];for(A in B){C[A]=B[A]}for(var e=0;e<g.object.PROTOTYPE_FIELDS_.length;e++){A=g.object.PROTOTYPE_FIELDS_[e];if(Object.prototype.hasOwnProperty.call(B,A)){C[A]=B[A]}}}};g.object.create=function(z){var B=arguments.length;if(B==1&&g.isArray(arguments[0])){return g.object.create.apply(k,arguments[0])}if(B%2){throw Error("Uneven number of arguments")
}var A={};for(var e=0;e<B;e+=2){A[arguments[e]]=arguments[e+1]}return A};g.provide("goog.dom.TagName");g.dom.TagName={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",DD:"DD",DEL:"DEL",DFN:"DFN",DIR:"DIR",DIV:"DIV",DL:"DL",DT:"DT",EM:"EM",FIELDSET:"FIELDSET",FONT:"FONT",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEAD:"HEAD",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",ISINDEX:"ISINDEX",KBD:"KBD",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAP:"MAP",MENU:"MENU",META:"META",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",P:"P",PARAM:"PARAM",PRE:"PRE",Q:"Q",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SELECT:"SELECT",SMALL:"SMALL",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUP:"SUP",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TITLE:"TITLE",TR:"TR",TT:"TT",U:"U",UL:"UL",VAR:"VAR"};
g.provide("goog.math.Size");g.math.Size=function(z,e){this.width=z;this.height=e};g.math.Size.equals=function(z,e){if(z==e){return w}if(!z||!e){return d}return z.width==e.width&&z.height==e.height};g.math.Size.prototype.clone=function(){return new g.math.Size(this.width,this.height)};g.math.Size.prototype.area=function(){return this.width*this.height};g.math.Size.prototype.isEmpty=function(){return !this.area()};g.provide("goog.dom.BrowserFeature");g.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!g.userAgent.IE||g.userAgent.isVersion("9"),CAN_USE_CHILDREN_ATTRIBUTE:!g.userAgent.GECKO&&!g.userAgent.IE||g.userAgent.IE&&g.userAgent.isVersion("9")||g.userAgent.GECKO&&g.userAgent.isVersion("1.9.1"),CAN_USE_INNER_TEXT:g.userAgent.IE&&!g.userAgent.isVersion("9"),INNER_HTML_NEEDS_SCOPED_ELEMENT:g.userAgent.IE};g.provide("goog.math.Coordinate");g.math.Coordinate=function(z,e){this.x=g.isDef(z)?z:0;this.y=g.isDef(e)?e:0};g.math.Coordinate.prototype.clone=function(){return new g.math.Coordinate(this.x,this.y)
};g.math.Coordinate.equals=function(z,e){if(z==e){return w}if(!z||!e){return d}return z.x==e.x&&z.y==e.y};g.provide("goog.dom");g.provide("goog.dom.DomHelper");g.provide("goog.dom.NodeType");g.dom.ASSUME_QUIRKS_MODE=d;g.dom.ASSUME_STANDARDS_MODE=d;g.dom.COMPAT_MODE_KNOWN_=g.dom.ASSUME_QUIRKS_MODE||g.dom.ASSUME_STANDARDS_MODE;g.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};g.dom.getDomHelper=function(e){return e?new g.dom.DomHelper(g.dom.getOwnerDocument(e)):(g.dom.defaultDomHelper_||(g.dom.defaultDomHelper_=new g.dom.DomHelper()))};g.dom.defaultDomHelper_;g.dom.getDocument=function(){return document};g.dom.getElement=function(e){return g.isString(e)?c.getElementById(e):e};g.dom.$=g.dom.getElement;g.dom.getElementsByTagNameAndClass=function(A,e,z){return g.dom.getElementsByTagNameAndClass_(document,A,e,z)};g.dom.getElementsByClass=function(A,z){var e=z||document;
if(g.dom.canUseQuerySelector_(e)){return e.querySelectorAll("."+A)}else{if(e.getElementsByClassName){return e.getElementsByClassName(A)}}return g.dom.getElementsByTagNameAndClass_(document,"*",A,z)};g.dom.getElementByClass=function(A,z){var e=z||document;var B=k;if(g.dom.canUseQuerySelector_(e)){B=e.querySelector("."+A)}else{B=g.dom.getElementsByClass(A,z)[0]}return B||k};g.dom.canUseQuerySelector_=function(e){return e.querySelectorAll&&e.querySelector&&(!g.userAgent.WEBKIT||g.dom.isCss1CompatMode_(document)||g.userAgent.isVersion("528"))};g.dom.getElementsByTagNameAndClass_=function(H,G,A,J){var I=J||H;var z=(G&&G!="*")?G.toUpperCase():"";if(g.dom.canUseQuerySelector_(I)&&(z||A)){var F=z+(A?"."+A:"");return I.querySelectorAll(F)}if(A&&I.getElementsByClassName){var B=I.getElementsByClassName(A);if(z){var K={};var D=0;for(var C=0,e;e=B[C];C++){if(z==e.nodeName){K[D++]=e}}K.length=D;return K}else{return B}}var B=I.getElementsByTagName(z||"*");if(A){var K={};var D=0;for(var C=0,e;e=B[C];C++){var E=e.className;
if(typeof E.split=="function"&&g.array.contains(E.split(/\s+/),A)){K[D++]=e}}K.length=D;return K}else{return B}};g.dom.$$=g.dom.getElementsByTagNameAndClass;g.dom.setProperties=function(z,e){g.object.forEach(e,function(B,A){if(A=="style"){z.style.cssText=B}else{if(A=="class"){z.className=B}else{if(A=="for"){z.htmlFor=B}else{if(A in g.dom.DIRECT_ATTRIBUTE_MAP_){z.setAttribute(g.dom.DIRECT_ATTRIBUTE_MAP_[A],B)}else{z[A]=B}}}}})};g.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};g.dom.getViewportSize=function(e){return g.dom.getViewportSize_(e||window)};g.dom.getViewportSize_=function(C){var B=C.document;if(g.userAgent.WEBKIT&&!g.userAgent.isVersion("500")&&!g.userAgent.MOBILE){if(typeof C.innerHeight==s+""){C=window}var A=C.innerHeight;var z=C.document.documentElement.scrollHeight;if(C==C.top){if(z<A){A-=15
}}return new g.math.Size(C.innerWidth,A)}var e=g.dom.isCss1CompatMode_(B)?B.documentElement:B.body;return new g.math.Size(e.clientWidth,e.clientHeight)};g.dom.getWindow=function(e){return e?g.dom.getWindow_(e):window};g.dom.getWindow_=function(e){return e.parentWindow||e.defaultView};g.dom.createDom=function(z,e,A){return g.dom.createDom_(document,arguments)};g.dom.createDom_=function(C,z){var B=z[0];var e=z[1];if(!g.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&e&&(e.name||e.type)){var E=["<",B];if(e.name){E.push(' name="',g.string.htmlEscape(e.name),'"')}if(e.type){E.push(' type="',g.string.htmlEscape(e.type),'"');var D={};g.object.extend(D,e);e=D;delete e.type}E.push(">");B=E.join("")}var A=C.createElement(B);if(e){if(g.isString(e)){A.className=e}else{if(g.isArray(e)){g.dom.classes.add.apply(k,[A].concat(e))}else{g.dom.setProperties(A,e)}}}if(z.length>2){g.dom.append_(C,A,z,2)}return A};g.dom.append_=function(D,C,z,E){function B(F){if(F){C.appendChild(g.isString(F)?D.createTextNode(F):F)
}}for(var A=E;A<z.length;A++){var e=z[A];if(g.isArrayLike(e)&&!g.dom.isNodeLike(e)){g.array.forEach(g.dom.isNodeList(e)?g.array.clone(e):e,B)}else{B(e)}}};g.dom.$dom=g.dom.createDom;g.dom.createElement=function(e){return c.createElement(e)};g.dom.createTextNode=function(e){return c.createTextNode(e)};g.dom.isCss1CompatMode_=function(e){if(g.dom.COMPAT_MODE_KNOWN_){return g.dom.ASSUME_STANDARDS_MODE}return e.compatMode=="CSS1Compat"};g.dom.canHaveChildren_OLD=function(e){if(e.nodeType!=g.dom.NodeType.ELEMENT){return d}switch(e.tagName){case g.dom.TagName.APPLET:case g.dom.TagName.AREA:case g.dom.TagName.BASE:case g.dom.TagName.BR:case g.dom.TagName.COL:case g.dom.TagName.FRAME:case g.dom.TagName.HR:case g.dom.TagName.IMG:case g.dom.TagName.INPUT:case g.dom.TagName.IFRAME:case g.dom.TagName.ISINDEX:case g.dom.TagName.LINK:case g.dom.TagName.NOFRAMES:case g.dom.TagName.NOSCRIPT:case g.dom.TagName.META:case g.dom.TagName.OBJECT:case g.dom.TagName.PARAM:case g.dom.TagName.SCRIPT:case g.dom.TagName.STYLE:return d
}return w};g.dom.TAGS_CANT_HAVE_CHILDREN={APPLET:w,AREA:w,BASE:w,BR:w,COL:w,FRAME:w,HR:w,IMG:w,INPUT:w,IFRAME:w,ISINDEX:w,LINK:w,NOFRAMES:w,NOSCRIPT:w,META:w,OBJECT:w,PARAM:w,SCRIPT:w,STYLE:w};g.dom.canHaveChildren=function(e){return e.nodeType==g.dom.NodeType.ELEMENT&&!g.dom.TAGS_CANT_HAVE_CHILDREN[e.tagName]};g.dom.appendChild=function(e,z){e.appendChild(z)};g.dom.append=function(e,z){g.dom.append_(g.dom.getOwnerDocument(e),e,arguments,1)};g.dom.removeChildren=function(e){var z;while((z=e.firstChild)){e.removeChild(z)}};g.dom.insertSiblingBefore=function(z,e){if(e.parentNode){e.parentNode.insertBefore(z,e)}};g.dom.insertSiblingAfter=function(z,e){if(e.parentNode){e.parentNode.insertBefore(z,e.nextSibling)}};g.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):k};g.dom.replaceNode=function(e,A){var z=A.parentNode;if(z){z.replaceChild(e,A)}};g.dom.flattenElement=function(e){var A,z=e.parentNode;if(z&&z.nodeType!=g.dom.NodeType.DOCUMENT_FRAGMENT){if(e.removeNode){return(e.removeNode(d))
}else{while((A=e.firstChild)){z.insertBefore(A,e)}return(g.dom.removeNode(e))}}};g.dom.isNodeLike=function(e){return g.isObject(e)&&e.nodeType>0};g.dom.contains=function(z,e){if(z.contains&&e.nodeType==g.dom.NodeType.ELEMENT){return z==e||z.contains(e)}if(typeof z.compareDocumentPosition!=s+""){return z==e||Boolean(z.compareDocumentPosition(e)&16)}while(e&&z!=e){e=e.parentNode}return e==z};g.dom.compareNodeOrder=function(F,E){if(F==E){return 0}if(F.compareDocumentPosition){return F.compareDocumentPosition(E)&2?1:-1}if("sourceIndex" in F||(F.parentNode&&"sourceIndex" in F.parentNode)){var A=F.nodeType==g.dom.NodeType.ELEMENT;var e=E.nodeType==g.dom.NodeType.ELEMENT;if(A&&e){return F.sourceIndex-E.sourceIndex}else{var B=F.parentNode;var z=E.parentNode;if(B==z){return g.dom.compareSiblingOrder_(F,E)}if(!A&&g.dom.contains(B,E)){return -1*g.dom.compareParentsDescendantNodeIe_(F,E)}if(!e&&g.dom.contains(z,F)){return g.dom.compareParentsDescendantNodeIe_(E,F)}return(A?F.sourceIndex:B.sourceIndex)-(e?E.sourceIndex:z.sourceIndex)
}}var C=g.dom.getOwnerDocument(F);var G,D;G=C.createRange();G.selectNode(F);G.collapse(w);D=C.createRange();D.selectNode(E);D.collapse(w);return G.compareBoundaryPoints(g.global.Range.START_TO_END,D)};g.dom.compareParentsDescendantNodeIe_=function(B,A){var z=B.parentNode;if(z==A){return -1}var e=A;while(e.parentNode!=z){e=e.parentNode}return g.dom.compareSiblingOrder_(e,B)};g.dom.compareSiblingOrder_=function(z,e){var A=e;while((A=A.previousSibling)){if(A==z){return -1}}return 1};g.dom.findCommonAncestor=function(F){var C,E=arguments.length;if(!E){return k}else{if(E==1){return arguments[0]}}var G=[];var e=Infinity;for(C=0;C<E;C++){var H=[];var A=arguments[C];while(A){H.unshift(A);A=A.parentNode}G.push(H);e=Math.min(e,H.length)}var z=k;for(C=0;C<e;C++){var D=G[0][C];for(var B=1;B<E;B++){if(D!=G[B][C]){return z}}z=D}return z};g.dom.getOwnerDocument=function(e){return(e.nodeType==g.dom.NodeType.DOCUMENT?e:e.ownerDocument||e.document)};g.dom.getOuterHtml=function(e){if("outerHTML" in e){return e.outerHTML
}else{var z=g.dom.getOwnerDocument(e);var A=z.createElement("div");A.appendChild(e.cloneNode(w));return A.innerHTML}};g.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1};g.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"};g.dom.getTextContent=function(A){var z;if(g.dom.BrowserFeature.CAN_USE_INNER_TEXT&&("innerText" in A)){z=g.string.canonicalizeNewlines(A.innerText)}else{var e=[];g.dom.getTextContent_(A,e,w);z=e.join("")}z=z.replace(/ \xAD /g," ").replace(/\xAD/g,"");z=z.replace(/\u200B/g,"");if(!g.userAgent.IE){z=z.replace(/ +/g," ")}if(z!=" "){z=z.replace(/^\s*/,"")}return z};g.dom.getRawTextContent=function(z){var e=[];g.dom.getTextContent_(z,e,d);return e.join("")};g.dom.getTextContent_=function(A,z,e){if(A.nodeName in g.dom.TAGS_TO_IGNORE_){}else{if(A.nodeType==g.dom.NodeType.TEXT){if(e){z.push(String(A.nodeValue).replace(/(\r\n|\r|\n)/g,""))}else{z.push(A.nodeValue)}}else{if(A.nodeName in g.dom.PREDEFINED_TAG_VALUES_){z.push(g.dom.PREDEFINED_TAG_VALUES_[A.nodeName])}else{var B=A.firstChild;
while(B){g.dom.getTextContent_(B,z,e);B=B.nextSibling}}}}};g.dom.isNodeList=function(e){if(e&&typeof e.length=="number"){if(g.isObject(e)){return typeof e.item=="function"||typeof e.item=="string"}else{if(g.isFunction(e)){return typeof e.item=="function"}}}return d};g.dom.DomHelper=function(e){this.document_=e||g.global.document||document};g.dom.DomHelper.prototype.getDomHelper=g.dom.getDomHelper;g.dom.DomHelper.prototype.setDocument=function(e){this.document_=e};g.dom.DomHelper.prototype.getDocument=function(){return this.document_};g.dom.DomHelper.prototype.getElement=function(e){if(g.isString(e)){return this.document_.getElementById(e)}else{return e}};g.dom.DomHelper.prototype.$=g.dom.DomHelper.prototype.getElement;g.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(A,e,z){return g.dom.getElementsByTagNameAndClass_(this.document_,A,e,z)};g.dom.DomHelper.prototype.getElementsByClass=function(z,e){var A=e||this.document_;return g.dom.getElementsByClass(z,A)};g.dom.DomHelper.prototype.getElementByClass=function(z,e){var A=e||this.document_;
return g.dom.getElementByClass(z,A)};g.dom.DomHelper.prototype.$$=g.dom.DomHelper.prototype.getElementsByTagNameAndClass;g.dom.DomHelper.prototype.setProperties=g.dom.setProperties;g.dom.DomHelper.prototype.getViewportSize=function(e){return g.dom.getViewportSize(e||this.getWindow())};g.dom.Appendable;g.dom.DomHelper.prototype.createDom=function(z,e,A){return g.dom.createDom_(this.document_,arguments)};g.dom.DomHelper.prototype.$dom=g.dom.DomHelper.prototype.createDom;g.dom.DomHelper.prototype.createElement=function(e){return this.document_.createElement(e)};g.dom.DomHelper.prototype.createTextNode=function(e){return this.document_.createTextNode(e)};g.dom.DomHelper.prototype.getWindow=function(){return g.dom.getWindow_(this.document_)};g.dom.DomHelper.prototype.appendChild=g.dom.appendChild;g.dom.DomHelper.prototype.append=g.dom.append;g.dom.DomHelper.prototype.removeChildren=g.dom.removeChildren;g.dom.DomHelper.prototype.insertSiblingBefore=g.dom.insertSiblingBefore;g.dom.DomHelper.prototype.insertSiblingAfter=g.dom.insertSiblingAfter;
g.dom.DomHelper.prototype.removeNode=g.dom.removeNode;g.dom.DomHelper.prototype.replaceNode=g.dom.replaceNode;g.dom.DomHelper.prototype.flattenElement=g.dom.flattenElement;g.dom.DomHelper.prototype.isNodeLike=g.dom.isNodeLike;g.dom.DomHelper.prototype.contains=g.dom.contains;g.dom.DomHelper.prototype.getOwnerDocument=g.dom.getOwnerDocument;g.dom.DomHelper.prototype.getTextContent=g.dom.getTextContent;g.provide("goog.iter");g.provide("goog.iter.Iterator");g.provide("goog.iter.StopIteration");g.iter.Iterable;if("StopIteration" in g.global){g.iter.StopIteration=g.global.StopIteration}else{g.iter.StopIteration=Error("StopIteration")}g.iter.Iterator=function(){};g.iter.Iterator.prototype.next=function(){throw g.iter.StopIteration};g.iter.Iterator.prototype.__iterator__=function(e){return this};g.iter.toIterator=function(z){if(z instanceof g.iter.Iterator){return z}if(typeof z.__iterator__=="function"){return z.__iterator__(d)}if(g.isArrayLike(z)){var e=0;var A=new g.iter.Iterator;A.next=function(){while(w){if(e>=z.length){throw g.iter.StopIteration
}if(!(e in z)){e++;continue}return z[e++]}};return A}throw Error("Not implemented")};g.iter.forEach=function(B,A,z){if(g.isArrayLike(B)){try{g.array.forEach((B),A,z)}catch(e){if(e!==g.iter.StopIteration){throw e}}}else{B=g.iter.toIterator(B);try{while(w){A.call(z,B.next(),s,B)}}catch(e){if(e!==g.iter.StopIteration){throw e}}}};g.iter.filter=function(A,z,e){A=g.iter.toIterator(A);var B=new g.iter.Iterator;B.next=function(){while(w){var C=A.next();if(z.call(e,C,s,A)){return C}}};return B};g.iter.join=function(z,e){return g.iter.toArray(z).join(e)};g.iter.map=function(A,z,e){A=g.iter.toIterator(A);var B=new g.iter.Iterator;B.next=function(){while(w){var C=A.next();return z.call(e,C,s,A)}};return B};g.iter.some=function(B,A,z){B=g.iter.toIterator(B);try{while(w){if(A.call(z,B.next(),s,B)){return w}}}catch(e){if(e!==g.iter.StopIteration){throw e}}return d};g.iter.every=function(B,A,z){B=g.iter.toIterator(B);try{while(w){if(!A.call(z,B.next(),s,B)){return d}}}catch(e){if(e!==g.iter.StopIteration){throw e
}}return w};g.iter.toArray=function(e){if(g.isArrayLike(e)){return g.array.toArray((e))}e=g.iter.toIterator(e);var z=[];g.iter.forEach(e,function(A){z.push(A)});return z};g.iter.equals=function(z,e){z=g.iter.toIterator(z);e=g.iter.toIterator(e);var B,A;try{while(w){B=A=d;var F=z.next();B=w;var E=e.next();A=w;if(F!=E){return d}}}catch(C){if(C!==g.iter.StopIteration){throw C}else{if(B&&!A){return d}if(!A){try{E=e.next();return d}catch(D){if(D!==g.iter.StopIteration){throw D}return w}}}}return d};g.provide("goog.dom.TagIterator");g.provide("goog.dom.TagWalkType");g.dom.TagWalkType={START_TAG:1,OTHER:0,END_TAG:-1};g.dom.TagIterator=function(C,e,A,B,z){this.reversed=!!e;if(C){this.setPosition(C,B)}this.depth=z!=s?z:this.tagType||0;if(this.reversed){this.depth*=-1}this.constrained=!A};g.inherits(g.dom.TagIterator,g.iter.Iterator);g.dom.TagIterator.prototype.node=k;g.dom.TagIterator.prototype.tagType=g.dom.TagWalkType.OTHER;g.dom.TagIterator.prototype.depth;g.dom.TagIterator.prototype.reversed;
g.dom.TagIterator.prototype.constrained;g.dom.TagIterator.prototype.started_=d;g.dom.TagIterator.prototype.setPosition=function(z,A,e){this.node=z;if(z){if(g.isNumber(A)){this.tagType=A}else{this.tagType=this.node.nodeType!=g.dom.NodeType.ELEMENT?g.dom.TagWalkType.OTHER:this.reversed?g.dom.TagWalkType.END_TAG:g.dom.TagWalkType.START_TAG}}if(g.isNumber(e)){this.depth=e}};g.dom.TagIterator.prototype.copyFrom=function(e){this.node=e.node;this.tagType=e.tagType;this.depth=e.depth;this.reversed=e.reversed;this.constrained=e.constrained};g.dom.TagIterator.prototype.clone=function(){return new g.dom.TagIterator(this.node,this.reversed,!this.constrained,this.tagType,this.depth)};g.dom.TagIterator.prototype.skipTag=function(){var e=this.reversed?g.dom.TagWalkType.END_TAG:g.dom.TagWalkType.START_TAG;if(this.tagType==e){this.tagType=(e*-1);this.depth+=this.tagType*(this.reversed?-1:1)}};g.dom.TagIterator.prototype.restartTag=function(){var e=this.reversed?g.dom.TagWalkType.START_TAG:g.dom.TagWalkType.END_TAG;
if(this.tagType==e){this.tagType=(e*-1);this.depth+=this.tagType*(this.reversed?-1:1)}};g.dom.TagIterator.prototype.next=function(){var A;if(this.started_){if(!this.node||this.constrained&&this.depth==0){throw g.iter.StopIteration}A=this.node;var e=this.reversed?g.dom.TagWalkType.END_TAG:g.dom.TagWalkType.START_TAG;if(this.tagType==e){var B=this.reversed?A.lastChild:A.firstChild;if(B){this.setPosition(B)}else{this.setPosition(A,(e*-1))}}else{var z=this.reversed?A.previousSibling:A.nextSibling;if(z&&A.parentNode==z.parentNode){this.setPosition(z)}else{this.setPosition(A.parentNode,(e*-1))}}this.depth+=this.tagType*(this.reversed?-1:1)}else{this.started_=w}A=this.node;if(!this.node){throw g.iter.StopIteration}return A};g.dom.TagIterator.prototype.isStarted=function(){return this.started_};g.dom.TagIterator.prototype.isStartTag=function(){return this.tagType==g.dom.TagWalkType.START_TAG};g.dom.TagIterator.prototype.isEndTag=function(){return this.tagType==g.dom.TagWalkType.END_TAG};g.dom.TagIterator.prototype.equals=function(e){return e.node==this.node&&(!this.node||e.tagType==this.tagType)
};g.dom.TagIterator.prototype.splice=function(B){var A=this.node;this.restartTag();this.reversed=!this.reversed;g.dom.TagIterator.prototype.next.call(this);this.reversed=!this.reversed;var e=g.isArrayLike(arguments[0])?arguments[0]:arguments;for(var z=e.length-1;z>=0;z--){g.dom.insertSiblingAfter(e[z],A)}g.dom.removeNode(A)};g.provide("goog.structs");g.structs.getCount=function(e){if(typeof e.getCount=="function"){return e.getCount()}if(g.isArrayLike(e)||g.isString(e)){return e.length}return g.object.getCount(e)};g.structs.getValues=function(z){if(typeof z.getValues=="function"){return z.getValues()}if(g.isString(z)){return z.split("")}if(g.isArrayLike(z)){var B=[];var e=z.length;for(var A=0;A<e;A++){B.push(z[A])}return B}return g.object.getValues(z)};g.structs.getKeys=function(z){if(typeof z.getKeys=="function"){return z.getKeys()}if(typeof z.getValues=="function"){return s}if(g.isArrayLike(z)||g.isString(z)){var B=[];var e=z.length;for(var A=0;A<e;A++){B.push(A)}return B}return g.object.getKeys(z)
};g.structs.contains=function(e,z){if(typeof e.contains=="function"){return e.contains(z)}if(typeof e.containsValue=="function"){return e.containsValue(z)}if(g.isArrayLike(e)||g.isString(e)){return g.array.contains((e),z)}return g.object.containsValue(e,z)};g.structs.isEmpty=function(e){if(typeof e.isEmpty=="function"){return e.isEmpty()}if(g.isArrayLike(e)||g.isString(e)){return g.array.isEmpty((e))}return g.object.isEmpty(e)};g.structs.clear=function(e){if(typeof e.clear=="function"){e.clear()}else{if(g.isArrayLike(e)){g.array.clear((e))}else{g.object.clear(e)}}};g.structs.forEach=function(A,E,D){if(typeof A.forEach=="function"){A.forEach(E,D)}else{if(g.isArrayLike(A)||g.isString(A)){g.array.forEach((A),E,D)}else{var C=g.structs.getKeys(A);var z=g.structs.getValues(A);var e=z.length;for(var B=0;B<e;B++){E.call(D,z[B],C&&C[B],A)}}}};g.structs.filter=function(A,E,D){if(typeof A.filter=="function"){return A.filter(E,D)}if(g.isArrayLike(A)||g.isString(A)){return g.array.filter((A),E,D)}var F;
var C=g.structs.getKeys(A);var z=g.structs.getValues(A);var e=z.length;if(C){F={};for(var B=0;B<e;B++){if(E.call(D,z[B],C[B],A)){F[C[B]]=z[B]}}}else{F=[];for(var B=0;B<e;B++){if(E.call(D,z[B],s,A)){F.push(z[B])}}}return F};g.structs.map=function(A,E,D){if(typeof A.map=="function"){return A.map(E,D)}if(g.isArrayLike(A)||g.isString(A)){return g.array.map((A),E,D)}var F;var C=g.structs.getKeys(A);var z=g.structs.getValues(A);var e=z.length;if(C){F={};for(var B=0;B<e;B++){F[C[B]]=E.call(D,z[B],C[B],A)}}else{F=[];for(var B=0;B<e;B++){F[B]=E.call(D,z[B],s,A)}}return F};g.structs.some=function(A,E,D){if(typeof A.some=="function"){return A.some(E,D)}if(g.isArrayLike(A)||g.isString(A)){return g.array.some((A),E,D)}var C=g.structs.getKeys(A);var z=g.structs.getValues(A);var e=z.length;for(var B=0;B<e;B++){if(E.call(D,z[B],C&&C[B],A)){return w}}return d};g.structs.every=function(A,E,D){if(typeof A.every=="function"){return A.every(E,D)}if(g.isArrayLike(A)||g.isString(A)){return g.array.every((A),E,D)
}var C=g.structs.getKeys(A);var z=g.structs.getValues(A);var e=z.length;for(var B=0;B<e;B++){if(!E.call(D,z[B],C&&C[B],A)){return d}}return w};g.provide("goog.structs.Map");g.structs.Map=function(z,A){this.map_={};this.keys_=[];var B=arguments.length;if(B>1){if(B%2){throw Error("Uneven number of arguments")}for(var e=0;e<B;e+=2){this.set(arguments[e],arguments[e+1])}}else{if(z){this.addAll((z))}}};g.structs.Map.prototype.count_=0;g.structs.Map.prototype.version_=0;g.structs.Map.prototype.getCount=function(){return this.count_};g.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();var A=[];for(var z=0;z<this.keys_.length;z++){var e=this.keys_[z];A.push(this.map_[e])}return A};g.structs.Map.prototype.getKeys=function(){this.cleanupKeysArray_();return(this.keys_.concat())};g.structs.Map.prototype.containsKey=function(e){return g.structs.Map.hasKey_(this.map_,e)};g.structs.Map.prototype.containsValue=function(A){for(var z=0;z<this.keys_.length;z++){var e=this.keys_[z];if(g.structs.Map.hasKey_(this.map_,e)&&this.map_[e]==A){return w
}}return d};g.structs.Map.prototype.equals=function(A,e){if(this===A){return w}if(this.count_!=A.getCount()){return d}var z=e||g.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var C,B=0;C=this.keys_[B];B++){if(!z(this.get(C),A.get(C))){return d}}return w};g.structs.Map.defaultEquals=function(z,e){return z===e};g.structs.Map.prototype.isEmpty=function(){return this.count_==0};g.structs.Map.prototype.clear=function(){this.map_={};this.keys_.length=0;this.count_=0;this.version_=0};g.structs.Map.prototype.remove=function(e){if(g.structs.Map.hasKey_(this.map_,e)){delete this.map_[e];this.count_--;this.version_++;if(this.keys_.length>2*this.count_){this.cleanupKeysArray_()}return w}return d};g.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){var A=0;var z=0;while(A<this.keys_.length){var B=this.keys_[A];if(g.structs.Map.hasKey_(this.map_,B)){this.keys_[z++]=B}A++}this.keys_.length=z}if(this.count_!=this.keys_.length){var e={};var A=0;var z=0;while(A<this.keys_.length){var B=this.keys_[A];
if(!(g.structs.Map.hasKey_(e,B))){this.keys_[z++]=B;e[B]=1}A++}this.keys_.length=z}};g.structs.Map.prototype.get=function(e,z){if(g.structs.Map.hasKey_(this.map_,e)){return this.map_[e]}return z};g.structs.Map.prototype.set=function(e,z){if(!(g.structs.Map.hasKey_(this.map_,e))){this.count_++;this.keys_.push(e);this.version_++}this.map_[e]=z};g.structs.Map.prototype.addAll=function(B){var A,e;if(B instanceof g.structs.Map){A=B.getKeys();e=B.getValues()}else{A=g.object.getKeys(B);e=g.object.getValues(B)}for(var z=0;z<A.length;z++){this.set(A[z],e[z])}};g.structs.Map.prototype.clone=function(){return new g.structs.Map(this)};g.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();var A={};for(var z=0;z<this.keys_.length;z++){var e=this.keys_[z];A[e]=this.map_[e]}return A};g.structs.Map.prototype.__iterator__=function(E){this.cleanupKeysArray_();var z=0;var A=this.keys_;var B=this.map_;var e=this.version_;var D=this;var C=new g.iter.Iterator;C.next=function(){while(w){if(e!=D.version_){throw Error("The map has changed since the iterator was created")
}if(z>=A.length){throw g.iter.StopIteration}var F=A[z++];return E?F:B[F]}};return C};g.structs.Map.hasKey_=function(z,e){return Object.prototype.hasOwnProperty.call(z,e)};g.provide("goog.structs.Set");g.structs.Set=function(e){this.map_=new g.structs.Map;if(e){this.addAll(e)}};g.structs.Set.getKey_=function(z){var e=typeof z;if(e=="object"&&z||e=="function"){return"o"+g.getUid((z))}else{return e.substr(0,1)+z}};g.structs.Set.prototype.getCount=function(){return this.map_.getCount()};g.structs.Set.prototype.add=function(e){this.map_.set(g.structs.Set.getKey_(e),e)};g.structs.Set.prototype.addAll=function(A){var z=g.structs.getValues(A);var e=z.length;for(var B=0;B<e;B++){this.add(z[B])}};g.structs.Set.prototype.remove=function(e){return this.map_.remove(g.structs.Set.getKey_(e))};g.structs.Set.prototype.clear=function(){this.map_.clear()};g.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()};g.structs.Set.prototype.contains=function(e){return this.map_.containsKey(g.structs.Set.getKey_(e))
};g.structs.Set.prototype.containsAll=function(e){return g.structs.every(e,this.contains,this)};g.structs.Set.prototype.getValues=function(){return this.map_.getValues()};g.structs.Set.prototype.clone=function(){return new g.structs.Set(this)};g.structs.Set.prototype.equals=function(e){return this.getCount()==g.structs.getCount(e)&&this.isSubsetOf(e)};g.structs.Set.prototype.isSubsetOf=function(e){var z=g.structs.getCount(e);if(this.getCount()>z){return d}if(!(e instanceof g.structs.Set)&&z>5){e=new g.structs.Set(e)}return g.structs.every(this,function(A){return g.structs.contains(e,A)})};g.structs.Set.prototype.__iterator__=function(e){return this.map_.__iterator__(d)};g.provide("goog.disposable.IDisposable");g.disposable.IDisposable=function(){};g.disposable.IDisposable.prototype.dispose;g.disposable.IDisposable.prototype.isDisposed;g.provide("goog.Disposable");g.provide("goog.dispose");g.Disposable=function(){if(g.Disposable.ENABLE_MONITORING){g.Disposable.instances_[g.getUid(this)]=this
}};g.Disposable.ENABLE_MONITORING=d;g.Disposable.instances_={};g.Disposable.prototype.disposed_=d;g.Disposable.prototype.isDisposed=function(){return this.disposed_};g.Disposable.prototype.getDisposed=g.Disposable.prototype.isDisposed;g.Disposable.prototype.dispose=function(){if(!this.disposed_){this.disposed_=w;this.disposeInternal();if(g.Disposable.ENABLE_MONITORING){var e=g.getUid(this);if(!g.Disposable.instances_.hasOwnProperty(e)){throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call")}delete g.Disposable.instances_[e]}}};g.Disposable.prototype.disposeInternal=function(){};g.dispose=function(e){if(e&&typeof e.dispose=="function"){e.dispose()}};g.provide("goog.dom.SavedRange");g.dom.SavedRange=function(){g.Disposable.call(this)};g.inherits(g.dom.SavedRange,g.Disposable);g.dom.SavedRange.prototype.restore=function(z){var e=this.restoreInternal();if(!z){this.dispose()}return e};g.dom.SavedRange.prototype.restoreInternal=g.abstractMethod;
g.provide("goog.dom.SavedCaretRange");g.dom.SavedCaretRange=function(e){g.dom.SavedRange.call(this);this.startCaretId_=g.string.createUniqueString();this.endCaretId_=g.string.createUniqueString();this.dom_=g.dom.getDomHelper(e.getDocument());e.surroundWithNodes(this.createCaret_(w),this.createCaret_(d));this.removeIncidentalTextNode_()};g.inherits(g.dom.SavedCaretRange,g.dom.SavedRange);g.dom.SavedCaretRange.prototype.getCaret=function(e){return this.dom_.getElement(e?this.startCaretId_:this.endCaretId_)};g.dom.SavedCaretRange.prototype.removeIncidentalTextNode_=function(){var z=this.getCaret(w);this.removeIfEmptyText_(z.previousSibling);this.removeIfEmptyText_(z.nextSibling);var e=this.getCaret(d);this.removeIfEmptyText_(e.previousSibling);this.removeIfEmptyText_(e.nextSibling)};g.dom.SavedCaretRange.prototype.removeIfEmptyText_=function(e){if(e&&e.nodeType===g.dom.NodeType.TEXT&&!e.nodeValue){g.dom.removeNode(e)}};g.dom.SavedCaretRange.prototype.removeCarets=function(e){g.dom.removeNode(this.getCaret(w));
g.dom.removeNode(this.getCaret(d));return e};g.dom.SavedCaretRange.prototype.restoreInternal=function(){var B=k;var E=this.getCaret(w);var A=this.getCaret(d);if(E&&A){var D=E.parentNode;var z=g.array.indexOf(D.childNodes,E);var e=A.parentNode;var C=g.array.indexOf(e.childNodes,A);B=g.dom.Range.createFromNodes(D,z+1,e,C);B.select()}return B};g.dom.SavedCaretRange.prototype.disposeInternal=function(){this.removeCarets();this.dom_=k};g.dom.SavedCaretRange.prototype.createCaret_=function(e){return this.dom_.createDom(g.dom.TagName.SPAN,{id:e?this.startCaretId_:this.endCaretId_})};g.dom.SavedCaretRange.CARET_REGEX=/<span\s+id="?goog_\d+"?><\/span>/ig;g.provide("goog.dom.AbstractRange");g.provide("goog.dom.RangeIterator");g.provide("goog.dom.RangeType");g.dom.RangeType={TEXT:"text",CONTROL:"control",MULTI:"mutli"};g.dom.AbstractRange=function(){};g.dom.AbstractRange.getBrowserSelectionForWindow=function(D){if(D.getSelection){return D.getSelection()}else{var C=D.document;var A=C.selection;if(A){try{var z=A.createRange();
if(z.parentElement){if(z.parentElement().document!=C){return k}}else{if(!z.length||z.item(0).document!=C){return k}}}catch(B){return k}return A}return k}};g.dom.AbstractRange.isNativeControlRange=function(e){return !!e&&!!e.addElement};g.dom.AbstractRange.prototype.clone=g.abstractMethod;g.dom.AbstractRange.prototype.getType=g.abstractMethod;g.dom.AbstractRange.prototype.getBrowserRangeObject=g.abstractMethod;g.dom.AbstractRange.prototype.setBrowserRangeObject=function(e){return d};g.dom.AbstractRange.prototype.getTextRangeCount=g.abstractMethod;g.dom.AbstractRange.prototype.getTextRange=g.abstractMethod;g.dom.AbstractRange.prototype.getTextRanges=function(){var z=[];for(var A=0,e=this.getTextRangeCount();A<e;A++){z.push(this.getTextRange(A))}return z};g.dom.AbstractRange.prototype.getContainer=g.abstractMethod;g.dom.AbstractRange.prototype.getStartNode=g.abstractMethod;g.dom.AbstractRange.prototype.getStartOffset=g.abstractMethod;g.dom.AbstractRange.prototype.getEndNode=g.abstractMethod;
g.dom.AbstractRange.prototype.getEndOffset=g.abstractMethod;g.dom.AbstractRange.prototype.getAnchorNode=function(){return this.isReversed()?this.getEndNode():this.getStartNode()};g.dom.AbstractRange.prototype.getAnchorOffset=function(){return this.isReversed()?this.getEndOffset():this.getStartOffset()};g.dom.AbstractRange.prototype.getFocusNode=function(){return this.isReversed()?this.getStartNode():this.getEndNode()};g.dom.AbstractRange.prototype.getFocusOffset=function(){return this.isReversed()?this.getStartOffset():this.getEndOffset()};g.dom.AbstractRange.prototype.isReversed=function(){return d};g.dom.AbstractRange.prototype.getDocument=function(){return g.dom.getOwnerDocument(g.userAgent.IE?this.getContainer():this.getStartNode())};g.dom.AbstractRange.prototype.getWindow=function(){return g.dom.getWindow(this.getDocument())};g.dom.AbstractRange.prototype.containsRange=g.abstractMethod;g.dom.AbstractRange.prototype.containsNode=function(e,z){return this.containsRange(g.dom.Range.createFromNodeContents(e),z)
};g.dom.AbstractRange.prototype.isRangeInDocument=g.abstractMethod;g.dom.AbstractRange.prototype.isCollapsed=g.abstractMethod;g.dom.AbstractRange.prototype.getText=g.abstractMethod;g.dom.AbstractRange.prototype.getHtmlFragment=g.abstractMethod;g.dom.AbstractRange.prototype.getValidHtml=g.abstractMethod;g.dom.AbstractRange.prototype.getPastableHtml=g.abstractMethod;g.dom.AbstractRange.prototype.__iterator__=g.abstractMethod;g.dom.AbstractRange.prototype.select=g.abstractMethod;g.dom.AbstractRange.prototype.removeContents=g.abstractMethod;g.dom.AbstractRange.prototype.insertNode=g.abstractMethod;g.dom.AbstractRange.prototype.surroundWithNodes=g.abstractMethod;g.dom.AbstractRange.prototype.saveUsingDom=g.abstractMethod;g.dom.AbstractRange.prototype.saveUsingCarets=function(){return(this.getStartNode()&&this.getEndNode())?new g.dom.SavedCaretRange(this):k};g.dom.AbstractRange.prototype.collapse=g.abstractMethod;g.dom.RangeIterator=function(e,z){g.dom.TagIterator.call(this,e,z,w)};g.inherits(g.dom.RangeIterator,g.dom.TagIterator);
g.dom.RangeIterator.prototype.getStartTextOffset=g.abstractMethod;g.dom.RangeIterator.prototype.getEndTextOffset=g.abstractMethod;g.dom.RangeIterator.prototype.getStartNode=g.abstractMethod;g.dom.RangeIterator.prototype.getEndNode=g.abstractMethod;g.dom.RangeIterator.prototype.isLast=g.abstractMethod;g.provide("goog.dom.AbstractMultiRange");g.dom.AbstractMultiRange=function(){};g.inherits(g.dom.AbstractMultiRange,g.dom.AbstractRange);g.dom.AbstractMultiRange.prototype.containsRange=function(C,B){var e=this.getTextRanges();var A=C.getTextRanges();var z=B?g.array.some:g.array.every;return z(A,function(D){return g.array.some(e,function(E){return E.containsRange(D,B)})})};g.dom.AbstractMultiRange.prototype.insertNode=function(e,z){if(z){g.dom.insertSiblingBefore(e,this.getStartNode())}else{g.dom.insertSiblingAfter(e,this.getEndNode())}return e};g.dom.AbstractMultiRange.prototype.surroundWithNodes=function(z,e){this.insertNode(z,w);this.insertNode(e,d)};g.provide("goog.dom.TextRangeIterator");
g.dom.TextRangeIterator=function(A,E,B,F,D){var G;if(A){this.startNode_=A;this.startOffset_=E;this.endNode_=B;this.endOffset_=F;if(A.nodeType==g.dom.NodeType.ELEMENT&&A.tagName!=g.dom.TagName.BR){var z=A.childNodes;var H=z[E];if(H){this.startNode_=H;this.startOffset_=0}else{if(z.length){this.startNode_=(g.array.peek(z))}G=w}}if(B.nodeType==g.dom.NodeType.ELEMENT){this.endNode_=B.childNodes[F];if(this.endNode_){this.endOffset_=0}else{this.endNode_=B}}}g.dom.RangeIterator.call(this,D?this.endNode_:this.startNode_,D);if(G){try{this.next()}catch(C){if(C!=g.iter.StopIteration){throw C}}}};g.inherits(g.dom.TextRangeIterator,g.dom.RangeIterator);g.dom.TextRangeIterator.prototype.startNode_=k;g.dom.TextRangeIterator.prototype.endNode_=k;g.dom.TextRangeIterator.prototype.startOffset_=0;g.dom.TextRangeIterator.prototype.endOffset_=0;g.dom.TextRangeIterator.prototype.getStartTextOffset=function(){return this.node.nodeType!=g.dom.NodeType.TEXT?-1:this.node==this.startNode_?this.startOffset_:0};g.dom.TextRangeIterator.prototype.getEndTextOffset=function(){return this.node.nodeType!=g.dom.NodeType.TEXT?-1:this.node==this.endNode_?this.endOffset_:this.node.nodeValue.length
};g.dom.TextRangeIterator.prototype.getStartNode=function(){return this.startNode_};g.dom.TextRangeIterator.prototype.setStartNode=function(e){if(!this.isStarted()){this.setPosition(e)}this.startNode_=e;this.startOffset_=0};g.dom.TextRangeIterator.prototype.getEndNode=function(){return this.endNode_};g.dom.TextRangeIterator.prototype.setEndNode=function(e){this.endNode_=e;this.endOffset_=0};g.dom.TextRangeIterator.prototype.isLast=function(){return this.isStarted()&&this.node==this.endNode_&&(!this.endOffset_||!this.isStartTag())};g.dom.TextRangeIterator.prototype.next=function(){if(this.isLast()){throw g.iter.StopIteration}return g.dom.TextRangeIterator.superClass_.next.call(this)};g.dom.TextRangeIterator.prototype.skipTag=function(){g.dom.TextRangeIterator.superClass_.skipTag.apply(this);if(g.dom.contains(this.node,this.endNode_)){throw g.iter.StopIteration}};g.dom.TextRangeIterator.prototype.copyFrom=function(e){this.startNode_=e.startNode_;this.endNode_=e.endNode_;this.startOffset_=e.startOffset_;
this.endOffset_=e.endOffset_;this.isReversed_=e.isReversed_;g.dom.TextRangeIterator.superClass_.copyFrom.call(this,e)};g.dom.TextRangeIterator.prototype.clone=function(){var e=new g.dom.TextRangeIterator(this.startNode_,this.startOffset_,this.endNode_,this.endOffset_,this.isReversed_);e.copyFrom(this);return e};g.provide("goog.userAgent.jscript");g.userAgent.jscript.ASSUME_NO_JSCRIPT=d;g.userAgent.jscript.init_=function(){var e="ScriptEngine" in g.global;g.userAgent.jscript.DETECTED_HAS_JSCRIPT_=e&&g.global.ScriptEngine()=="JScript";g.userAgent.jscript.DETECTED_VERSION_=g.userAgent.jscript.DETECTED_HAS_JSCRIPT_?(g.global.ScriptEngineMajorVersion()+"."+g.global.ScriptEngineMinorVersion()+"."+g.global.ScriptEngineBuildVersion()):"0"};if(!g.userAgent.jscript.ASSUME_NO_JSCRIPT){g.userAgent.jscript.init_()}g.userAgent.jscript.HAS_JSCRIPT=g.userAgent.jscript.ASSUME_NO_JSCRIPT?d:g.userAgent.jscript.DETECTED_HAS_JSCRIPT_;g.userAgent.jscript.VERSION=g.userAgent.jscript.ASSUME_NO_JSCRIPT?"0":g.userAgent.jscript.DETECTED_VERSION_;
g.userAgent.jscript.isVersion=function(e){return g.string.compareVersions(g.userAgent.jscript.VERSION,e)>=0};g.provide("goog.string.StringBuffer");g.string.StringBuffer=function(e,z){this.buffer_=g.userAgent.jscript.HAS_JSCRIPT?[]:"";if(e!=k){this.append.apply(this,arguments)}};g.string.StringBuffer.prototype.set=function(e){this.clear();this.append(e)};if(g.userAgent.jscript.HAS_JSCRIPT){g.string.StringBuffer.prototype.bufferLength_=0;g.string.StringBuffer.prototype.append=function(z,e,A){if(e==k){this.buffer_[this.bufferLength_++]=z}else{this.buffer_.push.apply((this.buffer_),arguments);this.bufferLength_=this.buffer_.length}return this}}else{g.string.StringBuffer.prototype.append=function(z,e,B){this.buffer_+=z;if(e!=k){for(var A=1;A<arguments.length;A++){this.buffer_+=arguments[A]}}return this}}g.string.StringBuffer.prototype.clear=function(){if(g.userAgent.jscript.HAS_JSCRIPT){this.buffer_.length=0;this.bufferLength_=0}else{this.buffer_=""}};g.string.StringBuffer.prototype.getLength=function(){return this.toString().length
};g.string.StringBuffer.prototype.toString=function(){if(g.userAgent.jscript.HAS_JSCRIPT){var e=this.buffer_.join("");this.clear();if(e){this.append(e)}return e}else{return(this.buffer_)}};g.provide("goog.dom.RangeEndpoint");g.dom.RangeEndpoint={START:1,END:0};g.provide("goog.dom.browserrange.AbstractRange");g.dom.browserrange.AbstractRange=function(){};g.dom.browserrange.AbstractRange.prototype.clone=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.getBrowserRange=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.getContainer=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.getStartNode=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.getStartOffset=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.getEndNode=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.getEndOffset=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.compareBrowserRangeEndpoints=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.containsRange=function(F,D){var B=D&&!F.isCollapsed();
var A=F.getBrowserRange();var E=g.dom.RangeEndpoint.START,z=g.dom.RangeEndpoint.END;try{if(B){return this.compareBrowserRangeEndpoints(A,z,E)>=0&&this.compareBrowserRangeEndpoints(A,E,z)<=0}else{return this.compareBrowserRangeEndpoints(A,z,z)>=0&&this.compareBrowserRangeEndpoints(A,E,E)<=0}}catch(C){if(!g.userAgent.IE){throw C}return d}};g.dom.browserrange.AbstractRange.prototype.containsNode=function(e,z){return this.containsRange(g.dom.browserrange.createRangeFromNodeContents(e),z)};g.dom.browserrange.AbstractRange.prototype.isCollapsed=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.getText=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.getHtmlFragment=function(){var e=new g.string.StringBuffer();g.iter.forEach(this,function(C,E,B){if(C.nodeType==g.dom.NodeType.TEXT){e.append(g.string.htmlEscape(C.nodeValue.substring(B.getStartTextOffset(),B.getEndTextOffset())))}else{if(C.nodeType==g.dom.NodeType.ELEMENT){if(B.isEndTag()){if(g.dom.canHaveChildren(C)){e.append("</"+C.tagName+">")
}}else{var D=C.cloneNode(d);var A=g.dom.getOuterHtml(D);if(g.userAgent.IE&&C.tagName==g.dom.TagName.LI){e.append(A)}else{var z=A.lastIndexOf("<");e.append(z?A.substr(0,z):A)}}}}},this);return e.toString()};g.dom.browserrange.AbstractRange.prototype.getValidHtml=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.__iterator__=function(e){return new g.dom.TextRangeIterator(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset())};g.dom.browserrange.AbstractRange.prototype.select=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.removeContents=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.surroundContents=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.insertNode=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.surroundWithNodes=g.abstractMethod;g.dom.browserrange.AbstractRange.prototype.collapse=g.abstractMethod;g.provide("goog.dom.browserrange.W3cRange");g.dom.browserrange.W3cRange=function(e){this.range_=e};g.inherits(g.dom.browserrange.W3cRange,g.dom.browserrange.AbstractRange);
g.dom.browserrange.W3cRange.getBrowserRangeForNode=function(B){var D=g.dom.getOwnerDocument(B).createRange();if(B.nodeType==g.dom.NodeType.TEXT){D.setStart(B,0);D.setEnd(B,B.length)}else{if(!g.dom.browserrange.canContainRangeEndpoint(B)){var A=B.parentNode;var z=g.array.indexOf(A.childNodes,B);D.setStart(A,z);D.setEnd(A,z+1)}else{var C,e=B;while((C=e.firstChild)&&g.dom.browserrange.canContainRangeEndpoint(C)){e=C}D.setStart(e,0);e=B;while((C=e.lastChild)&&g.dom.browserrange.canContainRangeEndpoint(C)){e=C}D.setEnd(e,e.nodeType==g.dom.NodeType.ELEMENT?e.childNodes.length:e.length)}}return D};g.dom.browserrange.W3cRange.getBrowserRangeForNodes=function(B,z,e,A){var C=g.dom.getOwnerDocument(B).createRange();C.setStart(B,z);C.setEnd(e,A);return C};g.dom.browserrange.W3cRange.createFromNodeContents=function(e){return new g.dom.browserrange.W3cRange(g.dom.browserrange.W3cRange.getBrowserRangeForNode(e))};g.dom.browserrange.W3cRange.createFromNodes=function(B,z,e,A){return new g.dom.browserrange.W3cRange(g.dom.browserrange.W3cRange.getBrowserRangeForNodes(B,z,e,A))
};g.dom.browserrange.W3cRange.prototype.clone=function(){return new this.constructor(this.range_.cloneRange())};g.dom.browserrange.W3cRange.prototype.getBrowserRange=function(){return this.range_};g.dom.browserrange.W3cRange.prototype.getContainer=function(){return this.range_.commonAncestorContainer};g.dom.browserrange.W3cRange.prototype.getStartNode=function(){return this.range_.startContainer};g.dom.browserrange.W3cRange.prototype.getStartOffset=function(){return this.range_.startOffset};g.dom.browserrange.W3cRange.prototype.getEndNode=function(){return this.range_.endContainer};g.dom.browserrange.W3cRange.prototype.getEndOffset=function(){return this.range_.endOffset};g.dom.browserrange.W3cRange.prototype.compareBrowserRangeEndpoints=function(z,A,e){return this.range_.compareBoundaryPoints(e==g.dom.RangeEndpoint.START?(A==g.dom.RangeEndpoint.START?g.global.Range.START_TO_START:g.global.Range.START_TO_END):(A==g.dom.RangeEndpoint.START?g.global.Range.END_TO_START:g.global.Range.END_TO_END),(z))
};g.dom.browserrange.W3cRange.prototype.isCollapsed=function(){return this.range_.collapsed};g.dom.browserrange.W3cRange.prototype.getText=function(){return this.range_.toString()};g.dom.browserrange.W3cRange.prototype.getValidHtml=function(){var B=g.dom.getDomHelper(this.range_.startContainer).createDom("div");B.appendChild(this.range_.cloneContents());var e=B.innerHTML;if(g.string.startsWith(e,"<")||!this.isCollapsed()&&!g.string.contains(e,"<")){return e}var z=this.getContainer();z=z.nodeType==g.dom.NodeType.ELEMENT?z:z.parentNode;var A=g.dom.getOuterHtml((z.cloneNode(d)));return A.replace(">",">"+e)};g.dom.browserrange.W3cRange.prototype.select=function(e){var z=g.dom.getWindow(g.dom.getOwnerDocument(this.getStartNode()));this.selectInternal(z.getSelection(),e)};g.dom.browserrange.W3cRange.prototype.selectInternal=function(z,e){z.removeAllRanges();z.addRange(this.range_)};g.dom.browserrange.W3cRange.prototype.removeContents=function(){var e=this.range_;e.extractContents();if(e.startContainer.hasChildNodes()){var A=e.startContainer.childNodes[e.startOffset];
if(A){var z=A.previousSibling;if(g.dom.getRawTextContent(A)==""){g.dom.removeNode(A)}if(z&&g.dom.getRawTextContent(z)==""){g.dom.removeNode(z)}}}};g.dom.browserrange.W3cRange.prototype.surroundContents=function(e){this.range_.surroundContents(e);return e};g.dom.browserrange.W3cRange.prototype.insertNode=function(z,A){var e=this.range_.cloneRange();e.collapse(A);e.insertNode(z);e.detach();return z};g.dom.browserrange.W3cRange.prototype.surroundWithNodes=function(z,B){var C=g.dom.getWindow(g.dom.getOwnerDocument(this.getStartNode()));var e=g.dom.Range.createFromWindow(C);if(e){var D=e.getStartNode();var H=e.getEndNode();var I=e.getStartOffset();var A=e.getEndOffset()}var F=this.range_.cloneRange();var E=this.range_.cloneRange();F.collapse(d);E.collapse(w);F.insertNode(B);E.insertNode(z);F.detach();E.detach();if(e){var G=function(J){return J==z||J==B};if(D.nodeType==g.dom.NodeType.TEXT){while(I>D.length){I-=D.length;do{D=D.nextSibling}while(G(D))}}if(H.nodeType==g.dom.NodeType.TEXT){while(A>H.length){A-=H.length;
do{H=H.nextSibling}while(G(H))}}g.dom.Range.createFromNodes(D,(I),H,(A)).select()}};g.dom.browserrange.W3cRange.prototype.collapse=function(e){this.range_.collapse(e)};g.provide("goog.dom.browserrange.WebKitRange");g.dom.browserrange.WebKitRange=function(e){g.dom.browserrange.W3cRange.call(this,e)};g.inherits(g.dom.browserrange.WebKitRange,g.dom.browserrange.W3cRange);g.dom.browserrange.WebKitRange.createFromNodeContents=function(e){return new g.dom.browserrange.WebKitRange(g.dom.browserrange.W3cRange.getBrowserRangeForNode(e))};g.dom.browserrange.WebKitRange.createFromNodes=function(B,z,e,A){return new g.dom.browserrange.WebKitRange(g.dom.browserrange.W3cRange.getBrowserRangeForNodes(B,z,e,A))};g.dom.browserrange.WebKitRange.prototype.compareBrowserRangeEndpoints=function(z,A,e){if(g.userAgent.isVersion("528")){return(g.dom.browserrange.WebKitRange.superClass_.compareBrowserRangeEndpoints.call(this,z,A,e))}return this.range_.compareBoundaryPoints(e==g.dom.RangeEndpoint.START?(A==g.dom.RangeEndpoint.START?g.global.Range.START_TO_START:g.global.Range.END_TO_START):(A==g.dom.RangeEndpoint.START?g.global.Range.START_TO_END:g.global.Range.END_TO_END),(z))
};g.dom.browserrange.WebKitRange.prototype.selectInternal=function(e,z){e.removeAllRanges();if(z){e.setBaseAndExtent(this.getEndNode(),this.getEndOffset(),this.getStartNode(),this.getStartOffset())}else{e.setBaseAndExtent(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset())}};g.provide("goog.dom.NodeIterator");g.dom.NodeIterator=function(B,e,A,z){g.dom.TagIterator.call(this,B,e,A,k,z)};g.inherits(g.dom.NodeIterator,g.dom.TagIterator);g.dom.NodeIterator.prototype.next=function(){do{g.dom.NodeIterator.superClass_.next.call(this)}while(this.isEndTag());return this.node};g.provide("goog.dom.browserrange.IeRange");g.dom.browserrange.IeRange=function(e,z){this.range_=e;this.doc_=z};g.inherits(g.dom.browserrange.IeRange,g.dom.browserrange.AbstractRange);g.dom.browserrange.IeRange.getBrowserRangeForNode_=function(A){var C=g.dom.getOwnerDocument(A).body.createTextRange();if(A.nodeType==g.dom.NodeType.ELEMENT){C.moveToElementText(A);if(g.dom.browserrange.canContainRangeEndpoint(A)&&!A.childNodes.length){C.collapse(d)
}}else{var B=0;var z=A;while(z=z.previousSibling){var e=z.nodeType;if(e==g.dom.NodeType.TEXT){B+=z.length}else{if(e==g.dom.NodeType.ELEMENT){C.moveToElementText(z);break}}}if(!z){C.moveToElementText(A.parentNode)}C.collapse(!z);if(B){C.move("character",B)}C.moveEnd("character",A.length)}return C};g.dom.browserrange.IeRange.getBrowserRangeForNodes_=function(B,z,e,A){var F,E=d;if(B.nodeType==g.dom.NodeType.ELEMENT){F=B.childNodes[z];E=!F;B=F||B.lastChild||B;z=0}var C=g.dom.browserrange.IeRange.getBrowserRangeForNode_(B);if(z){C.move("character",z)}if(B==e&&z==A){C.collapse(w);return C}if(E){C.collapse(d)}E=d;if(e.nodeType==g.dom.NodeType.ELEMENT){F=e.childNodes[A];e=F||e.lastChild||e;A=0;E=!F}var D=g.dom.browserrange.IeRange.getBrowserRangeForNode_(e);D.collapse(!E);if(A){D.moveEnd("character",A)}C.setEndPoint("EndToEnd",D);return C};g.dom.browserrange.IeRange.createFromNodeContents=function(A){var z=new g.dom.browserrange.IeRange(g.dom.browserrange.IeRange.getBrowserRangeForNode_(A),g.dom.getOwnerDocument(A));
if(!g.dom.browserrange.canContainRangeEndpoint(A)){z.startNode_=z.endNode_=z.parentNode_=A.parentNode;z.startOffset_=g.array.indexOf(z.parentNode_.childNodes,A);z.endOffset_=z.startOffset_+1}else{var B,e=A;while((B=e.firstChild)&&g.dom.browserrange.canContainRangeEndpoint(B)){e=B}z.startNode_=e;z.startOffset_=0;e=A;while((B=e.lastChild)&&g.dom.browserrange.canContainRangeEndpoint(B)){e=B}z.endNode_=e;z.endOffset_=e.nodeType==g.dom.NodeType.ELEMENT?e.childNodes.length:e.length;z.parentNode_=A}return z};g.dom.browserrange.IeRange.createFromNodes=function(C,z,e,B){var A=new g.dom.browserrange.IeRange(g.dom.browserrange.IeRange.getBrowserRangeForNodes_(C,z,e,B),g.dom.getOwnerDocument(C));A.startNode_=C;A.startOffset_=z;A.endNode_=e;A.endOffset_=B;return A};g.dom.browserrange.IeRange.prototype.parentNode_=k;g.dom.browserrange.IeRange.prototype.startNode_=k;g.dom.browserrange.IeRange.prototype.endNode_=k;g.dom.browserrange.IeRange.prototype.startOffset_=-1;g.dom.browserrange.IeRange.prototype.endOffset_=-1;
g.dom.browserrange.IeRange.prototype.clone=function(){var e=new g.dom.browserrange.IeRange(this.range_.duplicate(),this.doc_);e.parentNode_=this.parentNode_;e.startNode_=this.startNode_;e.endNode_=this.endNode_;return e};g.dom.browserrange.IeRange.prototype.getBrowserRange=function(){return this.range_};g.dom.browserrange.IeRange.prototype.clearCachedValues_=function(){this.parentNode_=this.startNode_=this.endNode_=k;this.startOffset_=this.endOffset_=-1};g.dom.browserrange.IeRange.prototype.getContainer=function(){if(!this.parentNode_){var B=this.range_.text;var e=this.range_.duplicate();var A=B.replace(/ +$/,"");var D=B.length-A.length;if(D){e.moveEnd("character",-D)}var z=e.parentElement();var E=e.htmlText;var C=g.string.stripNewlines(E).length;if(this.isCollapsed()&&C>0){return(this.parentNode_=z)}while(C>g.string.stripNewlines(z.outerHTML).length){z=z.parentNode}while(z.childNodes.length==1&&z.firstChild&&z.innerText==g.dom.browserrange.IeRange.getNodeText_(z.firstChild)){if(!g.dom.browserrange.canContainRangeEndpoint(z.firstChild)){break
}z=z.firstChild}if(B.length==0){z=this.findDeepestContainer_(z)}this.parentNode_=z}return this.parentNode_};g.dom.browserrange.IeRange.prototype.findDeepestContainer_=function(B){var I=B.childNodes;for(var E=0,G=I.length;E<G;E++){var z=I[E];if(g.dom.browserrange.canContainRangeEndpoint(z)){var C=g.dom.browserrange.IeRange.getBrowserRangeForNode_(z);var e=g.dom.RangeEndpoint.START;var D=g.dom.RangeEndpoint.END;var F=(C.htmlText!=z.outerHTML);var H=this.isCollapsed()&&F;var A=H?(this.compareBrowserRangeEndpoints(C,e,e)>=0&&this.compareBrowserRangeEndpoints(C,e,D)<=0):this.range_.inRange(C);if(A){return this.findDeepestContainer_(z)}}}return B};g.dom.browserrange.IeRange.prototype.getStartNode=function(){if(!this.startNode_){this.startNode_=this.getEndpointNode_(g.dom.RangeEndpoint.START);if(this.isCollapsed()){this.endNode_=this.startNode_}}return this.startNode_};g.dom.browserrange.IeRange.prototype.getStartOffset=function(){if(this.startOffset_<0){this.startOffset_=this.getOffset_(g.dom.RangeEndpoint.START);
if(this.isCollapsed()){this.endOffset_=this.startOffset_}}return this.startOffset_};g.dom.browserrange.IeRange.prototype.getEndNode=function(){if(this.isCollapsed()){return this.getStartNode()}if(!this.endNode_){this.endNode_=this.getEndpointNode_(g.dom.RangeEndpoint.END)}return this.endNode_};g.dom.browserrange.IeRange.prototype.getEndOffset=function(){if(this.isCollapsed()){return this.getStartOffset()}if(this.endOffset_<0){this.endOffset_=this.getOffset_(g.dom.RangeEndpoint.END);if(this.isCollapsed()){this.startOffset_=this.endOffset_}}return this.endOffset_};g.dom.browserrange.IeRange.prototype.compareBrowserRangeEndpoints=function(z,A,e){return this.range_.compareEndPoints((A==g.dom.RangeEndpoint.START?"Start":"End")+"To"+(e==g.dom.RangeEndpoint.START?"Start":"End"),z)};g.dom.browserrange.IeRange.prototype.getEndpointNode_=function(L,G){var E=G||this.getContainer();if(!E||!E.firstChild){return E}var A=g.dom.RangeEndpoint.START,H=g.dom.RangeEndpoint.END;var D=L==A;for(var I=0,C=E.childNodes.length;
I<C;I++){var J=D?I:C-I-1;var B=E.childNodes[J];var F;try{F=g.dom.browserrange.createRangeFromNodeContents(B)}catch(K){continue}var z=F.getBrowserRange();if(this.isCollapsed()){if(!g.dom.browserrange.canContainRangeEndpoint(B)){if(this.compareBrowserRangeEndpoints(z,A,A)==0){this.startOffset_=this.endOffset_=J;return E}}else{if(F.containsRange(this)){return this.getEndpointNode_(L,B)}}}else{if(this.containsRange(F)){if(!g.dom.browserrange.canContainRangeEndpoint(B)){if(D){this.startOffset_=J}else{this.endOffset_=J+1}return E}while(B.childNodes.length==1){B=B.firstChild}return this.getEndpointNode_(L,B)}else{if(this.compareBrowserRangeEndpoints(z,A,H)<0&&this.compareBrowserRangeEndpoints(z,H,A)>0){while(B.childNodes.length==1&&B.firstChild){B=B.firstChild}return this.getEndpointNode_(L,B)}}}}return E};g.dom.browserrange.IeRange.prototype.compareNodeEndpoints_=function(A,z,e){return this.range_.compareEndPoints((z==g.dom.RangeEndpoint.START?"Start":"End")+"To"+(e==g.dom.RangeEndpoint.START?"Start":"End"),g.dom.browserrange.createRangeFromNodeContents(A).getBrowserRange())
};g.dom.browserrange.IeRange.prototype.getOffset_=function(L,z){var D=L==g.dom.RangeEndpoint.START;var A=z||(D?this.getStartNode():this.getEndNode());if(A.nodeType==g.dom.NodeType.ELEMENT){var E=A.childNodes;var K=E.length;var C=D?0:K-1;var H=D?1:-1;for(var I=C;I>=0&&I<K;I+=H){var B=E[I];if(g.dom.browserrange.canContainRangeEndpoint(B)){continue}var e=this.compareNodeEndpoints_(B,L,L);if(e==0){return D?I:I+1}}return I==-1?0:I}else{var J=this.range_.duplicate();var G=g.dom.browserrange.IeRange.getBrowserRangeForNode_(A);J.setEndPoint(D?"EndToEnd":"StartToStart",G);var F=J.text.length;return D?A.length-F:F}};g.dom.browserrange.IeRange.getNodeText_=function(e){return e.nodeType==g.dom.NodeType.TEXT?e.nodeValue:e.innerText};g.dom.browserrange.IeRange.prototype.isRangeInDocument=function(){var e=this.doc_.body.createTextRange();e.moveToElementText(this.doc_.body);return this.containsRange(new g.dom.browserrange.IeRange(e,this.doc_),w)};g.dom.browserrange.IeRange.prototype.isCollapsed=function(){return this.range_.compareEndPoints("StartToEnd",this.range_)==0
};g.dom.browserrange.IeRange.prototype.getText=function(){return this.range_.text};g.dom.browserrange.IeRange.prototype.getValidHtml=function(){return this.range_.htmlText};g.dom.browserrange.IeRange.prototype.select=function(e){this.range_.select()};g.dom.browserrange.IeRange.prototype.removeContents=function(){if(this.range_.htmlText){var A=this.getStartNode();var D=this.getEndNode();var I=this.range_.text;var F=this.range_.duplicate();F.moveStart("character",1);F.moveStart("character",-1);if(F.text!=I){var G=new g.dom.NodeIterator(A,d,w);var C=[];g.iter.forEach(G,function(e){if(e.nodeType!=g.dom.NodeType.TEXT&&this.containsNode(e)){C.push(e);G.skipTag()}if(e==D){throw g.iter.StopIteration}});this.collapse(w);g.array.forEach(C,g.dom.removeNode);this.clearCachedValues_();return}this.range_=F;this.range_.text="";this.clearCachedValues_();var z=this.getStartNode();var B=this.getStartOffset();try{var H=A.nextSibling;if(A==D&&A.parentNode&&A.nodeType==g.dom.NodeType.TEXT&&H&&H.nodeType==g.dom.NodeType.TEXT){A.nodeValue+=H.nodeValue;
g.dom.removeNode(H);this.range_=g.dom.browserrange.IeRange.getBrowserRangeForNode_(z);this.range_.move("character",B);this.clearCachedValues_()}}catch(E){}}};g.dom.browserrange.IeRange.getDomHelper_=function(e){return g.dom.getDomHelper(e.parentElement())};g.dom.browserrange.IeRange.pasteElement_=function(z,B,A){A=A||g.dom.browserrange.IeRange.getDomHelper_(z);var C;var e=C=B.id;if(!C){C=B.id=g.string.createUniqueString()}z.pasteHTML(B.outerHTML);B=A.getElement(C);if(B){if(!e){B.removeAttribute("id")}}return B};g.dom.browserrange.IeRange.prototype.surroundContents=function(e){g.dom.removeNode(e);e.innerHTML=this.range_.htmlText;e=g.dom.browserrange.IeRange.pasteElement_(this.range_,e);if(e){this.range_.moveToElementText(e)}this.clearCachedValues_();return e};g.dom.browserrange.IeRange.insertNode_=function(D,B,C,z){z=z||g.dom.browserrange.IeRange.getDomHelper_(D);var e;if(B.nodeType!=g.dom.NodeType.ELEMENT){e=w;B=z.createDom(g.dom.TagName.DIV,k,B)}D.collapse(C);B=g.dom.browserrange.IeRange.pasteElement_(D,(B),z);
if(e){var A=B.firstChild;z.flattenElement(B);B=A}return B};g.dom.browserrange.IeRange.prototype.insertNode=function(z,A){var e=g.dom.browserrange.IeRange.insertNode_(this.range_.duplicate(),z,A);this.clearCachedValues_();return e};g.dom.browserrange.IeRange.prototype.surroundWithNodes=function(z,e){var B=this.range_.duplicate();var A=this.range_.duplicate();g.dom.browserrange.IeRange.insertNode_(B,z,w);g.dom.browserrange.IeRange.insertNode_(A,e,d);this.clearCachedValues_()};g.dom.browserrange.IeRange.prototype.collapse=function(e){this.range_.collapse(e);if(e){this.endNode_=this.startNode_;this.endOffset_=this.startOffset_}else{this.startNode_=this.endNode_;this.startOffset_=this.endOffset_}};g.provide("goog.dom.browserrange.GeckoRange");g.dom.browserrange.GeckoRange=function(e){g.dom.browserrange.W3cRange.call(this,e)};g.inherits(g.dom.browserrange.GeckoRange,g.dom.browserrange.W3cRange);g.dom.browserrange.GeckoRange.createFromNodeContents=function(e){return new g.dom.browserrange.GeckoRange(g.dom.browserrange.W3cRange.getBrowserRangeForNode(e))
};g.dom.browserrange.GeckoRange.createFromNodes=function(B,z,e,A){return new g.dom.browserrange.GeckoRange(g.dom.browserrange.W3cRange.getBrowserRangeForNodes(B,z,e,A))};g.dom.browserrange.GeckoRange.prototype.selectInternal=function(A,D){var z=D?this.getEndNode():this.getStartNode();var B=D?this.getEndOffset():this.getStartOffset();var C=D?this.getStartNode():this.getEndNode();var e=D?this.getStartOffset():this.getEndOffset();A.collapse(z,B);if(z!=C||B!=e){A.extend(C,e)}};g.provide("goog.dom.browserrange.OperaRange");g.dom.browserrange.OperaRange=function(e){g.dom.browserrange.W3cRange.call(this,e)};g.inherits(g.dom.browserrange.OperaRange,g.dom.browserrange.W3cRange);g.dom.browserrange.OperaRange.createFromNodeContents=function(e){return new g.dom.browserrange.OperaRange(g.dom.browserrange.W3cRange.getBrowserRangeForNode(e))};g.dom.browserrange.OperaRange.createFromNodes=function(B,z,e,A){return new g.dom.browserrange.OperaRange(g.dom.browserrange.W3cRange.getBrowserRangeForNodes(B,z,e,A))
};g.dom.browserrange.OperaRange.prototype.selectInternal=function(e,z){e.collapse(this.getStartNode(),this.getStartOffset());if(this.getEndNode()!=this.getStartNode()||this.getEndOffset()!=this.getStartOffset()){e.extend(this.getEndNode(),this.getEndOffset())}if(e.rangeCount==0){e.addRange(this.range_)}};g.provide("goog.dom.browserrange");g.provide("goog.dom.browserrange.Error");g.dom.browserrange.Error={NOT_IMPLEMENTED:"Not Implemented"};g.dom.browserrange.createRange=function(e){if(g.userAgent.IE&&!g.userAgent.isDocumentMode(9)){return new g.dom.browserrange.IeRange((e),g.dom.getOwnerDocument(e.parentElement()))}else{if(g.userAgent.WEBKIT){return new g.dom.browserrange.WebKitRange((e))}else{if(g.userAgent.GECKO){return new g.dom.browserrange.GeckoRange((e))}else{if(g.userAgent.OPERA){return new g.dom.browserrange.OperaRange((e))}else{return new g.dom.browserrange.W3cRange((e))}}}}};g.dom.browserrange.createRangeFromNodeContents=function(e){if(g.userAgent.IE&&!g.userAgent.isDocumentMode(9)){return g.dom.browserrange.IeRange.createFromNodeContents(e)
}else{if(g.userAgent.WEBKIT){return g.dom.browserrange.WebKitRange.createFromNodeContents(e)}else{if(g.userAgent.GECKO){return g.dom.browserrange.GeckoRange.createFromNodeContents(e)}else{if(g.userAgent.OPERA){return g.dom.browserrange.OperaRange.createFromNodeContents(e)}else{return g.dom.browserrange.W3cRange.createFromNodeContents(e)}}}}};g.dom.browserrange.createRangeFromNodes=function(B,z,e,A){if(g.userAgent.IE&&!g.userAgent.isDocumentMode(9)){return g.dom.browserrange.IeRange.createFromNodes(B,z,e,A)}else{if(g.userAgent.WEBKIT){return g.dom.browserrange.WebKitRange.createFromNodes(B,z,e,A)}else{if(g.userAgent.GECKO){return g.dom.browserrange.GeckoRange.createFromNodes(B,z,e,A)}else{if(g.userAgent.OPERA){return g.dom.browserrange.OperaRange.createFromNodes(B,z,e,A)}else{return g.dom.browserrange.W3cRange.createFromNodes(B,z,e,A)}}}}};g.dom.browserrange.canContainRangeEndpoint=function(e){return g.dom.canHaveChildren(e)||e.nodeType==g.dom.NodeType.TEXT};g.provide("goog.dom.TextRange");
g.dom.TextRange=function(){};g.inherits(g.dom.TextRange,g.dom.AbstractRange);g.dom.TextRange.createFromBrowserRange=function(e,z){return g.dom.TextRange.createFromBrowserRangeWrapper_(g.dom.browserrange.createRange(e),z)};g.dom.TextRange.createFromBrowserRangeWrapper_=function(A,z){var e=new g.dom.TextRange();e.browserRangeWrapper_=A;e.isReversed_=!!z;return e};g.dom.TextRange.createFromNodeContents=function(z,e){return g.dom.TextRange.createFromBrowserRangeWrapper_(g.dom.browserrange.createRangeFromNodeContents(z),e)};g.dom.TextRange.createFromNodes=function(A,C,D,e){var z=new g.dom.TextRange();z.isReversed_=g.dom.Range.isReversed(A,C,D,e);if(A.tagName=="BR"){var B=A.parentNode;C=g.array.indexOf(B.childNodes,A);A=B}if(D.tagName=="BR"){var B=D.parentNode;e=g.array.indexOf(B.childNodes,D);D=B}if(z.isReversed_){z.startNode_=D;z.startOffset_=e;z.endNode_=A;z.endOffset_=C}else{z.startNode_=A;z.startOffset_=C;z.endNode_=D;z.endOffset_=e}return z};g.dom.TextRange.prototype.browserRangeWrapper_=k;
g.dom.TextRange.prototype.startNode_=k;g.dom.TextRange.prototype.startOffset_=k;g.dom.TextRange.prototype.endNode_=k;g.dom.TextRange.prototype.endOffset_=k;g.dom.TextRange.prototype.isReversed_=d;g.dom.TextRange.prototype.clone=function(){var e=new g.dom.TextRange();e.browserRangeWrapper_=this.browserRangeWrapper_;e.startNode_=this.startNode_;e.startOffset_=this.startOffset_;e.endNode_=this.endNode_;e.endOffset_=this.endOffset_;e.isReversed_=this.isReversed_;return e};g.dom.TextRange.prototype.getType=function(){return g.dom.RangeType.TEXT};g.dom.TextRange.prototype.getBrowserRangeObject=function(){return this.getBrowserRangeWrapper_().getBrowserRange()};g.dom.TextRange.prototype.setBrowserRangeObject=function(e){if(g.dom.AbstractRange.isNativeControlRange(e)){return d}this.browserRangeWrapper_=g.dom.browserrange.createRange(e);this.clearCachedValues_();return w};g.dom.TextRange.prototype.clearCachedValues_=function(){this.startNode_=this.startOffset_=this.endNode_=this.endOffset_=k};g.dom.TextRange.prototype.getTextRangeCount=function(){return 1
};g.dom.TextRange.prototype.getTextRange=function(e){return this};g.dom.TextRange.prototype.getBrowserRangeWrapper_=function(){return this.browserRangeWrapper_||(this.browserRangeWrapper_=g.dom.browserrange.createRangeFromNodes(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset()))};g.dom.TextRange.prototype.getContainer=function(){return this.getBrowserRangeWrapper_().getContainer()};g.dom.TextRange.prototype.getStartNode=function(){return this.startNode_||(this.startNode_=this.getBrowserRangeWrapper_().getStartNode())};g.dom.TextRange.prototype.getStartOffset=function(){return this.startOffset_!=k?this.startOffset_:(this.startOffset_=this.getBrowserRangeWrapper_().getStartOffset())};g.dom.TextRange.prototype.getEndNode=function(){return this.endNode_||(this.endNode_=this.getBrowserRangeWrapper_().getEndNode())};g.dom.TextRange.prototype.getEndOffset=function(){return this.endOffset_!=k?this.endOffset_:(this.endOffset_=this.getBrowserRangeWrapper_().getEndOffset())
};g.dom.TextRange.prototype.moveToNodes=function(B,z,e,A,C){this.startNode_=B;this.startOffset_=z;this.endNode_=e;this.endOffset_=A;this.isReversed_=C;this.browserRangeWrapper_=k};g.dom.TextRange.prototype.isReversed=function(){return this.isReversed_};g.dom.TextRange.prototype.containsRange=function(C,B){var e=C.getType();if(e==g.dom.RangeType.TEXT){return this.getBrowserRangeWrapper_().containsRange(C.getBrowserRangeWrapper_(),B)}else{if(e==g.dom.RangeType.CONTROL){var A=C.getElements();var z=B?g.array.some:g.array.every;return z(A,function(D){return this.containsNode(D,B)},this)}}return d};g.dom.TextRange.isAttachedNode=function(A){if(g.userAgent.IE&&!g.userAgent.isDocumentMode(9)){var z=d;try{z=A.parentNode}catch(B){}return !!z}else{return g.dom.contains(A.ownerDocument.body,A)}};g.dom.TextRange.prototype.isRangeInDocument=function(){return(!this.startNode_||g.dom.TextRange.isAttachedNode(this.startNode_))&&(!this.endNode_||g.dom.TextRange.isAttachedNode(this.endNode_))&&(!(g.userAgent.IE&&!g.userAgent.isDocumentMode(9))||this.getBrowserRangeWrapper_().isRangeInDocument())
};g.dom.TextRange.prototype.isCollapsed=function(){return this.getBrowserRangeWrapper_().isCollapsed()};g.dom.TextRange.prototype.getText=function(){return this.getBrowserRangeWrapper_().getText()};g.dom.TextRange.prototype.getHtmlFragment=function(){return this.getBrowserRangeWrapper_().getHtmlFragment()};g.dom.TextRange.prototype.getValidHtml=function(){return this.getBrowserRangeWrapper_().getValidHtml()};g.dom.TextRange.prototype.getPastableHtml=function(){var z=this.getValidHtml();if(z.match(/^\s*<td\b/i)){z="<table><tbody><tr>"+z+"</tr></tbody></table>"}else{if(z.match(/^\s*<tr\b/i)){z="<table><tbody>"+z+"</tbody></table>"}else{if(z.match(/^\s*<tbody\b/i)){z="<table>"+z+"</table>"}else{if(z.match(/^\s*<li\b/i)){var e=this.getContainer();var A=g.dom.TagName.UL;while(e){if(e.tagName==g.dom.TagName.OL){A=g.dom.TagName.OL;break}else{if(e.tagName==g.dom.TagName.UL){break}}e=e.parentNode}z=g.string.buildString("<",A,">",z,"</",A,">")}}}}return z};g.dom.TextRange.prototype.__iterator__=function(e){return new g.dom.TextRangeIterator(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset())
};g.dom.TextRange.prototype.select=function(){this.getBrowserRangeWrapper_().select(this.isReversed_)};g.dom.TextRange.prototype.removeContents=function(){this.getBrowserRangeWrapper_().removeContents();this.clearCachedValues_()};g.dom.TextRange.prototype.surroundContents=function(z){var e=this.getBrowserRangeWrapper_().surroundContents(z);this.clearCachedValues_();return e};g.dom.TextRange.prototype.insertNode=function(z,A){var e=this.getBrowserRangeWrapper_().insertNode(z,A);this.clearCachedValues_();return e};g.dom.TextRange.prototype.surroundWithNodes=function(z,e){this.getBrowserRangeWrapper_().surroundWithNodes(z,e);this.clearCachedValues_()};g.dom.TextRange.prototype.saveUsingDom=function(){return new g.dom.DomSavedTextRange_(this)};g.dom.TextRange.prototype.collapse=function(z){var e=this.isReversed()?!z:z;if(this.browserRangeWrapper_){this.browserRangeWrapper_.collapse(e)}if(e){this.endNode_=this.startNode_;this.endOffset_=this.startOffset_}else{this.startNode_=this.endNode_;this.startOffset_=this.endOffset_
}this.isReversed_=d};g.dom.DomSavedTextRange_=function(e){this.anchorNode_=e.getAnchorNode();this.anchorOffset_=e.getAnchorOffset();this.focusNode_=e.getFocusNode();this.focusOffset_=e.getFocusOffset()};g.inherits(g.dom.DomSavedTextRange_,g.dom.SavedRange);g.dom.DomSavedTextRange_.prototype.restoreInternal=function(){return g.dom.Range.createFromNodes(this.anchorNode_,this.anchorOffset_,this.focusNode_,this.focusOffset_)};g.dom.DomSavedTextRange_.prototype.disposeInternal=function(){g.dom.DomSavedTextRange_.superClass_.disposeInternal.call(this);this.anchorNode_=k;this.focusNode_=k};g.provide("goog.dom.MultiRange");g.provide("goog.dom.MultiRangeIterator");g.dom.MultiRange=function(){this.browserRanges_=[];this.ranges_=[];this.sortedRanges_=k;this.container_=k};g.inherits(g.dom.MultiRange,g.dom.AbstractMultiRange);g.dom.MultiRange.createFromBrowserSelection=function(B){var z=new g.dom.MultiRange();for(var A=0,e=B.rangeCount;A<e;A++){z.browserRanges_.push(B.getRangeAt(A))}return z};g.dom.MultiRange.createFromBrowserRanges=function(z){var e=new g.dom.MultiRange();
e.browserRanges_=g.array.clone(z);return e};g.dom.MultiRange.createFromTextRanges=function(z){var e=new g.dom.MultiRange();e.ranges_=z;e.browserRanges_=z.map(function(A){return A.getBrowserRangeObject()});return e};g.dom.MultiRange.prototype.clearCachedValues_=function(){this.ranges_=[];this.sortedRanges_=k;this.container_=k};g.dom.MultiRange.prototype.clone=function(){return g.dom.MultiRange.createFromBrowserRanges(this.browserRanges_)};g.dom.MultiRange.prototype.getType=function(){return g.dom.RangeType.MULTI};g.dom.MultiRange.prototype.getBrowserRangeObject=function(){return this.browserRanges_[0]};g.dom.MultiRange.prototype.setBrowserRangeObject=function(e){return d};g.dom.MultiRange.prototype.getTextRangeCount=function(){return this.browserRanges_.length};g.dom.MultiRange.prototype.getTextRange=function(e){if(!this.ranges_[e]){this.ranges_[e]=g.dom.TextRange.createFromBrowserRange(this.browserRanges_[e])}return this.ranges_[e]};g.dom.MultiRange.prototype.getContainer=function(){if(!this.container_){var z=[];
for(var A=0,e=this.getTextRangeCount();A<e;A++){z.push(this.getTextRange(A).getContainer())}this.container_=g.dom.findCommonAncestor.apply(k,z)}return this.container_};g.dom.MultiRange.prototype.getSortedRanges=function(){if(!this.sortedRanges_){this.sortedRanges_=this.getTextRanges();this.sortedRanges_.sort(function(z,e){var B=z.getStartNode();var C=z.getStartOffset();var A=e.getStartNode();var D=e.getStartOffset();if(B==A&&C==D){return 0}return g.dom.Range.isReversed(B,C,A,D)?1:-1})}return this.sortedRanges_};g.dom.MultiRange.prototype.getStartNode=function(){return this.getSortedRanges()[0].getStartNode()};g.dom.MultiRange.prototype.getStartOffset=function(){return this.getSortedRanges()[0].getStartOffset()};g.dom.MultiRange.prototype.getEndNode=function(){return this.getSortedRanges().last().getEndNode()};g.dom.MultiRange.prototype.getEndOffset=function(){return this.getSortedRanges().last().getEndOffset()};g.dom.MultiRange.prototype.isRangeInDocument=function(){return this.getTextRanges().every(function(e){return e.isRangeInDocument()
})};g.dom.MultiRange.prototype.isCollapsed=function(){return this.browserRanges_.length==0||this.browserRanges_.length==1&&this.getTextRange(0).isCollapsed()};g.dom.MultiRange.prototype.getText=function(){return this.getTextRanges().map(function(e){return e.getText()}).join("")};g.dom.MultiRange.prototype.getHtmlFragment=function(){return this.getValidHtml()};g.dom.MultiRange.prototype.getValidHtml=function(){return this.getTextRanges().map(function(e){return e.getValidHtml()}).join("")};g.dom.MultiRange.prototype.getPastableHtml=function(){return this.getValidHtml()};g.dom.MultiRange.prototype.__iterator__=function(e){return new g.dom.MultiRangeIterator(this)};g.dom.MultiRange.prototype.select=function(){var A=g.dom.AbstractRange.getBrowserSelectionForWindow(this.getWindow());A.removeAllRanges();for(var z=0,e=this.getTextRangeCount();z<e;z++){A.addRange(this.getTextRange(z).getBrowserRangeObject())}};g.dom.MultiRange.prototype.removeContents=function(){this.getTextRanges().each(function(e){e.removeContents()
})};g.dom.MultiRange.prototype.saveUsingDom=function(){return new g.dom.DomSavedMultiRange_(this)};g.dom.MultiRange.prototype.collapse=function(z){if(!this.isCollapsed()){var e=z?this.getTextRange(0):this.getTextRange(this.getTextRangeCount()-1);this.clearCachedValues_();e.collapse(z);this.ranges_=[e];this.sortedRanges_=[e];this.browserRanges_=[e.getBrowserRangeObject()]}};g.dom.DomSavedMultiRange_=function(e){this.savedRanges_=e.getTextRanges().map(function(z){return z.saveUsingDom()})};g.inherits(g.dom.DomSavedMultiRange_,g.dom.SavedRange);g.dom.DomSavedMultiRange_.prototype.restoreInternal=function(){var e=this.savedRanges_.map(function(z){return z.restore()});return g.dom.MultiRange.createFromTextRanges(e)};g.dom.DomSavedMultiRange_.prototype.disposeInternal=function(){g.dom.DomSavedMultiRange_.superClass_.disposeInternal.call(this);this.savedRanges_.map(function(e){e.dispose()});delete this.savedRanges_};g.dom.MultiRangeIterator=function(e){if(e){this.iterators_=e.getSortedRanges().map(function(z){return g.iter.toIterator(z)
})}g.dom.RangeIterator.call(this,e?this.getStartNode():k,d)};g.inherits(g.dom.MultiRangeIterator,g.dom.RangeIterator);g.dom.MultiRangeIterator.prototype.iterators_=k;g.dom.MultiRangeIterator.prototype.currentIdx_=0;g.dom.MultiRangeIterator.prototype.getStartTextOffset=function(){return this.iterators_[this.currentIdx_].getStartTextOffset()};g.dom.MultiRangeIterator.prototype.getEndTextOffset=function(){return this.iterators_[this.currentIdx_].getEndTextOffset()};g.dom.MultiRangeIterator.prototype.getStartNode=function(){return this.iterators_[0].getStartNode()};g.dom.MultiRangeIterator.prototype.getEndNode=function(){return this.iterators_.last().getEndNode()};g.dom.MultiRangeIterator.prototype.isLast=function(){return this.iterators_[this.currentIdx_].isLast()};g.dom.MultiRangeIterator.prototype.next=function(){try{var A=this.iterators_[this.currentIdx_];var z=A.next();this.setPosition(A.node,A.tagType,A.depth);return z}catch(e){if(e!==g.iter.StopIteration||this.iterators_.length-1==this.currentIdx_){throw e
}else{this.currentIdx_++;return this.next()}}};g.dom.MultiRangeIterator.prototype.copyFrom=function(e){this.iterators_=g.array.clone(e.iterators_);g.dom.MultiRangeIterator.superClass_.copyFrom.call(this,e)};g.dom.MultiRangeIterator.prototype.clone=function(){var e=new g.dom.MultiRangeIterator(k);e.copyFrom(this);return e};g.provide("goog.dom.ControlRange");g.provide("goog.dom.ControlRangeIterator");g.dom.ControlRange=function(){};g.inherits(g.dom.ControlRange,g.dom.AbstractMultiRange);g.dom.ControlRange.createFromBrowserRange=function(z){var e=new g.dom.ControlRange();e.range_=z;return e};g.dom.ControlRange.createFromElements=function(B){var z=g.dom.getOwnerDocument(arguments[0]).body.createControlRange();for(var A=0,e=arguments.length;A<e;A++){z.addElement(arguments[A])}return g.dom.ControlRange.createFromBrowserRange(z)};g.dom.ControlRange.prototype.range_=k;g.dom.ControlRange.prototype.elements_=k;g.dom.ControlRange.prototype.sortedElements_=k;g.dom.ControlRange.prototype.clearCachedValues_=function(){this.elements_=k;
this.sortedElements_=k};g.dom.ControlRange.prototype.clone=function(){return g.dom.ControlRange.createFromElements.apply(this,this.getElements())};g.dom.ControlRange.prototype.getType=function(){return g.dom.RangeType.CONTROL};g.dom.ControlRange.prototype.getBrowserRangeObject=function(){return this.range_||c.body.createControlRange()};g.dom.ControlRange.prototype.setBrowserRangeObject=function(e){if(!g.dom.AbstractRange.isNativeControlRange(e)){return d}this.range_=e;return w};g.dom.ControlRange.prototype.getTextRangeCount=function(){return this.range_?this.range_.length:0};g.dom.ControlRange.prototype.getTextRange=function(e){return g.dom.TextRange.createFromNodeContents(this.range_.item(e))};g.dom.ControlRange.prototype.getContainer=function(){return g.dom.findCommonAncestor.apply(k,this.getElements())};g.dom.ControlRange.prototype.getStartNode=function(){return this.getSortedElements()[0]};g.dom.ControlRange.prototype.getStartOffset=function(){return 0};g.dom.ControlRange.prototype.getEndNode=function(){var z=this.getSortedElements();
var e=(z.last());return(z.find(function(A){return g.dom.contains(A,e)}))};g.dom.ControlRange.prototype.getEndOffset=function(){return this.getEndNode().childNodes.length};g.dom.ControlRange.prototype.getElements=function(){if(!this.elements_){this.elements_=[];if(this.range_){for(var e=0;e<this.range_.length;e++){this.elements_.push(this.range_.item(e))}}}return this.elements_};g.dom.ControlRange.prototype.getSortedElements=function(){if(!this.sortedElements_){this.sortedElements_=this.getElements().concat();this.sortedElements_.sort(function(z,e){return z.sourceIndex-e.sourceIndex})}return this.sortedElements_};g.dom.ControlRange.prototype.isRangeInDocument=function(){var z=d;try{z=this.getElements().every(function(e){return g.userAgent.IE?e.parentNode:g.dom.contains(e.ownerDocument.body,e)})}catch(A){}return z};g.dom.ControlRange.prototype.isCollapsed=function(){return !this.range_||!this.range_.length};g.dom.ControlRange.prototype.getText=function(){return""};g.dom.ControlRange.prototype.getHtmlFragment=function(){return this.getSortedElements().map(g.dom.getOuterHtml).join("")
};g.dom.ControlRange.prototype.getValidHtml=function(){return this.getHtmlFragment()};g.dom.ControlRange.prototype.getPastableHtml=g.dom.ControlRange.prototype.getValidHtml;g.dom.ControlRange.prototype.__iterator__=function(e){return new g.dom.ControlRangeIterator(this)};g.dom.ControlRange.prototype.select=function(){if(this.range_){this.range_.select()}};g.dom.ControlRange.prototype.removeContents=function(){if(this.range_){var z=[];for(var A=0,e=this.range_.length;A<e;A++){z.push(this.range_.item(A))}z.each(g.dom.removeNode);this.collapse(d)}};g.dom.ControlRange.prototype.saveUsingDom=function(){return new g.dom.DomSavedControlRange_(this)};g.dom.ControlRange.prototype.collapse=function(e){this.range_=k;this.clearCachedValues_()};g.dom.DomSavedControlRange_=function(e){this.elements_=e.getElements()};g.inherits(g.dom.DomSavedControlRange_,g.dom.SavedRange);g.dom.DomSavedControlRange_.prototype.restoreInternal=function(){var B=this.elements_.length?g.dom.getOwnerDocument(this.elements_[0]):document;
var A=B.body.createControlRange();for(var z=0,e=this.elements_.length;z<e;z++){A.addElement(this.elements_[z])}return g.dom.ControlRange.createFromBrowserRange(A)};g.dom.DomSavedControlRange_.prototype.disposeInternal=function(){g.dom.DomSavedControlRange_.superClass_.disposeInternal.call(this);delete this.elements_};g.dom.ControlRangeIterator=function(e){if(e){this.elements_=e.getSortedElements();this.startNode_=this.elements_.shift();this.endNode_=(this.elements_.last())||this.startNode_}g.dom.RangeIterator.call(this,this.startNode_,d)};g.inherits(g.dom.ControlRangeIterator,g.dom.RangeIterator);g.dom.ControlRangeIterator.prototype.startNode_=k;g.dom.ControlRangeIterator.prototype.endNode_=k;g.dom.ControlRangeIterator.prototype.elements_=k;g.dom.ControlRangeIterator.prototype.getStartTextOffset=function(){return 0};g.dom.ControlRangeIterator.prototype.getEndTextOffset=function(){return 0};g.dom.ControlRangeIterator.prototype.getStartNode=function(){return this.startNode_};g.dom.ControlRangeIterator.prototype.getEndNode=function(){return this.endNode_
};g.dom.ControlRangeIterator.prototype.isLast=function(){return !this.depth&&!this.elements_.length};g.dom.ControlRangeIterator.prototype.next=function(){if(this.isLast()){throw g.iter.StopIteration}else{if(!this.depth){var e=this.elements_.shift();this.setPosition(e,g.dom.TagWalkType.START_TAG,g.dom.TagWalkType.START_TAG);return e}}return g.dom.ControlRangeIterator.superClass_.next.call(this)};g.dom.ControlRangeIterator.prototype.copyFrom=function(e){this.elements_=e.elements_;this.startNode_=e.startNode_;this.endNode_=e.endNode_;g.dom.ControlRangeIterator.superClass_.copyFrom.call(this,e)};g.dom.ControlRangeIterator.prototype.clone=function(){var e=new g.dom.ControlRangeIterator(k);e.copyFrom(this);return e};g.provide("goog.dom.Range");g.dom.Range.createFromWindow=function(z){var e=g.dom.AbstractRange.getBrowserSelectionForWindow(z||window);return e&&g.dom.Range.createFromBrowserSelection(e)};g.dom.Range.createFromBrowserSelection=function(A){var z;var B=d;if(A.createRange){try{z=A.createRange()
}catch(C){return k}}else{if(A.rangeCount){if(A.rangeCount>1){return g.dom.MultiRange.createFromBrowserSelection((A))}else{z=A.getRangeAt(0);B=g.dom.Range.isReversed(A.anchorNode,A.anchorOffset,A.focusNode,A.focusOffset)}}else{return k}}return g.dom.Range.createFromBrowserRange(z,B)};g.dom.Range.createFromBrowserRange=function(e,z){return g.dom.AbstractRange.isNativeControlRange(e)?g.dom.ControlRange.createFromBrowserRange(e):g.dom.TextRange.createFromBrowserRange(e,z)};g.dom.Range.createFromNodeContents=function(z,e){return g.dom.TextRange.createFromNodeContents(z,e)};g.dom.Range.createCaret=function(e,z){return g.dom.TextRange.createFromNodes(e,z,e,z)};g.dom.Range.createFromNodes=function(B,z,e,A){return g.dom.TextRange.createFromNodes(B,z,e,A)};g.dom.Range.clearSelection=function(A){var z=g.dom.AbstractRange.getBrowserSelectionForWindow(A||window);if(!z){return}if(z.empty){try{z.empty()}catch(B){}}else{z.removeAllRanges()}};g.dom.Range.isReversed=function(z,A,B,e){if(z==B){return e<A}var C;
if(z.nodeType==g.dom.NodeType.ELEMENT&&A){C=z.childNodes[A];if(C){z=C;A=0}else{if(g.dom.contains(z,B)){return w}}}if(B.nodeType==g.dom.NodeType.ELEMENT&&e){C=B.childNodes[e];if(C){B=C;e=0}else{if(g.dom.contains(B,z)){return d}}}return(g.dom.compareNodeOrder(z,B)||A-e)>0};g.provide("export_dep");j.tx={};function b(z,B){for(var A=0,e=z.length;A<e;A++){B(z[A])}}j.installHyperscript=function(z,e){b("a big blockquote br b center code dd dl dt div em font form h1 h2 h3 h4 h5 h6 hr img iframe input i li ol option pre p script select small span strike strong style sub sup table tbody td textarea tr ul u".split(" "),function(A){z[A]=function(){var B=e.createElement(A);b(arguments,function(D){if(D.nodeType){B.appendChild(D)}else{if(typeof D=="string"||typeof D=="number"){if(A=="textarea"){if(v.msie){B.value+=D}else{B.text+=D}}else{B.innerHTML+=D}}else{if(typeof D=="array"){for(var F=0;F<D.length;F++){B.appendChild(D[F])}}else{for(var C in D){if(C=="style"){for(var E in D[C]){if((E=="float"||E=="cssFloat")){B[C][B[C].styleFloat===s?"cssFloat":"styleFloat"]=D[C][E]
}else{B[C][E]=D[C][E]}}}else{if(["more","less","longDesc"].contains(C)){if(B.setAttribute){B.setAttribute(C,D[C])}}else{if(["colSpan","rowSpan","cellPadding","cellSpacing"].contains(C)){if(B.setAttribute){B.setAttribute(C,D[C])}}else{if(D[C]){B[C]=D[C]}}}}}}}}});return B}})};installHyperscript(j.tx,c);(function(){function z(B,A){if(!B){return""}if(A.indexOf("{if:")>-1){A=A.replace(/#\{if:([_\w]+)([=><!]+)([_'"\-\w]+)\}([\s\S]*?)#\{\/if:\1\}/gm,function(G,D,F,J,I){if(B[D]==k){return G}var E=d;try{F=((F=="=")?"==":F);var K='"'+(B[D]+"").replace(/['"]/g,"")+'"';var C='"'+J.replace(/['"]/g,"")+'"';E=txEval("("+K+F+C+")")}catch(H){E=d}if(E){return z(B,I)}else{return""}})}if(A.indexOf("{for:")>-1){A=A.replace(/#\{for:([_\w]+):?(\d*):?(\d*)\}([\s\S]*?)#\{\/for:\1\}/gm,function(J,C,K,E,H){if(!B[C]||!B[C].length){return J}var F=B[C];var D=[];K=!!K?(isNaN(K)?F.length:parseInt(K)):F.length;E=!!E?(isNaN(E)?0:parseInt(E)):0;for(var G=0,I=Math.min(F.length,K);G<I;G++){D.push(z(F[G],H))}return D.join("").substring(E)
})}return A.replace(/#\{([_\w]+)\}/g,function(D,C){if(B[C]!=k){return B[C]}else{return D}})}var e=j.Template=function(A){this.template=A};e.prototype={evaluate:function(A){return z(A,this.template)},evaluateToDom:function(B,A){if(typeof(A)==="string"){A=c.getElementById(A)}A.innerHTML=z(B,this.template)},evaluateAsDom:function(C,B){var A=(B||document).createElement("div");A.innerHTML=z(C,this.template);return A.firstChild}}})();(function(){var e,C,A;var D={"#":function(G,H){if((e=/(\S*)#(\S+)/.exec(H))!==k){var F=e[1];var I=e[2];if(!G.getElementById){G=G.ownerDocument}if(C=G.getElementById(I)){if(F.length<1||C.nodeName.toLowerCase()==F){return[C]}}}return[]},".":function(H,L){if((e=/(\S*)\.(\S+)/.exec(L))!==k){var G=((e[1]==="")?"*":e[1]);var F=e[2];if((A=H.getElementsByTagName(G)).length>0){var J=[];for(var I=0;I<A.length;I++){var K=A[I];if((new RegExp("(^| )"+F+"($| )")).test(K.className)){J.push(K)}}return J}}return[]},"*":function(F,I){if((A=F.getElementsByTagName(I)).length>0){var H=[];
for(var G=0;G<A.length;G++){H.push(A[G])}return H}return[]}};var z=function(F,J){if(F.length<1){return[]}var I;if((f=/(\.|#)/.exec(J))!==k){if(D[f[1]]){I=f[1]}}I=I||"*";var H=[];for(var G=0;G<F.length;G++){H=H.concat(D[I](F[G],J))}return H};var E=function(F,I){var H=[F];var J=I.split(" ");for(var G=0;G<J.length;G++){H=z(H,J[G])}return H};var B=function(I,F,J){J=!!J;if(I.nodeType!==1&&I.nodeType!==9){return(J?[]:k)}if(!F||typeof F!=="string"){return(J?[]:k)}var H;var K=[];var L=F.split(",");for(var G=0;G<L.length;G++){H=E(I,L[G]);if(H&&H.length>0){K=K.concat(H);if(!J){break}}}if(J){return K}else{return K[0]}};j.dGetty=function(){var F=arguments;if(F.length==1){if(typeof(F[0])==="string"){return B(c,F[0])}}else{if(F.length==2){if(F[0].nodeType&&typeof(F[1])==="string"){return B(F[0],F[1])}}}return k};j.dGetties=function(){var F=arguments;if(F.length==1){if(typeof(F[0])==="string"){return B(c,F[0],w)}}else{if(F.length==2){if(F[0].nodeType&&typeof(F[1])==="string"){return B(F[0],F[1],w)}}}return[]
}})();(function(){var e,C,A;var D={"#":function(F,G){if((e=/(\S*)#(\S+)/.exec(G))!==k){var E=e[1];var H=e[2];if(E.length<1||F.nodeName.toLowerCase()==E){if(F.id==H){return w}}}return d},".":function(G,H){if((e=/(\S*)\.(\S+)/.exec(H))!==k){var F=e[1];var E=e[2];if(F.length<1||G.nodeName.toLowerCase()==F){if(G.className.indexOf(E)>-1){return w}}}return d},"*":function(F,G){var E=G;if(F.nodeName.toLowerCase()==E){return w}return d}};var z=function(E,G){var F;if((f=/(\.|#)/.exec(G))!==k){if(D[f[1]]){F=f[1]}}F=F||"*";return D[F](E,G)};var B=function(G,E){if(G.nodeType!==1){return d}var H=d;var I=E.split(",");for(var F=0;F<I.length;F++){H=z(G,I[F]);if(H){break}}return H};j.dChecky=function(){var E=arguments;if(E.length==2){if(E[0].nodeType&&typeof(E[1])==="string"){return B(E[0],E[1])}}return d}})();(function(){var e,B,A;var C={"#":function(F,H){if((e=/(\S*)#(\S+)/.exec(H))!==k){var E=((e[1]==="")?"*":e[1]);var I=e[2];var G=F;while(G){if(G.nodeName.toLowerCase()=="body"){break}if(E=="*"||G.nodeName.toLowerCase()==E){if(G.id==I){return G
}}G=G.parentNode}}return k},".":function(G,I){if((e=/(\S*)\.(\S+)/.exec(I))!==k){var F=((e[1]==="")?"*":e[1]);var E=e[2];var H=G;while(H){if(H.nodeName.toLowerCase()=="body"){break}if(F=="*"||H.nodeName.toLowerCase()==F){if(H.className.indexOf(E)>-1){return H}}H=H.parentNode}}return k},"*":function(F,J){var H=F;var I={};var K=J.split(",");for(var G=0,E=K.length;G<E;G++){I[K[G]]=w}while(H){if(H.nodeName.toLowerCase()=="body"){break}if(I[H.nodeName.toLowerCase()]){return H}H=H.parentNode}return k}};var D=function(F,H){var G;if((f=/(\.|#|:\w+)/.exec(H))!==k){if(C[f[1]]){G=f[1]}}G=G||"*";var E=k;if((E=C[G](F,H))!=k){return E}return k};var z=function(I,F){if(!F||typeof F!=="string"){return k}var H=I;var J=F.split(" ");for(var G=0,E=J.length;G<E;G++){if((H=D(H,J[G]))==k){return k}}return H};j.dFindy=function(){var E=arguments;if(E.length==1){throw new Error("need more arguments")}else{if(E.length==2){if(E[0].nodeType&&typeof(E[1])==="string"){return z(E[0],E[1])}}}return k}})();(function(){var e=function(A){this.selectSingleNode=function(B){if(!A){return k
}return A.selectSingleNode(B)};this.selectNodes=function(B){if(!A){return[]}return A.selectNodes(B)};this.getAttributeNode=function(B){if(!A){return k}return A.getAttributeNode(B)};this.hasChildNodes=function(){if(!A){return d}return A.hasChildNodes()};this.text=A?(A.textContent||A.text):k;this.type=A?A.nodeType:0;this.name=(A&&A.nodeType==1)?(A.nodeName||""):"";return this};e.prototype={getValueOrDefault:function(B,A){if(B===""){return A}else{if(typeof(A)==="number"){return(isNaN(B)?0:parseInt(B))}else{if(typeof(A)==="boolean"){return !!B}else{return B}}}},xText:function(A){A=A||"";var B=this.text;B=(B||"").trim();return this.getValueOrDefault(B,A)},xAttr:function(C,B){B=B||"";var A=this.getAttributeNode(C);var D=(!A)?"":A.nodeValue.trim();return this.getValueOrDefault(D,B)},xGet:function(A){return xGetty(this,A)},xGets:function(A){return xGetties(this,A)}};var z=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML4.DOMDocument","MSXML3.DOMDocument","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XmlDom"];
j.xCreate=function(C){if(!!(j.attachEvent&&!j.opera)){var B=(function(){var E=k;for(var D=0;D<z.length;D++){try{E=new ActiveXObject(z[D])}catch(F){}if(E!==k){return E}}return k})();if(B===k){return k}B.async=d;B.loadXML(C);if(B.parseError.errorCode!==0){return k}return new e(B)}else{var A=new DOMParser();var B=A.parseFromString(new String(C),"text/xml");return new e(B)}};j.xGetty=function(A,B){if(A===k){return k}return new e(A.selectSingleNode(B))};j.xGetties=function(D,F){if(D===k){return[]}var E=[];var B=D.selectNodes(F);for(var C=0,A=B.length;C<A;C++){E.push(new e(B[C]))}return E}})();function t(e,A){for(var z in A){e[z]=A[z]}return e}var n=function(){this.empty=true;this.shorthand=false;this.properties={}};n.TAGS_FOR_PRESENTATION={U:{textDecoration:"underline"},B:{fontWeight:"bold"},STRONG:{fontWeight:"bold"},I:{fontStyle:"italic"},EM:{fontStyle:"italic"},S:{textDecoration:"line-through"},STRIKE:{textDecoration:"line-through"},INS:{textDecoration:"underline"},DEL:{textDecoration:"line-through"},FONT:function(z){var e={};
if(z.face){e.fontFamily=z.face}if(z.color){e.color=z.color}var A=["","x-small","small","medium","large","x-large","xx-large"];if(z.size){var B=z.size;e.fontSize=isNaN(B)?B:A[Math.min(Math.max(1,B),6)]}return e}};n.FONT_RELATED_CSS_PROPERTIES={font:"font","font-style":"fontStyle","font-weight":"fontWeight","font-size":"fontSize","font-family":"fontFamily","text-decoration":"textDecoration",color:"color","background-color":"backgroundColor"};n.create=function(G,C){var H=new n();var B=n.TAGS_FOR_PRESENTATION[G];if(B){var F=(typeof B=="function")?B(C):B;for(var e in F){H.setProperty(e,F[e])}}var A=C.style;if(A){A=A.replace(/[\w-]+:\s?;/g,"");var E=A.split(/; ?|: ?/);for(var D=0;D<E.length-1;D+=2){var z=n.FONT_RELATED_CSS_PROPERTIES[E[D].toLowerCase()];if(z){if(z!="backgroundColor"||(n.TAGS_FOR_PRESENTATION[G]||G=="SPAN")){H.setProperty(z,E[D+1])}}}}return H.getComputedStyles()};n.FONT_CSS_REGEXP=/(.*?)(\w+)(\/\w+)?\s+(['"]?[\w\uac00-\ud7a3]+['"]?)$/;n.NORMAL_VALUE="normal";n.prototype.isEmpty=function(){return this.empty
};n.prototype.setProperty=function(e,z){if(/^font$/i.test(e)){var A=this.fromShorthand(z);if(A){this.shorthand=true;t(this.properties,this.fromShorthand(z))}}else{this.properties[e]=z}this.empty=false};n.prototype.getComputedStyles=function(){if(this.shorthand){return this.toShorthand()}else{return t({},this.properties)}};n.prototype.fromShorthand=function(B){var z=B.indexOf(","),A="";if(z>0){A=B.substring(z);B=B.substring(0,z)}var E=B.match(n.FONT_CSS_REGEXP);if(E===k){return k}var D=n.NORMAL_VALUE;var e={fontSize:E[2],lineHeight:(E[3]||D).replace("/",""),fontFamily:E[4]+A,fontWeight:D,fontStyle:D,fontVariant:D};var C=E[1];if(/bold|700/i.test(C)){e.fontWeight="bold"}if(/italic/i.test(C)){e.fontStyle="italic"}if(/small-caps/i.test(C)){e.fontVarient="small-caps"}return e};n.prototype.toShorthand=function(){var B=t({},this.properties);var A=n.NORMAL_VALUE;var z=[];["fontWeight","fontStyle","fontVarient"].each(function(C){if(B[C]!=A){z.push(B[C])}});if(B.lineHeight!=A){z.push(B.fontSize+"/"+B.lineHeight)
}else{z.push(B.fontSize)}z.push(B.fontFamily);["fontWeight","fontStyle","fontVarient","fontSize","lineHeight","fontFamily"].each(function(C){delete B[C]});var e={font:z.join(" ")};e=t(e,B);return e};var i={__WORD_JOINER:"\ufeff",__WORD_JOINER_REGEXP:/\ufeff/g,__KEY:{ENTER:"13",DELETE:"46",SPACE:"32",BACKSPACE:"8",TAB:"9",PASTE:"86",CUT:"88"},I:{},X:{},define:function(e,z){return Object.extend(e,z)},available:function(z,e){if(!v("tx_"+e)){return d}if(!z){return d}if(z.use==d){return d}return w}};(function(z){function A(C){var B=C;while(B.$reference){B=B.$reference}return B}function e(F){var D=F.constructor.superclass;if(D){var H=D.prototype.initialize;D.prototype.initialize=function(){this.$reference=F};var G=new D();D.prototype.initialize=H;var C=function(I){if(!G[I]){return k}return function(){var M=arguments;var L=A(F);var J=L.$super;L.$super=G.$super;var K=G[I].apply(L,M);L.$super=J;return K}};var E={};for(var B in G){if(B.charAt(0)!="$"){if(typeof(G[B])=="function"){E[B]=C(B)}}}F.$super=E
}}z.Class={create:function(C){var B=function(){var E=this.constructor.prototype;for(var D in E){if(E[D]&&typeof(E[D])==="object"){if(E[D].constructor==Array){this[D]=[].concat(E[D])}else{this[D]=Object.extend({},E[D])}}}e(this);var F=arguments;this.initialize.apply(this,F)};return z.Class.draft(C,B)},draft:function(E,F){var C=F?F:function(){e(this)};if(E.$const){Object.extend(C,E.$const)}if(E.$extend){Object.extend(C.prototype,E.$extend.prototype);C.superclass=E.$extend}if(E.$mixins){var D=$A(E.$mixins);D.each(function(G){Object.extend(C.prototype,G)})}for(var B in E){if(B.charAt(0)!="$"){C.prototype[B]=E[B]}}return C},overwrite:function(C,B){if(C.prototype){Object.extend(C.prototype,B)}return C}};z.Mixin=z.Faculty={create:function(D){var C={};for(var B in D){if(D[B]&&typeof(D[B])==="object"){if(D[B].constructor==Array){C[B]=[].concat(D[B])}else{C[B]=Object.extend({},D[B])}}else{C[B]=D[B]}}return C},toClass:function(B,C){return z.Class.create(Object.extend({initialize:C?C:function(){}},B))
}}})(i);(function(e){Object.extend(e,{installs:[],registers:[],modules:[],modulesX:[],install:function(A,z){z.desc="[install] "+A;e.installs.push(z)},register:function(A,z){z.desc="[register] "+A;e.registers.push(z)},module:function(A,z){z.desc="[module] "+A;e.modules.push(z)},moduleX:function(A,z){z.desc="[moduleX] "+A;e.modulesX.push(z)},invoke:function(H,D,G,z,A,B){for(var C=0,E=H.length;C<E;C++){var F=H[C];F(D,G,z,A,B)}},invokeInstallation:function(B,C,D,A,z){e.invoke(e.installs,B,C,D,A,z)},invokeRegisters:function(B,C,D,A,z){e.invoke(e.registers,B,C,D,A,z)},invokeModules:function(B,C,D,A,z){e.invoke(e.modules,B,C,D,A,z)},group:function(){},groupEnd:function(){}})})(i);j.Trex=i;(function(e){e.Ev={__EDITOR_PANEL_MOUSEDOWN:"editor.panel.mousedown",__CANVAS_PANEL_KEYDOWN:"canvas.panel.keydown",__CANVAS_PANEL_KEYUP:"canvas.panel.keyup",__CANVAS_PANEL_MOUSEDOWN:"canvas.panel.mousedown",__CANVAS_PANEL_MOUSEUP:"canvas.panel.mouseup",__CANVAS_PANEL_MOUSEOVER:"canvas.panel.mouseover",__CANVAS_PANEL_MOUSEOUT:"canvas.panel.mouseout",__CANVAS_PANEL_CLICK:"canvas.panel.click",__CANVAS_PANEL_DBLCLICK:"canvas.panel.dbclick",__CANVAS_PANEL_PASTE:"canvas.panel.paste",__CANVAS_PANEL_SCROLLING:"canvas.panel.scrolling",__IFRAME_LOAD_COMPLETE:"iframe.load.complete",__IFRAME_LOADING_TIME:"iframe.loading.time",__CANVAS_SOURCE_PANEL_CLICK:"canvas.source.panel.click",__CANVAS_SOURCE_PANEL_KEYDOWN:"canvas.source.panel.mousedown",__CANVAS_SOURCE_PANEL_MOUSEDOWN:"canvas.source.panel.mousedown",__CANVAS_TEXT_PANEL_CLICK:"canvas.text.panel.click",__CANVAS_MODE_CHANGE:"canvas.mode.change",__TOOL_CLICK:"toolbar.button.click",__TOOL_SHORTCUT_KEY:"toolbar.shortcut",__ON_SUBMIT:"editor.submit",__CANVAS_WRAP_WIDTH_CHANGE:"canvas.wrap.width.change",__CANVAS_HEIGHT_CHANGE:"canvas.height.change",__CANVAS_PANEL_QUERY_STATUS:"canvas.panel.style.change",__CANVAS_PANEL_DELETE_SOMETHING:"canvas.panel.delkey.press",__ENTRYBOX_ENTRY_ADDED:"entrybox.entryadded",__ENTRYBOX_ENTRY_MODIFIED:"entrybox.entrymodified",__ENTRYBOX_ENTRY_REMOVED:"entrybox.entryremoved",__ENTRYBOX_ALL_ENTRY_REMOVED:"entrybox.removed.all.perfectly",__ENTRYBOX_CAPACITY_UPDATE:"entrybox.capacity.update",__ATTACHBOX_SHOW:"attachbox.show",__ATTACHBOX_HIDE:"attachbox.hide",__CANVAS_BEFORE_UNLOAD:"canvas.unload",__CANVAS_ENTRY_ADDED:"canvas.entry.added",__COMMAND_NODE_ADDED:"cmd.entry.added",__CMD_ALIGN_LEFT:"align.left",__CMD_ALIGN_CENTER:"align.center",__CMD_ALIGN_RIGHT:"align.right",__CMD_ALIGN_FULL:"align.full",__CMD_ALIGN_IMG_LEFT:"align.img.left",__CMD_ALIGN_IMG_CENTER:"align.img.center",__CMD_ALIGN_IMG_FLOAT_LEFT:"align.img.floatleft",__CMD_ALIGN_IMG_FLOAT_RIGHT:"align.img.floatright",__TOOL_CELL_LINE_CHANGE:"tool.cell.line.change",__CANVAS_MODE_INITIALIZE:"canvas.mode.initialize",__CANVAS_DATA_INITIALIZE:"canvas.load.data",__ENTRYBOX_ENTRY_REFRESH:"entrybox.entryrefresh",__PASTE_SEARCHRESULT:"trex.paste.info",__RUNTIME_EXCEPTION:"editor.runtime.exception",__REPORT_TO_MAGPIE:"editor.report.magpie",__SHOULD_CLOSE_MENUS:"editor.shouldclosemenus",__AUTOSAVER_LIST_OPENED:"editor.autosaver.listopened",__CANVAS_IMAGE_PLACEHOLDER_DBLCLICK:"canvas.image.placeholder.dbclick"}
})(i);var m={fire:function(A,e){if(A&&A.tagName){var z=e[A.tagName.toLowerCase()];if(z){z(A,e)}else{m.propagateToParent(A,e)}}else{}},propagateToParent:function(z,e){var B=z.parentNode;if(B&&B.tagName&&B.tagName.toLowerCase){var A=e[B.tagName.toLowerCase()];if(A){A(B,e)}else{m.propagateToParent(B,e)}}},stopPropagation:function(){}};var o=function(A,B,e,z){return{data:A,style:{padding:B,backgroundColor:e,border:z}}};i.__CONFIG_COMMON={thumbs:{options:[{color:"#FF0000"},{color:"#FF5E00"},{color:"#FFBB00"},{color:"#FFE400"},{color:"#ABF200"},{color:"#1FDA11"},{color:"#00D8FF"},{color:"#0055FF"},{color:"#0900FF"},{color:"#6600FF"},{color:"#FF00DD"},{color:"#FF007F"},{color:"#000000"},{color:"#FFFFFF"},{color:"#FFD8D8"},{color:"#FAE0D4"},{color:"#FAECC5"},{color:"#FAF4C0"},{color:"#E4F7BA"},{color:"#CEFBC9"},{color:"#D4F4FA"},{color:"#D9E5FF"},{color:"#DAD9FF"},{color:"#E8D9FF"},{color:"#FFD9FA"},{color:"#FFD9EC"},{color:"#F6F6F6"},{color:"#EAEAEA"},{color:"#FFA7A7"},{color:"#FFC19E"},{color:"#FFE08C"},{color:"#FAED7D"},{color:"#CEF279"},{color:"#B7F0B1"},{color:"#B2EBF4"},{color:"#B2CCFF"},{color:"#B5B2FF"},{color:"#D1B2FF"},{color:"#FFB2F5"},{color:"#FFB2D9"},{color:"#D5D5D5"},{color:"#BDBDBD"},{color:"#F15F5F"},{color:"#F29661"},{color:"#F2CB61"},{color:"#E5D85C"},{color:"#BCE55C"},{color:"#86E57F"},{color:"#5CD1E5"},{color:"#6699FF"},{color:"#6B66FF"},{color:"#A366FF"},{color:"#F261DF"},{color:"#F261AA"},{color:"#A6A6A6"},{color:"#8C8C8C"},{color:"#CC3D3D"},{color:"#CC723D"},{color:"#CCA63D"},{color:"#C4B73B"},{color:"#9FC93C"},{color:"#47C83E"},{color:"#3DB7CC"},{color:"#4174D9"},{color:"#4641D9"},{color:"#7E41D9"},{color:"#D941C5"},{color:"#D9418D"},{color:"#747474"},{color:"#5D5D5D"},{color:"#980000"},{color:"#993800"},{color:"#997000"},{color:"#998A00"},{color:"#6B9900"},{color:"#2F9D27"},{color:"#008299"},{color:"#003399"},{color:"#050099"},{color:"#3D0099"},{color:"#990085"},{color:"#99004C"},{color:"#4C4C4C"},{color:"#353535"},{color:"#670000"},{color:"#662500"},{color:"#664B00"},{color:"#665C00"},{color:"#476600"},{color:"#22741C"},{color:"#005766"},{color:"#002266"},{color:"#030066"},{color:"#290066"},{color:"#660058"},{color:"#660033"},{color:"#212121"},{color:"#000000"}],transparent:{color:"transparent",border:"#999999",image:"#iconpath/ic_transparent4.gif?v=2",thumb:"#iconpath/txt_transparent.gif?v=2",thumbImage:"#iconpath/color_transparent_prev.gif?v=2"}},textbox:{options:[o("txc-textbox1","10px","#ffffff","1px solid #f7f7f7"),o("txc-textbox2","10px","#eeeeee","1px solid #eeeeee"),o("txc-textbox3","10px","#fefeb8","1px solid #fefeb8"),o("txc-textbox4","10px","#fedec7","1px solid #fedec7"),o("txc-textbox5","10px","#e7fdb5","1px solid #e7fdb5"),o("txc-textbox6","10px","#dbe8fb","1px solid #dbe8fb"),o("txc-textbox7","10px","#ffffff","1px dashed #cbcbcb"),o("txc-textbox8","10px","#eeeeee","1px dashed #c1c1c1"),o("txc-textbox9","10px","#fefeb8","1px dashed #f3c534"),o("txc-textbox10","10px","#fedec7","1px dashed #fe8943"),o("txc-textbox11","10px","#e7fdb5","1px dashed #9fd331"),o("txc-textbox12","10px","#dbe8fb","1px dashed #79a5e4"),o("txc-textbox13","10px","#ffffff","1px solid #cbcbcb"),o("txc-textbox14","10px","#eeeeee","1px solid #c1c1c1"),o("txc-textbox15","10px","#fefeb8","1px solid #f3c534"),o("txc-textbox16","10px","#fedec7","1px solid #fe8943"),o("txc-textbox17","10px","#e7fdb5","1px solid #9fd331"),o("txc-textbox18","10px","#dbe8fb","1px solid #79a5e4"),o("txc-textbox19","10px","#ffffff","3px double #cbcbcb"),o("txc-textbox20","10px","#eeeeee","3px double #c1c1c1"),o("txc-textbox21","10px","#fefeb8","3px double #f3c534"),o("txc-textbox22","10px","#fedec7","3px double #fe8943"),o("txc-textbox23","10px","#e7fdb5","3px double #9fd331"),o("txc-textbox24","10px","#dbe8fb","3px double #79a5e4")]}};
var r=function(){var z=d;var e=[];var E={};var H={cdnHost:"//s1.daumcdn.net/editor",cmnHost:"http://editor.daum.net",wrapper:"tx_trex_container",form:"tx_editor_form",txIconPath:"images/icon/editor/",txDecoPath:"images/deco/contents/",params:[],events:{preventUnload:w,useHotKey:w},save:{},adaptor:{},toolbar:{},sidebar:{attachbox:{},embeder:{},attacher:{},searcher:{}},plugin:{}};var B=function(){return{Tool:H.toolbar,Sidebar:H.sidebar,Plugin:H.plugin,Adaptor:H.adaptor,Save:H.save,Attacher:H.sidebar.attacher,Embeder:H.sidebar.embeder,Searcher:H.sidebar.searcher}};var G=function(K,J){if(z){throw new Error("configure is already setup (addParameter)")}E[K]=J};var A={getUrl:function(L,M){if(L==k){return k}L=L.replace(/#host#path\/pages\//g,EditorJSLoader.getPageBasePath());L=L.replace(/#host/g,H.txHost);L=L.replace(/#path\/?/g,H.txPath);L=L.replace(/#cdnhost/g,H.cdnHost);L=L.replace(/#cmnhost/g,H.cmnHost);for(var J in E){L=L.replace(new RegExp("#".concat(J),"g"),H[E[J]])}if(M){for(var K in M){L=L.replace(new RegExp("#".concat(K),"g"),M[K])
}}return L},getPopFeatures:function(J){if(J==k){return k}if(typeof(J)==="string"){return J}var K=[];["toolbar","location","directories","menubar"].each(function(L){K.push(L+"="+(J[L]||"no"))});["scrollbars","resizable"].each(function(L){K.push(L+"="+(J[L]||"yes"))});["width","height"].each(function(L){K.push(L+"="+(J[L]||"500"))});["left","top"].each(function(L){K.push(L+"="+(J[L]||"100"))});return K.join(",")},getDecoPath:function(J){return J.replace(/#decopath\/?/,this.getUrl(H.txDecoPath))},getIconPath:function(J){return J.replace(/#iconpath\/?/,this.getUrl(H.txIconPath))},setup:function(J){v.deepcopy(H,J);H.params.each(function(K){G(K,K)});e.each(function(K){K(H)});z=w;this.setupVersion();return H},setupVersion:function(){H.txVersion=Editor.version},addParameter:function(K,J){G(K,J)},clone:function(J){return v.deepcopy({},J)},merge:function(){var J={};$A(arguments).each(function(K){v.deepcopy(J,K)});return J}};A.add=function(J,K){if(z){throw new Error("configure is already setup (mergeConfig)")
}v.deepcopy(H,J);if(K){e.push(K)}};A.get=function(J){return H[J]};var D=function(K,J,L){if(z){throw new Error("configure is already setup (mergeConfig)")}this[K]=this[K]||{};v.deepcopy(this[K],J);if(L){e.push(L)}};var C=function(J){return this[J]};var I=B();for(var F in I){A["add"+F]=D.bind(I[F]);A["get"+F]=C.bind(I[F])}return A}();j.TrexConfig=r;var l=function(){var A={};function e(B){return(B.indexOf("#iconpath")>-1)?r.getIconPath(B):B}function z(B){return(B.indexOf("#decopath")>-1)?r.getDecoPath(B):B}return{getMsg:function(C){var B=A[C]||"";return e(z(B))},addMsg:function(B){v.deepcopy(A,B)},printAll:function(){for(var B in A){if(A.hasOwnProperty(B)){}}}}}();j.TXMSG=l.getMsg;j.TrexMessage=l;var q=function(e){this.config=e||{}};q.prototype.set=function(E,D){var C=E.split(".");var e=C[C.length-1];var z=this.config;for(var B=0;B<C.length-1;B++){var A=C[B];if(!z[A]){z[A]={}}z=z[A]}if(v.isPrimitiveType(D)){z[e]=D}else{if(!z[e]){z[e]={}}v.deepcopy(z[e],D)}};q.prototype.getConfig=function(){return this.config
};j.EditorConfigBuilder=q;i.MarkupTemplate={};(function(){var e={};i.define(i.MarkupTemplate,{add:function(z,A){e[z]=A},get:function(z){if(!e[z]){return{evaluate:function(){return""},evaluateToDom:function(){return""}}}if(typeof(e[z])=="string"){var A=e[z].replace(/@[\w\.]+/g,function(B){return TXMSG(B)});e[z]=new Template(A)}return e[z]},splitList:function(I,E,C){var B={row:[]};var G=C.length;var F=B.row;for(var H=0;H<I;H++){F.push({col:[]});var z=F.last().col;for(var A=0;A<E;A++){var D={image:"",data:"&nbsp;",klass:""};if(H*E+A<G){if(typeof(C[H*E+A])=="string"){D.data=C[H*E+A]}else{D=Object.extend(D,C[H*E+A])}}z.push(D)}}return B}})})();var y={};(function(){var D={"%body":["body"],"%text":["#text","br"],"%element":["#element"],"%control":["img","object","hr","table","button","iframe"],"%inline":["span","font","u","i","b","em","strong","big","small","a","sub","sup","span"],"%block":["p","div","ul","ol","h1","h2","h3","h4","h5","h6","pre","dl","hr","table","button"],"%paragraph":["p","li","dd","dt","h1","h2","h3","h4","h5","h6","td","th","div","caption"],"%wrapper":["div","ul","ol","dl","pre","xmp","table","button"],"%innergroup":["li","dd","dt","td","th"],"%outergroup":["ul","ol","dl","tr","tbody","thead","tfoot","table"],"%tablegroup":["td","th","tr","tbody","thead","tfoot","table"],"%listgroup":["li","ul","ol"],"%datagroup":["dd","dt","dl"],"%listhead":["ul","ol"]};
var z={};for(var A in D){z[A]={};if(D[A]){$A(D[A]).each(function(E){z[A][E]=w})}}function e(E){var G={};var F=E.split(",");F.each(function(I){if(z[I]){for(var H in z[I]){G[H]=w}}else{G[I]=w}});return G}var C=i.Class.create({initialize:function(E){this.patterns=E;this.map=e(E)},hasParts:function(){return(this.patterns.length>0)},include:function(G){var F=e(G);for(var E in F){if(this.map[E]){return w}}return d},memberOf:function(G){var F=e(G);for(var E in this.map){if(F[E]){return w}}return d},extract:function(H){var G=e(H);var F=[];for(var E in this.map){if(G[E]){F.push(E)}}return y.translate(F.join(","))},getExpression:function(){if(!this.exprs){var F=[];for(var E in this.map){F.push(E)}this.exprs=F.join(",")}return this.exprs}});var B={};Object.extend(y,{translate:function(E){if(!B[E]){B[E]=new C(E)}return B[E]}})})();Object.extend(y,{__POSITION:{__START_OF_TEXT:-1,__MIDDLE_OF_TEXT:0,__END_OF_TEXT:1,__EMPTY_TEXT:-2}});Object.extend(y,{isElement:function(e){return e&&e.nodeType==1},isBody:function(e){return y.isElement(e)&&e.tagName=="BODY"
},isBlock:function(e){return y.kindOf(e,"%block")},isParagraph:function(e){return y.kindOf(e,"%paragraph")},isText:function(e){return y.kindOf(e,"%text")},isControl:function(e){return y.kindOf(e,"%control")},getOwnerDocument:function(e){return e.ownerDocument||e.document},getName:function(e){return((e&&e.nodeType==1)?e.nodeName.toLowerCase():"")},getText:function(e){return e.textContent||e.text||e.innerText||""},getLength:function(e){if(!e){return 0}if(e.nodeType==1){return e.childNodes.length}else{if(e.nodeType==3){return e.nodeValue.length}}return 0},indexOf:function(A){if(!A){return -1}var C=A.parentNode;for(var z=0,e=C.childNodes.length,B=C.childNodes;z<e;z++){if(B[z]==A){return z}}return -1},hasContent:function(z,e){if(!z||z.nodeType!=3){return w}var A=y.removeMeaninglessSpace(z.nodeValue);if(e){A=A.replace(i.__WORD_JOINER_REGEXP,"")}return(A!="")},removeEmptyTextNode:function(e){if(e&&e.nodeType==3&&!e.nodeValue){y.remove(e)}},hasUsefulChildren:function(z,e){if(!z){return d}var A=y.removeMeaninglessSpace(z.innerHTML);
if(e){A=A.replace(i.__WORD_JOINER_REGEXP,"")}if(!A){return d}if(A.stripTags()){return w}if(A.search(/<(img|br|hr)\s?[^>]*>/i)>-1){return w}if(A.search(/<span\sid="?tx_(start|end)_marker"?><\/span>/i)>-1){return w}return d},hasData:function(z,e){if(!z){return d}var A="";if(z.nodeType==1){A=z.innerHTML}else{A=z.nodeValue}A=y.removeMeaninglessSpace(A);if(A==""){return d}if(A.stripTags()!=""){return w}if(e){return d}if(A.search(/<br\s?\/?>/i)>-1){return w}return d},removeMeaninglessSpace:function(e){return e.replace(/(^[\f\n\r\t\v\u2028\u2029]*)|([\f\n\r\t\v\u2028\u2029]*$)/g,"")}});Object.extend(y,{search:function(B,E,e){var C=(B.length==1)?c:B[0];var D=B[B.length-1];var A=(!D||!C||!C.nodeType||typeof D!="string");if(A){return e}var z=y.translate(D);return E(C,z.getExpression())},find:function(){return this.search(arguments,dFindy,k)},collect:function(){return this.search(arguments,dGetty,k)},collectAll:function(){return this.search(arguments,dGetties,[])}});(function(){function A(C){if(C){if(typeof(C)==="function"){return C
}else{var D=y.translate(C);return function(E){if(E.nodeType==1){if(D.include("#element")){return w}else{return dChecky(E,D.getExpression())}}else{return D.include("#text")}}}}else{return k}}var B={};function e(D){D=D||"#element,#text";if(B[D]){return B[D]}var C=new z(D);B[D]=C;return C}var z=i.Class.create({initialize:function(C){this.pattern=C;this.translator=y.translate(C);this.hasClassPattern=C.indexOf(".")>=0;this.hasIdPattern=C.indexOf("#")>=0;this.matchesText=this.translator.include("#text");this.matchesElement=this.translator.include("#element")},test:function(F){var C=F.nodeType;var H=this.translator.map;if(C==1){if(this.matchesElement){return w}var E=F.tagName.toLowerCase();if(H[E]){return w}var G=[];if(this.hasClassPattern&&F.className){F.className.split(/\s/).each(function(J){G.push("."+J);G.push(E+"."+J)})}if(this.hasIdPattern&&F.id){var I=F.id;G.push("#"+I);G.push(E+"#"+I)}for(var D=0;D<G.length;D++){if(H[G[D]]){return w}}return d}else{if(C==3){return this.matchesText}}}});
Object.extend(y,{tagName:function(D,C){if(!D){return k}return D.tagName},kindOf:function(D,E){if(!D||!E){return d}var C=e(E);return C.test(D)},kindOf_old:function(C,D){if(!C||!D){return d}return A(D)(C)},ancestor:function(E,F){if(!E||!E.parentNode){return k}var D=e(F);var C=E.parentNode;while(C){if(y.isBody(C)){return k}if(D.test(C)){break}C=C.parentNode}return C},findAncestor:function(E,C,D){while(!D(E)){if(C(E)){return E}E=E.parentNode}return k},descendant:function(C,D){var E=y.descendants(C,D,w);if(E.length==0){return k}return E[0]},descendants:function(D,G,I){I=I||d;if(!D||!D.firstChild){return[]}var C=d;var E=e(G);var H=[];var F=function(L){if(I&&C){return}if(!y.first(L)){return}var M=y.children(L);for(var K=0,J=M.length;K<J;K++){if(E.test(M[K])){H.push(M[K]);C=w}else{F(M[K])}}};F(D);return H},children:function(E,F){var G=[];if(!E||!E.firstChild){return G}var D=e(F);var C=y.first(E);while(C){if(D.test(C)){G.push(C)}C=C.nextSibling}return G},next:function(E,F){if(!E||!E.nextSibling){return k
}var D=e(F);var C=E.nextSibling;while(C){if(y.hasContent(C)){if(D.test(C)){break}}C=C.nextSibling}return C},previous:function(E,F){if(!E||!E.previousSibling){return k}var D=e(F);var C=E.previousSibling;while(C){if(y.hasContent(C)){if(D.test(C)){break}}C=C.previousSibling}return C},first:function(E,F){if(!E||!E.firstChild){return k}var D=e(F);var C=E.firstChild;while(C){if(y.hasContent(C)){if(D.test(C)){break}}C=C.nextSibling}return C},last:function(E,F){if(!E||!E.lastChild){return k}var D=e(F);var C=E.lastChild;while(C){if(y.hasContent(C)){if(D.test(C)){break}}C=C.previousSibling}return C},extract:function(F,I,G){var H=[];if(!F||!I||!G){return H}var E=e(G);var C=d;var D=F.firstChild;while(D){if(y.include(D,I)){C=w}if(E.test(D)){H.push(D)}else{if(C){break}else{H=[]}}D=D.nextSibling}return C?H:[]},parent:function(C){if(!C||!C.parentNode){return k}return C.parentNode},body:function(D){if(!D||!D.parentNode){return k}var C=D.parentNode;while(C){if(y.isBody(C)){return C}C=C.parentNode}return k
},top:function(D,E){E=E||d;var C=D;while(y.first(C)){C=y.first(C)}if(E){return C}else{if(y.kindOf(C,"#tx_start_marker,#tx_end_marker")){C=C.nextSibling||C.parentNode}else{if(y.kindOf(C,"%control")){C=C.parentNode}}return C}},bottom:function(D,E){E=E||d;var C=D;while(y.last(C)){C=y.last(C)}if(E){return C}else{if(y.kindOf(C,"#tx_start_marker,#tx_end_marker")){C=C.previousSibling||C.parentNode}else{if(y.kindOf(C,"%control")){C=C.parentNode}}return C}},include:function(D,E){if(!D||!E){return d}if(D==E){return w}var C=E;while(C){if(y.isBody(C)){return d}else{if(C==D){return w}}C=C.parentNode}return d}})})();Object.extend(y,{insertFirst:function(e,z){if(!e||!z){return}if(e.firstChild){e.insertBefore(z,e.firstChild)}else{e.appendChild(z)}return z},insertAt:function(e,z){if(!e||!z){return}z.parentNode.insertBefore(e,z);return e},insertNext:function(z,A){if(!z||!A){return}var e=A.nextSibling;if(e){e.parentNode.insertBefore(z,e)}else{A.parentNode.appendChild(z)}return z},append:function(e,z){if(!e||!z){return
}e.appendChild(z);return z},remove:function(e){if(!e){return}if(e.parentNode){e.parentNode.removeChild(e)}e=k},html:function(z,e){if(!z){return}z.innerHTML=e||"";return z},clean:function(e){return y.html(e)},stuff:function(A,z){if(!A){return A}if(y.hasUsefulChildren(A,w)){return A}if(A.lastChild){var e=A;while(e.lastChild){e=e.lastChild}y.insertNext(z,e)}else{y.append(A,z)}return A}});Object.extend(y,{removeListIfEmpty:function(e){while(y.kindOf(e,"%listhead")&&e.childNodes.length==1&&y.kindOf(e.firstChild,"%listhead")){e=e.firstChild}while(y.kindOf(e,"%listhead")&&e.childNodes.length==0){var z=e.parentNode;y.remove(e);e=z}}});Object.extend(y,{moveChild:function(e,A,z,C){if(!e||!A){return}z=Math.min(Math.max(z||0),e.childNodes.length);C=Math.min(Math.max(C||e.childNodes.length),e.childNodes.length);if(z>=C){return}var B=z;while(B++<C&&z<e.childNodes.length){A.appendChild(e.childNodes[z])}},moveChildToParent:function(e){if(!e){return}while(e.firstChild){e.parentNode.insertBefore(e.firstChild,e)
}}});Object.extend(y,{replace:function(C,D){if(!C||!D){return k}if(y.getName(C)==y.getName(D)){y.remove(D);return C}else{var A=[],E=C.childNodes,e=E.length;for(var z=0;z<e;z++){A.push(E[z])}for(z=0;z<e;z++){var F=A[z];if(F.lastChild===C){var B=y.clone(F);y.moveChild(F,B);F.innerHTML="";D.appendChild(B)}else{D.appendChild(F)}}y.insertAt(D,C);y.remove(C);return D}},clone:function(A,e){var z=A.cloneNode(!!e);if(A.nodeType==1){z.removeAttribute("id")}return z}});Object.extend(y,{wrap:function(e,z){if(!e||!z){return k}if(z instanceof Array==d){z=[].concat(z)}y.insertAt(e,z[0]);z.each((function(A){y.append(e,A)}));return e},unwrap:function(e){if(!e){return k}var z=y.first(e);if(v.msie_nonstd){e.removeNode()}else{y.moveChildToParent(e);y.remove(e)}return z}});Object.extend(y,{divideText:function(z,A){if(!y.isText(z)){return z}if(A<=0||A>=z.length){return z}var e=z.cloneNode(d);z.deleteData(A,z.length-A);e.deleteData(0,A);y.insertNext(e,z);return e},divideNode:function(B,C){if(!y.isElement(B)){return k
}var z=B.childNodes.length-C;var e=B.cloneNode(d);for(var A=0;A<z;A++){y.insertFirst(e,B.lastChild)}y.insertNext(e,B);return e},splitAt:function(z,e){if(!y.isElement(z)){return}var A=y.clone(z);y.moveChild(z,A,e+1,z.childNodes.length);y.insertNext(A,z);return A},divideTree:function(e,B){var z=B,C,A;do{A=z.parentNode;C=y.indexOf(z);z=y.divideNode(A,C)}while(z.previousSibling!=e);return z},divideParagraph:function(B){var z=B;var e=y.indexOf(B);var A=z;while(z){if(y.isBody(z)){break}else{if(y.kindOf(z,"td,th,%wrapper,%outergroup")){break}else{if(y.kindOf(z,"#tx_start_marker,#tx_end_marker")){e=y.indexOf(z)}else{if(y.isControl(z)){e=y.indexOf(z)}else{if(y.isText(z)){z=y.divideText(z,e);e=y.indexOf(z)}else{z=y.divideNode(z,e);e=y.indexOf(z);A=z;if(y.kindOf(z,"p,li,dd,dt,h1,h2,h3,h4,h5,h6")){break}}}}}}z=z.parentNode}return A},wrapInlinesWithP:function(C,B){var e=y.getOwnerDocument(C);var A=y.extract(B||e.body,C,"%text,%inline,%control");if(this.hasOnlySavedCaret(A,C)){return k}var z=e.createElement("p");
y.wrap(z,A);return z},hasOnlySavedCaret:function(e,A){var z=e.findAll(function(B){return B.nodeType!=3||B.nodeValue.trim()!=""});return this.isGoogRangeCaret(A)&&z.length==1&&z[0]==A},isGoogRangeCaret:function(e){return e&&/goog_[0-9]+/.test(e.id)}});Object.extend(y,{paragraphOf:function(e){if(!e){return"p"}var z=y.translate(e);if(z.memberOf("ul,ol")){return"li"}else{if(z.memberOf("dl")){return"dd"}else{if(z.memberOf("tr,tbody,thead,tfoot,table")){return"td"}else{return"p"}}}},inlineOf:function(){return"span"},outerOf:function(e){if(!e){return"span"}var z=y.translate(e);if(z.memberOf("li")){return"ol"}else{if(z.memberOf("dd,dt")){return"dl"}else{if(z.memberOf("td,th,tr")){return"table"}else{return"p"}}}}});(function(){var z=0;var B=i.Class.create({$const:{__FONT_SIZE_BASIS:9,__REG_EXT_NUMBER:new RegExp("[0-9.]+"),__REG_EXT_UNIT:new RegExp("px|pt|em")},initialize:function(){this.unitConverter={px2em:1/12,px2pt:9/12,em2px:12,em2pt:9,pt2px:12/9,pt2em:1/9}},calculate:function(G,E){if(G==k||G.length==0){G="0em"
}if(E==k||E.length==0){E="0em"}var J=this.extractSign(E);var H=this.extractUnit(G);var F=this.extractUnit(E);var D=this.extractNumber(G).toNumber();var C=this.extractNumber(E).toNumber();if(H!=F){if(this.unitConverter[H+"2"+F]){D*=this.unitConverter[H+"2"+F]}}var I=0;if(J=="-"){I=Math.max(D-C,0)}else{I=(D+C)}I=(Math.round(I*10)/10);if(I==0){return k}else{return I+F}},needCalculation:function(C){if(C==k||typeof C!="string"){return d}else{return(C.charAt(0)=="+"||C.charAt(0)=="-")}},extractSign:function(C){var D="+";if(C.charAt(0)=="+"||C.charAt(0)=="-"){D=C.charAt(0)}return D},extractNumber:function(E){var C=0;var D;if((D=E.match(B.__REG_EXT_NUMBER))!=k){C=D[0]}if(E.indexOf("%")>-1){C=C/100}return C},extractUnit:function(E){var C="em";var D;if((D=E.match(B.__REG_EXT_UNIT))!=k){C=D[0]}return C}});var A=new B();var e={colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",datetime:"dateTime",accesskey:"accessKey",tabindex:"tabIndex",enctype:"encType",maxlength:"maxLength",readonly:"readOnly",longdesc:"longDesc",cellPadding:"cellPadding",cellSpacing:"cellSpacing",more:"more",less:"less",style:"style"};
Object.extend(y,{applyAttributes:function(E,D){if(!y.isElement(E)){return}for(var C in D){if(C=="style"){y.applyStyles(E,D[C])}else{y.setAttribute(E,C,D[C])}}},removeAttributes:function(E,D){if(!y.isElement(E)){return}for(var C in D){if(C=="style"){y.removeStyles(D[C])}else{E.removeAttribute(C,z)}}},getAttribute:function(D,C){if(!y.isElement(D)){return k}if(D&&D.getAttribute){return D.getAttribute(e[C]||C)}else{return k}},setAttribute:function(D,C,F){if(!y.isElement(D)){return}if(F==k||F.length==0||F==0){D.removeAttribute(C,z)}else{if(e[C]){D.setAttribute(e[C],F)}else{try{D[C]=F}catch(E){D.setAttribute(e[C]||C,F)}}}},setStyles:function(C,I,F){var G=C.style.cssText;var H;var K=Object.extend({},I);if(K.font){if(F){C.style.font=K.font}else{if(C.style.cssText.indexOf("font:")==-1){C.style.cssText="font: "+K.font+"; "+C.style.cssText}}delete K.font}for(var D in K){var J;if(A.needCalculation(K[D])){J=A.calculate(C.style[D],K[D])}else{J=K[D]}if(J==k){J=""}if(D=="float"){D=v.msie?"styleFloat":"cssFloat"
}H=(!C.style[D]&&(D.indexOf("font")!=0||G.indexOf("font:")==-1))||F;var E=(D=="textDecoration")&&!C.style[D].include(J);if(H){C.style[D]=J}else{if(E){C.style[D]+=" "+J}}}y._clearUselessStyle(C)},applyStyles:function(D,C){this.setStyles(D,C,w)},addStyles:function(D,C){this.setStyles(D,C,d)},removeStyles:function(G,F){var E=G.style.cssText;var D=E;for(var C in F){C=C.replace(/([A-Z])/g,"-$1");E=E.replace(new RegExp("(^| )"+C+"\\s*:[^;]+;? ?","ig"),"")}if(D!=E){G.style.cssText=E;y._clearUselessStyle(G)}},_clearUselessStyle:function(C){var D=y.getAttribute(C,"style");if(!D){C.removeAttribute("style",z)}},getStyleText:function(C){return C.style.cssText},setStyleText:function(C,D){C.style.cssText=D;!D&&y._clearUselessStyle(C)}})})();Object.extend(y,{goInto:function(z,e){if(!z||!z.scrollIntoView){return}z.scrollIntoView(e)},getScrollTop:function(e){if(!e){return 0}return(e.documentElement.scrollTop||e.body.scrollTop)},setScrollTop:function(z,e){if(!z){return}if(z.documentElement.scrollTop){z.documentElement.scrollTop=e
}else{z.body.scrollTop=e}},getScrollLeft:function(e){if(!e){return 0}return(e.documentElement.scrollLeft||e.body.scrollLeft)},setScrollLeft:function(e,z){if(!e){return}if(e.documentElement.scrollLeft){e.documentElement.scrollLeft=z}else{e.body.scrollLeft=z}},getPosition:function(C,I){if(!C){return{x:0,y:0,width:0,height:0}}I=!!I;C=v(C);var G=(I)?v.cumulativeOffset(C):v.positionedOffset(C);var D;var F=C.style.display;if(F!="none"&&F!=k){D={width:C.offsetWidth,height:C.offsetHeight}}else{var A=C.style;var H=A.visibility;var E=A.position;var z=A.display;A.visibility="hidden";A.position="absolute";A.display="block";var e=C.clientWidth;var B=C.clientHeight;A.display=z;A.position=E;A.visibility=H;D={width:e,height:B}}return{x:G[0],y:G[1],width:D.width,height:D.height}},getWidth:function(z){var e=z.style.width;if(e.isPx()){return e.parsePx()}return z.offsetWidth},setWidth:function(z,e){y.applyStyles(z,{width:e})},getHeight:function(z){var e=z.style.height;if(e.isPx()){return e.parsePx()}return z.offsetHeight
},setHeight:function(z,e){y.applyStyles(z,{height:e})},replacePngPath:function(B){if(v.msie6){if(c.location.href.indexOf("http://")>-1){return}try{var E=v.getStyle(B,"filter");var A=/src='([^']+)'/.exec(E)[1];if(!A||A=="none"){return}else{if(A.indexOf("http://")>-1){return}}var z=c.location.href.split("/");z.push("css");z.pop();A=A.replace(/\.\.\//g,function(){z.pop();return""});var C=z.join("/")+"/"+A;B.style.filter=E.replace(/src='([^']+)'/,"src='"+C+"'")}catch(D){alert(D)}}}});Object.extend(y,{EMPTY_PARAGRAPH_HTML:(v.msie_nonstd?"<p>&nbsp;</p>":"<p><br></p>")});j.$tom=y;(function(e){e.Util={_dispElIds:[],getDispElId:function(){var A;do{A="tx_entry_"+(Math.floor(Math.random()*90000)+10000)+"_"}while(e.Util._dispElIds.contains(A));e.Util._dispElIds.push(A);return A},generateKey:function(){return parseInt(Math.random()*100000000)},toStyleString:function(B){var C=[];for(var A in B){if(B[A]){C.push(A.replace(/([A-Z])/g,"-$1").toLowerCase());C.push(":");C.push(B[A]);C.push(";")}}return C.join("")
},toAttrString:function(B){var C=[];for(var A in B){if(B[A]){C.push(" "+A+'="'+B[A]+'"')}}return C.join("")},getMatchValue:function(C,B,D){var A;if((A=C.exec(B))!=k){return A[D]}else{return k}},getAttachmentType:function(B){B=(B||"").toLowerCase();var A=["image/jpg","image/jpeg","image/png","image/tiff","image/gif","image/bmp","image/x-jg","image/ief","image/pict","jpg","bmp","gif","png"];if(A.contains(B)){return"image"}return"file"},thumburl:function(A){A=(A||"").toLowerCase();switch(A){case"doc":case"docx":return z("#iconpath/pn_word.gif");case"xls":case"xlsx":return z("#iconpath/pn_xls.gif");case"ppt":case"pptx":return z("#iconpath/pn_ppt.gif");case"pdf":return z("#iconpath/pn_pdf.gif");case"txt":return z("#iconpath/pn_txt.gif");case"hwp":return z("#iconpath/pn_hwp.gif");case"zip":case"alz":return z("#iconpath/pn_zip.gif");case"mp3":case"wav":case"ogg":case"wma":case"mp4":case"ape":case"ra":case"ram":return z("#iconpath/pn_mp3.gif");case"avi":case"mpeg":case"wmv":case"asf":return z("#iconpath/pn_movie.gif");
case"swf":return z("#iconpath/pn_swf.gif");case"htm":case"html":return z("#iconpath/pn_html.gif");case"jpg":case"gif":case"png":case"bmp":return z("#iconpath/pn_etc.gif");default:return z("#iconpath/pn_etc.gif")}},prevurl:function(A){A=(A||"").toLowerCase();switch(A){case"doc":case"docx":return z("#iconpath/p_word_s.gif");case"xls":case"xlsx":return z("#iconpath/p_xls_s.gif");case"ppt":case"pptx":return z("#iconpath/p_ppt_s.gif");case"pdf":return z("#iconpath/p_pdf_s.gif");case"txt":return z("#iconpath/p_txt_s.gif");case"hwp":return z("#iconpath/p_hwp_s.gif");case"zip":case"alz":return z("#iconpath/p_zip_s.gif");case"mp3":case"wav":case"ogg":case"wma":case"mp4":case"ape":case"ra":case"ram":return z("#iconpath/p_mp3_s.gif");case"avi":case"mpeg":case"wmv":case"asf":return z("#iconpath/p_movie_s.gif");case"swf":return z("#iconpath/p_swf_s.gif");case"htm":case"html":return z("#iconpath/p_html_s.gif");case"jpg":return z("#iconpath/p_jpg_s.gif");case"gif":return z("#iconpath/p_gif_s.gif");case"png":case"bmp":return z("#iconpath/p_png_s.gif");
default:return z("#iconpath/p_etc_s.gif")}},getMatchedClassName:function(E,D){var A=d;var B="";for(var C=0;C<D.length;C++){B=D[C];if(v.hasClassName(E,B)){A=B;break}}return A},getAllAttributesFromEmbed:function(B){var E={};B=B.replace(/<embed|>/ig,"");try{var D=/(\w+)=((?:\")[^\"]+(?:\"|$)|(?:')[^']+(?:'|$)|(?:[^\"'][^ \n]+($| |\n)))/ig;var A;while((A=D.exec(B))!=k){E[A[1].trim().toLowerCase()]=A[2].replace(/^(\"|')/i,"").replace(/(\"|')$/i,"").trim()}}catch(C){}return E},getAllAttributes:function(C){var D={};var A;var B=/style="(?:\s*|(?:[^"]*(?:;\s*)))width\s*:\s*([0-9]+)px[^"]*"/ig;while((A=B.exec(C))!=k){D.width=A[1]}B=/style="(?:\s*|(?:[^"]*(?:;\s*)))height\s*:\s*([0-9]+)px[^"]*"/ig;while((A=B.exec(C))!=k){D.height=A[1]}B=new RegExp('\\s+([a-zA-Z]+)="([^"]*)"',"g");while((A=B.exec(C))!=k){if(!D[A[1].toLowerCase()]){D[A[1].toLowerCase()]=A[2]}}B=new RegExp("\\s+([a-zA-Z]+)='([^']*)'","g");while((A=B.exec(C))!=k){if(!D[A[1].toLowerCase()]){D[A[1].toLowerCase()]=A[2]}}B=new RegExp("\\s+([a-zA-Z]+)=([^\\s>]*)","g");
while((A=B.exec(C))!=k){if(!D[A[1].toLowerCase()]){D[A[1].toLowerCase()]=A[2]}}return D}};e.HtmlCreator={createTableMarkup:function(I,E,C){var B=[];B.push('<table unselectable="on">');B.push("<tbody>");var G=C.length;var D;for(var H=0;H<I;H++){B.push("<tr>");for(var A=0;A<E;A++){if(H*E+A<G){D=C[H*E+A];if(D.image){var F=r.getIconPath(D.image);B.push('<td class="tx-menu-list-item"><a href="javascript:;"><span class="'+(D.klass||"")+'"><img src="'+F+'" data="'+D.data+'"/></span></a></td>')}else{B.push('<td class="tx-menu-list-item"><a href="javascript:;"><span class="'+(D.klass||"")+'">'+D.data+"</span></a></td>")}}else{B.push('<td class="tx-menu-list-item"><a href="javascript:;"><span class="">&nbsp;</span></a></td>')}}B.push("</tr>")}B.push("</tbody>");B.push("</table>");return B.join("\n")}};e.String={escapeQuot:function(A){return A.replace(new RegExp('"',"g"),"&quot;").replace(new RegExp("'","g"),"&#39;")},unescapeQuot:function(A){return A.replace(new RegExp("&quot;","gi"),'"').replace(new RegExp("&#39;","g"),"'")
},htmlspecialchars:function(A){return e.String.escapeQuot(A.replace(new RegExp("&","g"),"&amp;").replace(new RegExp("<","g"),"&lt;").replace(new RegExp(">","g"),"&gt;"))},unHtmlspecialchars:function(A){return e.String.unescapeQuot(A.replace(new RegExp("&amp;","gi"),"&").replace(new RegExp("&lt;","gi"),"<").replace(new RegExp("&gt;","gi"),">"))},parseAttribute:function(B,E){var F=new RegExp("(^|\\W)"+E+'="([^"]*)"',"gi");var D=new RegExp("(^|\\W)"+E+"='([^']*)'","gi");var C=new RegExp("(^|\\W)"+E+"=([^\\s>]*)","gi");var A;if(A=F.exec(B)){return A[2]}else{if(A=D.exec(B)){return A[2]}else{if(A=C.exec(B)){return A[2]}else{return""}}}},changeAttribute:function(C,B,F,D){var I=new RegExp("(^|\\W)("+B+'=")'+F+'(")',"gi");var H=new RegExp("(^|\\W)("+B+"=')"+F+"(')","gi");var G=new RegExp("(^|\\W)("+B+"=)"+F,"gi");var E=new RegExp("<([\\w]+\\s*)","gi");var A=d;if(C.search(I)>-1){A=w;C=C.replace(I,"$1$2"+D+"$3")}if(C.search(H)>-1){A=w;C=C.replace(H,"$1$2"+D+"$3")}if(C.search(G)>-1){A=w;C=C.replace(G,"$1$2"+D)
}if(!A){C=C.replace(E,"<$1"+B+"="+D+" ")}return C}};e.Validator=e.Class.create({initialize:function(){},strip:function(A){return A.stripTags().replace(/&nbsp;/g,"").replace(e.__WORD_JOINER_REGEXP,"").trim()},exists:function(A){if(!A){return d}if(this.strip(A)==""){if(A.search(/<(img|iframe|object|embed|table|hr|script|TXDB)/i)<0){return d}}return w},equals:function(A,B){if(!A||!B){return d}if(A.search(/<(img|iframe|object|embed|table|hr|script|TXDB)/i)<0){if(this.strip(A)==this.strip(B)){return w}}return d}});e.Repeater=e.Class.create({initialize:function(A){this.execHandler=A},start:function(A){if(this.tItv){this.clear()}this.tItv=j.setInterval(this.onTimer.bind(this),A)},clear:function(){j.clearInterval(this.tItv);this.tItv=k},onTimer:function(){if(this.execHandler!=k){this.execHandler()}}});e.Timer=e.Class.create({initialize:function(A){this.execHandler=A},start:function(A){j.setTimeout(this.onTimer.bind(this),A)},onTimer:function(){if(this.execHandler!=k){this.execHandler()}}});e.Paging=e.Class.create({$const:{DEFAULT_PAGE_SIZE:5,DEFAULT_BLOCK_SIZE:10},initialize:function(B,A){this.data=B;
this.currentpage=A.initPage||1;this.totalrow=A.totalrow||this.getTotalRow();this.pagesize=A.pagesize||e.Paging.DEFAULT_PAGE_SIZE;this.blocksize=A.blocksize||e.Paging.DEFAULT_PAGE_SIZE;this.totalpage=Math.ceil(this.totalrow/this.pagesize);this.totalblock=Math.ceil(this.totalpage/this.blocksize)},getNextPage:function(){return(this.currentpage<this.totalpage)?this.currentpage+1:0},getPrevPage:function(){return(this.currentpage>1)?this.currentpage-1:0},getNextBlock:function(){var A=Math.ceil(this.currentpage/this.blocksize);return(A<this.totalblock)?A*this.blocksize+1:0},getPrevBlock:function(){var A=Math.ceil(this.currentpage/this.blocksize);return(A>1)?(A-2)*this.blocksize+1:0},getPageList:function(){var B=[];var A=Math.ceil(this.currentpage/this.blocksize)-1;var D=(A*this.blocksize+1);var E=Math.min(this.totalpage,(D+this.blocksize-1));for(var C=D;C<=E;C++){B.push(C)}return B},movePage:function(A){this.currentpage=A||this.currentpage},getOnePageData:function(){var A=[];var D=(this.currentpage-1)*this.pagesize;
var B=Math.min(this.currentpage*this.pagesize,this.totalrow);for(var C=D;C<B;C++){A.push(this.data[C])}return A},getTotalRow:function(){return this.data.length}});e.Slidebar=e.Class.create({initialize:function(A){this.elContext=A.el;this.knobWidth=A.knobWidth;this.isDisabled=d;this.handler=function(C){if(!this.isDisabled&&typeof A.handler=="function"){A.handler(C)}};this.logicObj={interval:A.interval||5,min:A.min||0,max:A.max||100};this.physicObj={min:0,width:A.barSize||100};this.physicObj.max=this.physicObj.width-this.knobWidth;this.physicObj.interval=this.logicObj.interval*this.physicObj.max/this.logicObj.max;this.startPos=0;this.startX=0;this.isDrag=d;this.result=0;var B=y.collect(this.elContext,"dd.tx-slide");y.collect(B,"span.tx-slide-min").innerHTML="";y.collect(B,"span.tx-slide-max").innerHTML="";this.bindEvent();this.setKnobPosition(A.defaultValue||A.min||0)},regenerate:function(A){A=parseInt(A*this.physicObj.width/this.logicObj.max);this.setKnobPosition(A)},bindEvent:function(){var C=y.collect(this.elContext,"dd.tx-slide");
var B=y.collect(C,"a.tx-slide-prev");var A=y.collect(C,"a.tx-slide-next");var E=y.collect(C,"div.tx-slide-bar");var D=this.elKnob=y.collect(C,"div.tx-slide-knob");v.observe(D,"mousedown",function(F){this.isDrag=w;this.startPos=this.getKnobPosition();this.startX=F.clientX;v.stop(F)}.bind(this));v.observe(D,"mouseup",function(){this.isDrag=d}.bind(this));v.observe(this.elContext,"mousemove",function(F){if(this.isDrag){this.setKnobPosition(this.startPos+F.clientX-this.startX);v.stop(F);this.handler(this.result)}}.bind(this));v.observe(B,"click",function(H){var G=Math.round(this.physicObj.interval)-1;var F=this;var I=function(){var J=F.getKnobPosition();F.setKnobPosition(J-1);if(G-->0){setTimeout(I,10)}else{F.handler(F.result)}};I();v.stop(H)}.bind(this));v.observe(A,"click",function(H){var G=Math.round(this.physicObj.interval);var F=this;var I=function(){var J=F.getKnobPosition();F.setKnobPosition(J+1);if(--G>0){setTimeout(I,10)}else{F.handler(F.result)}};I();v.stop(H)}.bind(this));v.observe(this.elContext,"mouseup",function(){if(this.isDrag){this.isDrag=d
}}.bind(this));v.observe(D,"click",function(F){v.stop(F)}.bind(this));v.observe(E,"click",function(G){if(!this.isDrag){var F=G.layerX||G.x;this.setKnobPosition(F-this.knobWidth/2);this.handler(this.result)}}.bind(this))},getKnobPosition:function(){var A=v.getStyle(this.elKnob,"left");return A.parsePx()},setKnobPosition:function(A){A=(A<this.physicObj.max)?A:this.physicObj.max;A=(A>this.physicObj.min)?A:this.physicObj.min;v.setStyle(this.elKnob,{left:A.toPx()});this.result=Math.round(A*this.logicObj.interval/this.physicObj.interval)},setDisable:function(){this.isDisabled=w},setEnable:function(){this.isDisabled=d},getDisabled:function(){return this.isDisabled}});e.DynamicSizer=e.Class.create({initialize:function(A){this.config=A;this.wrapper=A.el;this.elEventContext=tx.div({className:"tx-dynamic-sizer-context"});this.currentSize={row:0,col:0};this.dynamicSizingEnabled=w;if(!A.moveHandler){A.moveHandler=function(){}}if(!A.clickHandler){A.clickHandler=function(){}}this.wrapper.appendChild(this.elEventContext);
this.previewTable=new e.DynamicSizer.PreviewTable({parentEl:this.elEventContext,mouseOverHandler:this.changeSize.bind(this),mouseClickHandler:this.selectSize.bind(this)})},clear:function(){this.dynamicSizingEnabled=w;this.changeSize(0,0)},changeSize:function(B,A){if(this.dynamicSizingEnabled){this.currentSize.row=B;this.currentSize.col=A;this._changeSelectionSize(B,A);this.config.moveHandler(B,A)}},_changeSelectionSize:function(B,A){this.previewTable.moveSelectionPos(B,A)},toggleDynamicSizing:function(){this.dynamicSizingEnabled=!this.dynamicSizingEnabled;if(this.dynamicSizingEnabled){this.selection.enableResize()}else{this.selection.disableResize()}},selectSize:function(A){this.config.clickHandler(A,this.currentSize)},getCurruentSize:function(){return this.currentSize}});e.DynamicSizer.PreviewTable=e.Class.create({$const:{DEFAULT_TD_STYLE:{},DEFAULT_TABLE_PROPERTY:{cellpadding:"0",cellspacing:"1"},MAX_SIZE:{COL:10,ROW:10}},initialize:function(B){this.config=B;this.elTable=k;this.elTable=this.generateTable("tx-event");
this.elSelection=tx.div({className:"tx-selection"},this.generateTable("tx-selection"));var C=this.generateTable("tx-panel");this.eventBinding();B.parentEl.appendChild(this.elTable);B.parentEl.appendChild(this.elSelection);B.parentEl.appendChild(C);var D=y.getPosition(this.elTable);var A=e.DynamicSizer.PreviewTable.MAX_SIZE;this.cellSize={width:Math.round((D.width-D.x)/A.COL),height:(D.height-D.y)/A.ROW}},generateTable:function(E){var C=tx.tbody();var B=e.DynamicSizer.PreviewTable;for(var D=0;D<B.MAX_SIZE.ROW;D++){var G=tx.tr();for(var A=0;A<B.MAX_SIZE.COL;A++){var H=tx.td(tx.div({style:B.DEFAULT_TD_STYLE}));H=this.setCoordToAttr(H,A+1,D+1);G.appendChild(H)}C.appendChild(G)}var F=tx.table(B.DEFAULT_TABLE_PROPERTY);v.addClassName(F,E||"");F.appendChild(C);return F},moveSelectionPos:function(D,B){var C=(B*this.cellSize.width).toPx();var A=(D*this.cellSize.height).toPx();v.setStyle(this.elSelection,{width:C,height:A})},setCoordToAttr:function(B,A,C){B.setAttribute("col",A);B.setAttribute("row",C);
return B},getCoordFromAttr:function(A){return{col:A.getAttribute("col")||0,row:A.getAttribute("row")||0}},eventBinding:function(){this.mouseOverHandler=this.config.mouseOverHandler;this.mouseClickHandler=this.config.mouseClickHandler;var A=this;var C=function(F){var E=v.element(F)||{};var D=(E.tagName||"").toUpperCase();if(E&&D=="TD"){var G=A.getCoordFromAttr(E);A.mouseOverHandler(G.row,G.col)}v.stop(F)};var B=function(D){A.mouseClickHandler(D)};v.observe(this.elTable,"mouseover",C);v.observe(this.elTable,"click",B)}});e.ImageScale=e.Class.create({initialize:function(C,B){if(!C.imageurl){return}if(C.actualwidth){return}var A=function(E,D){C.actualwidth=E;C.actualheight=D;if(B){B(E,D)}};setTimeout(function(){var D=new Image();D.onerror=function(){D=k};if(D.onreadystatechange){D.onreadystatechange=function(){if(this.readyState=="complete"){A(this.width,this.height);D=k}}}else{D.onload=function(){A(this.width,this.height);D=k}}D.src=C.imageurl},10)}});function z(A){var B=r.getIconPath(A);return B+""
}})(i);i.TableUtil={isDaumTable:function(e){return v.hasClassName(e,"txc-table")},cloneNodeForEmptyTd:function(z){var e;e=z.cloneNode(d);i.TableUtil.emptyTd(e);return e},emptyTd:function(e){e.innerHTML="&nbsp;"},splitWidthByColSpan:function(z){var e;if(1<z.colSpan&&z.style.width){e=parseInt(z.style.width,10);y.setStyles(z,{width:Math.floor(e/z.colSpan)+"px"},w)}},splitHeightByRowSpan:function(z){var e;if(1<z.rowSpan&&z.style.height){e=parseInt(z.style.height,10);y.setStyles(z,{height:Math.floor(e/z.rowSpan)+"px"},w)}},collapseCaret:function(A,z){var e;try{e=A.getProcessor().createGoogRangeFromNodes(z,0,z,0);e.select()}catch(B){}},getClosestByTagNames:function(e,A){var z;if(A&&typeof A.tagName==="string"){z=A.tagName.toLowerCase();if(z!=="body"){if(e.contains(z)){return A}else{return arguments.callee(e,A.parentNode)}}}return k},getTableIndexerFromTd:function(z){var e;e=i.TableUtil.getClosestByTagNames(["table"],z);return new i.TableUtil.Indexer(e)}};i.TableUtil.Boundary=i.Class.create({initialize:function(e){this.top=-1;
this.left=-1;this.bottom=-1;this.right=-1;if(e){this.set(e)}},getTop:function(){return this.top},getLeft:function(){return this.left},getBottom:function(){return this.bottom},getRight:function(){return this.right},setTop:function(e){this.top=e},setLeft:function(e){this.left=e},setBottom:function(e){this.bottom=e},setRight:function(e){this.right=e},set:function(e){if("top" in e){this.setTop(e.top)}if("left" in e){this.setLeft(e.left)}if("bottom" in e){this.setBottom(e.bottom)}if("right" in e){this.setRight(e.right)}},isValid:function(){if(this.top===-1){return d}if(this.left===-1){return d}if(this.bottom===-1){return d}if(this.right===-1){return d}return w},addBoundary:function(B,z){var A,e;A=this.addStartBoundary(B,z);e=this.addEndBoundary(B,z);return A||e},merge:function(A){var z,e;z=this.addStartBoundary(A.top,A.left);e=this.addEndBoundary(A.bottom,A.right);return z||e},addStartBoundary:function(A,e){var z;z=d;if(this.top===-1||A<this.top){this.top=A;z=w}if(this.left===-1||e<this.left){this.left=e;
z=w}return z},addEndBoundary:function(A,e){var z;z=d;if(this.bottom===-1||this.bottom<A){this.bottom=A;z=w}if(this.right===-1||this.right<e){this.right=e;z=w}return z}});i.TableUtil.Indexer=i.Class.create({initialize:function(e){this.indexData=k;this.table=k;this.resetIndex();this.setTable(e);this.makeIndex()},getRowSize:function(){return this.indexData.length},getColSize:function(){if(0<this.indexData.length){return this.indexData[0].length}return 0},getTd:function(z,e){if(this.indexData[z]){if(this.indexData[z][e]){return this.indexData[z][e]}}return k},getTdArr:function(C){var e,B,A,z;e=[];B=C.top;while(B<=C.bottom){A=this.indexData[B];z=C.left;while(z<=C.right){if(e.contains(A[z])===d){e.push(A[z])}z+=1}B+=1}return e},getTdArrHasTop:function(A){var z,D,C,e,B;z=[];e=this.getColSize();for(B=0;B<e;B+=1){D=this.getTd(A,B);C=this.getTd(A-1,B);this.uniquePushWhenDifferent(z,D,C)}return z},getTdArrHasBottom:function(A){var z,D,C,e,B;z=[];e=this.getColSize();for(B=0;B<e;B+=1){D=this.getTd(A,B);
C=this.getTd(A+1,B);this.uniquePushWhenDifferent(z,D,C)}return z},getTdArrHasLeft:function(A){var z,D,C,e,B;z=[];e=this.getRowSize();for(B=0;B<e;B+=1){D=this.getTd(B,A);C=this.getTd(B,A-1);this.uniquePushWhenDifferent(z,D,C)}return z},getTdArrHasRight:function(A){var z,D,C,e,B;z=[];e=this.getRowSize();for(B=0;B<e;B+=1){D=this.getTd(B,A);C=this.getTd(B,A+1);this.uniquePushWhenDifferent(z,D,C)}return z},getBoundary:function(F){var e,D,C,E,A,B,z;e=new i.TableUtil.Boundary();D=this.indexData;C=D.length;for(E=0;E<C;E+=1){A=D[E];if(A){B=A.length;for(z=0;z<B;z+=1){if(A[z]===F){e.addBoundary(E,z)}}}}return e},reload:function(){this.resetIndex();this.makeIndex()},uniquePushWhenDifferent:function(e,A,z){if(A!==z){if(e.contains(A)===d){e.push(A)}}},resetIndex:function(){this.indexData=[]},setTable:function(e){this.table=e},makeIndex:function(){var D,C,F,E,A,B,z,e;D=this.table.rows;C=D.length;for(F=0;F<C;F+=1){E=D[F];A=E.cells;B=A.length;for(z=0;z<B;z+=1){e=A[z];this.addCellIndex(F,e)}}},addCellIndex:function(F,e){var E,D,B,z,A,C;
E=this.getNextCellIndex(this.indexData[F]);B=e.rowSpan;for(D=0;D<B;D+=1){z=F+D;if(!this.indexData[z]){this.indexData[z]=[]}C=e.colSpan;for(A=0;A<C;A+=1){this.indexData[z][E+A]=e}}},getNextCellIndex:function(z){var A,e;if(!z){return 0}e=z.length;for(A=0;A<e;A+=1){if(!z[A]){break}}return A}});i.I.XHRequester=i.Faculty.create({createXMLHttp:function(){var A=k;try{if(j.XMLHttpRequest){A=new XMLHttpRequest()}else{if(j.ActiveXObject){A=new ActiveXObject("Msxml2.XMLHTTP");if(!A){A=new ActiveXObject("Microsoft.XMLHTTP")}}}return A}catch(z){return k}},sendRequest:function(z,A,B,C,G,H){if(A==k&&A!=""){return k}var E=k;var D=this.createXMLHttp();if(D==k){return k}var I=function(){if(D.status==200){if(z.toUpperCase()=="HEAD"){E=G(D.getAllResponseHeaders())}else{E=G(D.responseText)}}else{E=H(D.status)}D=k};try{if(C){D.onreadystatechange=function(){if(D.readyState==4){I()}}}if(z.toUpperCase()=="POST"){D.open("POST",A,C);D.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");
D.setRequestHeader("X-Requested-With","XMLHttpRequest");D.setRequestHeader("Content-Length",B.length);D.setRequestHeader("Connetion","close");D.send(B)}else{if(B&&B.length>0){A=A+((A.indexOf("?")>-1)?"&":"?")+B}D.open(z.toUpperCase(),A,C);D.setRequestHeader("X-Requested-With","XMLHttpRequest");D.send(k)}if(!C){I()}return E}catch(F){return k}}});i.Responder={callbacks:{},process:function(){},newKey:function(){var e="exe_"+Math.floor(Math.random()*100000);if(this[e]){return this.newKey()}else{return e}},register:function(z){var e=this.newKey();this.callbacks[e]=function(A){z(A);this.callbacks[e]=k}.bind(this);return e}};i.I.JSRequester=i.Faculty.create({importScript:function(B,E,D,G){if(B==k&&B!=""){return k}E=E||"utf-8";D=D||c;try{var C=D.getElementsByTagName("head")[0]||D.documentElement;var A=D.createElement("script");A.type="text/javascript";A.charset=E;A.src=B;var z=d;A.onload=A.onreadystatechange=function(){if(!z&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){z=w;
if(G){G()}A.onload=A.onreadystatechange=k;if(C&&A.parentNode){C.removeChild(A)}}};C.insertBefore(A,C.firstChild)}catch(F){console.log(F)}}});j.$stop={};j.$propagate={};i.I.JobObservable=i.Faculty.create({jobObservers:{},observeJob:function(z,e){if(!this.jobObservers[z]){this.jobObservers[z]=[]}this.jobObservers[z].push(e)},reserveJob:function(B,z,A){A=A||500;if(!this.jobObservers[B]){this.jobObservers[B]=[]}var e=this;this.jobObservers[B].push(function(){var C=$A(arguments);setTimeout(function(){z.apply(e,C)},A)})},fireJobs:function(B){var z=this;var A=$A(arguments).slice(1);if(!this.jobObservers[B]){return}try{this.jobObservers[B].each(function(e){e.apply(z,A)})}catch(C){if(C!=$stop){throw C}}}});i.I.KeyObservable=i.Faculty.create({keyObservers:{},observeKey:function(A,z){var e=function(B){return(B.ctrlKey?"T":"F")+(B.altKey?"T":"F")+(B.shiftKey?"T":"F")+"_"+B.keyCode}(A);if(!this.keyObservers[e]){this.keyObservers[e]=[]}this.keyObservers[e].push(z)},fireKeys:function(B){var A=function(D){return(D.ctrlKey?"T":"F")+(D.altKey?"T":"F")+(D.shiftKey?"T":"F")+"_"+D.keyCode
}(B);if(!this.keyObservers[A]){return}var z=this;var C=d;var e=function(){if(!C){v.stop(B);C=w}};this.keyObservers[A].each(function(D){try{D.apply(z,[B]);e()}catch(E){if(E===$stop){e()}else{if(E!==$propagate){}}}})},registerKeyEvent:function(z){try{v.observe(z,"keydown",this.fireKeys.bind(this),w)}catch(A){}}});i.I.ElementObservable=i.Faculty.create({elementObservers:{},observeElement:function(A,e){if(A==k){this.observeElement({tag:"*tx-final-body*"},e)}else{if(A.length){for(var z=0;z<A.length;z++){var B=A[z];this.observeElement(B,e)}}else{if(!this.elementObservers[A.tag]){this.elementObservers[A.tag]={}}if(!A.klass){A.klass="*tx-all-class*"}if(!this.elementObservers[A.tag][A.klass]){this.elementObservers[A.tag][A.klass]=[]}this.elementObservers[A.tag][A.klass].push(e)}}},fireElements:function(C){if(!C){return}var B=C;var A=$A(arguments).slice(1);var z=this;try{var E;if(y.kindOf(B,"img,hr,table,button,iframe")){E=this.collectObserverByElement(B.nodeName.toLowerCase(),B.className);if(E){E.each(function(e){e.apply(z,[B].concat(A))
})}}else{while(B){E=this.collectObserverByElement(B.nodeName.toLowerCase(),B.className);if(E){E.each(function(e){e.apply(z,[B].concat(A))})}if(y.isBody(B)){break}B=y.parent(B)}}}catch(D){if(D!=$stop){throw D}}this.fireFinally()},fireFinally:function(){var e=this;var z=$A(arguments).slice(1);var A=this.collectObserverByElement("*tx-final-body*");if(A){A.each(function(B){B.apply(e,[k].concat(z))})}},collectObserverByElement:function(z,e){if(!this.elementObservers[z]){return k}var C=[];e=e||"";if(e!=""){var A=e.split(" ");for(var B in this.elementObservers[z]){if(A.contains(B)){C.push(this.elementObservers[z][B])}}}if(this.elementObservers[z]["*tx-all-class*"]){C.push(this.elementObservers[z]["*tx-all-class*"])}return C.flatten()}});i.I.MouseoverObservable=i.Faculty.create({mouseoverObservers:{},observeMouseover:function(e,z,A){if(!this.mouseoverObservers[e]){this.mouseoverObservers[e]={success:[],fail:[],flag:d}}this.mouseoverObservers[e]["success"].push(z);if(A){this.mouseoverObservers[e]["fail"].push(A)
}},fireMouseover:function(C){if(!C){return}var B=C;var z=this;try{for(var A in this.mouseoverObservers){this.mouseoverObservers[A].flag=d}while(B){var F=this.collectMouseoverObserver(B);if(F.length>0){var E=this.getPositionByNode(B);F.each(function(e){e.apply(z,[B,E])})}if(y.isBody(B)){break}B=y.parent(B)}}catch(D){if(D!=$stop){throw D}}this.runMouseoverFailHandler()},runMouseoverFailHandler:function(){var z=[];for(var e in this.mouseoverObservers){if(!this.mouseoverObservers[e].flag){z.push(this.mouseoverObservers[e]["fail"])}}z.flatten().each(function(A){A()})},collectMouseoverObserver:function(E){var F=[];var A=E.className||"";var z=E.tagName;if(z){z=z.toLowerCase();if(this.mouseoverObservers[z]){F.push(this.mouseoverObservers[z]["success"]);this.mouseoverObservers[z]["flag"]=w}}if(A!=""){var B=A.split(" ");for(var D=0,e=B.length;D<e;D++){var C=z+"."+B[D];if(this.mouseoverObservers[C]){F.push(this.mouseoverObservers[C]["success"]);this.mouseoverObservers[C]["flag"]=w}}}return F.flatten()
}});i.I.Runnable=i.Faculty.create({isRunning:d,repeater:k,threads:[],startThread:function(e){if(this.repeater){this.repeater.clear()}else{this.repeater=new i.Repeater(this.runThread.bind(this))}this.repeater.start(e)},stopThread:function(){this.repeater.clear()},runThread:function(){if(this.isRunning){return}if(this.threads.length>0){this.isRunning=w;(this.threads.shift())();this.isRunning=d}},putThread:function(e,z){if(z){this.threads.unshift(e)}else{this.threads.push(e)}}});l.addMsg({"@menu.pallete.revert":"\uae30\ubcf8\uc0c9\uc73c\ub85c","@adoptor.label":"\uac00\ub098\ub2e4","@adoptor.transparent":"\ud22c\uba85"});i.MarkupTemplate.add("menu.colorpallete.text",'#{for:items}<li class="tx-menu-list-item" style="background-color:#{color}"><a unselectable="on" style="color:#{text}">#{label}</a></li>#{/for:items}');i.MarkupTemplate.add("menu.colorpallete.thumb",'#{for:items}<li class="tx-menu-list-item" unselectable="on" style="background-color:#{color};border:none;#{if:image!=null}background-image:url(#{image})#{/if:image};"></li>#{/for:items}');
i.MarkupTemplate.add("menu.colorpallete.revert",'<p class="tx-pallete-revert"><a unselectable="on" href="javascript:;" title="@menu.pallete.revert">@menu.pallete.revert</a></p>');i.I.ColorPallete=i.Faculty.create({isGradeInit:d,isPickerDisplayed:d,onregenerated:function(e,z){this.setColorValueAtInputbox(z)},setColorValueAtInputbox:function(A){if(!A){return}if(typeof A!="string"&&A.toString){A=A.toString()}var B=A.split("|")[0];if(!i.Color.getValidColor(B)){B="#000000"}var e=y.collect(this.elInner,"p.tx-pallete-input input");var z=y.collect(this.elInner,"p.tx-pallete-input span");if(A&&e&&z){e.value=B;z.style.backgroundColor=B}},hookEvent:function(A){var H=this.elMenu;var K=this.elInner=y.collect(H,"div.tx-menu-inner");var G=y.collect(K,"ul.tx-pallete-text-list");if(A.texts){var N=A.texts.options;i.MarkupTemplate.get("menu.colorpallete.text").evaluateToDom({items:N},G);var C=y.collectAll(G,"li");this.addColorClickEvent(C,N)}else{K.removeChild(G);G=k}if(A.thumbs){var I=!!A.needTrans;var F=[].concat(A.thumbs.options);
if(I){F.pop();F.push(Object.extend({},A.thumbs.transparent))}var L=y.collect(K,"ul.tx-pallete-thumb-list");i.MarkupTemplate.get("menu.colorpallete.thumb").evaluateToDom({items:F},L);var D=y.collectAll(L,"li");this.addColorClickEvent(D,F)}this.elPicker=y.collect(K,"div.tx-pallete-picker");var z=y.collect(K,"div.tx-pallete-buttons");var e=this.elMore=y.collect(z,"p.tx-pallete-more a");v.observe(e,"click",this.togglePicker.bind(this));if(A.needRevert){y.insertFirst(z,i.MarkupTemplate.get("menu.colorpallete.revert").evaluateAsDom({}));v.observe(y.collect(z,"p.tx-pallete-revert a"),"click",function(O){this.onSelect(O,k);this.hide()}.bind(this))}var M=y.collect(this.elInner,"p.tx-pallete-input");this.elPreview=y.collect(M,"span");var E=this.elInput=y.collect(M,"input");var B=this.elEnter=y.collect(M,"a");var J=this;v.observe(E,"blur",function(){J.lastValue=E.value});v.observe(B,"click",this.onColorEnter.bind(this))},addColorClickEvent:function(D,z){for(var B=0,e=D.length;B<e;B++){var A=D[B];var C=z[B];
v.observe(A,"click",this.onSelect.bindAsEventListener(this,C.color+(C.text?"|"+C.text:"")))}},_generatePicker:function(){var z=this.elPicker;var A=y.collect(z,"div.tx-pallete-pickerbox");v.observe(A,"mouseout",this.onMouseOut.bind(this));var B=this.elChromaBar=y.collect(A,"div.tx-chromabar");y.replacePngPath(B);v.observe(B,"mousedown",this.onChromDown.bindAsEventListener(this));v.observe(B,"mousemove",this.onChromMove.bindAsEventListener(this));v.observe(B,"mouseup",this.onChromUp.bindAsEventListener(this));this.elHueBar=y.collect(A,"div.tx-huebar");var e=this.elHueBar;this.hueDownHandler=this.onHueDown.bindAsEventListener(this);this.hueMoveHandler=this.onHueMove.bindAsEventListener(this);this.hueUpHandler=this.onHueUp.bindAsEventListener(this);this.hueClickHandler=this.onHueClick.bindAsEventListener(this);v.observe(e,"mousedown",this.hueDownHandler);v.observe(e,"click",this.hueClickHandler);this.nColWidth=150;this.nColHeight=120;this.nHueHeight=120;this.mRGB={r:0,g:0,b:0};this.mHSV={h:0,s:100,v:100};
this.setHueColor("FF0000")},reinitGrade:function(){var z=v.cumulativeOffset(this.elMenu);var e=v.positionedOffset(this.elChromaBar);this.iChromPos={x:(z[0]+e[0]),y:(z[1]+e[1])};e=v.positionedOffset(this.elHueBar);this.iHuePos={x:(z[0]+e[0]),y:(z[1]+e[1])}},onColorEnter:function(z){var e;if(this.elInput.value==TXMSG("@adoptor.transparent")){e="transparent"}else{e=i.Color.getValidColor(this.elInput.value)}if(e!==k){this.onSelect(z,e)}this.hide()},previewColor:function(e){this.changeColor(e)},onMouseOut:function(){if(this.lastValue!==k&&this.lastValue!==s&&this.mousedownDetected){this.changeColor(this.lastValue)}},changeColor:function(e){e=i.Color.getHexColor(e);this.elPreview.style.backgroundColor=e;if(e=="transparent"){this.elInput.value=TXMSG("@adoptor.transparent")}else{this.elInput.value=e}},enterColor:function(){if(this.elInput.value==TXMSG("@adoptor.transparent")){this.changeColor("transparent")}else{if(this.elInput.value.length==7){var e=i.Color.getValidColor(this.elInput.value);if(e!==k){this.changeColor(e)
}}}},togglePicker:function(A){var e=this.elMore;var z=this.elPicker;if(this.isPickerDisplayed){e.className="tx-more-down";v.hide(z)}else{e.className="tx-more-up";v.show(z);if(v.msie6){z.style.padding="1px";setTimeout(function(){z.style.padding="0px"},0)}if(!this.isGradeInit){this._generatePicker();this.isGradeInit=w;this.reinitGrade()}}this.isPickerDisplayed=!this.isPickerDisplayed;v.stop(A)},getChromCoords:function(z){var A=(z.clientX-this.iChromPos.x)+p.scrollLeft;var e=(z.clientY-this.iChromPos.y)+p.scrollTop;A=Math.min(this.nColWidth,Math.max(0,A));e=Math.min(this.nColHeight,Math.max(0,e));return{x:A,y:e}},getHueCoords:function(e){var z=e.offsetY||e.layerY;return Math.min(this.nHueHeight,Math.max(0,z))},getColorByEvent:function(e,C){var A=(e/(this.nColWidth))*100;var z=(1-C/(this.nColHeight))*100;var B=3;A=Math.floor(Math.min(Math.max(A,0),100));if(A<B){A=0}else{if(A>100-B){A=100}}z=Math.floor(Math.min(Math.max(z,0),100));if(z<B){z=0}else{if(z>100-B){z=100}}this.mHSV.s=A;this.mHSV.v=z;
this.mRGB=this.hsv2rgb(this.mHSV.h,this.mHSV.s,this.mHSV.v);return this.rgb2hex(this.mRGB.r,this.mRGB.g,this.mRGB.b)},onChromDown:function(){this.mousedownDetected=w},onChromMove:function(z){if(this.mousedownDetected){var A=this.getChromCoords(z);var e=this.getColorByEvent(A.x,A.y);this.previewColor(e)}},onChromUp:function(z){var A=this.getChromCoords(z);var e=this.getColorByEvent(A.x,A.y);this.previewColor(e);this.lastValue=e;this.mousedownDetected=d},getHueByEvent:function(A){var e=parseInt((A/(this.nHueHeight))*360);this.mHSV.h=Math.floor(Math.min(Math.max(e,0),360));var z=this.hsv2rgb(this.mHSV.h,100,100);return this.rgb2hex(z.r,z.g,z.b)},setHueColor:function(e){this.elChromaBar.style.backgroundColor=e},onHueDown:function(){v.observe(c,"mousemove",this.hueMoveHandler);v.observe(c,"mouseup",this.hueUpHandler)},onHueMove:function(z){var A=this.getHueCoords(z);var e=this.getHueByEvent(A);this.setHueColor(e)},onHueClick:function(z){var A=this.getHueCoords(z);var e=this.getHueByEvent(A);
this.setHueColor(e)},onHueUp:function(){v.stopObserving(c,"mousemove",this.hueMoveHandler);v.stopObserving(c,"mouseup",this.hueUpHandler)},hex2rgb:function(e){this.mRGB.r=(this.toDec(e.substr(0,1))*16)+this.toDec(e.substr(1,1));this.mRGB.g=(this.toDec(e.substr(2,1))*16)+this.toDec(e.substr(3,1));this.mRGB.b=(this.toDec(e.substr(4,1))*16)+this.toDec(e.substr(5,1));return this.mRGB},toDec:function(z){var e="0123456789ABCDEF";return e.indexOf(z.toUpperCase())},rgb2hex:function(A,z,e){A=A.toString(16);if(A.length==1){A="0"+A}z=z.toString(16);if(z.length==1){z="0"+z}e=e.toString(16);if(e.length==1){e="0"+e}return"#"+A+z+e},hsv2rgb:function(A,L,K){A%=360;L/=100;K/=100;var e=0,B=0,F=0;if(L===0){e=Math.floor(K*255);B=Math.floor(K*255);F=Math.floor(K*255)}else{var D=A/60;var C=Math.floor(D);var J=K*(1-L);var H=K*(1-L*(D-C));var G=K*(1-L*(1-(D-C)));var z=0,E=0,I=0;if(C===0){z=K;E=G;I=J}else{if(C==1){z=H;E=K;I=J}else{if(C==2){z=J;E=K;I=G}else{if(C==3){z=J;E=H;I=K}else{if(C==4){z=G;E=J;I=K}else{if(C==5){z=K;
E=J;I=H}}}}}}e=Math.floor(z*255);B=Math.floor(E*255);F=Math.floor(I*255)}return{r:e,g:B,b:F}},rgb2hsv:function(z,E,J){var B=(z/255);var H=(E/255);var L=(J/255);var D=0,M=0,K=0;var I=Math.min(B,H,L);var A=Math.max(B,H,L);var G=A-I;K=G;if(G===0){D=0;M=0}else{M=G/A;var F=(((A-B)/6)+(G/2))/G;var e=(((A-H)/6)+(G/2))/G;var C=(((A-L)/6)+(G/2))/G;if(B==A){D=C-e}else{if(H==A){D=(1/3)+F-C}else{if(L==A){D=(2/3)+e-F}}}if(D<0){D+=1}if(D>1){D-=1}}return{h:D,s:M,v:K}}});i.Color={getHexColor:function(z){z=z.trim();if(z.indexOf("rgb")<0){if(z.length>0&&(z.indexOf("-moz-use")>-1||z=="transparent")){return"transparent"}else{return z}}if(/rgba\s?\((0,\s?){3}0\)/i.test(z)){return"transparent"}var e=z.match(/rgba?\((\d+),\s*(\d+),\s*(\d+),?\s*\d*\)/i);if(!e){return z}e.shift();if(e.length<3){return z}var C;var B="#";for(var A=0;A<3;A++){C=parseInt(e[A].trim()).toString(16).toUpperCase();if(C.length==1){B=B.concat("0"+C)}else{if(C.length>2){B=B.concat("FF")}else{B=B.concat(""+C)}}}return B},getValidColor:function(z){if(z===k||z=="transparent"){return"transparent"
}var e=z.match(/#?([0-9a-f]{6}|[0-9a-f]{3})/i);if(e===k||z.length>8){return k}if(e[1].length==3){return"#"+e[1]+e[1]}else{return"#"+e[1]}},getOptColor:function(z,A){if(!z||z.length!=7||z.charAt(0)!="#"){return"#e5e5e5"}z=z.substring(1,7).toLowerCase();A=isNaN(A)?100:A;var B="#";var D,e;for(var C=0;C<3;C++){D=parseInt(z.substr(C*2,2),16);e=Math.round(Math.floor((255-D)*(1-A*0.01)+D*(A*0.02))).toString(16);if(e.length==1){B+="0"+e}else{if(e.length>2){B+="ff"}else{B+=e}}}return B}};i.I.CookieBaker=i.Faculty.create({cookieName:k,cookieValue:k,initCookie:function(e,z){this.cookieName=e;this.cookieValue=function(){var C=c.cookie.split(";");for(var B=0;B<C.length;B++){var A=C[B].replace(/^\s+/,"");if(A.indexOf(e+"=")==0){return A.substring(e.length+1)}}return k}()||"";this.maxCnt=z||3},writeCookie:function(z,C){var e=this.cookieName,B;if(C){var A=new Date();A.setTime(new Date().getTime()+C*24*60*60*1000);B="; expires="+A.toGMTString()}else{B=""}if(z===k){z=""}c.cookie=e+"="+z+B+"; path=/";this.cookieValue=z
},readCookie:function(){if(this.cookieValue===k+""){return k}return this.cookieValue},eraseCookie:function(){var e=this.cookieName;this.writeCookie(e,"",-1)},extractOptions:function(e,A){var B=e.toMap("data");var z=[];A.split("|").compact().each(function(C){if(B[C]){z.push(B[C])}}.bind(this));return z},mergeValues:function(A,z){var e=A.split("|").compact();if(e.contains(z)){return A}if(e.length>=this.maxCnt){e.pop()}e.unshift(z);return e.join("|")}});i.MarkupTemplate.add("button.itsnew",'<em class="tx-itsnew" title="new">new</em>');i.MarkupTemplate.add("button.select.text","<span>#{data}</span>");i.Button=i.Class.create({$const:{__borderClasses:{"tx-btn-trans":w,"tx-btn-lbg":w,"tx-btn-bg":w,"tx-btn-rbg":w,"tx-btn-lrbg":w,"tx-slt-tlbg":w,"tx-slt-tbg":w,"tx-slt-trbg":w,"tx-slt-blbg":w,"tx-slt-bbg":w,"tx-slt-brbg":w,"tx-slt-31bg":w,"tx-slt-31lbg":w,"tx-slt-31rbg":w,"tx-slt-70lbg":w,"tx-slt-70bg":w,"tx-slt-59bg":w,"tx-slt-42bg":w,"tx-slt-56bg":w,"tx-btn-nlrbg":w,"tx-btn-43lrbg":w,"tx-btn-52lrbg":w,"tx-btn-57lrbg":w,"tx-btn-71lrbg":w,"tx-btn-48lbg":w,"tx-btn-48rbg":w,"tx-btn-30lrbg":w,"tx-btn-46lrbg":w,"tx-btn-67lrbg":w,"tx-btn-49lbg":w,"tx-btn-58bg":w,"tx-btn-46bg":w,"tx-btn-49rbg":w,"tx-btn-widget":w,"tx-btn-widget-tbg":w,"tx-btn-widget-brbg":w},addBorderClass:function(e){i.Button.__borderClasses[e]=w
},getBorderClass:function(B){var e=v.classNames(B);for(var A=0;A<e.length;A++){var z=e[A];var C=i.Button.__borderClasses[z];if(C){return z}}}},hasState:k,isDisabled:k,lastValue:k,lastText:k,elButton:k,elIcon:k,borderClass:k,_command:function(){},setCommand:function(e){this._command=e},initialize:function(e){var C=this.config=e;if(C.borderClass){i.Button.addBorderClass(C.borderClass)}this.itsNew=!!C.itsnew;this.hasState=!!C.status;this.isDisabled=d;this.lastValue=C.selectedValue||k;if(e.el){this.elButton=e.el}else{var z=C.id||"tx_"+C.identity;this.elButton=$must(z+(C.initializedId||""))}var B=this.elButton;var A=this.elIcon=y.collect(B,"a");if(!A){throw new Error("[Exception]Trex.Button : can't find elIcon for button '"+z+"'")}this.borderClass=i.Button.getBorderClass(B);if(this.oninitialized){this.oninitialized.bind(this)(C)}this.generate();if(this.itsNew){y.append(A,i.MarkupTemplate.get("button.itsnew").evaluateAsDom({}))}if(C.selectedValue&&this.setValue){this.setValue(C.selectedValue)
}if(C.selectedText&&this.setText){this.setText(C.selectedText)}if(C.selectedState&&this.setState){this.setState(C.selectedState)}},generate:function(){var e=this.elIcon;this.hdlMouseDown=this.onMouseDown.bindAsEventListener(this);this.hdlMouseOver=this.onMouseOver.bindAsEventListener(this);this.hdlMouseOut=this.onMouseOut.bindAsEventListener(this);this.hdlKeydown=this.onKeyDown.bindAsEventListener(this);this.hdlClick=this.onClick.bindAsEventListener(this);v.observe(e,"mousedown",this.hdlMouseDown);v.observe(e,"mouseover",this.hdlMouseOver);v.observe(e,"mouseout",this.hdlMouseOut);v.observe(e,"keydown",this.hdlKeydown);v.observe(e,"click",this.hdlClick);if(this.ongenerated){this.ongenerated.bind(this)(this.config)}},removeHandler:function(){if(!this.hdlMouseDown){return}var e=this.elIcon;v.stopObserving(e,"mousedown",this.hdlMouseDown);v.stopObserving(e,"mouseover",this.hdlMouseOver);v.stopObserving(e,"mouseout",this.hdlMouseOut);v.stopObserving(e,"keydown",this.hdlKeydown);v.stopObserving(e,"click",this.hdlClick)
},getCurrentBorderClass:function(B){var e=v.classNames(B);for(var A=0;A<e.length;A++){var z=e[A];if(z.indexOf(this.borderClass)!=-1){return z}}return s+""},normalState:function(){var e=this.getCurrentBorderClass(this.elButton);if(e==this.borderClass){return}v.removeClassName(this.elButton,e);v.addClassName(this.elButton,this.borderClass)},hoveredState:function(){var e=this.getCurrentBorderClass(this.elButton);v.removeClassName(this.elButton,e);v.addClassName(this.elButton,this.borderClass+"-hovered");this.decreaseZindex()},pushedState:function(){var e=this.getCurrentBorderClass(this.elButton);v.removeClassName(this.elButton,e);v.addClassName(this.elButton,this.borderClass+"-pushed")},currentState:function(){var z=this.getCurrentBorderClass(this.elButton);var e="normal";if(z.indexOf("-pushed")!=-1){e="pushed"}else{if(z.indexOf("-hovered")!=-1){e="hovered"}}return e},isPushed:function(){return("pushed"==this.currentState())},hasMenu:function(){return this.tool?!!(this.tool.menu):d},onMouseDown:function(e){if(e){v.stop(e)
}if(this.isDisabled){return}if(this.hasMenu()||this.hasState){if(this._command(e)===d){return}}else{this.evsessionstarted=w}if(this.isPushed()){this.normalState()}else{this.pushedState()}},onMouseOver:function(){if(this.isDisabled||this.isPushed()){return}this.hoveredState()},onMouseOut:function(){if(this.evsessionstarted){this.normalState();this.evsessionstarted=d}if(this.isDisabled||this.isPushed()){return}this.normalState()},onClick:function(e){if(e){v.stop(e)}if(this.isDisabled){return}if(!this.hasState){this._command();this.normalState();this.evsessionstarted=d}},onKeyDown:function(e){if(e.keyCode===13){this.onMouseDown(e);this.onClick(e)}},updateAfterCommand:function(e,z){this.setValueAndText(e,z);this.normalState()},setValueAndText:function(e,z){this.setValue(e);this.setText(z)},setValue:function(e){if(e){this.lastValue=e}},setText:function(e){this.lastText=e},getValue:function(){return this.lastValue},getText:function(){return this.lastText},setState:function(e){if(e){this.pushedState()
}else{this.normalState()}},setClassName:function(e){this.elIcon.className=e},disable:function(){if(this.elButton){this.isDisabled=w;v.addClassName(this.elButton,"tx-disable")}},enable:function(){if(this.elButton){this.isDisabled=d;v.removeClassName(this.elButton,"tx-disable")}},release:function(){if(this.isDisabled){return}if(this.hasMenu()||!this.hasState){this.normalState()}},increaseZindex:function(){var e=10;if(y.parent(this.elButton)){v.setStyle(y.parent(this.elButton),{zIndex:e})}},decreaseZindex:function(){var e=4;if(y.parent(this.elButton)){v.setStyle(y.parent(this.elButton),{zIndex:e})}}});i.Button.Select=i.Class.create({$extend:i.Button,ongenerated:function(){i.MarkupTemplate.get("button.select.text").evaluateToDom({data:y.getText(this.elIcon)},this.elIcon);this.elText=y.collect(this.elIcon,"span");var e=y.collect(this.elButton,"a.tx-arrow");if(e){v.observe(e,"mousedown",this.onMouseDown.bindAsEventListener(this));v.observe(e,"mouseover",this.onArrowMouseOver.bindAsEventListener(this));
v.observe(e,"mouseout",this.onArrowMouseOut.bindAsEventListener(this));v.observe(e,"click",this.onClick.bindAsEventListener(this))}},setText:function(e){this.elText.innerText=e},onArrowMouseOver:function(){if(this.isDisabled||this.isPushed()){return}this.hoveredState()},onArrowMouseOut:function(){if(this.isDisabled||this.isPushed()){return}this.normalState()}});i.Button.Splits=i.Class.create({$extend:i.Button,ongenerated:function(){var z=this.elButton;var e=this.elArrow=y.collect(z,"a.tx-arrow");if(!e){throw new Error("[Exception]Trex.Button.Splits : not exist element(a.tx-arrow)")}v.observe(e,"mousedown",this.onArrowMouseDown.bindAsEventListener(this));v.observe(e,"mouseover",this.onArrowMouseOver.bindAsEventListener(this));v.observe(e,"mouseout",this.onArrowMouseOut.bindAsEventListener(this));v.observe(e,"click",this.onArrowClick.bindAsEventListener(this))},arrowHoveredState:function(){var e=this.getCurrentBorderClass(this.elButton);v.removeClassName(this.elButton,e);v.addClassName(this.elButton,this.borderClass+"-arrow-hovered")
},arrowPushedState:function(){var e=this.getCurrentBorderClass(this.elButton);v.removeClassName(this.elButton,e);v.addClassName(this.elButton,this.borderClass+"-arrow-pushed")},onMouseDown:function(){if(this.isDisabled){return}if(this.isPushed()){this._command();this.normalState();this.commandexecuted=w}else{this.pushedState();this.commandexecuted=d;this.evsessionstarted=w}},onClick:function(e){if(e){v.stop(e)}if(this.isDisabled){return}if(!this.commandexecuted){this.tool.execute(this.lastValue,this.lastText);this.evsessionstarted=d}else{this.commandexecuted=d}this.normalState()},onArrowMouseDown:function(){if(this.isDisabled){return}if(this._command()===d){return}if(this.isPushed()){this.normalState()}else{this.arrowPushedState()}},onArrowClick:function(e){if(e){v.stop(e)}if(this.isDisabled){return}},onArrowMouseOver:function(){if(this.isDisabled||this.isPushed()){return}this.arrowHoveredState()},onArrowMouseOut:function(){if(this.isDisabled||this.isPushed()){return}if(this.commandexecuted){this.commandexecuted=d
}this.normalState()}});i.Button.Toggle=i.Class.create({$extend:i.Button,setValue:function(e){if(e){this.pushedState()}else{this.normalState()}}});i.Button.Widget=i.Class.create({$extend:i.Button.Select,setText:function(e){this.elIcon.innerText=e;if(this.lastText){v.removeClassName(this.elIcon,this.lastText)}v.addClassName(this.elIcon,e);this.lastText=e},setMenu:function(A,e){this.hasState=w;var z=this;A.setCommand(function(){var B=e.apply(this,arguments);z.updateAfterCommand.apply(z,arguments);return B});z.setCommand(function(){if(!z.isPushed()){var B=z.getValue();A.show(B)}else{A.hide()}return w})}});i.Button.ColorWidget=i.Class.create({$extend:i.Button.Widget,setValue:function(e){v.setStyle(this.elIcon.parentNode,{backgroundColor:e});this.lastValue=e},setText:function(){}});l.addMsg({"@menu.pallete.enter":"\uc785\ub825","@menu.pallete.more":"\ub354\ubcf4\uae30"});i.Menu=i.Class.create({isInit:d,isDisplayed:d,_command:function(){},setCommand:function(e){this._command=e},initialize:function(e){var A=this.config=e;
var B;if(A.el){B=A.el;if(!B){throw new Error("[Exception]Trex.Menu : not exist element("+A.el+")")}}else{var z=A.id;var C=((A.initializedId)?A.initializedId:"");if(!z){if(!A.identity){throw new Error("[Exception]Trex.Menu : not exist config - id")}z="tx_"+A.identity+"_menu"}B=v(z+C);if(!B){throw new Error("[Exception]Trex.Menu : not exist element("+z+")")}}this.elMenu=B;if(A.top){B.style.top=A.top+"px"}if(A.left){B.style.left=A.left+"px"}if(this.oninitialized){this.oninitialized.bind(this)(e)}if(this.ongenerated){this.generateHandler=this.ongenerated.bind(this)}if(this.onregenerated){this.regenerateHandler=this.onregenerated.bind(this)}},generate:function(e){if(this.generateHandler){var z=this.config;this.generateHandler(z,e)}},regenerate:function(e){if(this.initHandler){this.initHandler()}if(this.regenerateHandler){var z=this.config;this.regenerateHandler(z,e)}},getValidOptions:function(e){return e.options.findAll(function(z){return !z.expired})},onSelect:function(){var e=$A(arguments);
var z=e.shift();this._command.apply(this,e);this.hide();v.stop(z)},onCancel:function(){if(this.cancelHandler){this.cancelHandler()}this.hide()},visible:function(){return this.isDisplayed},show:function(e){v.show(this.elMenu);if(this.isInit){this.regenerate(e)}else{if(!!this.config.listseturl){this.lazyGenerate(e)}else{this.generate(e);this.isInit=w;this.regenerate(e)}}if(this.showSpecial){this.showSpecial()}this.isDisplayed=w},lazyGenerate:function(e){var z=this;new (i.Class.create({$mixins:[i.I.JSRequester],initialize:function(){this.importScript(z.config.listseturl,"utf-8",c,function(){z.generate();z.isInit=w;z.regenerate(e)})}}))()},hide:function(){v.hide(this.elMenu);this.isDisplayed=d},toggle:function(){if(this.isDisplayed){this.hide()}else{this.show()}},release:function(e){if(!this.isInit){return}this.hide(e)}});i.MarkupTemplate.add("menu.select",'<ul class="tx-menu-list" unselectable="on">#{items}</ul>');i.MarkupTemplate.add("menu.select.item",'<li class="tx-menu-list-item"><a class="#{klass}" href="javascript:;" unselectable="on">#{label}</a></li>');
i.Menu.Select=i.Class.create({$extend:i.Menu,generate:function(){var A=this.config;var e=this.getValidOptions(A);var z=this.generateList(e);y.insertFirst(this.elMenu,z);if(this.generateHandler){this.generateHandler(A)}if(this.ongeneratedList){this.generateList=this.ongeneratedList.bind(this)}if(this.ongeneratedListItem){this.generateListItem=this.ongeneratedListItem.bind(this)}},generateList:function(C){var z=i.MarkupTemplate.get("menu.select").evaluateAsDom({items:this.generateListItem(C)});var B=y.collectAll(z,"li a");for(var e=0;e<C.length;e++){var D=C[e];var A=B[e];v.observe(A,"click",this.onSelect.bindAsEventListener(this,D.data,D.title))}return z},generateListItem:function(A){var e=[];for(var z=0;z<A.length;z++){e.push(i.MarkupTemplate.get("menu.select.item").evaluate(A[z]))}return e.join("")},onSelect:function(){var z=$A(arguments);var e=z.shift();this._command.apply(this,z);this.hide();v.stop(e)}});i.MarkupTemplate.add("menu.items",['<table unselectable="on"><tbody>',"	#{for:row}<tr>",'		#{for:col}<td class="tx-menu-list-item">','<a href="javascript:;"><span class="#{klass}">','#{if:image!=""}<img src="#{image}" data="#{data}"/>#{/if:image}','#{if:image=""}#{data}#{/if:image}',"</span></a>","		</td>#{/for:col}","	</tr>#{/for:row}","</tbody></table>"].join(""));
i.MarkupTemplate.add("menu.list",['<div class="tx-menu-inner">','	<div class="tx-menu-list">',"   	#{items}","    </div>","</div>"].join(""));i.Menu.List=i.Class.create({$extend:i.Menu,generate:function(){var A=this.config;var e=this.getValidOptions(A);this.cols=A.cols||1;this.rows=A.rows||e.length;var z=this.generateList(e);y.insertFirst(this.elMenu,z);if(this.ongeneratedList){this.generateList=this.ongeneratedList.bind(this)}if(this.ongeneratedListItem){this.generateListItem=this.ongeneratedListItem.bind(this)}if(this.generateHandler){this.generateHandler(A)}},generateList:function(z){var e=i.MarkupTemplate.splitList(this.rows,this.cols,z);var A=i.MarkupTemplate.get("menu.list").evaluateAsDom({items:i.MarkupTemplate.get("menu.items").evaluate(e)});v.observe(A,"click",this.onSelect.bindAsEventListener(this));v.observe(A,"mouseover",this.onItemMouseOver.bindAsEventListener(this));v.observe(A,"mouseout",this.onItemMouseOut.bindAsEventListener(this));return A},onItemMouseOver:function(e){var z=v.findElement(e,"span");
if(z.tagName&&z.tagName.toLowerCase()=="span"){v.addClassName(z,"tx-item-hovered")}v.stop(e)},onItemMouseOut:function(e){var z=v.findElement(e,"span");if(z.tagName&&z.tagName.toLowerCase()=="span"){v.removeClassName(z,"tx-item-hovered")}v.stop(e)},onSelect:function(z){var A=v.findElement(z,"span");if(A.tagName&&A.tagName.toLowerCase()=="span"){var e;if(A.firstChild&&A.firstChild.nodeType==1&&A.firstChild.tagName.toLowerCase()=="img"){e=y.getAttribute(A.firstChild,"data")||""}else{e=A.innerText}this._command(e);this.hide()}v.stop(z)}});i.MarkupTemplate.add("menu.matrix",['<div class="tx-menu-inner">','	<ul class="tx-menu-matrix-title">','		#{for:matrices}<li class=""><a href="javascript:;" class="tx-menu-matrix-title-item">#{title}</a></li>#{/for:matrices}',"	</ul>",'	<div class="tx-menu-matrix-listset">','   	#{for:matrices}<div class="tx-menu-matrix-list #{klass}">',"       	#{items}","		</div>#{/for:matrices}","    </div>","</div>"].join(""));i.Menu.Matrix=i.Class.create({$extend:i.Menu,generate:function(){var A=this.config;
var e=this.matrices=A.matrices.findAll(function(B){return !B.onlyIE||v.msie});this.cols=A.cols||10;this.rows=A.rows||5;var z=this.generateMatrix(e);y.insertFirst(this.elMenu,z);if(this.ongeneratedList){this.generateList=this.ongeneratedList.bind(this)}if(this.ongeneratedListItem){this.generateListItem=this.ongeneratedListItem.bind(this)}if(this.generateHandler){this.generateHandler(A)}this.showTab()},regenerate:function(){this.showTab();if(this.regenerateHandler){var e=this.config;this.regenerateHandler(e)}},showTab:function(){var A=this.lastElList;var z=this.lastElTitleItem;var e=(!A||!z);if(e){A=this.defaultElListItem;z=this.defaultElTitleItem}this.onTitleClick(k,z,A)},generateMatrix:function(H){var I=this;var D=this.cols;var G=this.rows;H.each(function(K){var J=i.MarkupTemplate.splitList(G,D,K.options);K.items=i.MarkupTemplate.get("menu.items").evaluate(J)});var F=i.MarkupTemplate.get("menu.matrix").evaluateAsDom({matrices:H});var E=y.collectAll(F,"div.tx-menu-matrix-listset div.tx-menu-matrix-list");
var z=y.collectAll(F,"ul.tx-menu-matrix-title li");var B=function(){for(var J=0,K=H.length;J<K;J++){if(H[J].defaultshow){return J}}return 0}();this.defaultElListItem=E[B];this.defaultElTitleItem=z[B];for(var A=0;A<H.length;A++){var e=E[A];v.observe(e,"click",I.onSelect.bindAsEventListener(I));v.observe(e,"mouseover",I.onItemMouseOver.bindAsEventListener(I));v.observe(e,"mouseout",I.onItemMouseOut.bindAsEventListener(I));var C=z[A];v.observe(C,"click",I.onTitleClick.bindAsEventListener(I,C,e))}return F},onTitleClick:function(A,z,e){if(this.lastElList!=e){v.show(e);if(this.lastElList){v.hide(this.lastElList)}this.lastElList=e;if(this.lastElTitleItem){v.removeClassName(this.lastElTitleItem,"tx-selected")}v.addClassName(z,"tx-selected");this.lastElTitleItem=z}if(A){v.stop(A)}},onItemMouseOver:function(e){var z=v.findElement(e,"span");if(z.tagName&&z.tagName.toLowerCase()=="span"){v.addClassName(z,"tx-item-hovered")}v.stop(e)},onItemMouseOut:function(e){var z=v.findElement(e,"span");if(z.tagName&&z.tagName.toLowerCase()=="span"){v.removeClassName(z,"tx-item-hovered")
}v.stop(e)},onSelect:function(e){var z=v.findElement(e,"span");if(z.tagName&&z.tagName.toLowerCase()=="span"){this._command(z.innerText);this.hide()}v.stop(e)}});i.MarkupTemplate.add("menu.colorPallete",['<div class="tx-menu-inner">','<ul class="tx-pallete-text-list"></ul>','<ul class="tx-pallete-thumb-list"></ul>','<p class="tx-pallete-input"><span style="background-color: rgb(7, 3, 3);"></span><input type="text" class="tx-color-value"/><a class="tx-enter">@menu.pallete.enter</a></p>','<div class="tx-pallete-buttons">','	<p class="tx-pallete-more"><a class="tx-more-down" href="javascript:;">@menu.pallete.more</a></p>',"</div>",'<div class="tx-pallete-picker">','	<div class="tx-pallete-pickerbox">','		<div class="tx-chromabar" style="background-color: rgb(255, 0, 0);"></div><div class="tx-huebar"></div>',"	</div>","</div>","</div>"].join(""));i.Menu.ColorPallete=i.Class.create({$extend:i.Menu,$mixins:[i.I.ColorPallete],generate:function(){var z=this.config;var A=this.elMenu;i.MarkupTemplate.get("menu.colorPallete").evaluateToDom({},A);
var e=z.thumbs.transparent;z.thumbs.transparent=Object.extend(z.thumbs.transparent,{image:r.getIconPath(e.image),thumb:r.getIconPath(e.thumb),thumbImage:r.getIconPath(e.thumbImage)});if(!this.hookEvent){throw new Error("[Exception]Trex.Menu.ColorPallete : not implement function(hookEvent)")}this.hookEvent(z);if(this.generateHandler){this.generateHandler(z)}},onSelect:function(){var z=$A(arguments);var e=z.shift();this._command.apply(this,z);this.remainColor(z);this.hide();v.stop(e)},remainColor:function(e){if(e){this.setColorValueAtInputbox(e)}}});i.Editor=i.Class.create({$mixins:[i.I.JobObservable,i.I.KeyObservable],toolbar:k,sidebar:k,canvas:k,config:k,initialConfig:k,initialize:function(A){this.initialConfig=A;var F=this,E=this.config=r.setup(A);var D=this.canvas=new i.Canvas(F,E);var z=this.toolbar=new i.Toolbar(F,E);var C=this.sidebar=new i.Sidebar(F,E);i.invokeInstallation(F,z,C,D,E);var e=E.events;var B=function(G){if(e.useHotKey){F.fireKeys(G)}};v.observe(c,"keydown",B.bindAsEventListener(this),d);
D.observeJob(i.Ev.__IFRAME_LOAD_COMPLETE,function(){var G=new Date().getTime();var J=Math.round((G-Editor.initStartTime)/100)/10;F.fireJobs(i.Ev.__IFRAME_LOADING_TIME,J);var I=F.getInitializedId();var H=v("tx_loading"+I);if(!H){return}if(D.mode!=i.Canvas.__WYSIWYG_MODE){D.fireJobs(i.Ev.__CANVAS_MODE_INITIALIZE,i.Canvas.__WYSIWYG_MODE,D.mode)}v.hide(H)});i.invokeRegisters(F,z,C,D,E);i.invokeModules(F,z,C,D,E)},getToolbar:function(){return this.toolbar},getSidebar:function(){return this.sidebar},getCanvas:function(){return this.canvas},getUsedWebfont:function(){return this.canvas.getUsedWebfont()},getConfig:function(){return this.config},getInitialConfig:function(){return this.initialConfig},getParam:function(z){var e={},A=this.config;A.params.each(function(B){if(A[B]){e[B]=A[B]}});return e[z]},getWrapper:function(){if(!this.initialConfig.wrapper){throw new Error("`wrapper` config variable should be provided")}return $must(this.initialConfig.wrapper)},getInitializedId:function(){return this.initialConfig.initializedId||""
},saveEditor:function(){this.setDisableUnloadHandler();this.getSaver().submit()},loadEditor:function(e){this.getSaver().load(e)},getContent:function(){return this.getSaver().getContent()},getAttachments:function(z,e){return this.getSaver().getAttachments(z,e)},getEmbeddedData:function(e){return this.getSaver().getEmbeddedData(e)},getResults:function(e){return this.getSaver().getResults(e)},getAutosaveSeq:function(){return(this.getAutoSaver&&this.getAutoSaver())?this.getAutoSaver().getCurSeq():"0"}});(function(){j.Editor=i.Class.create({$const:{__ACTIVE:d,__PANEL_LOADED:d,__EDITOR_LOADED:d,__MULTI_LIST:[],__SELECTED_INDEX:0},initialize:function(A){if(i.hmailLogging){i.hmailLogging(A)}Editor.initStartTime=new Date().getTime();var C=null;try{Editor.__EDITOR_LOADED=d;Editor.__PANEL_LOADED=d;C=new i.Editor(A);var D=C.getInitializedId();if(D!=k){var z=D==""?0:D;Editor.__MULTI_LIST[z]=C;Editor.__SELECTED_INDEX=z}Object.extend(Editor,C);Editor.__EDITOR_LOADED=w;Editor.__ACTIVE=w}catch(B){if(C){C.fireJobs(i.Ev.__RUNTIME_EXCEPTION,B)
}else{throw"failed to initialize editor. caused by "+B}throw B}}});Editor.modify=function(e){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){if(this.loadEditor){this.loadEditor(e)}}else{setTimeout(this.modify.bind(this,e),10)}};Editor.restore=function(e){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){if(this.getAutoSaver&&this.getAutoSaver()){this.getAutoSaver().load(e)}}else{setTimeout(this.restore.bind(this,e),10)}};Editor.save=function(){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){if(this.saveEditor){this.saveEditor()}}else{setTimeout(this.saveEditor.bind(this),10)}return d};Editor.focus=function(){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){var e=this.getCanvas();if(e){e.focus()}}else{setTimeout(this.focus.bind(this),10)}return d};Editor.focusOnTop=function(){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){var e=this.getCanvas();if(e){e.focusOnTop()}}else{setTimeout(this.focusOnTop.bind(this),10)}return d};Editor.focusOnBottom=function(){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){var e=this.getCanvas();
if(e){e.focusOnBottom()}}else{setTimeout(this.focusOnBottom.bind(this),10)}return d};Editor.permitUnload=function(){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){this.setDisableUnloadHandler()}else{setTimeout(this.permitUnload.bind(this),500)}};Editor.onPanelLoadComplete=function(e){if(Editor.__PANEL_LOADED==w&&Editor.__EDITOR_LOADED==w){if(e){e()}}else{setTimeout(Editor.onPanelLoadComplete.bind(Editor,e),500)}};Editor.switchEditor=function(e){Editor.__SELECTED_INDEX=e;Object.extend(Editor,Editor.__MULTI_LIST[e])};Editor.editorForAsyncLoad=Editor;Editor.forEachEditor=function(e){var A,z=Editor.__MULTI_LIST;for(A in z){if(z.hasOwnProperty(A)){e(z[A])}}};Editor.focusOnForm=function(e){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){j.focus();var z=Editor.getForm();if(z.getElementByName(e)){z.getElementByName(e).focus()}}else{setTimeout(Editor.focusOnForm.bind(Editor,e),500)}return d};Editor.fromHdrive=function(C){var z=[];for(var B=0;B<C.length;B++){z.push(C[B])}var e={content:"",attachments:z};
if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){if(this.loadEditor){this.loadEditor(e);var D=Editor.getAttachBox().datalist;for(var A=0;A<D.length;A++){D[A].execAppend()}}}else{setTimeout(this.fromHdrive.bind(this,C),10)}};Editor.refreshSize=function(){this.canvas.fireJobs(i.Ev.__CANVAS_WRAP_WIDTH_CHANGE)};Editor.prototype.switchEditor=Editor.switchEditor;Editor.prototype.focusOnForm=Editor.focusOnForm})();i.Toolbar=i.Class.create({$mixins:[i.I.JobObservable],el:k,tools:k,initialize:function(e,z){this.canvas=e.getCanvas();var A=z.initializedId||"";this.el=$must("tx_toolbar_basic"+A,"Trex.Toolbar")},disableToolbar:function(){var z=this.tools;for(var e in z){if(z[e].button){z[e].button.disable()}}},serializeToolValues:function(){var B=this.tools;var e={};for(var A in B){var z=B[A];e[A]=z.button.lastValue}return e},widgetSeq:0,makeWidget:function(A,D,B){var z=this;var C=this.canvas;var e=new (function(){this.identity="widget"+(++z.widgetSeq);this.wysiwygonly=w;this.menuFoldAuto=w;this.canvas=C;
this.toolbar=z})();i.Tool.prototype.weave.bind(e)(A,D,B);this.tools[e.identity]=e;return e}});i.install("editor.getTool",function(z,A){var e=A.tools={};z.getTool=function(B){if(e[B]!=k){return e[B]}else{if(arguments.length==0){return e}else{return k}}}});i.register("new tools",function(D,F,e,z,A){var E=F.tools;var B=A.initializedId||"";for(var H in i.Tool){var G=i.Tool[H]["__Identity"];if(G){var C=r.getTool(G,A);C.initializedId=B;if(i.available(C,G+B)){E[G]=new i.Tool[H](D,F,C)}}}if(!!z.config.readonly){F.disableToolbar()}});i.module("bind events with tools",function(B,F,e,z){var D=F.tools;var A=function(){var H,J,I,K;H=v.ios||v.android;if(!H){return}for(J in D){I=D[J];if(I.disabledonmobile){K=I.button;K.disable()}}};A();var E=function(L,K){if(L==K){return}for(var I in D){var H=D[I];var J=H.button;if(i.Canvas.__WYSIWYG_MODE==K){J.enable()}else{if(i.Canvas.__WYSIWYG_MODE==L){if(H.wysiwygonly){J.disable()}else{J.enable()}}}}A()};z.observeJob(i.Ev.__CANVAS_MODE_CHANGE,E);z.observeJob(i.Ev.__CANVAS_MODE_INITIALIZE,E);
var G=function(J){for(var I in D){var H=D[I];if(J!=H.identity){if(H.button){H.button.release();H.button.decreaseZindex()}if(H.menu&&H.menuFoldAuto){H.menu.release()}}}};z.observeJob(i.Ev.__CANVAS_PANEL_CLICK,G);z.observeJob(i.Ev.__CANVAS_SOURCE_PANEL_CLICK,G);z.observeJob(i.Ev.__CANVAS_TEXT_PANEL_CLICK,G);F.observeJob(i.Ev.__TOOL_CLICK,G);z.observeKey({ctrlKey:d,altKey:d,shiftKey:d,keyCode:27},G);B.observeKey({ctrlKey:d,altKey:d,shiftKey:d,keyCode:27},G);v.observe(c,"click",function(I){var J=v.element(I);var H=["tx-sidebar","tx-toolbar-basic","tx-toolbar-advanced","tx-sidebar-boundary","tx-toolbar-boundary","tx-toolbar-boundary"];if(i.Util.getMatchedClassName(J,H)){G("-")}},d);var C=function(){B.fireJobs(i.Ev.__SHOULD_CLOSE_MENUS)};F.observeJob(i.Ev.__TOOL_CLICK,C)});i.Tool=i.Class.draft({identity:k,button:k,menu:k,initialize:function(z,A,e){if(!this.constructor.__Identity){throw new Error("[Exception]Trex.Tool : not implement const(__Identity)")}this.identity=this.constructor.__Identity;
if(!z){throw new Error("[Exception]Trex.Tool : not exist argument(editor)")}this.editor=z;this.toolbar=A;this.canvas=z.getCanvas();this.config=e;this.wysiwygonly=((e.wysiwygonly!=k)?e.wysiwygonly:w);this.menuFoldAuto=((e.menuFoldAuto!=k)?e.menuFoldAuto:w);if(e.disabledonmobile!=k){this.disabledonmobile=e.disabledonmobile}this.buttonCfg=r.merge({id:"tx_"+this.identity},e);this.menuCfg=r.merge({id:"tx_"+this.identity+"_menu"},e);this.oninitialized.bind(this)(e)},oninitialized:function(){throw new Error("[Exception]Trex.Tool : not implements function(oninitialized)")},weave:function(C,e,z,F){var B=this;var G=this.identity;var E=this.toolbar;var D=this.canvas;this.button=C;C.tool=this;var A=k;if(!e){C.setCommand(A=function(){E.fireJobs(i.Ev.__TOOL_CLICK,G);return z.apply(B,arguments)})}else{this.menu=e;e.tool=this;e.initHandler=F||function(){};e.cancelHandler=function(){C.setState(d)};e.setCommand(A=function(){var H=arguments;var I=z.apply(B,H);if(I===$stop){C.normalState.apply(C,H)}else{C.updateAfterCommand.apply(C,H)
}return I});C.setCommand(function(I){E.fireJobs(i.Ev.__TOOL_CLICK,G,I);if(!C.isPushed()){var J=C.getValue();C.increaseZindex();e.show(J)}else{e.hide();if(v.msie){var H=D.getProcessor();if(H.restoreRange){setTimeout(function(){H.restoreRange()},0)}}}return w})}this.execute=A},resetWeave:function(){this.button.removeHandler();this.button.normalState();this.button=k;this.menu=k;this.execute=k},forceActivate:function(){if(this.button&&this.menu){this.button.pushedState();this.button.increaseZindex();this.menu.show()}},bindKeyboard:function(A,B){var z=this.toolbar;var e=this.identity;this.canvas.observeKey(A,function(C){B(C);z.fireJobs(i.Ev.__TOOL_SHORTCUT_KEY,e)})}});i.AsyncTool=i.Class.draft({$extend:i.Tool,oninitialized:function(){this.loaded=false;throw new Error("[Exception]Trex.AsyncTool : not implements function(oninitialized)")},onLoadModule:function(){var e=this;var z=this.config.asyncUrl;if(/^(?:\/\/)|(?:\w+:\/\/)/.test(z)===false){z=this.getJSBasePath()+z}Editor.editorForAsyncLoad=this.editor;
EditorJSLoader.asyncLoadModule({url:r.getUrl(z),callback:function(){e.loaded=true}})},getJSBasePath:function(){var A;try{A=EditorJSLoader.getJSBasePath("editor.js")}catch(z){A=EditorJSLoader.getJSBasePath()}return A}});i.Sidebar=i.Class.create({$const:{__REG_ENTRY_ATTR_PAIR_Q:new RegExp('([\\w]+)="([^"]+)"',"g"),__REG_ENTRY_ATTR_PAIR_NQ:new RegExp("([\\w]+)=([\\w]+)","g")},$mixins:[i.I.JobObservable],entryboxRegistry:k,initialize:function(e){var z=e.getCanvas();this.entryboxRegistry={};this.getFields=function(){var A=[];for(var C in this.entryboxRegistry){var B=this.entryboxRegistry[C];A=A.concat(B.getFields())}return A};this.syncSidebar=function(){var A=z.getContent();for(var B in this.entryboxRegistry){this.entryboxRegistry[B].syncBox(A)}};this.emptyEntries=function(){for(var A in this.entryboxRegistry){this.entryboxRegistry[A].empty()}};z.observeJob(i.Ev.__CANVAS_PANEL_DELETE_SOMETHING,function(){this.syncSidebar()}.bind(this))}});i.EntryBox=i.Class.draft({$mixins:[i.I.JobObservable],autoSeq:0,datalist:[],initialize:function(){throw new Error("[Exception]Trex.EntryBox : not implements function(initialize)")
},newSeq:function(){return(++this.autoSeq)},syncSeq:function(e){this.autoSeq=(e>this.autoSeq)?e:this.autoSeq;return e},empty:function(){this.fireJobs(i.Ev.__ENTRYBOX_ALL_ENTRY_REMOVED);this.datalist=[]},append:function(e){this.datalist.push(e);this.fireJobs(i.Ev.__ENTRYBOX_ENTRY_ADDED,e)},modify:function(e){this.fireJobs(i.Ev.__ENTRYBOX_ENTRY_MODIFIED,e)},remove:function(e){e.deletedMark=w;this.fireJobs(i.Ev.__ENTRYBOX_ENTRY_REMOVED,e)},syncBox:function(e){this.datalist.each(function(z){z.execSync(e)})},getFields:function(){var e=[];this.datalist.each(function(z){e.push(z.getField())});return e.findAll(function(z){return(z!=k)})},getEntries:function(e){if(!e){return this.datalist}var z=[];this.datalist.each(function(A){if(A.type==e){z.push(A)}});return z}});i.Entry=i.Class.draft({$mixins:[i.I.JobObservable],existStage:d,deletedMark:d,initialize:function(){throw new Error("[Exception]Trex.Entry : not implements function(initialize)")},setExistStage:function(e){this.existStage=e},execRegister:function(){this.register();
this.entryBox.append(this);this.setExistStage(w)},execReload:function(){if(this.reload){this.reload()}this.entryBox.append(this);this.exchangeHandlerAtReload()},execRemove:function(){this.remove();this.entryBox.remove(this)},execReplace:function(e){this.replace(e);this.entryBox.modify(this);this.setExistStage(w)},execAppend:function(){this.register();this.setExistStage(w)},execSync:function(e){this.setExistStage(this.checkExisted(e))},checkExisted:function(e){if(this.canvas.isWYSIWYG()){return(e.search(this.regHtml)>-1)}else{return(e.search(this.regText)>-1)}},getChangedContent:function(z,C,B,A){var e=d;if(z.search(C)>-1){e=w;if(this.actor.canResized){z=this.getChangedContentWithAttr(z,C,B,A)}else{z=z.replace(C,B)}}this.setExistStage(e);return z},getChangedContentFromHtml:function(e){return this.getChangedContent(e,this.regHtml,this.dispText,["id","class"])},getChangedContentToHtml:function(e){return this.getChangedContent(e,this.regText,this.dispHtml)},getChangedContentAtSave:function(e){return this.getChangedContent(e,this.regHtml,this.saveHtml,["id","class"])
},getChangedContentAtLoad:function(e){return this.getChangedContent(e,this.regLoad,this.dispHtml)},getChangedContentWithAttr:function(C,e,H,D){D=D||[];var A=i.Util.getAllAttributes(H);var E=function(M){var L=i.Util.getMatchValue(/<([a-z]*)/i,H,1);var N=["<"+L.toLowerCase()];var K=i.Util.getAllAttributes(M);for(var J in A){if(["width","height"].contains(J)){if(!K[J]){N.push(J+'="'+A[J]+'"')}}else{N.push(J+'="'+A[J]+'"')}}for(var J in K){if(!D.contains(J)){if(["width","height"].contains(J)){N.push(J+'="'+K[J]+'"')}else{if(!A[J]){N.push(J+'="'+K[J]+'"')}}}}N.push("/>");return N.join(" ")};var G=C;var B;e.lastIndex=0;while((B=e.exec(G))!=k){var z=B[0];var I=E(z);var F=z.getRegExp();C=C.replace(new RegExp(F,"gmi"),I)}return C},getField:function(){if(!this.field){return k}return{name:this.field.name,value:[this.field.value,this.existStage].join("|")}},exchangeHandlerAtReload:function(){}});i.Actor=i.Class.draft({$mixins:[i.I.JobObservable],isDisabled:d,initialize:function(){throw new Error("[Exception]Trex.Actor : not implements function(initialize)")
},execAttach:function(A,z){var e=this.createEntry(this.getDataForEntry(A),z);e.execRegister();this.canvas.fireJobs("canvas."+(z||this.constructor.__Identity)+".added",e)},getDatalist:function(){return this.entryBox.getEntries(this.name)},execReattach:function(C,A){var B=this.getDatalist();var D=this.getDataForEntry(C);if(B.length<1){var e=this.createEntry(D,A);e.execRegister()}else{var e=B[0];var z={regHtml:e.regHtml,regText:e.regText};e.setProperties(D);e.execReplace(z)}},execReload:function(C,B,A){var z=this.getDataForEntry(C,B);if(z){var e=this.createEntry(z,A);e.execReload()}},existEntry:function(){return((this.getDatalist().length==0)?d:w)},getFirstEntryData:function(){var e=this.getDatalist();return((e.length==0)?k:e[0].data)}});i.install("editor.getDocParser",function(B,C,D,z,e){var A=new i.Docparser(B,D,e);B.getDocParser=function(){return A}});i.Docparser=i.Class.create({initialize:function(z,A,e){this.editor=z;this.sidebar=A;this.config=e},filters:{},registerFilter:function(e,z){this.filters[e]=z
},getFilter:function(e){return this.filters[e]},executeFilters:function(A,z){var e=this.filters;["before "+A,A,"after "+A].each(function(D){var B,C;for(B in e){if(e.hasOwnProperty(B)){C=e[B];if(C[D]){z=C[D](z)}}}});return z},getContentsAtChangingMode:function(z,e,A){if(e==A){return z}z=z.trim()||"";return this.executeFilters(e.concat("2").concat(A),z)},convertAtLoad:function(z,e,A){if(A=="original"){z=this.executeFilters(e.concat("@load"),z)}else{if(e!=A){z=this.executeFilters(A.concat("2").concat(e),z)}}return z},convertAtSave:function(A,z,e){if(e=="original"){A=this.executeFilters(z.concat("4save"),A)}else{if(z!=e){A=this.executeFilters(z.concat("2").concat(e),A)}}return A},text2source:function(e){return this.executeFilters("text2source",e)},text2html:function(e){if(e===""){return y.EMPTY_PARAGRAPH_HTML}return this.executeFilters("text2html",e)},source2text:function(e){return this.executeFilters("source2text",e)},source2html:function(e){if(e===""){return y.EMPTY_PARAGRAPH_HTML}return this.executeFilters("source2html",e)
},html2text:function(e){return this.executeFilters("html2text",e)},html2source:function(e){return this.executeFilters("html2source",e)}});i.install("editor.getEntryProxy",function(B,C,D,A,z){var e=new i.EntryProxy(B,D,z);B.getEntryProxy=function(){return e}});i.EntryProxy=i.Class.create({initialize:function(z,A,e){this.editor=z;this.sidebar=A;this.config=e},commands:{},registerCommand:function(e,z){this.commands[e]=z},getcommand:function(e){return this.commands[e]},executeCommand:function(A,z){for(var e in this.commands){var B=this.commands[e];if(B[A]){B[A](z)}}},setAttachments:function(e,A){e=e||[];A=A||"";var z=this.editor.getAttachBox();z.empty();var B=this.sidebar.getAttacher();e.each(function(D){try{var C=B[D.attacher];if(C){C.execReload(D.data,A,D.type)}}catch(E){}})},getAttachments:function(e,z){z=!!z;var A=[];e.each(function(B){if(B.deletedMark){return}if(z||B.existStage){A.push({type:B.type,attacher:B.actor.name,existStage:B.existStage,data:Object.extend(B.data,{tmpSeq:B.dataSeq})})
}});return A}});i.install("editor.getForm",function(A,B,C,z,e){var D=new i.FormProxy(A,C,e);A.getForm=function(){return D}});i.FormProxy=i.Class.create({initialize:function(z,B,e){this.editor=z;this.sidebar=B;this.config=e;var A=this.elForm=c.forms[e.form]||c.getElementById(e.form);if(!A){throw new Error("[Exception]Trex.Form : not exist element - "+e.form)}A.onsubmit=function(){return d}},submit:function(){this.elForm.submit()},createField:function(e){this.elForm.appendChild(e)},getElements:function(){return this.elForm.elements},getElementByName:function(e){return this.elForm[e]},getFormField:function(){var z={};var B=this.getElements();var e;for(var A=0;A<B.length;A++){e=B[A];if(!["select","input","textarea"].contains(e.tagName.toLowerCase())){continue}if(!e.name&&!e.id){continue}if(e.tagName.toLowerCase()=="select"){if(e.selectedIndex>0){z[e.name]=e.options[e.selectedIndex].value}}else{if(e.type=="radio"&&!e.checked){}else{if(e.type=="checkbox"&&!e.checked){}else{z[e.name||e.id]=e.value
}}}}return z},setFormField:function(e){if(!e){return}var D=this.getElements();var B;var z;for(var C=0;C<D.length;C++){B=D[C];if(!["select","input","textarea"].contains(B.tagName.toLowerCase())){continue}if(B.name===k||B.name.length===0){continue}if(!e[B.name]){continue}z=e[B.name];if(B.tagName.toLowerCase()=="select"){for(var A=0;A<B.options.length;A++){if(B.options[A].value==z){B.options[A].selected=w;break}}}else{if(B.type=="radio"||B.type=="checkbox"){if(B.value==z){B.checked=w}}else{B.value=z}}}}});i.install("editor.getSaver & editor.getDataAsJSON & editor.setDataByJSON",function(A,B,C,z,e){var D=new i.Save(A,B,C,z,e);A.getSaver=function(){return D};A.getDataAsJSON=function(){var E=z.getContent();var F=new i.Validator();if(!F.exists(E)){return k}return{inputmode:z.getCurrentPanel().getName(),content:E,attachments:function(){var G=C.getAttachments();return A.getEntryProxy().getAttachments(G,w)}(),resultBox:function(){var H=A.getResultBox();var G=[];H.datalist.each(function(I){G.push(I.data)
});return G}(),formfield:A.getForm().getFormField()}};A.setDataByJSON=function(H){if(!H){return}var F=z.mode;var E=H.inputmode||F;if(E=="original"){}else{if(E!=F){z.fireJobs(i.Ev.__CANVAS_MODE_INITIALIZE,F,E);z.changeMode(E)}}var G=H.content;if(H.attachments){A.getEntryProxy().setAttachments(H.attachments,G)}if(G){G=A.getDocParser().convertAtLoad(G,F,E);z.initContent(G)}if(H.resultBox){H.resultBox.each(function(J){var I;I=C.searchers[J._meta.type];if(I){I.execReload(J,G)}})}C.syncSidebar();if(H.formfield){A.getForm().setFormField(H.formfield)}}});i.Save=i.Class.create({editor:k,toolbar:k,sidebar:k,canvas:k,config:k,form:k,initialize:function(A,B,C,z,e){this.editor=A;this.toolbar=B;this.sidebar=C;this.canvas=z;this.config=e;this.form=A.getForm();this.docparser=A.getDocParser();this.entryproxy=A.getEntryProxy()},save:function(){try{if(typeof validForm=="function"){if(!validForm(this.editor)){return d}}if(typeof setForm=="function"){if(!setForm(this.editor)){return d}}return w}catch(z){this.editor.fireJobs(i.Ev.__RUNTIME_EXCEPTION,z);
return d}},submit:function(){if(this.save()){this.editor.fireJobs(i.Ev.__ON_SUBMIT,this.editor);if(this.config.save&&typeof this.config.save.onSave=="function"){var e=this.config.save.onSave;e()}else{this.form.submit()}}},getContent:function(z){var B=this.canvas;var e=B.mode;var C=z||"original";var A=B.getContent();A=this.docparser.convertAtSave(A,e,C);return A},getAttachments:function(z,e){e=e||d;var A=this.sidebar.getAttachments(z);return this.entryproxy.getAttachments(A,e)},getEmbeddedData:function(e){return this.sidebar.getEmbeddedData(e)},getResults:function(e){return this.sidebar.getResults(e)},load:function(z){if(!z){throw new Error("[Exception]Trex.Save : not exist argument(data)")}if(typeof loadForm=="function"){loadForm(this.editor,z)}try{this.setDataByJSONToEditor(z)}catch(e){alert(" - Error: "+e.message+"\n\uc18c\uc2a4\ubcf4\uae30 \ubaa8\ub4dc\ub85c \uc804\ud658\ud569\ub2c8\ub2e4.\n\uc798\ubabb\ub41c HTML\uc774 \uc788\ub294\uc9c0 \ud655\uc778\ud574\uc8fc\uc138\uc694.");z.inputmode=i.Canvas.__HTML_MODE;
this.setDataByJSONToEditor(z)}if(typeof postLoad=="function"){postLoad(this.editor,z)}},setDataByJSONToEditor:function(e){this.editor.setDataByJSON({inputmode:(!e.inputmode||e.inputmode=="html")?"original":e.inputmode,content:function(){var z=e.content;if(typeof z=="string"){return e.content}else{if(z&&z.nodeType&&(z.nodeType==1)){return e.content.value}else{return""}}}(),attachments:e.attachments})},makeField:function(){var B=this.sidebar;var A=this.form;var e=this.getContent();A.createField(tx.textarea({name:"tx_content",style:{display:"none"}},e));var z=B.getFields();z.each(function(C){A.createField(tx.input({type:"hidden",name:C.name,value:C.value}))})}});i.module("new Trex.Resizer",function(B,C,E,A,z){var F=z.initializedId||"";var e=r.get("resizer",z);var D=k;B.setMinHeight=function(G){return D.setMinHeight(G)};B.restoreMinHeight=function(){return D.restoreMinHeight()};if(i.available(e,"resizer"+F)){D=new i.Resizer(B,e)}});r.add({resizer:{minHeight:200}});i.Resizer=i.Class.create({$const:{__Identity:"resizer"},$mixins:[i.I.JobObservable],initialize:function(A,e){var D=0;
if(!A){return}this.config=e;var E=A.getInitializedId();var z=this.elBar=v("tx_resizer"+E);if(!z){return}if(v.msie_ver=="5.5"){z.setAttribute("align","center")}this.resizeHeightAtService=function(F){if(typeof resizeHeight=="function"){resizeHeight(F)}};this.resizingHeightAtService=function(F){if(typeof resizingEditorHeight=="function"){resizingEditorHeight(F)}};this.minDragHeight=e.minHeight;var C;this.startDrag=function(G){var I=A.getCanvas();var H=I.getCurrentPanel();if(H==k){return}var F=H.getPosition();this.panelHeight=F.height;this.dragStartPosY=G.clientY;this.isDragging=w;v.observe(c,"mousemove",this.documentDraggingHandler);v.observe(c,"mouseup",this.stopDragHandler);if(H.getName()==i.Canvas.__WYSIWYG_MODE){this.panelTop=F.y;C=H.getDocument();if(C==k){return}I.fireJobs("canvas.height.beforechange");v.observe(C,"mousemove",this.wysiwygDraggingHandler);v.observe(C,"mouseup",this.stopDragHandler)}v.stop(G)};this.stopDrag=function(F){var H=A.getCanvas();var G=H.getCurrentPanel();if(G==k){return
}this.isDragging=d;v.stopObserving(c,"mousemove",this.documentDraggingHandler);v.stopObserving(c,"mouseup",this.stopDragHandler);if(C==k){return}v.stopObserving(C,"mousemove",this.wysiwygDraggingHandler);v.stopObserving(C,"mouseup",this.stopDragHandler);C=k;this.resizeHeightAtService(D);H.fireJobs("canvas.height.afterchange");v.stop(F)};this.dragingAtDocument=function(G){var I=A.getCanvas();if(this.isDragging){var H=I.getCurrentPanel();if(H==k){return}try{var F=Math.max((this.panelHeight+G.clientY-this.dragStartPosY),this.minDragHeight.parsePx()).toPx();H.setPanelHeight(F);D=F;I.fireJobs("canvas.height.change",F);this.resizingHeightAtService(F)}catch(J){}}v.stop(G)};this.dragingAtWysiwyg=function(H){var J=A.getCanvas();if(this.isDragging){var I=J.getCurrentPanel();if(I==k){return}try{var L=c.body.scrollTop||p.scrollTop||j.pageYOffset;var G=J.getCanvasPos();var F=Math.max((this.panelHeight+H.clientY+G.y-this.dragStartPosY+this.panelTop-L),this.minDragHeight.parsePx()).toPx();I.setPanelHeight(F);
J.fireJobs("canvas.height.change",F)}catch(K){}}v.stop(H)};this.startDragHandler=this.startDrag.bindAsEventListener(this);this.stopDragHandler=this.stopDrag.bindAsEventListener(this);this.documentDraggingHandler=this.dragingAtDocument.bindAsEventListener(this);this.wysiwygDraggingHandler=this.dragingAtWysiwyg.bindAsEventListener(this);this.isDragging=d;v.observe(z,"mousedown",this.startDragHandler);var B=A.getCanvas();B.observeJob("canvas.fullscreen.change",function(){v.hide(z)});B.observeJob("canvas.normalscreen.change",function(){v.show(z)})},setMinHeight:function(e){return this.minDragHeight=e.toPx()},restoreMinHeight:function(){return this.minDragHeight=this.config.minHeight||200}});(function(){function e(C,B){while(C.length>=B){C.shift()}}var A=20;i.History=i.Class.create({});i.History.prototype={maxUndoCount:A,canvas:k,undoMementoList:k,redoMementoList:k,currentMemento:k,contentModified:d,initialize:function(B){this.canvas=B;this.setupHistory();this.bindKeyEvent(B)},bindKeyEvent:function(C){var B=this;
C.observeJob("canvas.panel.undo",function(){B.undoHandler()});C.observeJob("canvas.panel.redo",function(){B.redoHandler()})},setupHistory:function(){this.initHistory({content:y.EMPTY_PARAGRAPH_HTML,scrollTop:0})},canUndo:function(){return this.undoMementoList.length>0},canRedo:function(){return this.redoMementoList.length>0},setCurrentMemento:function(B){this.currentMemento=B},undoHandler:function(){var C=this;C.saveHistoryIfEdited();if(!C.canUndo()){return}var B=C.undoMementoList.pop();B.undo();C.redoMementoList.push(B);C.setCurrentMemento(B)},redoHandler:function(){var B=this;B.saveHistoryIfEdited();if(!B.canRedo()){return}var C=B.redoMementoList.pop();C.redo();B.undoMementoList.push(C);B.setCurrentMemento(C)},initHistory:function(E){var C=this;C.undoMementoList=[];C.redoMementoList=[];var D=new z();var B=Object.extend({content:y.EMPTY_PARAGRAPH_HTML,scrollTop:0},E);D.addUndoData(B);D.addHandler(C.getTextHandler());C.setCurrentMemento(D)},saveHistory:function(F,H,E){var C=this;var B=C.undoMementoList;
var G=C.currentMemento;C.redoMementoList=[];if(arguments.length==3){G.addUndoRedData(F,H,E)}var I=C.getTextData();G.addRedoData(I);e(B,C.maxUndoCount);B.push(G);var D=new z();D.addHandler(C.getTextHandler());D.addUndoData(I);C.setCurrentMemento(D);C.contentModified=d},injectHistory:function(E,F,D){if(!this.canUndo()){return}var B=this.undoMementoList;var C=B[B.length-1];C.addUndoRedData(E,F,D)},saveHistoryIfEdited:function(){if(this.contentModified){this.saveHistory()}},saveHistoryByKeyEvent:function(D){var C={code:D.keyCode,ctrl:D.ctrlKey||(D.keyCode===17),alt:D.altKey||(D.keyCode===18),shift:D.shiftKey||(D.keyCode===16)};if(C.code==229){return}var B=this;if(C.code==i.__KEY.ENTER||C.code==i.__KEY.SPACE||C.code==i.__KEY.TAB){B.saveHistoryIfEdited()}else{if(C.code==i.__KEY.DELETE||C.code==i.__KEY.BACKSPACE){B.saveHistory()}else{if((C.code==i.__KEY.PASTE||C.code==i.__KEY.CUT)&&C.ctrl){B.saveHistory()}else{if(((C.code>32&&C.code<41)&&C.shift)||(C.code==65&&C.ctrl)){B.saveHistoryIfEdited()}else{if(C.ctrl||C.alt||(C.shift&&C.code==16)){}else{B.contentModified=w
}}}}}},getTextHandler:function(){var B=this.canvas;return function(C){B.setContent(C.content);setTimeout(function(){B.setScrollTop(C.scrollTop)},0)}},getTextData:function(){return{content:this.canvas.getContent(),scrollTop:this.canvas.getScrollTop()}}};var z=i.Class.create({initialize:function(){this.before={};this.after={};this.handlers=[]},addUndoRedData:function(C,D,B){Object.extend(this.before,C);Object.extend(this.after,D);this.handlers.push(B)},addHandler:function(B){this.handlers.push(B)},addUndoData:function(B){Object.extend(this.before,B)},addRedoData:function(B){Object.extend(this.after,B)},undo:function(){var B=this;B.handlers.each(function(C){C(B.before)})},redo:function(){var B=this;B.handlers.each(function(C){C(B.after)})}})})();(function(z){var A=new v.Set(13,8,32,33,34,37,38,39,40,46);var e=function(B){return A.contains(B)};r.add({canvas:{doctype:"html",mode:["text","html","source"],styles:{color:"#333333",fontFamily:"\ub3cb\uc6c0",fontSize:"9pt",backgroundColor:"#ffffff",lineHeight:"1.5",padding:"8px"},pMarginZero:true,selectedMode:"html",readonly:d,initHeight:400,minHeight:200,ext:"html",param:"",newlinepolicy:"p",showGuideArea:w,convertingText:w,escapeTextModeContents:w,removeTextModeBr:d}},function(C){var E=r.get("canvas",C);
var B=C.events;E.initializedId=C.initializedId;E.useHotKey=B.useHotKey;var F=r.getTool("switcher",C);if(z.available(F,"switcher"+E.initializedId)){E.mode=F.options.pluck("data")}var G=r.getTool("fontfamily",C);if(z.available(G,"fontfamily"+E.initializedId)){if(G.webfont&&G.webfont.use){E.webfont=G.webfont;E.webfont.options.each(function(H){H.url=r.getUrl(H.url)})}}var D=r.get("resizer",C);if(D){E.minHeight=D.minHeight}E.wysiwygUrl=r.getUrl([(E.wysiwygPath||"#host#path/pages/daumx/"),"wysiwyg_",(E.serviceWysiwyg||""),((E.doctype=="html")?"html":"xhtml"),".",(E.ext?E.ext:"html"),"?prefix="+C.initializedId,"&",E.param].join(""))});r.add({size:{}});z.Canvas=z.Class.create({$const:{__TEXT_MODE:"text",__HTML_MODE:"source",__WYSIWYG_MODE:"html",__WYSIWYG_PADDING:8,__IMAGE_PADDING:5},$mixins:[z.I.JobObservable,z.I.KeyObservable,z.I.ElementObservable,z.I.MouseoverObservable],editor:k,elContainer:k,config:k,history:k,panels:k,initialize:function(B,D){this.editor=B;var C=this.config=r.get("canvas",D);
var E=((D.initializedId)?D.initializedId:"");this.elContainer=v("tx_canvas"+E);this.wysiwygEl=v("tx_canvas_wysiwyg_holder"+E);this.sourceEl=v("tx_canvas_source_holder"+E);this.textEl=v("tx_canvas_text_holder"+E);this.initConfig(D);this.createPanel();this.history=new z.History(this,C);this.setCanvasSize({height:C.initHeight})},initConfig:function(D){var C=this.config;this.getRootConfig=function(){return D};this.getConfig=function(){return C};this.getStyleConfig=function(E){if(E){return C.styles[E]}else{return C.styles}};var B=r.get("size",D);this.measureWrapWidth=function(){B.wrapWidth=this.getContainerWidth()};this.measureWrapWidth();if(!B.contentWidth){B.contentWidth=B.wrapWidth}B.contentPadding=C.styles.padding.parsePx();this.getSizeConfig=function(){return B}},getContainerWidth:function(){return v.getDimensions(this.elContainer).width},createPanel:function(){var E=this;var D=this.config;this.panels={};this.mode=D.selectedMode||z.Canvas.__WYSIWYG_MODE;if((v.ios&&v.ios_ver<5)||(v.android&&v.android_ver<3)){this.mode=z.Canvas.__TEXT_MODE
}var C={text:function(F){return new z.Canvas.TextPanel(E,F)},source:function(F){return new z.Canvas.HtmlPanel(E,F)},html:function(F){return new z.Canvas.WysiwygPanel(E,F)}};D.mode.each(function(F){if(C[F]){E.panels[F]=C[F](D)}});for(var B in E.panels){if(this.mode==B){E.panels[B].show()}else{E.panels[B].hide()}}E.observeJob("canvas.panel.iframe.load",function(F){E.fireJobs(z.Ev.__IFRAME_LOAD_COMPLETE,F)})},changeMode:function(C){var B=this.editor;var G=this.mode;if(G==C){return}var D=this.panels[G];var E=this.panels[C];if(!D||!E){throw new Error("[Exception]Trex.Canvas : not suppored mode")}var I=D.getContent();var F=B.getDocParser().getContentsAtChangingMode(I,G,C);if(G==z.Canvas.__WYSIWYG_MODE){if(v.msie_ver===8){D.hide()}D.setContent("");try{this.focusOnTop()}catch(H){}}try{E.setContent(F)}catch(J){alert(" - Error: "+J.message+"\n\uc5d0\ub514\ud130 \ud0c0\uc785 \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.\n\uc798\ubabb\ub41c HTML\uc774 \uc788\ub294\uc9c0 \ud655\uc778\ud574\uc8fc\uc138\uc694.");
D.setContent(I);D.show();return}this.mode=C;this.fireJobs(z.Ev.__CANVAS_MODE_CHANGE,G,C);E.setPanelHeight(D.getPanelHeight());D.hide();E.show();try{if(C=="html"&&!this.getPanel("html").designModeActivated&&v.gecko){this.getPanel("html").el.contentDocument.designMode="on";this.getPanel("html").designModeActivated=w}}catch(H){throw H}},focus:function(){this.panels[this.mode].focus()},focusOnTop:function(){if(!this.isWYSIWYG()){return}this.getProcessor().focusOnTop()},focusOnBottom:function(){if(!this.isWYSIWYG()){return}this.getProcessor().focusOnBottom()},getCanvasPos:function(){var B=v.cumulativeOffset(this.elContainer);return{x:B[0],y:B[1]}},setCanvasSize:function(B){if(this.panels[this.mode]&&B.height){this.panels[this.mode].setPanelHeight(B.height)}else{throw new Error("[Exception]Trex.Canvas : argument has no property - size.height ")}},canHTML:function(){return this.isWYSIWYG()},isWYSIWYG:function(){return this.mode===z.Canvas.__WYSIWYG_MODE},getPanel:function(B){if(this.panels[B]){return this.panels[B]
}else{return k}},getCurrentPanel:function(){if(this.panels[this.mode]){return this.panels[this.mode]}else{return k}},getProcessor:function(B){if(!B){return this.panels[this.mode].getProcessor()}else{return this.panels[B].getProcessor()}},getContent:function(){var B=this.panels[this.mode].getContent();if(B){B=B.replace(z.__WORD_JOINER_REGEXP,"")}return B},getScrollTop:function(){if(!this.isWYSIWYG()){return 0}return this.panels[this.mode].getScrollTop()},setScrollTop:function(B){if(!this.isWYSIWYG()){return}this.panels[this.mode].setScrollTop(B)},setContent:function(B){this.panels[this.mode].setContent(B);this.includeWebfontCss(B)},initContent:function(B){this.history.initHistory({content:B});this.panels[this.mode].setContent(B);this.includeWebfontCss(B);this.fireJobs(z.Ev.__CANVAS_DATA_INITIALIZE,z.Canvas.__WYSIWYG_MODE,k)},includeWebfontCss:function(B){if(!this.isWYSIWYG()){return}return this.panels[this.mode].includeWebfontCss(B)},getUsedWebfont:function(){if(!this.isWYSIWYG()){return[]
}return this.panels[this.mode].getUsedWebfont()},runScript:function(B){if(!this.isWYSIWYG()){return[]}this.panels[this.mode].runScript(B)},importScript:function(B,C){if(!this.isWYSIWYG()){return[]}this.panels[this.mode].importScript(B,C)},query:function(C){if(!this.isWYSIWYG()){return k}var B=this.getProcessor();return C(B)},execute:function(D){var C=this.history;var B=this.getProcessor();if(this.isWYSIWYG()){this.getPanel("html").ensureFocused();if(B.restoreRange){setTimeout(function(){B.restoreRange();D(B);C.saveHistory();B.restore()},0)}else{D(B);B.focus();C.saveHistory();B.restore()}}else{D(B)}},moveCaret:function(B){if(!B){return}if(!this.isWYSIWYG()){return}this.getProcessor().moveCaretWith(B)},pasteContent:function(D,B,C){B=B||d;this.execute(function(E){E.pasteContent(D,B,C)})},pasteNode:function(D,B,C){if(!this.isWYSIWYG()){return}B=B||d;this.execute(function(E){E.pasteNode(D,B,C)})},addStyle:function(B){this.panels[this.mode].addStyle(B)},getStyle:function(B){return this.panels[this.mode].getStyle(B)
},getPositionByNode:function(B){if(!this.isWYSIWYG()){return{x:0,y:0,width:0,height:0}}return this.panels[this.mode].getPositionByNode(B)},onKeyDown:function(B){this.fireJobs(z.Ev.__CANVAS_PANEL_KEYDOWN,B);if(this.config.useHotKey){this.fireKeys(B)}},onKeyUp:function(B){var C=B.keyCode;if(e(C)){this.getProcessor().clearDummy()}this.history.saveHistoryByKeyEvent(B);try{this.mayAttachmentChanged=w;this.fireJobs(z.Ev.__CANVAS_PANEL_KEYUP,B);if(this.isWYSIWYG()&&e(C)){this.triggerQueryStatus()}if(C===z.__KEY.DELETE||C===z.__KEY.BACKSPACE){this.fireJobs(z.Ev.__CANVAS_PANEL_DELETE_SOMETHING)}}catch(D){}},onMouseOver:function(B){try{this.fireMouseover(v.element(B));this.fireJobs(z.Ev.__CANVAS_PANEL_MOUSEOVER,B)}catch(C){}},onMouseOut:function(B){try{this.fireJobs(z.Ev.__CANVAS_PANEL_MOUSEOUT,B)}catch(C){}},onMouseDown:function(B){this.getProcessor().clearDummy();try{this.fireElements(v.element(B))}catch(D){}this.fireJobs(z.Ev.__CANVAS_PANEL_MOUSEDOWN,B);var C=this.history;C.saveHistoryIfEdited()
},onMouseUp:function(C){try{var B=this;B.fireJobs(z.Ev.__CANVAS_PANEL_MOUSEUP,C);setTimeout(function(){var E=B.getProcessor().createGoogRange();if(E){B.fireJobs(z.Ev.__CANVAS_PANEL_QUERY_STATUS,E)}},20)}catch(D){}},mayAttachmentChanged:d,onClick:function(B){this.fireJobs(z.Ev.__CANVAS_PANEL_CLICK,B)},onDoubleClick:function(B){this.fireJobs(z.Ev.__CANVAS_PANEL_DBLCLICK,B)},onScroll:function(B){this.fireJobs(z.Ev.__CANVAS_PANEL_SCROLLING,B)},onPaste:function(B){this.fireJobs(z.Ev.__CANVAS_PANEL_PASTE,B)},triggerQueryStatus:function(){this.cancelReservedQueryStatusTrigger();this.reserveQueryStatusTrigger()},reserveQueryStatusTrigger:function(){var B=this;this.reservedQueryStatusTrigger=setTimeout(function(){var C=B.getProcessor().createGoogRange();if(C){B.fireJobs(z.Ev.__CANVAS_PANEL_QUERY_STATUS,C);B.fireElements(B.getProcessor().getNode())}},20)},cancelReservedQueryStatusTrigger:function(){if(this.reservedQueryStatusTrigger){clearTimeout(this.reservedQueryStatusTrigger)}},syncProperty:function(){this.triggerQueryStatus()
}})})(i);i.module("bind canvas events for close external menus",function(A,B,C,z){var e=function(){A.fireJobs(i.Ev.__SHOULD_CLOSE_MENUS)};z.observeJob(i.Ev.__CANVAS_PANEL_CLICK,e);z.observeJob(i.Ev.__CANVAS_SOURCE_PANEL_CLICK,e);z.observeJob(i.Ev.__CANVAS_TEXT_PANEL_CLICK,e)});i.module("make getter for 'iframeheight' and 'iframetop' size",function(A,B,C,z){var D=0;var e=0;z.observeJob(i.Ev.__CANVAS_HEIGHT_CHANGE,function(E){D=E.parsePx()});z.observeJob("canvas.apply.background",function(){var F=z.getPanel(i.Canvas.__WYSIWYG_MODE);var E=y.getPosition(F.el);e=E.y});z.reserveJob(i.Ev.__IFRAME_LOAD_COMPLETE,function(){var F=z.getPanel(i.Canvas.__WYSIWYG_MODE);D=F.getPanelHeight().parsePx();var E=y.getPosition(F.el);e=E.y},300);z.getIframeHeight=function(){return D};z.getIframeTop=function(){return e}});i.module("sync attachment data periodically",function(z,A,B,e){setTimeout(function(){setInterval(function(){if(e.mayAttachmentChanged){e.fireJobs(i.Ev.__CANVAS_PANEL_DELETE_SOMETHING);e.mayAttachmentChanged=d
}},3000)},10000)});i.Canvas.BasedPanel=i.Class.draft({initialize:function(A,z){this.config=z;this.canvas=A;this.elHolder=this.getHolder(z);this.el=this.getPanel(z);if(!this.el){throw new Error("[Exception]Trex.Canvas.Panel : panel element is not founded")}var e=this.constructor.__MODE;this.getName=function(){return e};this.lastHeight=k},focus:function(){this.el.focus()},show:function(){try{v.show(this.elHolder)}catch(z){}},hide:function(){try{v.hide(this.elHolder)}catch(z){}},getStyle:function(e){if(this.el.style[e]){return this.el.style[e]}else{return k}},addStyle:function(z){for(var e in z){if(this.el.style[e]){this.el.style[e]=z[e]}}},getPosition:function(){return y.getPosition(this.el)},getPanelHeight:function(){return y.getHeight(this.el).toPx()},setPanelHeight:function(e){e=e.toPx();if(this.lastHeight==e){return}y.setHeight(this.el,e);this.lastHeight=e}});(function(){i.WysiwygIframeLoader=i.Class.create({initialize:function(G,F,E){this.iframe=G;this.iframeUrl=F;this.doctype="";switch(E){case"edge":case"loose":case"strict":this.doctype=E
}},load:function(F){try{this.loadLocalIframe(F,this.doctype)}catch(E){this.reloadUsingCatalyst(F)}},loadLocalIframe:function(G,E){var F=this.iframe.contentWindow.document;F.open();switch(E){case"edge":F.write(D);break;case"loose":F.write(A);break;case"strict":F.write(B);break}F.write(e);F.close();setTimeout(function(){G(F)},0)},reloadUsingCatalyst:function(J){var F=this;j.__tx_wysiwyg_iframe_load_complete=function(){F.loadLocalIframe(J,"")};if(!this.iframeUrl){try{var I=EditorJSLoader.getPageBasePath("editor.js")}catch(G){I=EditorJSLoader.getPageBasePath()}var E=this.doctype;switch(E){case"edge":case"loose":case"strict":this.iframeUrl=I+"trex/iframe_loader_catalyst_"+E+".html";break;default:this.iframeUrl=I+"trex/iframe_loader_catalyst.html"}}var H=(document.location.hostname!=document.domain);if(H){this.iframeUrl=this.iframeUrl+((this.iframeUrl.indexOf("?")>-1)?"&":"?")+"xssDomain="+document.domain}this.iframe.src=this.iframeUrl},loadRemoteIframe:function(){var E=this.el;E.setAttribute("src",this.canvasConfig.wysiwygUrl)
}});function C(G){var E=c.location;if(/^(https?:|file:|)\/\//.test(G)){}else{if(G.indexOf("/")===0){G="//"+E.host+":"+(E.port||"80")+G}else{var F=E.href;var H=F.lastIndexOf("/");G=F.substring(0,H+1)+G}}return G}var z=C(EditorJSLoader.getCSSBasePath());var D="<!DOCTYPE html>";var A='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">';var B='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">';var e='<html lang="ko"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>DaumEditor Wygiwyg Panel</title><script id="txScriptForEval"><\/script><link rel="stylesheet" href="'+z+'content_view.css" type="text/css"></link><link rel="stylesheet" href="'+z+'content_wysiwyg.css" type="text/css"></link><style id="txStyleForSetRule"></style></head><body class="tx-content-container">'+y.EMPTY_PARAGRAPH_HTML+"</body></html>"})();(function(){i.WebfontLoader=i.Class.create({initialize:function(z,e){this.doc=z;
this.styleCnt=0;this.defWebfont=e.styles.fontFamily;this.useWebfont=(e.webfont&&e.webfont.use);this.webfontCfg=e.webfont||[];this.elStyleSheet=this.getStyleSheet()},load:function(A){if(!v.msie){return}if(!A){return}if(!this.useWebfont){return}var e=[];A+=" // font-family:"+this.defWebfont;A.replace(/font-family\s*:\s*(\w*)/gi,function(C,B){e.push(B);return C});if(e.length==0){return}var z=this;setTimeout(function(){var B=e.uniq().join("||");z.webfontCfg.options.each(function(C){if(C.url&&B.indexOf(C.data)>-1){z.imports(C)}})},10)},getUsed:function(){if(!v.msie){return[]}var e=[];if(!this.useWebfont){return e}this.webfontCfg.options.each(function(z){if(!z.url){e.push(z.data)}});return e},getStyleSheet:function(){return this.doc.styleSheets[this.styleCnt++]},imports:function(z){try{this.elStyleSheet.addImport(z.url,2)}catch(A){this.elStyleSheet=this.getStyleSheet();this.elStyleSheet.addImport(z.url,2)}z.url=k}})})();(function(){var e=16;i.WysiwygRelative=i.Class.create({initialize:function(z){this.iframe=z
},getRelative:function(A){var G={x:0,y:0,width:0,height:0};var H=this.iframe.contentWindow.document;if(A){var F=y.getPosition(A,w);var D=y.getHeight(this.iframe);var z=y.getScrollTop(H);if(F.y+F.height<z||F.y>z+D){return G}else{var E=0;var C=0;var I=y.getWidth(this.iframe);var B=y.getScrollLeft(H);G.x=E+((B>0)?0:F.x);G.width=Math.min(I-F.x-e,F.width-((B>0)?B-F.x:0));G.height=F.height;G.y=F.y-z+C}}return G}})})();(function(){i.WysiwygEventBinder=i.Class.create({initialize:function(D,C,B){this.win=D;this.doc=C;this.canvas=B},bindEvents:function(){this.translateDocumentEventToCanvas("keyup","onKeyUp");this.translateDocumentEventToCanvas("keydown","onKeyDown");this.translateDocumentEventToCanvas("mouseover","onMouseOver");this.translateDocumentEventToCanvas("mouseout","onMouseOut");this.translateDocumentEventToCanvas("click","onClick");this.translateDocumentEventToCanvas("dblclick","onDoubleClick");this.translateDocumentEventToCanvas("mousedown","onMouseDown");this.translateDocumentEventToCanvas("mouseup","onMouseUp");
this.translateWindowEventToCanvas("scroll","onScroll");this.translateBodyEventToCanvas("paste","onPaste");this.triggerQueryStatusWhenTenConsecutiveKeyPressesDetected()},translateDocumentEventToCanvas:function(B,C){this.translateEventToCanvas(this.doc,B,C)},translateWindowEventToCanvas:function(B,C){this.translateEventToCanvas(this.win,B,C)},translateBodyEventToCanvas:function(B,C){this.translateEventToCanvas(this.doc.body,B,C)},translateEventToCanvas:function(E,B,D){var C=this.canvas;v.observe(E,B,function(F){C[D](F)},d)},triggerQueryStatusWhenTenConsecutiveKeyPressesDetected:function(){var B=this.canvas;e(this.doc,function(){B.triggerQueryStatus()})}});var e=function(B,C){var E=0,F=-1,D=(v.msie||v.webkit)?"keydown":"keypress";v.observe(B,D,function(H){var G=H.keyCode;if(!A(G)&&F!==G){if(E>=9){C();E=0}else{E++}F=G}},d)};var A=function(B){return z.contains(B)};var z=new v.Set(8,16,17,18,32,33,34,37,38,39,40,46,229)})();(function(){i.Canvas.WysiwygPanel=i.Class.create({$extend:i.Canvas.BasedPanel,$const:{__MODE:i.Canvas.__WYSIWYG_MODE,EVENT_BINDING_DELAY:500},initialize:function(D,E){this.$super.initialize(D,E);
this.canvasConfig=E;this.iframe=this.el;this.wysiwygWindow=this.iframe.contentWindow;this.onceWysiwygFocused=false;var C=this;var F=new i.WysiwygIframeLoader(this.iframe,E.wysiwygCatalystUrl,E.doctype);F.load(function(I){C.wysiwygDoc=I;C.initializeSubModules(I);installHyperscript(C.wysiwygWindow,C.wysiwygDoc);C.makeEditable();C.applyBodyStyles(C.canvasConfig.styles);C.applyCustomCssText(C.canvasConfig.customCssText);C.clearContent();C.bindEvents(D);Editor.__PANEL_LOADED=w;v.observe(C.wysiwygWindow,"focus",function H(){if(!C.onceWysiwygFocused){C.onceWysiwygFocused=true}});if(v.msie_nonstd){var G=C.wysiwygDoc.getElementsByTagName("html");if(G&&G[0]){v.observe(G[0],"click",function(J){var K=v.element(J);if(D.canHTML()&&G[0]==K){C.focus()}})}}D.fireJobs(i.Ev.__IFRAME_LOAD_COMPLETE,I)})},initializeSubModules:function(D){var C=this.wysiwygWindow;this.processor=new i.Canvas.ProcessorP(C,D);this.webfontLoader=new i.WebfontLoader(D,this.canvasConfig)},makeEditable:function(){if(this.canvasConfig.readonly){return
}if(this.wysiwygDoc.body.contentEditable){this.wysiwygDoc.body.contentEditable=w}else{var C=this;setTimeout(function(){try{C.wysiwygDoc.designMode="On";if(v.gecko){C.wysiwygDoc.execCommand("enableInlineTableEditing",d,d)}}catch(D){C.designModeActivated=d}},10)}},getName:function(){return this.constructor.__MODE},getWindow:function(){return this.wysiwygWindow},getDocument:function(){return this.wysiwygDoc},getContent:function(){return this.wysiwygDoc.body.innerHTML},setContent:function(C){C=this.doPreFilter(C);this.setBodyHTML(C);this.doPostFilter(this.wysiwygDoc.body)},doPreFilter:function(C){if(C){C=B(C);C=z(C)}return C},setBodyHTML:function(C){this.wysiwygDoc.body.innerHTML=C||y.EMPTY_PARAGRAPH_HTML},doPostFilter:function(C){A(C)},clearContent:function(){this.setContent("")},getScrollTop:function(){return y.getScrollTop(this.wysiwygDoc)},setScrollTop:function(C){y.setScrollTop(this.wysiwygDoc,C)},getScrollLeft:function(){return y.getScrollLeft(this.wysiwygDoc)},getProcessor:function(){return this.processor
},ifProcessorReady:function(C){if(this.processor){C(this.processor)}},getStyle:function(C){return v.getStyle(this.wysiwygDoc.body,C)},addStyle:function(C){v.setStyleProperty(this.wysiwygDoc.body,C)},setBodyStyle:function(E,D){var C=e(D);v.setStyleProperty(E.body,C)},setFontStyle:function(F,D){var E=Object.extend(D,{browser:v.browser,pMarginZero:this.canvasConfig.pMarginZero?"true":"false"});var C=new Template(["#{if:pMarginZero=='true'}p { margin:0; padding:0; }#{/if:pMarginZero}","body, td, button { color:#{color}; font-size:#{fontSize}; font-family:#{fontFamily}; line-height:#{lineHeight}; }","a, a:hover, a:link, a:active, a:visited { color:#{color}; }","div.txc-search-border { border-color:#{color}; }","div.txc-search-opborder { border-color:#{color}; }","img.tx-unresizable { width: auto !important; height: auto !important; }","button a { text-decoration:none #{if:browser=='firefox'}!important#{/if:browser}; color:#{color} #{if:browser=='firefox'}!important#{/if:browser}; }"].join("\n")).evaluate(E);
v.applyCSSText(F,C)},applyBodyStyles:function(C){var E=this.wysiwygDoc;try{this.setFontStyle(E,C);this.setBodyStyle(E,C)}catch(D){}},applyCustomCssText:function(C){if(!C){return}var D=this.wysiwygDoc;try{v.applyCSSText(D,C)}catch(E){}},setRule:function(C,F){var E,D,G;try{E=this.wysiwygDoc.getElementById("txStyleForSetRule");D=E.sheet?E.sheet:E.styleSheet;G=D.cssRules?D.cssRules:D.rules;if(D.insertRule){if(0<G.length){D.deleteRule(0)}if(C){D.insertRule(C+"{"+F+"}",0)}}else{if(D.addRule){if(0<G.length){D.removeRule(0)}if(C){D.addRule(C,F,0)}}}}catch(H){}},bindEvents:function(C){var D=new i.WysiwygEventBinder(this.wysiwygWindow,this.wysiwygDoc,C,this.processor);setTimeout(function(){D.bindEvents()},this.constructor.EVENT_BINDING_DELAY)},getPanel:function(C){var D=C.initializedId||"";return $must("tx_canvas_wysiwyg"+D,"Trex.Canvas.WysiwygPanel")},getHolder:function(C){var D=C.initializedId||"";return $must("tx_canvas_wysiwyg_holder"+D,"Trex.Canvas.WysiwygPanel")},focus:function(){this.ifProcessorReady(function(C){C.focus()
})},ensureFocused:function(){if(!this.onceWysiwygFocused){this.onceWysiwygFocused=true;this.focus()}},show:function(){this.$super.show();this.ifProcessorReady(function(C){setTimeout(function(){try{C.focusOnTop()}catch(D){}},100)})},hide:function(){this.ifProcessorReady(function(C){C.blur()});this.$super.hide()},includeWebfontCss:function(C){this.webfontLoader.load(C)},getUsedWebfont:function(){return this.webfontLoader.getUsed()},getPositionByNode:function(D){var C=new i.WysiwygRelative(this.iframe);return C.getRelative(D)}});function e(F){var C=["color","fontSize","fontFamily","lineHeight"];var D=Object.clone(F);for(var E=0;E<C.length;E++){delete D[C[E]]}return D}function B(C){return C.replace(i.__WORD_JOINER_REGEXP,"")}function z(C){if(v.msie_nonstd){C=C.replace(/(<script|<style)/i,i.__WORD_JOINER+"$1")}return C}function A(D){if(v.msie_nonstd){var G=y.collectAll(D,"p,li");for(var E=0,C=G.length;E<C;E++){var F=G[E];if(y.getLength(F)===0&&F.tagName.toLowerCase()!=="p"){try{F.innerHTML="&nbsp;"
}catch(H){}}if(y.getLength(F)===1&&F.innerHTML==="&nbsp;"){F.innerHTML=""}}}}})();i.Canvas.TextareaPanel=i.Class.create({$extend:i.Canvas.BasedPanel,initialize:function(z,e){this.$super.initialize(z,e);var A=new i.Canvas.TextAreaProcessor(this.el);this.getProcessor=function(){return A};this.lastHeight=(this.lastHeight-9*2).toPx();if(!!e.readonly){this.setReadOnly()}},show:function(){this.$super.show();var z=this.elHolder;var e=this.getProcessor();setTimeout(function(){try{e.focusOnTop()}catch(A){}if(v.msie6){z.style.padding="1px";setTimeout(function(){z.style.padding="0px"},0)}},100)},setContent:function(e){this.el.value=e},getContent:function(){return this.el.value},getPanelHeight:function(){return(y.getHeight(this.el).parsePx()+2).toPx()},setPanelHeight:function(e){this.$super.setPanelHeight((e.parsePx()-2).toPx())},setReadOnly:function(){this.el.readOnly=w}});i.Canvas.HtmlPanel=i.Class.create({$extend:i.Canvas.TextareaPanel,$const:{__MODE:i.Canvas.__HTML_MODE},initialize:function(z,e){this.$super.initialize(z,e);
this.bindEvents();if(v.msie_ver=="8"){this.el.setAttribute("style","width: 500px; min-width: 100%; max-width: 100%;")}if(!e.styles.notApplyBgColorOnSourceMode){if(e.styles.backgroundColor){v.setStyle(this.el,{backgroundColor:e.styles.backgroundColor})}if(e.styles.color){v.setStyle(this.el,{color:e.styles.color})}}},bindEvents:function(){var e={keydown:function(A){this.canvas.fireJobs(i.Ev.__CANVAS_SOURCE_PANEL_KEYDOWN,A)},keyup:function(){var A=this.canvas.getProcessor();if(A&&A.savePosition){A.savePosition()}},mousedown:function(A){this.canvas.fireJobs(i.Ev.__CANVAS_SOURCE_PANEL_MOUSEDOWN,A)},mouseup:function(){var A=this.canvas.getProcessor();if(A&&A.savePosition){A.savePosition()}},click:function(A){this.canvas.fireJobs(i.Ev.__CANVAS_SOURCE_PANEL_CLICK,A)}};for(var z in e){v.observe(this.el,z,e[z].bind(this),w)}},getPanel:function(e){var z=((e.initializedId)?e.initializedId:"");return $must("tx_canvas_source"+z,"Trex.Canvas.HtmlPanel")},getHolder:function(e){var z=((e.initializedId)?e.initializedId:"");
return $must("tx_canvas_source_holder"+z,"Trex.Canvas.HtmlPanel")},setContent:function(z){var e=new i.Validator();if(e.exists(z)){this.$super.setContent(z)}else{this.$super.setContent("")}}});i.Canvas.TextPanel=i.Class.create({$extend:i.Canvas.TextareaPanel,$const:{__MODE:i.Canvas.__TEXT_MODE},initialize:function(z,e){this.$super.initialize(z,e);this.bindEvents()},bindEvents:function(){var e={keydown:function(){},keyup:function(){},mousedown:function(){},mouseup:function(){},click:function(A){this.canvas.fireJobs(i.Ev.__CANVAS_TEXT_PANEL_CLICK,A)}};for(var z in e){v.observe(this.el,z,e[z].bind(this),w)}},getPanel:function(e){var z=((e.initializedId)?e.initializedId:"");return $must("tx_canvas_text"+z,"Trex.Canvas.TextPanel")},getHolder:function(e){var z=((e.initializedId)?e.initializedId:"");return $must("tx_canvas_text_holder"+z,"Trex.Canvas.TextPanel")}});i.module("interrupt enter key action @ text panel",function(z,B,C,e){var A=e.config.newlinepolicy;var D=e.config.insertbr;if(A=="br"&&D){e.observeJob(i.Ev.__CANVAS_SOURCE_PANEL_KEYDOWN,function(E){if(e.isWYSIWYG()){return
}e.getProcessor().controlEnter(E)})}});i.I.Marker={};i.I.Marker.Standard={paste:function(){var e=this.processor.getRange();var E=e.endContainer;var C=e.startContainer;if(E.nodeType==9){E=this.processor.doc.body;C=this.processor.doc.body}var B=this.endMarker=this.processor.create("span",{id:"tx_end_marker"});var z=e.endOffset;if(E.nodeType==3){E.splitText(z);E.parentNode.insertBefore(B,E.nextSibling)}else{E.insertBefore(B,E.childNodes[z])}var D=this.startMarker=this.processor.create("span",{id:"tx_start_marker"});var A=e.startOffset;if(C.nodeType==3){C.splitText(A);C.parentNode.insertBefore(D,C.nextSibling)}else{C.insertBefore(D,C.childNodes[A])}},remove:function(){y.remove(this.startMarker);y.remove(this.endMarker)}};i.I.Marker.Trident={paste:function(){this.clear();var z=this.processor.getRange();var e=this.processor.doc.body;var B=z.duplicate();B.collapse(w);B.pasteHTML('<span id="tx_start_marker"></span>');this.startMarker=y.collect(e,"#tx_start_marker");var A=z.duplicate();A.collapse(d);
A.pasteHTML('<span id="tx_end_marker"></span>');this.endMarker=y.collect(e,"#tx_end_marker")},clear:function(){var e=this.processor.doc.body;y.remove(y.collect(e,"#tx_start_marker"));y.remove(y.collect(e,"#tx_end_marker"))},remove:function(){y.remove(this.startMarker);y.remove(this.endMarker)}};i.Canvas.Marker=i.Class.create({$mixins:[((v.msie_nonstd)?i.I.Marker.Trident:i.I.Marker.Standard)],initialize:function(e){this.processor=e},backup:function(){this.processor.bookmarkWithMarker(this)},checkCollapsed:function(){return(y.next(this.startMarker)==this.endMarker)}});i.I.Selection={};i.I.Selection.Standard={getSel:function(){return this.win.getSelection()},getText:function(){return this.getSel().toString()},getNode:function(){var e=this.getRange();if(e){var z=e.startContainer;if(z.nodeType==1){if(y.isBody(z)){return(z)}else{return(z.childNodes[e.startOffset])}}else{return(z.parentNode)}}else{return k}},createRange:function(){return this.doc.createRange()},createTextRange:function(){return this.doc.createRange()
},getRange:function(A){var z=this.getSel();if(z&&z.rangeCount>0){if(A==k){if(z.rangeCount==1){return z.getRangeAt(0)}else{return this.mergeRange(z)}}else{var e=z.getRangeAt(0);e.collapse(A);return e}}else{return this.doc.createRange()}},isCollapsed:function(){var e=this.getSel();return(e&&e.isCollapsed)},collapse:function(z){var A=this.getSel();if(A&&A.rangeCount>0){var e=A.getRangeAt(0);e.collapse(z)}},getControl:function(){var z=this.getSel();var e;if(v.opera){e=z.anchorNode.childNodes[z.anchorOffset];if(e==k){return k}if(z.isCollapsed&&e.tagName!="IMG"){return k}}else{if(z.isCollapsed){return k}e=z.anchorNode.childNodes[z.anchorOffset]}if(y.kindOf(e,"%control")){return e}else{return k}},hasControl:function(){return(this.getControl()!=k)},selectControl:function(z){var e=this.createRange();e.selectNode(z);var A=this.getSel();A.removeAllRanges();A.addRange(e)},compareTextPos:function(){var e=this.getRange();if(e){var z=e.startContainer;if(z.nodeType==3){if(z.textContent.trim().length==0){return y.__POSITION.__EMPTY_TEXT
}else{if(e.startOffset==0){return y.__POSITION.__START_OF_TEXT}else{if(e.startOffset==z.textContent.length){return y.__POSITION.__END_OF_TEXT}else{return y.__POSITION.__MIDDLE_OF_TEXT}}}}}return y.__POSITION.__END_OF_TEXT},mergeRange:function(D){try{var C=[];for(var B=0,G=D.rangeCount;B<G;B++){C.push(D.getRangeAt(B))}D.removeAllRanges();var A=C[0].startContainer.childNodes[C[0].startOffset];var F=C[G-1].endContainer.childNodes[C[G-1].endOffset-1];var z=this.doc.createRange();try{z.setStart(A,0)}catch(E){z.collapse(w)}try{z.setEnd(F,F.childNodes.length)}catch(E){}D.addRange(z);return D.getRangeAt(0)}catch(E){return D.getRangeAt(0)}},setStart:function(z,A,C){try{z.setStart(A,C)}catch(B){z.collapse(w);z.setStart(A,C)}},setEnd:function(z,A,C){try{z.setEnd(A,C)}catch(B){z.collapse(d);z.setEnd(A,C)}},selectRange:function(e){var z=this.getSel();z.removeAllRanges();z.addRange(e)}};i.I.Selection.Trident={getSel:function(){return this.doc.selection},getText:function(){return this.getSel().createRange().text
},getNode:function(){var z=this.getSel();var e=z.type.toLowerCase();if(e==="control"){return(z.createRange().item(0))}else{return(z.createRange().parentElement())}},createRange:function(){var e=this.getSel();return e.createRange()},createTextRange:function(){return this.doc.body.createTextRange()},getRange:function(B){var A=this.getSel();var z=A.type.toLowerCase();if(z=="none"){return A.createRange()?A.createRange():function(){var C=this.doc.body.createTextRange();C.collapse(w);C.select();return C}()}if(B==k){return A.createRange()}else{if(z==="text"){var e=A.createRange();e.collapse(B);e.select();return A.createRange()}else{if(z==="control"){A.empty()}return A.createRange()}}},isCollapsed:function(){var A=this.getSel();var z=A.type.toLowerCase();if(z==="none"){return w}else{if(z==="control"){return w}else{if(z==="text"){var e=A.createRange();return e.compareEndPoints("StartToEnd",e)==0}else{return w}}}},collapse:function(A){var B=this.getSel();var z=B.type.toLowerCase();if(z==="text"){var e=B.createRange();
e.collapse(A);e.select();return B.createRange()}else{if(z==="control"){B.empty()}return B.createRange()}},getControl:function(){var A=this.getSel();var e=A.type.toLowerCase();if(e==="control"){var z=A.createRange().item(0);if(y.kindOf(z,"%control")){return z}else{return k}}else{return k}},hasControl:function(){var z=this.getSel();var e=z.type.toLowerCase();if(e==="control"){return w}else{return d}},selectControl:function(z){var e=this.doc.body.createControlRange();e.add(z);e.select()},compareTextPos:function(){var A=this.getSel();var z=A.type.toLowerCase();if(z==="none"){var e=A.createRange();var B=e.duplicate();B.moveToElementText(e.parentElement());if(B.text.trim().replace(i.__WORD_JOINER_REGEXP,"").length==0){return y.__POSITION.__EMPTY_TEXT}else{if(e.compareEndPoints("StartToStart",B)==0){return y.__POSITION.__START_OF_TEXT}else{if(e.compareEndPoints("EndToEnd",B)==0){return y.__POSITION.__END_OF_TEXT}else{return y.__POSITION.__MIDDLE_OF_TEXT}}}}return y.__POSITION.__END_OF_TEXT},transTextRange:function(e,C,D,A){var B=this.createTextRange();
var z=this.win.span(i.__WORD_JOINER);y.insertAt(z,C);B.moveToElementText(z);y.remove(z);B.collapse(w);B.moveStart("character",D);if(A){e.setEndPoint("StartToStart",B)}else{e.setEndPoint("EndToEnd",B)}return e},setStart:function(z,A,C){try{this.transTextRange(z,A,C,w)}catch(B){console.log(B)}return z},setEnd:function(z,A,C){try{this.transTextRange(z,A,C,d)}catch(B){console.log(B)}return z},selectRange:function(e){e.select()}};i.I.Selection.TridentStandard={getControl:function(){var B=this.getSel();if(B.isCollapsed){return null}if(y.isElement(B.anchorNode)){var A=B.anchorNode.childNodes[B.anchorOffset];if(y.kindOf(A,"%control")){return A}else{return null}}var z=y.previous(B.focusNode);var e=y.next(B.anchorNode);if(z==e){return y.first(z,"%control")}else{return null}},selectControl:function(z){var e=this.createRange();e.selectNode(z);var A=this.getSel();A.removeAllRanges();A.addRange(e)}};i.I.Selection.Gecko={};i.I.Selection.Webkit={getControl:function(){var B=this.getSel();if(B.isCollapsed){return k
}if(y.isElement(B.anchorNode)){var A=B.anchorNode.childNodes[B.anchorOffset];if(y.kindOf(A,"%control")){return A}else{return k}}var z=y.previous(B.focusNode);var e=y.next(B.anchorNode);if(z==e){return y.first(z,"%control")}else{return k}},selectControl:function(z){var e=this.createRange();e.selectNode(z);var A=this.getSel();A.removeAllRanges();A.addRange(e)}};i.I.Selection.Presto={};i.Canvas.Selection=i.Class.create({$mixins:[i.I.Selection.Standard,((v.msie_nonstd)?i.I.Selection.Trident:{}),((v.msie_std)?i.I.Selection.TridentStandard:{}),((v.gecko)?i.I.Selection.Gecko:{}),((v.webkit)?i.I.Selection.Webkit:{}),((v.presto)?i.I.Selection.Presto:{})],initialize:function(e){this.processor=e;this.win=e.win;this.doc=e.doc}});i.Canvas.Bookmark=i.Class.create({startContainer:k,startOffset:0,endContainer:k,endOffset:0,initialize:function(e){this.processor=e;this.win=e.win;this.doc=e.doc;this.dummy=function(){return e.newDummy()}},collapse:function(e){if(e){this.updateEnd(this.startContainer,this.startOffset)
}else{this.updateStart(this.endContainer,this.endOffset)}},save:function(e){this.updateStart(e.startContainer,e.startOffset);this.updateEnd(e.endContainer,e.endOffset)},saveAroundNode:function(e){this.updateStartBefore(y.top(e));this.updateEndAfter(y.bottom(e))},saveIntoFirst:function(z){var e=y.top(z);this.updateEndBefore(e);this.collapse(d)},saveIntoLast:function(z){var e=y.bottom(z);this.updateEndBefore(e);this.collapse(d)},savePreviousTo:function(z){if(y.previous(z)){var e=y.top(y.previous(z));this.updateEndAfter(e)}else{this.updateEndBefore(z)}this.collapse(d)},saveNextTo:function(z){if(y.next(z)){var e=y.top(y.next(z));this.updateEndBefore(e)}else{this.updateEndAfter(z)}this.collapse(d)},saveWithMarker:function(e){if(e.checkCollapsed()){this.updateEndAfter(e.endMarker);this.collapse(d)}else{this.updateStartBefore(e.startMarker);this.updateEndAfter(e.endMarker)}},select:function(B){if(this.isValid()){var z=B.createTextRange();try{B.setStart(z,this.startContainer,this.startOffset);B.setEnd(z,this.endContainer,this.endOffset)
}catch(A){console.log(A)}B.selectRange(z)}this.reset()},isValid:function(){return this.isValidStartContainer()&&this.isValidEndContainer()},isValidStartContainer:function(){return this.doc.body===y.body(this.startContainer)},isValidEndContainer:function(){return this.doc.body===y.body(this.endContainer)},updateStart:function(e,z){this.startContainer=e;this.startOffset=z},updateStartBefore:function(z){var e=this.dummy();y.insertAt(e,z);this.startContainer=e;this.startOffset=0},updateStartAfter:function(z){var e=this.dummy();y.insertNext(e,z);this.startContainer=e;this.startOffset=0},updateEnd:function(e,z){this.endContainer=e;this.endOffset=z},updateEndBefore:function(z){var e=this.dummy();if(z.nodeName&&z.nodeName.toUpperCase()=="P"&&!z.nodeValue){y.append(z,e)}else{y.insertAt(e,z)}this.endContainer=e;this.endOffset=0},updateEndAfter:function(z){var e=this.dummy();y.insertNext(e,z);this.endContainer=e;this.endOffset=0},reset:function(){this.startContainer=k;this.startOffset=0;this.endContainer=k;
this.endOffset=0}});i.Canvas.TextAreaProcessor=i.Class.create({$mixins:[],initialize:function(e){this.el=e},focus:function(){this.el.focus()},focusOnTop:function(){var e=this.el;if(e.createTextRange){var z=e.createTextRange();z.collapse(w);z.moveStart("character",0);z.moveEnd("character",0);z.select()}else{if(e.setSelectionRange){e.select();e.setSelectionRange(0,0)}else{e.focus()}}},blur:function(){j.focus()},savePosition:function(){if(this.el.createTextRange){this.currentPos=c.selection.createRange().duplicate()}},controlEnter:function(){var e=this;e.insertTag("<br/>","")},insertTag:function(e,z){this.pasteContent(e+z);return w},pasteContent:function(e){this.el.value+=e}});i.I.Processor={};i.I.Processor.Standard={txSelection:k,isRangeInsideWysiwyg:d,lastRange:k,initialize:function(z,e){this.win=z;this.doc=e;this.txSelection=new i.Canvas.Selection(this);this.bookmark=new i.Canvas.Bookmark(this)},getTxSel:function(){return this.txSelection},getSel:function(){return this.txSelection.getSel()
},getRange:function(){return this.txSelection.getRange()},getBookmark:function(){return this.bookmark},isCollapsed:function(){return this.txSelection.isCollapsed()},getNode:function(){return this.txSelection.getNode()},getControl:function(){return this.txSelection.getControl()},hasControl:function(){return this.txSelection.hasControl()},selectControl:function(e){return this.txSelection.selectControl(e)},getText:function(){return this.txSelection.getText()},compareTextPos:function(){return this.txSelection.compareTextPos()},findNode:function(z){try{return y.find(this.getNode(),z)}catch(A){return k}},queryStyle:function(A,z){if(!A){return k}z=((z=="float")?((A.style.styleFloat===s)?"cssFloat":"styleFloat"):z);if(A.style&&A.style[z]){return A.style[z]}else{if(A.currentStyle&&A.currentStyle[z]){return A.currentStyle[z]}else{if(j.getComputedStyle){var e=this.doc.defaultView.getComputedStyle(A,k);return((e)?e[z]:k)}}}return k},queryAttr:function(z,e){if(!z){return k}return y.getAttribute(z,e)
},queryCommandState:function(A){try{return this.doc.queryCommandState(A)}catch(z){return d}},queryCommandValue:function(A){try{return this.doc.queryCommandValue(A)}catch(z){return""}},execCommand:function(B,z){if(v.gecko){try{this.doc.execCommand("styleWithCSS",d,d)}catch(A){}}try{this.doc.execCommand(B,d,z)}catch(A){}},execWithMarker:function(A){var z=new i.Canvas.Marker(this);this.bookmarkTo();try{z.paste();z.backup();A(z)}catch(B){console.log(B,B.stack)}finally{z.remove()}},focus:function(){this.doc.body.focus()},blur:function(){j.focus()},focusOnTop:function(){this.focus();this.selectFirstText(this.doc.body);this.doc.body.scrollTop=0},selectFirstText:function(z){var A=y.top(z);var e=this.createGoogRangeFromNodes(A,0,A,0);e.select()},focusOnBottom:function(){this.focus();this.moveCaretTo(this.doc.body,d);this.doc.body.scrollTop=this.doc.body.scrollHeight},moveCaretTo:function(z,e){if(!z){return}this.bookmarkInto(z,e);this.bookmark.select(this.txSelection)},moveCaretWith:function(z){if(!z){return
}var e=this.findNode(z);if(e){this.bookmark.saveNextTo(e);this.bookmark.select(this.txSelection)}},selectAround:function(e){if(!e){return}this.bookmark.saveAroundNode(e);this.bookmark.select(this.txSelection)},bookmarkInto:function(z,e){if(!z){return}e=(e==k)?w:e;if(e){this.bookmark.saveIntoFirst(z)}else{this.bookmark.saveIntoLast(z)}},bookmarkToPrevious:function(e){if(!e){return}this.bookmark.savePreviousTo(e)},bookmarkToNext:function(e){if(!e){return}this.bookmark.saveNextTo(e)},bookmarkTo:function(e){e=e||this.txSelection.getRange();this.bookmark.save({startContainer:e.startContainer,startOffset:e.startOffset,endContainer:e.endContainer,endOffset:e.endOffset})},bookmarkWithMarker:function(e){this.bookmark.saveWithMarker(e)},restore:function(){this.bookmark.select(this.txSelection)},create:function(){var A=arguments[0];var C=this.newNode(A);for(var B=1;B<arguments.length;B++){var e=arguments[B];if(e.nodeType){y.append(C,e)}else{if(typeof(e)=="string"||typeof(e)=="number"){C.innerHTML+=e
}else{if(typeof(e)=="array"){for(var z=0;z<e.length;z++){y.append(C,e[z])}}else{y.applyAttributes(C,e)}}}}return C},pasteNode:function(C,B,E){if(!C){return}if(!C.length){C=[].concat(C)}this.txSelection.collapse(d);if(B){var A,z,e;var D=this;this.execWithMarker(function(F){e=y.divideParagraph(F.endMarker);var G=y.kindOf(e,"p,li,dd,dt,h1,h2,h3,h4,h5,h6");if(G){A=y.previous(e);z=y.clone(e)}else{e=D.newNode("p");y.insertAt(e,F.endMarker);z=D.newNode("p")}y.insertAt(z,e);C.each(function(H){y.append(z,H)});if(E){y.applyAttributes(z,E)}});if(A){if(!y.hasData(A)){this.stuffNode(A)}}this.stuffNode(e);this.bookmark.saveIntoFirst(e)}else{this.execWithMarker(function(F){C.each(function(G){y.insertAt(G,F.endMarker)})})}return C[0]},pasteContent:function(A,z,C){var e=this.create("div");e.innerHTML=A;var B=y.children(e);return this.pasteNode(B,z,C)},replace:function(A,e,z){this.bookmark.saveAroundNode(A);return y.replace(A,this.create(e,z))},blocks:function(A){var C=[];var B=A();if(this.hasControl()){var z=this.getControl();
if(y.kindOf(z.parentNode,B)){C.push(z.parentNode)}}else{var e=this;this.execWithMarker(function(D){var F=e.getBlockRangeIterator(B,D.startMarker,D.endMarker);var E;while(F.hasNext()){E=F.next();if(y.kindOf(E,"#tx_start_marker,#tx_end_marker")){}else{C.push(E)}}})}return C},inlines:function(B){var E=[];var C=B();var A=this;var D=function(){return A.create(y.inlineOf())};if(this.hasControl()){var z=this.getControl();if(y.kindOf(z,C)){E.push(z)}else{var e=D();y.insertNext(e,z);y.append(e,z)}}else{this.execWithMarker(function(G){if(G.checkCollapsed()){var F=D();y.append(F,A.newDummy());y.insertNext(F,G.startMarker);A.bookmarkTo({startContainer:F,startOffset:1,endContainer:F,endOffset:1});E.push(F)}else{var I=A.getInlineRangeIterator(C,G.startMarker,G.endMarker);var H;while(I.hasNext()){H=I.next();if(y.kindOf(H,"#tx_start_marker,#tx_end_marker")){}else{if(y.kindOf(H,"br")){}else{E.push(H)}}}}})}return E},controls:function(e){var z=[];if(this.hasControl()){if(y.kindOf(this.getControl(),e())){z.push(this.getControl())
}}return z},addDummyNbsp:function(){},apply:function(z,e){if(!z){return k}if(!z.length){z=[].concat(z)}z.each(function(A){y.applyAttributes(A,e)});return z},wrap:function(A,e,z){if(!A){return k}if(!A.length){A=[].concat(A)}z=z||{};return y.wrap(this.create(e,z),A)},unwrap:function(e){if(!e){return k}this.bookmark.saveAroundNode(e);return y.unwrap(e)},createGoogRange:function(){return g.dom.Range.createFromWindow(this.win)},createGoogRangeFromNodes:function(B,z,e,A){return g.dom.Range.createFromNodes(B,z,e,A)},executeUsingCaret:function(z){try{var e=this.createGoogRange();var A=e.saveUsingCarets();return z(e,A)}finally{if(!A.isDisposed()){A.restore()}}}};i.module("observe that @when control elements are focused at",function(z,A,B,e){if(v.webkit||v.presto){e.observeJob(i.Ev.__CANVAS_PANEL_MOUSEDOWN,function(E){var D=e.getProcessor();var C=v.element(E);if(y.kindOf(C,"img,hr,iframe,table")){var F=y.find(C,"button");if(F){D.selectControl(F)}else{D.selectControl(C)}}else{if(y.kindOf(C,"button")){D.selectControl(C)
}}})}});i.module("bind iframe activate or deactivate event",function(z,A,B,e){e.observeJob(i.Ev.__IFRAME_LOAD_COMPLETE,function(C){var D=e.getProcessor(i.Canvas.__WYSIWYG_MODE);v.observe(C,"beforedeactivate",function(E){D.isRangeInsideWysiwyg=true;D.lastRange=D.getRange()});v.observe(C,"deactivate",function(E){if(D.hasControl()){return}D.isRangeInsideWysiwyg=false});v.observe(C,"activate",function(){D.isRangeInsideWysiwyg=true;D.lastRange=k})})});i.I.Processor.Trident={stuffNode:function(e){if(y.getLength(e)==0){e.innerHTML="&nbsp;"}return e},controlEnterByParagraph:function(){var z=this.findNode("div");var e;if(!z){throw $propagate}var A=this.findNode("%paragraph");if(y.kindOf(A,"p")){if(y.first(z,"p")==A){this.execWithMarker(function(B){e=y.divideParagraph(B.endMarker)});this.stuffNode(A);this.stuffNode(e);this.moveCaretTo(e)}else{throw $propagate}}else{if(y.kindOf(A,"li,td,th,dd,dt")){throw $propagate}else{e=this.newParagraph("p");this.execWithMarker(function(B){y.insertNext(e,B.endMarker)
});this.moveCaretTo(e)}}}};i.module("delete image element @when backspace key event fires",function(z,A,B,e){if(v.msie_nonstd){e.observeKey({ctrlKey:d,altKey:d,shiftKey:d,keyCode:i.__KEY.BACKSPACE},function(){var D=e.getProcessor();if(D.hasControl()&&D.getControl()){try{var C=D.getControl();y.remove(C)}catch(E){}throw $stop}throw $propagate})}});i.module("delete table element @when backspace key event fires",function(z,A,B,e){if(v.msie_nonstd){var C;e.observeKey({ctrlKey:d,altKey:d,shiftKey:d,keyCode:i.__KEY.BACKSPACE},function(){var E=e.getProcessor();var D=E.getRange();try{if(C==D.boundingLeft){var G=y.previous(E.getNode());if(y.kindOf(G,"table")){y.remove(G)}}}catch(F){}C=D.boundingLeft;throw $propagate})}});Object.extend(i.I.Processor.Trident,{restoreRange:function(){if(!this.isRangeInsideWysiwyg&&this.lastRange){try{this.lastRange.select()}catch(C){var B=this.getSel();var A=B.type.toLowerCase();if(A==="control"){B.empty();var z=B.createRange();z.collapse(d);z.select()}}finally{this.lastRange=k
}}}});i.I.Processor.TridentStandard={stuffNode:function(e){return y.stuff(e,this.newNode("br"))},controlEnterByParagraph:function(e){throw $propagate},controlEnterByLinebreak:function(B){var A=this;var z=this.getRange(false);var D=z.endContainer.parentNode;if(D&&(D.tagName=="P"||D.tagName=="DIV"||D.tagName=="BODY"||D.tagName=="BLOCKQUOTE")){if(D.tagName=="BLOCKQUOTE"||v.hasClassName(D,"txc-textbox")||v.hasClassName(D,"txc-moreless")){v.stop(B);var e=A.win.br();z.insertNode(e);z.selectNode(e);z.collapse(false);e=A.win.br();z.insertNode(e);z.selectNode(e);z.collapse(false);var z=A.getRange(false);z.selectNodeContents(e.nextSibling);var C=A.getSel();C.removeAllRanges();C.addRange(z);C.collapseToStart()}}},queryCommandState:function(C){var z=this.getRange();if(this.hasControl()&&z.collapsed===false&&z.endOffset-z.startOffset===1){if(C==="bold"||C==="underline"||C==="italic"||C==="strikethrough"){var A=this.getControl();if(A.tagName==="IMG"||A.tagName==="BUTTON"){return false}}}try{return this.doc.queryCommandState(C)
}catch(B){return false}},addDummyNbsp:function(e){var z;if(e.length===1){z=e[0];if(z.tagName.toLowerCase()==="span"&&z.childNodes.length===1&&z.firstChild.nodeType===3&&z.firstChild.data===""){z.firstChild.data="\u00A0"}}}};Object.extend(i.I.Processor.TridentStandard,{restoreRange:function(){if(!this.isRangeInsideWysiwyg&&this.lastRange){var e=this.getSel();e.removeAllRanges();e.addRange(this.lastRange)}}});i.I.Processor.Gecko={stuffNode:function(e){return y.stuff(e,this.newNode("br"))},controlEnterByParagraph:function(){throw $propagate}};i.I.Processor.Webkit={stuffNode:function(e){return y.stuff(e,this.newNode("br"))},controlEnterByParagraph:function(){throw $propagate},findParagraph:function(A){var e=function(B){return y.kindOf(B,"div,p,blockquote")};var z=function(B){return y.kindOf(B,"body,li,%tablegroup")};return y.findAncestor(A,e,z)},findAncestorListItem:function(A){var e=function(B){return y.kindOf(B,"li")};var z=function(B){return y.kindOf(B,"body,%tablegroup")};return y.findAncestor(A,e,z)
},divideListItem:function(e){var A,z=this;z.execWithMarker(function(B){A=y.divideTree(e,B.endMarker)});if(!y.hasUsefulChildren(e,w)){e.innerHTML=""}if(!y.hasUsefulChildren(A,w)){A.innerHTML=""}z.stuffNode(e);z.stuffNode(A);z.moveCaretTo(A)},queryCommandState:function(C){var z=this.getRange();if(this.hasControl()&&z.collapsed===d&&z.endOffset-z.startOffset===1){if(C==="bold"||C==="underline"||C==="italic"||C==="strikethrough"){var A=this.getControl();if(A.tagName==="IMG"||A.tagName==="BUTTON"){return d}}}try{return this.doc.queryCommandState(C)}catch(B){return d}},addDummyNbsp:function(e){var z;if(e.length===1){z=e[0];if(z.tagName.toLowerCase()==="span"&&z.childNodes.length===1&&z.firstChild.nodeType===3&&z.firstChild.data===""){z.firstChild.data="\u00A0"}}}};i.I.Processor.Presto={stuffNode:function(e){return y.stuff(e,this.newNode("br"))},controlEnterByParagraph:function(e){throw $propagate}};i.I.Processor.StandardP={putBogusParagraph:function(){var A=this.doc.body;var z=y.last(A);if(z&&y.kindOf(z,"p")){return
}var e=this.newParagraph("p");if(y.kindOf(z,"br")){y.replace(z,e)}else{y.append(A,e)}}};i.module("put bogus paragraph @when any key event fires",function(z,A,B,e){if(v.msie_nonstd){return}if(e.config.newlinepolicy=="p"){e.reserveJob(i.Ev.__CANVAS_PANEL_KEYUP,function(){if(!e.isWYSIWYG()){return}var C=e.getProcessor();C.putBogusParagraph()},10)}});i.module("interrupt enter key action @ wysiwyg panel",function(z,A,C,e){var B=r.get("canvas");if(B.newlinepolicy!="p"){return}e.observeKey({ctrlKey:d,altKey:d,shiftKey:d,keyCode:i.__KEY.ENTER},function(E){if(!e.isWYSIWYG()){return}var D=e.getProcessor();try{D.getTxSel().collapse(d);D.controlEnterByParagraph(E)}catch(F){if(F==$propagate){throw F}}})});i.I.Processor.TridentP={};i.I.Processor.TridentStandardP={};i.I.Processor.GeckoP={};i.I.Processor.WebkitP={};i.I.Processor.PrestoP={};(function(){var e=i.Class.create({initialize:function(B,A,C,z){this.processor=B;this.start=C;this.end=z||this.start;this.current=this.start;this.wTranslator=y.translate(A).extract("%wrapper");
this.pTranslator=y.translate(A).extract("%paragraph")},hasNext:function(){return !!this.current},next:function(){var A=this.current;A=this.find(A);var z=A;if(y.include(A,this.end)){z=k}else{while(z&&!y.next(z)){z=y.parent(z);if(y.isBody(z)){z=k}}if(z){z=y.next(z)}}if(z==this.end){z=k}this.current=z;return A},find:function(D){var B;var C=D;if(!y.hasContent(C)){return C}while(C){B=C;if(y.isBody(C)||y.kindOf(C,"%tablegroup")){break}if(y.kindOf(C,this.wTranslator.getExpression())){return C}if(y.kindOf(C,"%wrapper,%outergroup")){C=y.descendant(B,this.pTranslator.getExpression());if(C){return C}C=y.descendant(B,"%paragraph");if(C){B=C;break}}if(y.kindOf(C,this.pTranslator.getExpression())){return C}C=C.parentNode}var A=y.paragraphOf(y.getName(B));var E=this.processor.newNode(A);var z=y.extract(B,D,"%text,%inline,img,object,embed,hr");y.wrap(E,z);this.processor.stuffNode(E);return E}});Object.extend(i.I.Processor.Standard,{getBlockRangeIterator:function(A,B,z){return new e(this,A,B,z)}})})();(function(){var e=i.Class.create({initialize:function(B,A,C,z){this.processor=B;
this.start=C;this.end=z||this.start;this.current=this.start;this.iTranslator=y.translate(A).extract("%inline")},hasNext:function(){return !!this.current},next:function(){var A=this.current;A=this.find(A);var z=A;if(A==this.end){z=k}else{while(z&&!y.next(z)){z=y.parent(z);if(y.isBody(z)){z=k}}if(z){z=y.next(z)}}if(y.include(z,this.end)){z=y.top(z,w)}this.current=z;return A},find:function(D){var C=D;if(y.kindOf(C,"%paragraph,%outergroup,%block")||y.isBody(C)){var B=C;C=y.top(B,w);if(!C){var A=y.inlineOf();var z=this.processor.create(A);y.append(B,z);return z}}if(y.kindOf(C,"br")){return C}else{if(!y.hasContent(C)){return C}}if(y.kindOf(C,this.iTranslator.getExpression())){return C}var A=y.inlineOf();var z=this.processor.create(A);y.insertAt(z,C);if(C){y.append(z,C)}return z}});Object.extend(i.I.Processor.Standard,{getInlineRangeIterator:function(A,B,z){return new e(this,A,B,z)}})})();(function(){var e=k;var z={};var A={};Object.extend(i.I.Processor.Standard,{newNode:function(B){if(e!=this.doc){z={};
e=this.doc}if(!z[B]){z[B]=this.win[B]()}return y.clone(z[B],d)},newText:function(B){return this.doc.createTextNode(B)},newParagraph:function(B){if(e!=this.doc){A={};e=this.doc}if(!A[B]){A[B]=this.stuffNode(this.newNode(B))}return y.clone(A[B],w)}})})();(function(){var e=k;var z=k;var B=d;var A=[];Object.extend(i.I.Processor.Standard,{newDummy:function(C){if(e!=this.doc){z=k;A=[];e=this.doc}if(!z){z=this.doc.createTextNode(i.__WORD_JOINER)}var D=y.clone(z);if(!C){A.push(D);B=w}return D},clearDummy:function(){if(!B){return}var E,G;try{E=this.createGoogRange();G=E&&E.getStartNode()}catch(D){}var J=k;for(var H=0,C=A.length-1;H<C;H++){try{var F=A.shift();if(F&&F.nodeValue){if(F.nodeValue==i.__WORD_JOINER){if(G!=F){y.remove(F)}else{J=F}}else{F.nodeValue=F.nodeValue.replace(i.__WORD_JOINER_REGEXP,"")}}else{}}catch(I){}}J&&A.splice(0,0,J);B=d}})})();i.Canvas.Processor=i.Class.draft({$mixins:[i.I.Processor.Standard,((v.msie_nonstd)?i.I.Processor.Trident:{}),((v.msie_std)?i.I.Processor.TridentStandard:{}),((v.gecko)?i.I.Processor.Gecko:{}),((v.webkit)?i.I.Processor.Webkit:{}),((v.presto)?i.I.Processor.Presto:{})]});
i.Canvas.ProcessorP=i.Class.create({$extend:i.Canvas.Processor,$mixins:[i.I.Processor.StandardP,((v.msie_nonstd)?i.I.Processor.TridentP:{}),((v.msie_std)?i.I.Processor.TridentStandardP:{}),((v.gecko)?i.I.Processor.GeckoP:{}),((v.webkit)?i.I.Processor.WebkitP:{}),((v.presto)?i.I.Processor.PrestoP:{})]});i.register("filter > mode change",function(G,H,e,B,D){function A(L){var M=[[new RegExp("<head[^>]*>.*?<\\/head>","gi"),""],[new RegExp("<script[^>]*>.*?<\\/script>","gi"),""],[new RegExp("<style[^>]*>.*?<\\/style>","gi"),""],[new RegExp("<!--.*?-->","gi"),""],[new RegExp("<h[1-6][^>]*>(.+?)<\\/h[1-6]>","gi"),"\n$1\n\n"],[new RegExp("\r\n(<p[^>]*>|<div[^>]*>|<ul[^>]*>|<ol[^>]*>|<li[^>]*>)","gi"),"$1"],[new RegExp("(<p[^>]*>(.+?)<\\/p>)","gi"),"$1\n"],[new RegExp("<br[^>]*>\\n","gi"),"\n"],[new RegExp("<br[^>]*>","gi"),"\n"],[new RegExp("(<ul[^>]*>|<\\/ul>|<ol[^>]*>|<\\/ol>|<\\/table>)","gi"),"\n\n"],[new RegExp("<td[^>]*>(.+?)<\\/td>\n?","gi"),"\t$1"],[new RegExp("<th[^>]*>(.+?)<\\/th>\n?","gi")," \t$1"],[new RegExp("<\\/tr>\n?","gi"),""],[new RegExp("<tr[^>]*>\n?","gi"),"\n"],[new RegExp("(<li[^>]*>(.+?)<\\/li>)","gi"),"\t$1\n"],[new RegExp("<[\\/a-zA-Z!]+[^>]*>","g"),""],[new RegExp("&nbsp;?","g")," "],[new RegExp("&quot;?","g"),'"'],[new RegExp("&gt;?","g"),">"],[new RegExp("&lt;?","g"),"<"],[new RegExp("&amp;?","g"),"&"],[new RegExp("&copy;?","g"),"(c)"],[new RegExp("&trade;?","g"),"(tm)"],[new RegExp("&#8220;?","g"),'"'],[new RegExp("&#8221;?","g"),'"'],[new RegExp("&#8211;?","g"),"_"],[new RegExp("&#8217;?","g"),"'"],[new RegExp("&#38;?","g"),"&"],[new RegExp("&#169;?","g"),"(c)"],[new RegExp("&#8482;?","g"),"(tm)"],[new RegExp("&#151;?","g"),"--"],[new RegExp("&#039;?","g"),"'"],[new RegExp("&#147;?","g"),'"'],[new RegExp("&#148;?","g"),'"'],[new RegExp("&#149;?","g"),"*"],[new RegExp("&reg;?","g"),"(R]"],[new RegExp("&bull;?","g"),"*"]];
var K=L;for(var J=0;J<M.length;J++){K=K.replace(M[J][0],M[J][1])}return K}function F(J){try{return J.replace(new RegExp("<br[^>]*>\\n","gi"),"\n")}catch(K){}return J}function E(J){if(J!==k&&J.length!==0){J=J.replace(/&/g,"&amp;");J=J.replace(/ /g,"&nbsp;");J=J.replace(/\"/g,"&quot;");J=J.replace(/>/g,"&gt;");J=J.replace(/</g,"&lt;");if(J.lastIndexOf("\n")===J.length-1){J=J.substr(0,J.length-1)}if(J.lastIndexOf("\r")===J.length-1){J=J.substr(0,J.length-1)}J=J.replace(/\r\n|\r|\n/g,"<br>\n")}return J}function C(J){return J.replace(/<\/(p)><(p[\s>])/gi,"</$1>\n<$2")}function I(J){return J.replace(/<\/(p)>\n+<(p[\s>])/gi,"</$1><$2")}var z=G.getDocParser();z.registerFilter("filter/converting",{"text@load":function(J){return A(J)},"source@load":function(J){return J},"html@load":function(J){return J},text4save:function(K){var J;if(D.canvas.escapeTextModeContents){J=E(K)}else{J=K}if(D.canvas.removeTextModeBr){J=F(J)}return J},source4save:function(J){return J},html4save:function(J){return J},text2source:function(J){return E(J)
},text2html:function(J){return E(J)},source2text:function(J){return A(I(J))},source2html:function(J){return I(J)},html2text:function(J){return A(J)},html2source:function(J){return C(J)}})});i.register("filter > clear redundancy",function(A){function e(G){var F=function(M,K,H){var J=0;var I=function(N,O,P){J++;if(P.length==0||P.trim().length==0){return""}else{return['<span style="',K,":",O,';">',P,"</span>"].join("")}};var L=new RegExp('(?:<span[^>;]*style="'+K+':[^";]*;?"[^>;]*>){'+H+"}<span\\s*style=['\"]?"+K+":\\s*(\\w+)[;'\"]*>([\\S\\s]*?)</span>(?:</span>){"+H+"}","gi");do{J=0;M=M.replace(L,I)}while(J>0);return M};G=G.replace(/<(span|font)([^>]*)><\/\1>/gi,function(J,H,I){if(/ (?:id|class)=/i.test(I)){return J}return""});var E=["font-size","font-family"];for(var D=0;D<E.length;D++){G=F(G,E[D],2);G=F(G,E[D],1)}return G}function B(D){return v.msie?D.replace(/<p>\s*<\/p>/gi,""):D}function C(D){return v.msie?D.replace(/<p>\s*<\/p>/gi,y.EMPTY_PARAGRAPH_HTML):D}var z=A.getDocParser();z.registerFilter("filter/redundancy",{"text@load":function(D){return D
},"source@load":function(D){return B(e(D))},"html@load":function(D){return B(e(D))},text4save:function(D){return D},source4save:function(D){return C(D)},html4save:function(D){return C(D)},text2source:function(D){return D},text2html:function(D){return D},source2text:function(D){return D},source2html:function(D){return D},html2text:function(D){return D},html2source:function(D){return e(D)}})});l.addMsg({"@attacher.only.wysiwyg.alert":"\uc5d0\ub514\ud130 \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \ubcf8\ubb38\uc5d0 \uc0bd\uc785\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\uc5d0\ub514\ud130\ubaa8\ub4dc\uc5d0\uc11c \ucca8\ubd80\ubc15\uc2a4\uc758 \uc378\ub124\uc77c\uc744 \ud074\ub9ad\ud574\uc11c \uc0bd\uc785\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."});i.Attachment=i.Class.draft({$extend:i.Entry,isChecked:d,focused:d,attrs:{align:"left"},initialize:function(e,z){this.actor=e;this.canvas=e.canvas;this.entryBox=e.entryBox;this.type=this.constructor.__Identity;this.setProperties(z);if(this.oninitialized){this.oninitialized(e,z)
}},setFocused:function(e){if(this.focused!==e){this.focused=e}},setExistStage:function(e){this.existStage=e;if(this.entryBox.changeState){this.entryBox.changeState(this)}},remove:function(){var e=this.canvas.getContent();if(this.canvas.isWYSIWYG()){if(e.search(this.regHtml)>-1){e=e.replace(this.regHtml,"");this.canvas.setContent(e)}}else{if(e.search(this.regText)>-1){e=e.replace(this.regText,"");this.canvas.setContent(e)}}},register:function(){if(Editor.getSidebar().addOnlyBox){return}var A=this.actor;if(A.boxonly){return}if(this.canvas.isWYSIWYG()){var C=this.pastescope;var D=this.dispHtml;var B="img";var z=D.match(/<(\w+)/);if(z&&z[1]){B=z[1]}if(this.objectStyle){var E=new RegExp("<"+B+" ","i");D=D.replace(E,"<"+B+' style="'+i.Util.toStyleString(this.objectStyle)+'" ')}if(this.objectAttr){D=D.replace(E,"<"+B+" "+i.Util.toAttrString(this.objectAttr)+" ")}var e=this.paragraphStyle||{};if(v.webkit){this.canvas.getPanel("html").el.focus()}this.canvas.execute(function(F){F.moveCaretWith(C);
F.pasteContent(D,w,{style:e})})}else{if(this.actor.wysiwygonly){alert(TXMSG("@attacher.only.wysiwyg.alert"))}else{this.canvas.getProcessor().insertTag("",this.dispText)}}},replace:function(B){var A=this.canvas;var z=A.getContent();var e=this.actor;if(!e.boxonly){if(A.isWYSIWYG()){if(z.search(B.regHtml)>-1){z=z.replace(B.regHtml,this.dispHtml);A.setContent(z)}else{A.pasteContent(this.dispHtml,w)}}else{if(z.search(B.regText)>-1){z=z.replace(B.regText,"");A.setContent(z)}alert(TXMSG("@attacher.only.wysiwyg.alert"))}}},setProperties:function(z){var e=z;this.data=e;this.key=this.actor.getKey(e)||"K"+i.Util.generateKey();this.field=this.getFieldAttr(e);this.boxAttr=this.getBoxAttr(e);this.objectAttr=this.getObjectAttr.bind(this)(e);this.objectStyle=this.getObjectStyle.bind(this)(e);this.paragraphStyle=this.getParaStyle.bind(this)(e);this.saveHtml=this.getSaveHtml.bind(this)(e);this.dispHtml=this.getDispHtml.bind(this)(e);this.dispText=this.getDispText.bind(this)(e);this.regLoad=this.getRegLoad.bind(this)(e);
this.regHtml=this.getRegHtml.bind(this)(e);this.regText=this.getRegText.bind(this)(e)},refreshProperties:function(){this.setProperties(this.data)},getObjectAttr:function(){return this.actor.config.objattr},getObjectStyle:function(){var e={};if(this.actor.config.objstyle){e=Object.extend(e,this.actor.config.objstyle)}return e},getParaStyle:function(e){var z=Object.extend({},this.actor.config.parastyle||this.actor.config.defaultstyle);return z}});r.addSidebar("attachbox",{show:d,destroy:d});i.AttachBox=i.Class.create({$extend:i.EntryBox,isChecked:d,initialize:function(){},checkAvailableCapacity:function(){return w},getAvailableCapacity:function(){return w},checkInsertableSize:function(){return w}});i.install("editor.getAttachBox & sidebar.getAttachments",function(B,C,D,A,z){var e=new i.AttachBox(z,B);D.entryboxRegistry.attachbox=e;B.getAttachBox=function(){return e};D.getAttachments=e.getEntries.bind(e)});i.register("filter > attachers",function(A){var e=A.getAttachBox();var z=A.getDocParser();
z.registerFilter("filter/attachments",{"text@load":function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("text@load",C)}C=D.getChangedContent(C,D.regLoad,"")});return C},"source@load":function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("source@load",C)}C=D.getChangedContent(C,D.regLoad,D.dispText)});return C},"html@load":function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("html@load",C)}C=D.getChangedContent(C,D.regLoad,D.dispHtml)});return C},text4save:function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("text4save",C)}C=D.getChangedContent(C,D.regText,"")});return C},source4save:function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("source4save",C)}C=D.getChangedContent(C,D.regText,D.saveHtml,["id","class"])});return C},html4save:function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("html4save",C)
}C=D.getChangedContent(C,D.regHtml,D.saveHtml,["id","class"])});return C},text2source:function(B){return B},text2html:function(B){return B},source2text:function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("source2text",C)}C=D.getChangedContent(C,D.regText,"")});return C},source2html:function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("source2html",C)}C=D.getChangedContent(C,D.regText,D.dispHtml)});return C},html2text:function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("html2text",C)}C=D.getChangedContent(C,D.regHtml,"")});return C},html2source:function(C){var B=e.datalist;B.each(function(D){if(D.loadDataByContent){D.loadDataByContent("html2source",C)}C=D.getChangedContent(C,D.regHtml,D.dispText,["id","class"])});return C}})});i.module("push history @when entrybox has changes",function(A,B,C,z){var e=A.getAttachBox();e.observeJob(i.Ev.__ENTRYBOX_ENTRY_REMOVED,function(E){z.history.saveHistory({deleted:d},{deleted:w},function(F){E.deletedMark=F.deleted;
e.fireJobs(i.Ev.__ENTRYBOX_ENTRY_REFRESH,E)})});var D=function(E){if(v.msie){setTimeout(function(){E()},0)}else{E()}};e.observeJob(i.Ev.__ENTRYBOX_ENTRY_ADDED,function(E){D(function(){z.history.injectHistory({deleted:w},{deleted:d},function(F){E.deletedMark=F.deleted;e.fireJobs(i.Ev.__ENTRYBOX_ENTRY_REFRESH,E)})})})});i.install("attachbox.onFileCapacityInitialized @if sidebar.capacity.show = true",function(B,C,D,A,z){var e=B.getAttachBox();if(z.sidebar.capacity.show===w){Object.extend(e,i.I.FileCapacity);e.onFileCapacityInitialized(z,A)}});r.addSidebar("capacity",{show:w,maximum:3145728,filter:{use:"",sound:{title:"sound file",maximum:3145728,extensions:",mp3,wav,ogg,wma,mp4,ape,wmv,asf,ra,ram,"},movie:{title:"movie file",maximum:3145728,extensions:",wmv,mpg,avi,"}}});i.I.FileCapacity={onFileCapacityInitialized:function(B,A){var C=(B.initializedId)?B.initializedId:"";var D=B.sidebar.capacity;D.uploaded=0;D.available=D.maximum;D.uploadedFileNum=0;var E=function(J,K){K=parseInt(K,10);if(isNaN(K)||D[J]==s){return d
}if(D.group&&J=="available"){D[J]=Math.min(K,D.maximum,D.group.maximum-D.group.used)}else{D[J]=K}return D[J]};this.checkAvailableCapacity=function(){return(D.uploaded<D.available)};this.checkInsertableSize=function(J){return(parseInt(D.uploaded,10)+parseInt(J,10)<=parseInt(D.available,10))};this.getCapacity=function(J){return(D[J]||0)};this.changeAvailableCapacity=function(J){if(E("available",J)){H();return J}return d};var G=function(K){var J=D.uploaded+K;if(J<0){J=0}D.uploaded=J};var F=function(J){G(-1*J);D.uploadedFileNum-=1};var z=function(J){G(J);D.uploadedFileNum+=1};var e={};if(D.filter.use.length>0){D.filter.use.split(",").each(function(J){if(D.filter[J]){e[J]=Object.extend({},D.filter[J])}})}this.getFiltersNameByExt=function(K){var L=[];for(var J in e){if(e[J].extensions.indexOf(","+K.toLowerCase()+",")>-1){L.push(J)}}return L};this.getFilterExtensions=function(J){if(e[J]){return e[J].extensions}else{return k}};this.getFilterMaximum=function(J){if(e[J]){return e[J].maximum}else{return k
}};this.getUploadedSizeByFilter=function(K){var L=0;var J=e[K].extensions;this.datalist.each(function(N){if(N.data&&N.data.filename){var M=N.data.filename.split(".").pop().toLowerCase();if(J.indexOf(","+M+",")>-1){L+=N.data.filesize}}});return L};if(D.group){E("available",Math.min(D.maximum,D.group.maximum-D.group.used))}this.getGroupCapacity=function(J){return((D.group)?(D.group[J]||0):0)};this.observeJob(i.Ev.__ENTRYBOX_ENTRY_ADDED,function(J){if(J.actor.isCheckSize){z(J.data.filesize||0);H()}});this.observeJob(i.Ev.__ENTRYBOX_ENTRY_REMOVED,function(J){if(J.actor.isCheckSize){F(J.data.filesize||0);H()}});this.observeJob(i.Ev.__ENTRYBOX_ALL_ENTRY_REMOVED,function(){D.uploaded=0;D.uploadedFileNum=0;H()});this.observeJob(i.Ev.__ENTRYBOX_ENTRY_REFRESH,function(K){if(!K.actor.isCheckSize){return}var J=K.data.filesize||0;if(K.deletedMark){F(J)}else{z(J)}H()});var I=this;var H=function(){var J={uploaded:D.uploaded,available:D.available,maximum:D.maximum,uploadedFileNum:D.uploadedFileNum,group:D.group};
I.fireJobs(i.Ev.__ENTRYBOX_CAPACITY_UPDATE,J)}}};l.addMsg({"@attacher.can.modify.alert":"\uae30\uc874\uc5d0 \ub4f1\ub85d\ub41c #{title}\uc744(\ub97c) \uc218\uc815\ud560 \uc218 \uc788\ub294 \ud654\uba74\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.","@attacher.can.modify.confirm":"#{title}\uc740(\ub294) \ud558\ub098\ub9cc \ub4f1\ub85d\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\ub2e4\uc2dc \uc62c\ub9ac\uc2dc\uba74 \uae30\uc874\uc758 #{title}\uc774(\uac00) \uc0ad\uc81c\ub429\ub2c8\ub2e4. \uacc4\uc18d\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","@attacher.insert.alert":"\uc5d0\ub514\ud130 \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uc0bd\uc785\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","@attacher.capacity.alert":"\uc6a9\ub7c9\uc744 \ucd08\uacfc\ud558\uc600\uc2b5\ub2c8\ub2e4.","@attacher.size.alert":"\uc6a9\ub7c9\uc744 \ucd08\uacfc\ud558\uc5ec \ub354\uc774\uc0c1 \ub4f1\ub85d\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."});i.install("sidebar.getAttacher & sidebar.getUploadAdaptor",function(z,A,B){var e=B.attachers={};B.getAttacher=function(C){if(e[C]!=k){return e[C]
}else{if(arguments.length==0){return e}else{return k}}}});i.register("new attachers",function(D,F,e,z,A){var E=D.getAttachBox();var C=e.attachers;for(var B in i.Attacher){var G=i.Attacher[B]["__Identity"];if(G){C[G]=new i.Attacher[B](D,E,A)}}if(C.file){e.getUploadAdaptor=function(){return C.file.getAdaptor()}}});i.Attacher=i.Class.draft({$extend:i.Actor,canModified:d,canResized:d,initialize:function(z,B,e){this.editor=z;this.canvas=z.getCanvas();this.entryBox=B;var A=this.config=r.getAttacher(this.constructor.__Identity,e);if(e.pvpage&&!!A.usepvpage){this.pvUrl=r.getUrl(e.pvpage,{pvname:this.name})}this.boxonly=((A.boxonly!=k)?A.boxonly:d);this.isMultiple=((A.multiple!=k)?A.multiple:d);this.isCheckSize=((A.checksize!=k)?A.checksize:d);this.wysiwygonly=((A.wysiwygonly!=k)?A.wysiwygonly:w);this.pastescope=A.pastescope;if(this.oninitialized){this.oninitialized(e)}this.attachHandler=this.attachHandler.bind(this)},execute:function(E){if(this.wysiwygonly&&!this.canvas.isWYSIWYG()){alert(TXMSG("@attacher.insert.alert"));
return}if(this.isCheckSize&&!this.entryBox.checkAvailableCapacity()){alert(TXMSG("@attacher.capacity.alert"));return}if(!this.checkInsertable()){if(this.canModified){var A=new Template(TXMSG("@attacher.can.modify.alert"));alert(A.evaluate({title:this.title}))}else{var A=new Template(TXMSG("@attacher.can.modify.confirm"));if(!confirm(A.evaluate({title:this.title}))){return}}}if(this.clickHandler){this.clickHandler()}else{try{var z=this.config.popPageUrl;if(E){z=z+((z.indexOf("?")>-1)?"&":"?")+E}var B=(document.location.hostname!=document.domain);if(B){z=z+((z.indexOf("?")>-1)?"&":"?")+"xssDomain="+document.domain}z=(this.pvUrl?this.pvUrl+((this.pvUrl.indexOf("?")>-1)?"&":"?")+"u="+escape(z):z);var D=j.open(z,"at"+this.name,this.config.features);D.focus()}catch(C){}}},attachHandler:function(z,e){if(this.checkInsertable()){if(this.isCheckSize&&!this.entryBox.checkInsertableSize(z.filesize)){alert(TXMSG("@attacher.size.alert"));return}this.execAttach(z,e)}else{this.execReattach(z,e)}},createEntry:function(z,e){return this.createAttachment(z,e)
},createAttachment:function(A,z){var e=this.constructor.__Identity;if(z){e=z}return new i.Attachment[e.capitalize()](this,A)},checkInsertable:function(){return(this.isMultiple||this.getDatalist().length===0)}});l.addMsg({"@embeder.alert":"\uc5d0\ub514\ud130 \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uc0bd\uc785\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."});i.EmbedBox=i.Class.create({$extend:i.EntryBox,initialize:function(){}});i.install("editor.getEmbedBox & sidebar.getEmbeder & sidebar.getEmbeddedData",function(B,C,D,A,z){var E=new i.EmbedBox(z,A,B);D.entryboxRegistry.embedbox=E;B.getEmbedBox=function(){return E};D.getEmbeddedData=E.getEntries.bind(E);var e=D.embeders={};D.getEmbeder=function(F){if(e[F]!=k){return e[F]}else{if(arguments.length==0){return e}else{return k}}}});i.register("new embeders",function(C,E,e,z,A){var G=C.getEmbedBox();var D=e.embeders;for(var B in i.Embeder){var F=i.Embeder[B]["__Identity"];if(F){if(!E.tools[F]){}D[F]=new i.Embeder[B](C,G,A)}}});i.Embeder=i.Class.draft({$extend:i.Actor,canResized:d,initialize:function(z,B,e){this.editor=z;
this.canvas=z.getCanvas();var A=this.config=r.getEmbeder(this.constructor.__Identity,e);if(e.pvpage&&!!A.usepvpage){this.pvUrl=r.getUrl(e.pvpage,{pvname:this.name})}this.wysiwygonly=((A.wysiwygonly!=k)?A.wysiwygonly:w);this.pastescope=A.pastescope;this.embedHandler=this.embedHandler.bind(this);if(this.oninitialized){this.oninitialized.bind(this)(e)}},execute:function(){if(this.wysiwygonly&&!this.canvas.isWYSIWYG()){alert(TXMSG("@embeder.alert"));return}if(this.clickHandler){this.clickHandler()}else{try{var z=this.config.popPageUrl;var A=(document.location.hostname!=document.domain);if(A){z=z+((z.indexOf("?")>-1)?"&":"?")+"xssDomain="+document.domain}z=(this.pvUrl?this.pvUrl+((this.pvUrl.indexOf("?")>-1)?"&":"?")+"u="+escape(z):z);var C=j.open(z,"at"+this.name,this.config.features);C.focus()}catch(B){}}},embedHandler:function(e){this.execAttach(e)},createEntry:function(A,z){var e=this.constructor.__Identity;if(z){e=z}return new i.EmbedEntry[e.capitalize()](this,A)},execAttach:function(B){var A=this.pastescope;
var z=this.getCreatedHtml(B);var e=this.config.parastyle||this.config.defaultstyle||{};this.canvas.execute(function(C){C.moveCaretWith(A);C.pasteContent(z,w,e)})},execReattach:function(){},execReload:function(){},getReloadContent:function(B,A){if(!B.dispElId){return A}var e=this.getCreatedHtml(B);var z=new RegExp('<(?:img|IMG)[^>]*id="?'+B.dispElId+'"?[^>]*/?>',"gm");if(A.search(z)>-1){return A.replace(z,e)}return A}});i.EmbedEntry=i.Class.create({$extend:i.Entry,attrs:{align:"left"},initialize:function(e,z){this.actor=e;this.canvas=e.canvas;this.entryBox=e.entryBox;this.setProperties(z)},register:function(){if(this.canvas.isWYSIWYG()){var e=this.actor.config.defaultstyle;if(e){this.canvas.pasteContent(this.dispHtml,w,{style:e})}else{this.canvas.pasteContent(this.dispHtml,w)}}else{this.canvas.getProcessor().insertTag("",this.dispText)}},setProperties:function(z){this.type=this.constructor.__Identity;var e=this.data=z;this.key=e.key;this.dispHtml=this.getDispHtml(e);this.saveHtml=this.dispText=this.getDispText(e);
this.regHtml=this.getRegHtml(e);this.regLoad=this.regText=this.getRegText(e)}});i.I.ButtonFontTool=i.Mixin.create({oninitialized:function(z){var e=this;e.button=new i.Button(e.buttonCfg);e.weave(e.button,k,e.handler);if(z.sync){e.startSyncButtonWithStyle()}e.bindKeyboard(z.hotKey,e.handler.bind(e))},rangeExecutor:function(e){e.execCommand(this.getQueryCommandName())},onAfterHandler:function(z){var e=this.canvas;if(e.triggerQueryStatus){e.triggerQueryStatus()}},startSyncButtonWithStyle:function(){var e=this;e.canvas.observeJob(i.Ev.__CANVAS_PANEL_QUERY_STATUS,function(z){e.syncButton(e.queryCurrentStyle(z))})},queryCurrentStyle:function(z){var e=this;var A=e.canvas.query(function(B){var D=e.getQueryCommandName();if(D&&!v.opera&&!v.gecko){return B.queryCommandState(D)}else{var C=e.findQueryingNode(z);return !!C&&e.isStyleApplied(C)}});return A},computeNewStyle:function(){return k},cachedProperty:d,syncButton:function(e){if(this.cachedProperty!=e){this.button.setState(e);this.cachedProperty=e
}}});i.I.MenuFontTool=i.Mixin.create({oninitialized:function(A){var z=this;z.beforeOnInitialized(A);var e=z.menuInitHandler&&z.menuInitHandler.bind(z);z.weave(z.createButton(),z.createMenu(),z.handler,e);if(A.sync){z.startSyncButtonWithStyle()}},rangeExecutor:function(z,A,e){this.wrapTextAsStyledSpan(z,A,e)},startSyncButtonWithStyle:function(){var e=this;e.canvas.observeJob(i.Ev.__CANVAS_PANEL_QUERY_STATUS,function(z){e.syncButton(e.queryCurrentStyle(z))})},queryCurrentStyle:function(z){var e=this;var B=e.queryCommandValue();if(e.reliableQueriedValue(B)&&B&&e.getTextByValue(B)){return e.getTextByValue(B)}var A=e.canvas.query(function(C){var D;if(v.msie&&z.isCollapsed()){D=C.getNode()}else{D=e.findQueryingNode(z)}return e.queryElementCurrentStyle(D)});if(A&&e.getTextByValue(A)){return e.getTextByValue(A)}return B||A||e.getTextByValue(e.getDefaultProperty())},queryCommandValue:function(){var e=this;return e.canvas.query(function(z){return z.queryCommandValue(e.getQueryCommandName())})},reliableQueriedValue:function(e){return w
},queryElementCurrentStyle:function(B){var z=this.getCssPropertyName();var E=B;var D=10;for(var A=0;A<D&&y.kindOf(E,"%inline");A++){var e=E.style[z];if(e){return e}if(y.kindOf(E,"font")&&y.getAttribute(this.getFontTagAttribute())){return y.getAttribute(this.getFontTagAttribute())}E=E.parentNode}var C=this.canvas.getProcessor();if(B){return C.queryStyle(B,z)}else{return k}},computeNewStyle:function(z){var e={};e[this.getCssPropertyName()]=z;return e},cachedProperty:d,syncButton:function(z){var e=this;e.button.setText(z);if(e.cachedProperty!=z){e.button.setText(z);e.cachedProperty=z}}});i.I.FontTool=i.Mixin.create({initialize:function(z,A,e){this.$super.initialize(z,A,e)},handler:function(e){this.onBeforeHandler(e);this.doHandle(e);this.onAfterHandler(e)},onBeforeHandler:function(){},doHandle:function(B){var z=this,e,A=z.computeNewStyle(B);z.canvas.execute(function(D){var C=(D.table)?D.table.getTdArr():[];if(C.length>0){e=g.dom.Range.createFromNodeContents(C[0]);D.executeUsingCaret(function(){z.tableCellsExecutor(D,A,C)
})}else{e=D.createGoogRange();if(e){z.rangeExecutor(D,A,e)}}})},onAfterHandler:function(){},tableCellsExecutor:function(A,B,z){var e=this;z.each(function(C){var D=g.dom.Range.createFromNodeContents(C);D.select();e.rangeExecutor(A,B,D)})},findQueryingNode:function(z){if(z){var B;try{B=this.findFirst(z.__iterator__(),function(C){return C.nodeType==3&&C.nodeValue.trim()})}catch(e){}if(B){return B.parentNode}else{var A=z.getStartNode();if(A&&A.nodeType==3){return A.parentNode}return A}}},findFirst:function(z,B){try{return g.iter.filter(z,B).next()}catch(A){return null}}});i.I.WrappingSpanFontTool=i.Mixin.create({wrapTextAsStyledSpan:function(C,E,G){var F;if(C.isCollapsed()){var A=G.getStartNode();if(A.nodeType==3){A=A.parentNode}var H=this.findOrCreateDummySpan(A,C,G);var z=H.firstChild;C.createGoogRangeFromNodes(z,z.length,z,z.length).select();F=[H]}else{C.executeUsingCaret(function(J,M){var K=B(M);var L=e(K);F=I(L)})}C.apply(F,{style:E});function B(L){var K=L.getCaret(w),J=L.getCaret(d);return new g.dom.TextRangeIterator(K,0,J,0)
}function e(K){var J=[];g.iter.forEach(K,function(L){if(L.nodeType==3&&!y.kindOf(L.parentNode,"table,thead,tbody,tr,ul,ol")){J.push(L)}});return J}function I(K){var J=[];K.each(function(N){var L=N.parentNode;if(L.nodeName=="SPAN"&&D(L)){J.push(L)}else{var M=C.create("span");y.wrap(M,N);J.push(M)}});return J}function D(M){var N=M.childNodes;var K=N.length;if(K>3){return d}for(var L=0,J=K;L<J;L++){if(y.isGoogRangeCaret(N[L])){K=K-1}}return K==1}},findOrCreateDummySpan:function(A,z,e){var B=(A.tagName=="SPAN"&&A.childNodes.length==1&&A.firstChild.nodeType==3&&A.firstChild.nodeValue==i.__WORD_JOINER);if(B){return A}else{return this.createDummySpan(A,z,e)}},createDummySpan:function(e,B,z){var A=null;if(e.tagName=="SPAN"){A=y.clone(e)}else{A=B.create("span")}A.appendChild(B.newDummy());A=z.insertNode(A);y.removeEmptyTextNode(A.previousSibling);y.removeEmptyTextNode(A.nextSibling);return A}});l.addMsg({"@switcher.wysiwyg":"\uc5d0\ub514\ud130","@switcher.source":"HTML","@switcher.text":"\ud14d\uc2a4\ud2b8"});
r.addTool("switcher",{wysiwygonly:d,status:w,options:[{label:TXMSG("@switcher.wysiwyg"),title:TXMSG("@switcher.wysiwyg"),data:"html"},{label:TXMSG("@switcher.source"),title:TXMSG("@switcher.source"),data:"source"},{label:TXMSG("@switcher.text"),title:TXMSG("@switcher.text"),data:"text"}]});i.Tool.Switcher=i.Class.create({$const:{__Identity:"switcher"},$extend:i.Tool,oninitialized:function(z){var F=this.canvas;var A={};z.options.each(function(H){A[H.data]={title:H.title}});var e="";var D=z.options[0];var E=function(H){if(H==="text"){if(F.mode!=="text"){return w}}return d};var B=function(){var I,J,H;I=F.getContent();J=I.toLowerCase().trim();H=y.EMPTY_PARAGRAPH_HTML.toLowerCase().trim();if(J&&J!==H&&J!=="&nbsp;"){return w}return d};var C=function(H){if(z.changeModeConfirmMsg){if(E(H)){if(B()){if(d===confirm(z.changeModeConfirmMsg)){return $stop}}}}F.changeMode(H)};var G=function(I,H){if(I==H){return}if(e==H){return}if(!A[H]){return}this.button.setValue(H);this.button.setText(A[H].title);e=H
}.bind(this);F.observeJob(i.Ev.__CANVAS_MODE_CHANGE,G);F.observeJob(i.Ev.__CANVAS_MODE_INITIALIZE,G);this.weave.bind(this)(new i.Button.Select(r.merge(this.buttonCfg,{selectedValue:D.data,selectedText:D.label})),new i.Menu.Select(this.menuCfg),C)}});r.addTool("switchertoggle",{wysiwygonly:d,sync:w,status:w,options:[{label:"\uc5d0\ub514\ud130",title:"\uc5d0\ub514\ud130",data:"html"},{label:"HTML",title:"HTML",data:"source"}]});i.Tool.SwitcherToggle=i.Class.create({$const:{__Identity:"switchertoggle"},$extend:i.Tool,oninitialized:function(){var A=this.canvas;var z=function(){switch(A.mode){case"html":A.changeMode("source");break;case"source":A.changeMode("html");break}return d};this.weave.bind(this)(new i.Button.Toggle(r.merge(this.buttonCfg,{borderClass:"tx-switchtoggle"})),k,z);var e=function(C,B){this.button.setValue(B=="source")}.bind(this);A.observeJob(i.Ev.__CANVAS_MODE_CHANGE,e);A.observeJob(i.Ev.__CANVAS_MODE_INITIALIZE,e)}});l.addMsg({"@fontfamily.gulim":"\uad74\ub9bc","@fontfamily.batang":"\ubc14\ud0d5","@fontfamily.dotum":"\ub3cb\uc6c0","@fontfamily.gungsuh":"\uad81\uc11c"});
r.addTool("fontfamily",{sync:w,status:w,useFavorite:w,options:[{label:TXMSG("@fontfamily.gulim")+' (<span class="tx-txt">\uac00\ub098\ub2e4\ub77c</span>)',title:TXMSG("@fontfamily.gulim"),data:"Gulim,\uad74\ub9bc,AppleGothic,sans-serif",klass:"tx-gulim"},{label:TXMSG("@fontfamily.batang")+' (<span class="tx-txt">\uac00\ub098\ub2e4\ub77c</span>)',title:TXMSG("@fontfamily.batang"),data:"Batang,\ubc14\ud0d5,serif",klass:"tx-batang"},{label:TXMSG("@fontfamily.dotum")+' (<span class="tx-txt">\uac00\ub098\ub2e4\ub77c</span>)',title:TXMSG("@fontfamily.dotum"),data:"Dotum,\ub3cb\uc6c0,sans-serif",klass:"tx-dotum"},{label:TXMSG("@fontfamily.gungsuh")+' (<span class="tx-txt">\uac00\ub098\ub2e4\ub77c</span>)',title:TXMSG("@fontfamily.gungsuh"),data:"Gungsuh,\uad81\uc11c,serif",klass:"tx-gungseo"},{label:'Arial (<span class="tx-txt">abcde</span>)',title:"Arial",data:"Arial,sans-serif",klass:"tx-arial"},{label:'Verdana (<span class="tx-txt">abcde</span>)',title:"Verdana",data:"Verdana,sans-serif",klass:"tx-verdana"},{label:'Courier New (<span class="tx-txt">abcde</span>)',title:"Courier New",data:"Courier New,monspace",klass:"tx-courier-new"}]});
i.Tool.FontFamily=i.Class.create({$const:{__Identity:"fontfamily"},$extend:i.Tool,$mixins:[i.I.CookieBaker,i.I.FontTool,i.I.MenuFontTool,i.I.WrappingSpanFontTool],beforeOnInitialized:function(A){function z(C){e.usedWebFonts=((v.msie&&C.webfont&&C.webfont.use)?C.webfont.options:[]);e.usedFonts=C.options.concat(e.usedWebFonts)}function B(C){if(C.useFavorite&&e.usedWebFonts.length>0){e.useFavorite=w;e.initCookie("txFontFamilyFavorite")}else{e.useFavorite=d}}var e=this;e.focusLoosed=d;z(A);B(A);e.createFontFamilyMap(e.usedFonts)},createFontFamilyMap:function(A){var z=this,e={};this.fontFamilyMap=e;A.each(function(E){var B,F,D,C;B=E.data.split(",");F=E.title;for(D=0;D<B.length;D+=1){C=z.preprocessFontFamily(B[D]);e[C]=F}if(!e[F.toLowerCase()]){e[F.toLowerCase()]=F}})},createButton:function(){var e=new i.Button.Select(this.buttonCfg);this.button=e;e.setValue(this.getDefaultProperty());e.setText(this.getTextByValue(this.getDefaultProperty()));return e},createMenu:function(){var e=this;var z=new i.Menu.Select(r.merge(e.menuCfg,{options:e.usedFonts}));
this.menu=z;z.generateListItem=function(E){var B=[],D,F,C;for(D=0;D<E.length;D+=1){F=E[D];C=F.label;F.label=F.label.replace(/<span class="tx\-txt">/,'<span class="tx-txt" style="font-family:'+F.data+';">');B.push(i.MarkupTemplate.get("menu.select.item").evaluate(F));F.label=C}return B.join("")};if(e.usedWebFonts.length>0){v.addClassName(z.elMenu,"tx-fontfamily-webfont-menu");var A=tx.input({type:"text",className:"tx-dummyfocus"});y.append(z.elMenu,A);v.observe(z.elMenu,"mousedown",function(B){if(B.offsetX<e.menu.elMenu.clientWidth){return}A.style.top=B.offsetY.toPx();if(!e.focusLoosed){A.focus();A.blur();e.menu.elMenu.focus();e.focusLoosed=w}})}return z},menuInitHandler:function(){var z=this;var B=z.menu;z.focusLoosed=d;if(!z.useFavorite){return[]}B.elMenu.scrollTop=0;var A=y.collect(B.elMenu,"ul.tx-menu-favlist");if(A){y.remove(A)}var e=z.extractOptions(z.usedFonts,z.readCookie());A=B.generateList(e);y.insertFirst(B.elMenu,A);v.addClassName(A,"tx-menu-favlist");return e},onBeforeHandler:function(e){this.canvas.includeWebfontCss("font-family: "+e)
},onAfterHandler:function(z){var e=this;if(e.useFavorite){e.writeCookie(e.mergeValues(e.readCookie(),z))}},getDefaultProperty:function(){return this.canvas.getStyleConfig().fontFamily},getRelatedCssPropertyNames:function(){return["font",this.getCssPropertyName()]},getCssPropertyName:function(){return"fontFamily"},getQueryCommandName:function(){return"fontname"},getFontTagAttribute:function(){return"face"},preprocessFontFamily:function(e){return e.toLowerCase().replace(/'|"/g,"").replace(/_?9$/,"")},getTextByValue:function(e){if(e.include(",")){e=e.split(",")[0]}e=this.preprocessFontFamily(e);return this.fontFamilyMap[e]}});r.addTool("fontsize",{sync:w,status:w,options:[{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (8pt)",title:"8pt",data:"8pt",klass:"tx-8pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (9pt)",title:"9pt",data:"9pt",klass:"tx-9pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (10pt)",title:"10pt",data:"10pt",klass:"tx-10pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (11pt)",title:"11pt",data:"11pt",klass:"tx-11pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (12pt)",title:"12pt",data:"12pt",klass:"tx-12pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (14pt)",title:"14pt",data:"14pt",klass:"tx-14pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (18pt)",title:"18pt",data:"18pt",klass:"tx-18pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8 (24pt)",title:"24pt",data:"24pt",klass:"tx-24pt"},{label:"\uac00\ub098\ub2e4 (36pt)",title:"36pt",data:"36pt",klass:"tx-36pt"}]});
i.Tool.FontSize=i.Class.create({$const:{__Identity:"fontsize"},$extend:i.Tool,$mixins:[i.I.FontTool,i.I.MenuFontTool,i.I.WrappingSpanFontTool],beforeOnInitialized:function(e){this.createFontSizeMap(e)},createButton:function(){var z=this.getDefaultProperty();var e=this.button=new i.Button.Select(this.buttonCfg);e.setValue(z);e.setText(this.getTextByValue(z));return e},createMenu:function(){return new i.Menu.Select(this.menuCfg)},createFontSizeMap:function(e){var z=this.fontSizeMap={};e.options.each(function(A){z[A.data]=A.title});[{title:"8pt",data:"1"},{title:"10pt",data:"2"},{title:"12pt",data:"3"},{title:"14pt",data:"4"},{title:"18pt",data:"5"},{title:"24pt",data:"6"},{title:"36pt",data:"7"},{title:"7.5pt",data:"10px"},{title:"8pt",data:"11px"},{title:"9pt",data:"12px"},{title:"10pt",data:"13px"},{title:"11pt",data:"15px"},{title:"12pt",data:"16px"},{title:"14pt",data:"19px"},{title:"18pt",data:"24px"},{title:"24pt",data:"32px"},{title:"36pt",data:"48px"},{title:"8pt",data:"x-small"},{title:"10pt",data:"small"},{title:"12pt",data:"medium"},{title:"14pt",data:"large"},{title:"18pt",data:"x-large"},{title:"24pt",data:"xx-large"},{title:"36pt",data:"-webkit-xxx-large"}].each(function(A){z[A.data]=A.title
})},reliableQueriedValue:function(e){return v.webkit===false},getTextByValue:function(A){var z=this.fontSizeMap[A];if(!z){var e=Math.round(parseFloat(A)).toPx();z=this.fontSizeMap[e]}return z},getRelatedCssPropertyNames:function(){return["font",this.getCssPropertyName()]},getCssPropertyName:function(){return"fontSize"},getQueryCommandName:function(){return"fontsize"},getDefaultProperty:function(){return this.canvas.getStyleConfig().fontSize},getFontTagAttribute:function(){return"size"}});r.addTool("bold",{wysiwygonly:w,sync:w,status:w,hotKey:{ctrlKey:w,keyCode:66}});i.Tool.Bold=i.Class.create({$const:{__Identity:"bold"},$extend:i.Tool,$mixins:[i.I.FontTool,i.I.ButtonFontTool],getRelatedCssPropertyNames:function(){return["font",this.getCssPropertyName()]},getCssPropertyName:function(){return"fontWeight"},getQueryCommandName:function(){return"bold"},isStyleApplied:function(e){return["bold","700"].contains(v.getStyle(e,"fontWeight"))}});r.addTool("underline",{wysiwygonly:w,sync:w,status:w,hotKey:{ctrlKey:w,keyCode:85}});
i.Tool.Underline=i.Class.create({$const:{__Identity:"underline"},$extend:i.Tool,$mixins:[i.I.FontTool,i.I.ButtonFontTool],getRelatedCssPropertyNames:function(){return[this.getCssPropertyName()]},getCssPropertyName:function(){return"textDecoration"},getQueryCommandName:function(){return"underline"},isStyleApplied:function(e){return v.getStyle(e,"textDecoration").include("underline")}});r.addTool("italic",{wysiwygonly:w,sync:w,status:w,hotKey:{ctrlKey:w,keyCode:73}});i.Tool.Italic=i.Class.create({$const:{__Identity:"italic"},$extend:i.Tool,$mixins:[i.I.FontTool,i.I.ButtonFontTool],getRelatedCssPropertyNames:function(){return["font",this.getCssPropertyName()]},getCssPropertyName:function(){return"fontStyle"},getQueryCommandName:function(){return"italic"},isStyleApplied:function(e){return v.getStyle(e,"fontStyle")=="italic"}});r.addTool("strike",{wysiwygonly:w,sync:w,status:w,hotKey:{ctrlKey:w,keyCode:68}});i.Tool.Strike=i.Class.create({$const:{__Identity:"strike"},$extend:i.Tool,$mixins:[i.I.FontTool,i.I.ButtonFontTool],getRelatedCssPropertyNames:function(){return[this.getCssPropertyName()]
},getCssPropertyName:function(){return"textDecoration"},getQueryCommandName:function(){return"strikethrough"},isStyleApplied:function(e){return v.getStyle(e,"textDecoration").include("line-through")}});r.addTool("forecolor",{defaultcolor:"#7c84ef",wysiwygonly:w,sync:d,status:w,useFavorite:w,thumbs:i.__CONFIG_COMMON.thumbs,needRevert:w});i.Tool.ForeColor=i.Class.create({$const:{__Identity:"forecolor"},$extend:i.Tool,$mixins:[i.I.CookieBaker,i.I.FontTool,i.I.MenuFontTool,i.I.WrappingSpanFontTool],beforeOnInitialized:function(e){this.useFavorite=!!e.useFavorite;if(this.useFavorite){this.initCookie("txForeColorFavorite")}},createButton:function(){var z=this.readCookie()||this.getDefaultProperty();var e=this.button=new i.Button.Splits(this.buttonCfg);e.setValue(z);this.syncButton(z);return e},createMenu:function(){return new i.Menu.ColorPallete(this.menuCfg)},onAfterHandler:function(e){this.syncButton(e);if(this.useFavorite){this.writeCookie(e)}},getDefaultProperty:function(){return this.canvas.getStyleConfig().color
},getRelatedCssPropertyNames:function(){return[this.getCssPropertyName()]},getCssPropertyName:function(){return"color"},getQueryCommandName:function(){return"forecolor"},computeNewStyle:function(z){var e={};e[this.getCssPropertyName()]=z||this.getDefaultProperty();return e},syncButton:function(z){try{if(z){v.setStyle(this.button.elButton,{backgroundColor:z})}}catch(A){}}});r.addTool("backcolor",{defaultcolor:"#9aa5ea",wysiwygonly:w,sync:d,status:w,useFavorite:w,texts:{options:[{color:"#ff0000",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#e545d0",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#000000",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#ff5e00",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#7c43b1",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#848484",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#ffbb00",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#4673ff",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#66e8ff",text:"#000000",label:"\uac00\ub098\ub2e4"},{color:"#ffe400",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#1fafda",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#8cfccb",text:"#000000",label:"\uac00\ub098\ub2e4"},{color:"#a8c40d",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#009999",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#ffffff",text:"#000000",label:"\uac00\ub098\ub2e4"}]},thumbs:i.__CONFIG_COMMON.thumbs,needRevert:w,needTrans:d});
i.Tool.BackColor=i.Class.create({$const:{__Identity:"backcolor"},$extend:i.Tool,$mixins:[i.I.CookieBaker,i.I.FontTool,i.I.MenuFontTool,i.I.WrappingSpanFontTool],beforeOnInitialized:function(e){this.useFavorite=!!e.useFavorite;if(this.useFavorite){this.initCookie("txBackColorFavorite")}},createButton:function(){var z=this.readCookie()||this.getDefaultProperty();var e=this.button=new i.Button.Splits(this.buttonCfg);e.setValue(z);this.syncButton(z);return e},createMenu:function(){return new i.Menu.ColorPallete(this.menuCfg)},onAfterHandler:function(e){this.syncButton(e);if(this.useFavorite){this.writeCookie(e)}},getDefaultProperty:function(){return this.config.defaultcolor},syncButton:function(A){try{var z=A?A.split("|")[0]:k;if(z){v.setStyle(this.button.elButton,{backgroundColor:z})}}catch(B){}},getRelatedCssPropertyNames:function(){return["color",this.getCssPropertyName()]},getCssPropertyName:function(){return"backgroundColor"},getQueryCommandName:function(){return(v.gecko||v.opera)?"hilitecolor":"backcolor"
},computeNewStyle:function(z){if(this.shouldRevert(z)||this.includeTextColor(z)){var e=z?z.split("|"):[];return{backgroundColor:e[0],color:e[1]}}return{backgroundColor:z}},shouldRevert:function(e){return e==k},includeTextColor:function(e){return e&&(e.indexOf("|")>-1)}});r.addTool("indent",{sync:d,status:d,hotKey:{keyCode:9}});i.Tool.Indent=i.Class.create({$const:{__Identity:"indent"},$extend:i.Tool,oninitialized:function(e){this.weave(new i.Button(this.buttonCfg),k,this.handler);this.bindKeyboard(e.hotKey,this.tabKeyHandler.bind(this));this.createHandlers()},handler:function(){var e=this,z=e.canvas;z.execute(function(A){e.onIndentClicked.handle(A)})},tabKeyHandler:function(){var e=this;this.canvas.execute(function(z){e.onTabPressed.handle(z)})},createHandlers:function(){var D=i.Tool.Indent;var C=D.Judge;var z=D.Operation;var A=D.Handler;var E=i.ChainHandler;var e=E.connect([new E(C.ListItem,z.IndentListItem),new E(C.BlockNode,z.IndentBlockNode)]);var B=E.connect([new E(C.And(C.HeadOfParagraph,C.ListItem),z.IndentListItem),new E(C.ChildOfLastTableCell,z.GoToBelowTable),new E(C.ChildOfTableCell,z.GoToNextCell),new E(C.And(C.HeadOfParagraph,C.BlockNode),z.IndentBlockNode),new E(C.AlwaysTrue,z.AddFourSpaces)]);
this.onTabPressed=new A(B,e,e);this.onIndentClicked=new A(e,e,e)}});i.Tool.Indent.Handler=i.Class.create({initialize:function(e,A,D){var B=i.Tool.Indent;var C=B.RangeIndenter;var z=B.TableCellIndenter;this.collapsedRange=new C(e);this.selectedRange=new C(A);this.tableCellSelected=new z(D)},handle:function(e){var z=(e.table)?e.table.getTdArr():[];if(z.length>0){this.tableCellSelected.indent(e)}else{if(e.isCollapsed()){this.collapsedRange.indent(e)}else{this.selectedRange.indent(e)}}}});i.ChainHandler=i.Class.create({$const:{connect:function(e){var A=e[0];for(var z=1;z<e.length;z++){e[z-1].setNext(e[z])}return A}},initialize:function(e,z){this.judge=e;this.executor=z;return this},setNext:function(e){this.successor=e;return this.successor},handle:function(){var e=arguments;if(this.judge.apply(this,e)){this.executor.apply(this,e)}else{if(this.successor){this.successor.handle.apply(this.successor,e)}}}});(function(){i.Tool.Indent.Helper={findBlocksToIndentFromRange:function(C,F,H){var D=H.getCaret(w);
var B=H.getCaret(d);if(F.isCollapsed()){C.getStartNode();C.getStartOffset();var G=this.findBlockToIndent(D,F);var A=(G.tagName=="P"&&G.firstChild==D&&G.lastChild==B);if(A){F.stuffNode(G)}H.restoreInternal();return[G]}else{var E=new g.dom.TextRangeIterator(D,0,B,0);return this.findBlocksToIndentFromIterator(F,E)}},findBlocksToIndentFromIterator:function(F,E){var B=this;var D=B.collectAllNodes(E);var C=B.selectLeafNodes(D);var A=B.filterUnableToIndent(C);var G=A.map(function(H){return B.findBlockToIndent(H,F)});G=G.compact().uniq();return G},collectAllNodes:function(B){var A=[];g.iter.forEach(B,function(C){if(!A.contains(C)){A.push(C)}});return A},selectLeafNodes:function(A){var B=[];A.each(function(C){if(C.childNodes.length==0){B.push(C)}});return B},filterUnableToIndent:function(B){var A=[];B.each(function(C){if(y.kindOf(C,"ul,ol,dl")){y.removeListIfEmpty(C)}else{if(y.kindOf(C.parentNode,"table")&&y.isText(C)){}else{if(y.kindOf(C.parentNode,"thead,tbody,tfooter")&&!y.kindOf(C,"tr")){}else{if(y.kindOf(C.parentNode,"tr")&&!y.kindOf(C,"th,td")){}else{if(y.kindOf(C.parentNode,"ul,ol,dl")&&!y.kindOf(C,"li,dd,dt")){}else{A.push(C)
}}}}}});return A},findBlockToIndent:function(A){var B=this.findOrCreateBlockForNode(A);return this.findIndentableHigherBlock(B)},findOrCreateBlockForNode:function(B){if(y.isText(B)||y.kindOf(B,"%inline,img")){var A=y.ancestor(B,"p,li,dd,dt,h1,h2,h3,h4,h5,h6,div");if(A&&y.children(A,"%block").length==0){return A}else{A=y.ancestor(B,"%paragraph,pre,noscript,form,hr,address,fieldset,blockquote");return y.wrapInlinesWithP(B,A)}}else{return B}},findIndentableHigherBlock:function(C){var A=k;var B=C;while(B&&B.tagName!="BODY"){if(!A&&y.kindOf(B,"p,div,h1,h2,h3,h4,h5,h6")){A=B}else{if(y.kindOf(B,"li,dd,dt")){return B}else{if(A&&y.kindOf(B,"td,th")){return A}}}B=B.parentNode}return A},findAncestorTableCell:function(A){return y.ancestor(A,"td,th")},findNextCell:function(C){var D=this.findCurrentCell(C);var B=y.next(D,"td,th");if(!B){var A=y.next(y.parent(D),"tr");if(A){B=y.first(A,"td,th")}}return B},findPreviousCell:function(B){var C=this.findCurrentCell(B);var A=y.previous(C,"td,th");if(!A){var D=y.previous(y.parent(C),"tr");
if(D){A=y.last(D,"td,th")}}return A},findCurrentCell:function(A){return y.kindOf(A,"td,th")?A:this.findAncestorTableCell(A)},isCaretOnStartOf:function(F,C){var D=C.getStartNode();var A=C.getStartOffset();while(y.isElement(D)&&D.childNodes.length>0){D=D.childNodes[A];A=0}var E=new g.dom.TextRangeIterator(F,0,D,A);var B=d;g.iter.forEach(E,function(G){if(G.nodeType==3&&!y.kindOf(G.parentNode,"script,style")){var H=(G===D)?G.nodeValue.substring(0,A):G.nodeValue;H=H.replace(i.__WORD_JOINER_REGEXP,"");B=y.removeMeaninglessSpace(H).length>0}else{if(y.isElement(G)){if(y.kindOf(G,"img,embed,iframe")){B=w}}}if(B){throw g.iter.StopIteration}});return !B}};var e=i.Tool.Indent.Helper;var z={};i.Tool.Indent.RangeIndenter=i.Class.create({initialize:function(A){this.handler=A},indent:function(B){var A=this;B.executeUsingCaret(function(C,E){var D=e.findBlocksToIndentFromRange(C,B,E);D.each(function(F){try{A.handler.handle(F,B,C)}catch(G){if(G==z){E.dispose()}else{throw G}}})})}});i.Tool.Indent.TableCellIndenter=i.Class.create({initialize:function(A){this.handler=A
},indent:function(B){var A=this;var C=(B.table)?B.table.getTdArr():[];C.each(function(D){var F=new g.dom.TagIterator(D);var E=e.findBlocksToIndentFromIterator(B,F);E.each(function(G){A.handler.handle(G,B,k)})})}});i.Tool.Indent.Judge={ChildOfFirstTableCell:function(A){var B=e.findAncestorTableCell(A);return B&&!e.findPreviousCell(B)},ChildOfLastTableCell:function(A){var B=e.findAncestorTableCell(A);return B&&!e.findNextCell(B)},ChildOfTableCell:function(A){return e.findAncestorTableCell(A)},ListItem:function(A){return y.kindOf(A,"li")&&y.kindOf(A.parentNode,"ol,ul")},OneDepthList:function(B){if(y.kindOf(B,"li")){var A=new i.Tool.StyledList.ListBuilder();if(A.countDepthOfList(B)==1){return w}}return d},IndentedBlockNode:function(A){return y.kindOf(A,"%block")&&A.style&&A.style.marginLeft!=""},BlockNode:function(A){return y.kindOf(A,"%block")},HeadOfParagraph:function(C,B,A){return e.isCaretOnStartOf(C,A)},And:function(B,A){return function(){return B.apply(this,arguments)&&A.apply(this,arguments)
}},AlwaysTrue:function(){return w}};i.Tool.Indent.Operation={GoToBelowTable:function(C,A){var B=y.ancestor(C,"table");A.bookmarkToNext(B);throw z},GoToNextCell:function(C,B){var A=e.findNextCell(C);if(A){B.selectFirstText(A);throw z}},IndentListItem:function(C){var A=y.ancestor(C,"ul,ol,dl");if(A){var B=y.previous(C);var D=y.next(C);if(y.kindOf(B,"ul,ol,dl")){y.append(B,C)}else{var E=y.clone(A);y.applyStyles(E,{marginLeft:k,paddingLeft:k});y.wrap(E,C)}if(y.kindOf(D,"ul,ol,dl")){y.moveChild(D,C.parentNode);y.remove(D)}}},getChildrenAsElement:function(C){var E=[];var D=C.childNodes;for(var B=0,A=D.length;B<A;B++){var G=D[B];if(y.isText(G)){var F=y.wrapInlinesWithP(G,C);E.push(F)}else{if(y.isElement(G)){E.push(G)}}}return E},IndentBlockNode:function(A){y.applyStyles(A,{marginLeft:"+2em"})},AddFourSpaces:function(B,A){A.pasteContent("&nbsp;&nbsp;&nbsp;&nbsp;",d)},GoToAboveTable:function(C,A){var B=y.ancestor(C,"table");A.bookmarkToPrevious(B);throw z},GoToPreviousCell:function(C,A){var B=e.findPreviousCell(C);
if(B){A.moveCaretTo(B,w);throw z}},OutdentListItem:function(E,D){var F=y.ancestor(E,"ul,ol,dl");if(!F){return}var A=F.parentNode;if(y.kindOf(A,"li")){y.unwrap(A);A=F.parentNode}var H=y.kindOf(A,"ul,ol,dl")?A:k;var C;if(H){C=y.divideNode(F,y.indexOf(E));y.insertAt(E,C)}else{C=y.divideNode(F,y.indexOf(E));var B=y.getStyleText(E);var G=D.newNode("p");y.setStyleText(G,B);y.replace(E,G);y.insertAt(G,C)}y.removeListIfEmpty(F);y.removeListIfEmpty(C)},OutdentBlockNode:function(A){y.applyStyles(A,{marginLeft:"-2em"})},Propagate:function(){throw $propagate}}})();r.addTool("outdent",{sync:d,status:d,hotKey:{shiftKey:w,keyCode:9}});i.Tool.Outdent=i.Class.create({$const:{__Identity:"outdent"},$extend:i.Tool,oninitialized:function(e){this.weave(new i.Button(this.buttonCfg),k,this.handler);this.createHandlers();if(v.opera==d){this.observeBackspace()}this.bindKeyboard(e.hotKey,this.shiftTabKeyHandler.bind(this))},handler:function(){var e=this;this.canvas.execute(function(z){e.onOutdentClicked.handle(z)
})},shiftTabKeyHandler:function(){var e=this;this.canvas.execute(function(z){e.onShiftTabPressed.handle(z)})},observeBackspace:function(){var z=this.canvas;var e=this;z.observeKey({keyCode:i.__KEY.BACKSPACE},function(){z.query(function(A){e.onBackspace.handle(A)})})},createHandlers:function(){var e=i.Tool.Indent;var A=e.Judge;var z=e.Operation;var C=e.Handler;var F=i.ChainHandler;var D=F.connect([new F(A.ListItem,z.OutdentListItem),new F(A.BlockNode,z.OutdentBlockNode)]);var B=F.connect([new F(A.AlwaysTrue,z.Propagate)]);var G=F.connect([new F(A.ListItem,z.OutdentListItem),new F(A.ChildOfFirstTableCell,z.GoToAboveTable),new F(A.ChildOfTableCell,z.GoToPreviousCell),new F(A.BlockNode,z.OutdentBlockNode)]);var E=F.connect([new F(A.And(A.HeadOfParagraph,A.OneDepthList),z.Propagate),new F(A.And(A.HeadOfParagraph,A.ListItem),z.OutdentListItem),new F(A.And(A.HeadOfParagraph,A.IndentedBlockNode),z.OutdentBlockNode),new F(A.AlwaysTrue,z.Propagate)]);this.onShiftTabPressed=new C(G,D,D);this.onOutdentClicked=new C(D,D,D);
this.onBackspace=new C(E,B,B)}});i.I.AlignExecution=i.Mixin.create({executeAlignImageMode:function(A){var C=this.constructor.__ImageModeProps.image;var z=A.getControl();if(!z){return}A.apply(z,C);var e=this.constructor.__ImageModeProps.paragraph;if(e){var B=y.find(z,"%paragraph");A.apply(B,e)}},executeAlignTextMode:function(C){var e=this.constructor.__TextModeProps.paragraph;var A=C.getControl();if(A&&y.kindOf(A,"button")){var E=y.find(A,"%paragraph");if(E){C.apply(E,e)}var z=y.collect(A,"blockquote");if(z){z.style.margin=this.constructor.__TextModeProps.button["style"]["margin"]}}else{var D=C.blocks(function(){return"%paragraph"});C.apply(D,e);var B=[];D.each(function(G){var F;F=y.collectAll(G,"table,hr");F.each(function(H){B.push(H)})});C.apply(B,{align:e.style["textAlign"]})}},queryImageFloat:function(z){var e=z.getControl();if(e){return z.queryStyle(e,"float")}else{return k}},queryParaFloat:function(A){var e,z=A.findNode("%paragraph");if(z){e=A.queryStyle(z,"float")}return e||k},queryTextAlign:function(A){var z=A.findNode("%paragraph");
var e=A.queryStyle(z,"textAlign");if(!e){e=A.queryAttr(z,"align")}if(!e||e=="start"||e=="auto"||e=="-webkit-auto"){e="left"}return e},queryControlAlign:function(e){var z=e.getControl();return e.queryAttr(z,"align")},executeAlign:function(z){var e=this;var A=e.getAlignMode(z);if(A=="tableCell"){e.executeTableCellMode(z)}else{if(A=="image"){e.executeAlignImageMode(z)}else{e.executeAlignTextMode(z)}}},getAlignMode:function(z){var e=(z.table)?z.table.getTdArr():[];if(e.length>0){return"tableCell"}else{if(this.imageAlignMode){return"image"}else{return"text"}}},executeTableCellMode:function(B){if(!this.indenter){var C=i.Tool.Indent.Judge;var D=i.ChainHandler;var z=this;function e(E){y.applyAttributes(E,z.constructor.__TextModeProps.paragraph)}var A=D.connect([new D(C.ListItem,e),new D(C.BlockNode,e)]);this.indenter=new i.Tool.Indent.TableCellIndenter(A)}this.indenter.indent(B)},syncButtonState:function(){var e=this;var z=e.canvas.query(function(A){return e.queryCurrentStyle(A)});e.button.setState(z)
},queryCurrentStyle:function(e){if(this.imageAlignMode){return this.queryImageMode(e)}return this.queryTextMode(e)},queryImageMode:function(A){var e=this.constructor.__ImageModeProps;var B=this.queryImageFloat(A);if(B&&B!="none"){if(e.image&&e.image.style["float"]){return(B==e.image.style["float"])}}var C=this.queryParaFloat(A);if(C&&C!="none"){if(e.paragraph&&e.paragraph.style["float"]){return(C==e.paragraph.style["float"])}}var z=this.queryTextAlign(A);if(e.paragraph&&e.paragraph.style.textAlign){return(z==e.paragraph.style.textAlign)}return d},queryTextMode:function(A){var B=this.constructor.__TextModeProps;var z=B.paragraph.style.textAlign;var e=this.queryControlAlign(A);if(e==k){var C=this.queryTextAlign(A)||"left";return(C==z)}else{return(e==z)}}});(function(){r.addTool("alignleft",{sync:w,status:w,hotKey:{ctrlKey:w,keyCode:188}});var A="left";var e="none";var B="none";var z={align:k,style:{textAlign:A}};i.Tool.AlignLeft=i.Class.create({$const:{__Identity:"alignleft",__ImageModeProps:{paragraph:z,image:{style:{clear:B,"float":e,marginLeft:"",marginRight:""}}},__TextModeProps:{paragraph:z,button:{style:{margin:"0"}}}},$extend:i.Tool,$mixins:[i.I.AlignExecution],oninitialized:function(D){var C=this;
C.imageAlignMode=d;C.weave(new i.Button(C.buttonCfg),k,C.handler);C.bindKeyboard(D.hotKey,C.handler.bind(C));C.startSyncButtonWithStyle()},handler:function(){var C=this;var D=C.canvas;var E=C.toolbar;D.execute(function(F){C.executeAlign(F);var G=C.getAlignMode(F);if(G=="image"){E.fireJobs(i.Ev.__CMD_ALIGN_IMG_LEFT)}else{if(G=="text"){E.fireJobs(i.Ev.__CMD_ALIGN_LEFT)}}});D.triggerQueryStatus()},startSyncButtonWithStyle:function(){var C=this;C.canvas.observeJob(i.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){C.syncButtonState()})}})})();(function(){r.addTool("aligncenter",{sync:w,status:w,hotKey:{ctrlKey:w,keyCode:190}});var A="center";var e="none";var B="none";var z={align:k,style:{textAlign:A}};i.Tool.AlignCenter=i.Class.create({$const:{__Identity:"aligncenter",__ImageModeProps:{paragraph:z,image:{style:{clear:B,"float":e,marginLeft:"",marginRight:""}}},__TextModeProps:{paragraph:z,button:{style:{margin:"0 auto"}}}},$extend:i.Tool,$mixins:[i.I.AlignExecution],oninitialized:function(D){var C=this;
C.imageAlignMode=d;C.weave(new i.Button(C.buttonCfg),k,C.handler);C.bindKeyboard(D.hotKey,C.handler.bind(C));C.startSyncButtonWithStyle()},handler:function(){var C=this;var D=C.canvas;var E=C.toolbar;D.execute(function(F){C.executeAlign(F);var G=C.getAlignMode(F);if(G=="image"){E.fireJobs(i.Ev.__CMD_ALIGN_IMG_CENTER)}else{if(G=="text"){E.fireJobs(i.Ev.__CMD_ALIGN_CENTER)}}});D.triggerQueryStatus()},startSyncButtonWithStyle:function(){var C=this;C.canvas.observeJob(i.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){C.syncButtonState()})}})})();(function(){r.addTool("alignright",{sync:w,status:w,hotKey:{ctrlKey:w,keyCode:191}});var A="right";var e="left";var B="both";var C="8px";var z="";i.Tool.AlignRight=i.Class.create({$const:{__Identity:"alignright",__ImageModeProps:{image:{style:{clear:B,"float":e,marginLeft:z,marginRight:C}}},__TextModeProps:{paragraph:{align:k,style:{textAlign:A}},button:{style:{margin:"0 0 0 auto"}}}},$extend:i.Tool,$mixins:[i.I.AlignExecution],oninitialized:function(E){var D=this;
D.imageAlignMode=d;D.weave(new i.Button(D.buttonCfg),k,D.handler);D.bindKeyboard(E.hotKey,D.handler.bind(D));D.startSyncButtonWithStyle()},handler:function(){var D=this;var E=D.canvas;var F=D.toolbar;E.execute(function(G){D.executeAlign(G);var H=D.getAlignMode(G);if(H=="image"){F.fireJobs(i.Ev.__CMD_ALIGN_IMG_FLOAT_LEFT)}else{if(H=="text"){F.fireJobs(i.Ev.__CMD_ALIGN_RIGHT)}}});E.triggerQueryStatus()},startSyncButtonWithStyle:function(){var D=this;D.canvas.observeJob(i.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){D.syncButtonState()})}})})();(function(){r.addTool("alignfull",{sync:w,status:w});var A="justify";var e="right";var B="both";var C="8px";var z="";i.Tool.AlignFull=i.Class.create({$const:{__Identity:"alignfull",__ImageModeProps:{image:{style:{clear:B,"float":e,marginLeft:C,marginRight:z}}},__TextModeProps:{paragraph:{align:k,style:{textAlign:A}},button:{style:{margin:"0"}}}},$extend:i.Tool,$mixins:[i.I.AlignExecution],oninitialized:function(){var D=this;D.imageAlignMode=d;D.weave(new i.Button(D.buttonCfg),k,D.handler);
D.startSyncButtonWithStyle()},handler:function(){var D=this;var E=D.canvas;var F=D.toolbar;E.execute(function(G){D.executeAlign(G);var H=D.getAlignMode(G);if(H=="image"){F.fireJobs(i.Ev.__CMD_ALIGN_IMG_FLOAT_RIGHT)}else{if(H=="text"){F.fireJobs(i.Ev.__CMD_ALIGN_FULL)}}});E.triggerQueryStatus()},startSyncButtonWithStyle:function(){var D=this;D.canvas.observeJob(i.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){D.syncButtonState()})}})})();r.addTool("insertcells",{sync:d,status:w,options:[{label:"\uc704\ub85c \uc0bd\uc785",title:"\uc704\ub85c \uc0bd\uc785",data:"addRowUpper",klass:"tx-insertcells-1"},{label:"\uc544\ub798 \uc0bd\uc785",title:"\uc544\ub798 \uc0bd\uc785",data:"addRowBelow",klass:"tx-insertcells-2"},{label:"\uc67c\ucabd \uc0bd\uc785",title:"\uc67c\ucabd \uc0bd\uc785",data:"addColLeft",klass:"tx-insertcells-3"},{label:"\uc624\ub978\ucabd \uc0bd\uc785",title:"\uc624\ub978\ucabd \uc0bd\uc785",data:"addColRight",klass:"tx-insertcells-4"}]});i.Tool.Insertcells=i.Class.create({$const:{__Identity:"insertcells"},$extend:i.Tool,oninitialized:function(e){var B=this.canvas;
var D=B.getStyleConfig().insert;var z=(e.options||[]);var C={};z.each(function(E){C[E.data]=E.title});var A=function(E){B.query(function(F){if(F.table){switch(E){case"addRowUpper":F.table.insertRowAbove();break;case"addRowBelow":F.table.insertRowBelow();break;case"addColLeft":F.table.insertColLeft();break;case"addColRight":F.table.insertColRight();break}}})};this.weave.bind(this)(new i.Button.Select(r.merge(this.buttonCfg,{selectedValue:D})),new i.Menu.Select(this.menuCfg),A)}});r.addTool("deletecells",{sync:d,status:w,options:[{label:"\ud589 \uc0ad\uc81c",title:"\ud589 \uc0ad\uc81c",data:"deleteRow",klass:"tx-deletecells-1"},{label:"\uc5f4 \uc0ad\uc81c",title:"\uc5f4 \uc0ad\uc81c",data:"deleteCol",klass:"tx-deletecells-2"}]});i.Tool.deletecells=i.Class.create({$const:{__Identity:"deletecells"},$extend:i.Tool,oninitialized:function(e){var A=this.canvas;var B=A.getStyleConfig().insert;var z=function(C){A.query(function(D){if(D.table){switch(C){case"deleteRow":D.table.deleteRow();break;case"deleteCol":D.table.deleteCol();
break}}})};this.weave.bind(this)(new i.Button.Select(r.merge(this.buttonCfg,{selectedValue:B})),new i.Menu.Select(this.menuCfg),z)}});r.addTool("mergecells",{sync:d,status:w,options:[{label:"\ubcd1\ud569",title:"\ubcd1\ud569",data:"merge",klass:"tx-mergecells-1"},{label:"\ubd84\ud560",title:"\ubd84\ud560",data:"cancelmerge",klass:"tx-mergecells-2"}]});i.Tool.Mergecells=i.Class.create({$const:{__Identity:"mergecells"},$extend:i.Tool,oninitialized:function(){var z=this.canvas;var A=z.getStyleConfig().insert;var e=function(B){z.query(function(C){if(C.table){switch(B){case"merge":C.table.merge();break;case"cancelmerge":C.table.resetMerge();break}}})};this.weave.bind(this)(new i.Button.Select(r.merge(this.buttonCfg,{selectedValue:A})),new i.Menu.Select(this.menuCfg),e)}});l.addMsg({"@cellslineheight.subtitle1":"1pt","@cellslineheight.subtitle2":"2pt","@cellslineheight.subtitle3":"3pt","@cellslineheight.subtitle4":"4pt","@cellslineheight.subtitle5":"5pt"});r.addTool("cellslineheight",{sync:d,status:w,options:[{label:TXMSG("@cellslineheight.subtitle1"),title:"1pt",data:1,klass:"tx-cellslineheight-1"},{label:TXMSG("@cellslineheight.subtitle2"),title:"2pt",data:2,klass:"tx-cellslineheight-2"},{label:TXMSG("@cellslineheight.subtitle3"),title:"3pt",data:3,klass:"tx-cellslineheight-3"},{label:TXMSG("@cellslineheight.subtitle4"),title:"4pt",data:4,klass:"tx-cellslineheight-4"},{label:TXMSG("@cellslineheight.subtitle5"),title:"5pt",data:5,klass:"tx-cellslineheight-5"}]});
i.Tool.Cellslineheight=i.Class.create({$const:{__Identity:"cellslineheight"},$extend:i.Tool,oninitialized:function(z){var e=this;e.createListStyleMap(z);e.weave(new i.Button.CellslineheightList(e.buttonCfg),new i.Menu.Select(e.menuCfg),e.handler)},createListStyleMap:function(e){var z=this.listStyleMap={};e.options.each(function(A){z[A.data]={type:A.type,klass:A.klass}})},handler:function(z){var e=this;if(!e.listStyleMap[z]){return}e.canvas.query(function(A){if(A.table){A.table.setBorderHeight(z)}})},getButtonClassByValue:function(z){var e=this.listStyleMap;if(e[z]){return e[z].klass}else{return e[this.getDefaultProperty()].klass}}});i.Button.CellslineheightList=i.Class.create({$extend:i.Button.Select});r.addTool("cellslinecolor",{defaultcolor:"#7c84ef",wysiwygonly:w,sync:d,status:w,useFavorite:w,thumbs:i.__CONFIG_COMMON.thumbs,needRevert:w});i.Tool.Cellslinecolor=i.Class.create({$const:{__Identity:"cellslinecolor"},$extend:i.Tool,oninitialized:function(){var z=this.canvas;var e=this;this.button=new i.Button(this.buttonCfg);
var A=function(C){B(C);z.query(function(D){if(D.table){D.table.setBorderColor(C)}})};var B=function(C){if(C){try{v.setStyle(e.button.elButton,{backgroundColor:C})}catch(D){}}};B(this.config.defaultcolor);this.weave.bind(this)(e.button,new i.Menu.ColorPallete(this.menuCfg),A)}});l.addMsg({"@cellslinestyle.subtitle1":"\ud14c\ub450\ub9ac \uc5c6\uc74c","@cellslinestyle.subtitle2":"\uc2e4\uc120","@cellslinestyle.subtitle3":"\uc810\uc120","@cellslinestyle.subtitle4":"\uc791\uc740 \uc810\uc120"});r.addTool("cellslinestyle",{sync:d,status:w,options:[{label:TXMSG("@cellslinestyle.subtitle1"),title:"\ud14c\ub450\ub9ac \uc5c6\uc74c",data:"none",klass:"tx-cellslinestyle-1"},{label:TXMSG("@cellslinestyle.subtitle2"),title:"\uc2e4\uc120",data:"solid",klass:"tx-cellslinestyle-2"},{label:TXMSG("@cellslinestyle.subtitle3"),title:"\uc810\uc120",data:"dotted",klass:"tx-cellslinestyle-3"},{label:TXMSG("@cellslinestyle.subtitle4"),title:"\uc791\uc740 \uc810\uc120",data:"dashed",klass:"tx-cellslinestyle-4"}]});
i.Tool.Cellslinestyle=i.Class.create({$const:{__Identity:"cellslinestyle"},$extend:i.Tool,oninitialized:function(z){var e=this;e.createListStyleMap(z);e.weave(new i.Button.CellsLineStyledList(e.buttonCfg),new i.Menu.Select(e.menuCfg),e.handler)},createListStyleMap:function(e){var z=this.listStyleMap={};e.options.each(function(A){z[A.data]={type:A.type,klass:A.klass}})},handler:function(z){var e=this;if(!e.listStyleMap[z]){return}e.canvas.query(function(A){if(A.table){A.table.setBorderType(z)}})},getDefaultProperty:function(){return 1}});i.Button.CellsLineStyledList=i.Class.create({$extend:i.Button.Select});r.addTool("cellsoutline",{sync:d,status:w,options:[{label:"\ubaa8\ub4e0 \ud14c\ub450\ub9ac",title:"\ubaa8\ub4e0 \ud14c\ub450\ub9ac",data:"all",klass:"tx-cellsoutline-1"},{label:"\ubc14\uae65 \ud14c\ub450\ub9ac",title:"\ubc14\uae65 \ud14c\ub450\ub9ac",data:"out",klass:"tx-cellsoutline-2"},{label:"\uc548\ucabd \ud14c\ub450\ub9ac",title:"\uc548\ucabd \ud14c\ub450\ub9ac",data:"in",klass:"tx-cellsoutline-3"},{label:"\uc704\ucabd \ud14c\ub450\ub9ac",title:"\uc704\ucabd \ud14c\ub450\ub9ac",data:"top",klass:"tx-cellsoutline-4"},{label:"\uc544\ub798\ucabd \ud14c\ub450\ub9ac",title:"\uc544\ub798\ucabd \ud14c\ub450\ub9ac",data:"bottom",klass:"tx-cellsoutline-5"},{label:"\uc67c\ucabd \ud14c\ub450\ub9ac",title:"\uc67c\ucabd \ud14c\ub450\ub9ac",data:"left",klass:"tx-cellsoutline-6"},{label:"\uc624\ub978\ucabd \ud14c\ub450\ub9ac",title:"\uc624\ub978\ucabd \ud14c\ub450\ub9ac",data:"right",klass:"tx-cellsoutline-7"},{label:"\ud14c\ub450\ub9ac \uc5c6\uc74c",title:"\ud14c\ub450\ub9ac \uc5c6\uc74c",data:"none",klass:"tx-cellsoutline-8"}]});
i.Tool.Cellsoutline=i.Class.create({$const:{__Identity:"cellsoutline"},$extend:i.Tool,oninitialized:function(z){var e=this;this.twinkleCount=0;this.twinkleTimer=k;e.createListStyleMap(z);e.weave(new i.Button.CellsoutlineList(e.buttonCfg),new i.Menu.Select(e.menuCfg),e.handler);this.toolbar.observeJob(i.Ev.__TOOL_CELL_LINE_CHANGE,function(A){if(A.fromInit!=w){e.twinkleButton()}})},createListStyleMap:function(e){var z=this.listStyleMap={};e.options.each(function(A){z[A.data]={type:A.type,klass:A.klass}})},handler:function(z){var e=this;if(!e.listStyleMap[z]){return}e.canvas.query(function(A){if(A.table){A.table.setBorderRange(z)}});e.canvas.execute(function(A){if(A.table){if(z=="none"){A.table.setNoBorder()}else{A.table.applyBorder()}}})},twinkleButton:function(){var e;e=this;if(this.twinkleTimer){clearInterval(this.twinkleTimer);this.twinkleTimer=k}this.twinkleCount=4;this.twinkleTimer=setInterval(function(){if(0<e.twinkleCount){e.twinkleCount-=1;if(e.button.currentState()=="hovered"){e.button.normalState()
}else{e.button.hoveredState()}}else{e.button.normalState();clearInterval(e.twinkleTimer);e.twinkleTimer=k}},500)}});i.Button.CellsoutlineList=i.Class.create({$extend:i.Button.Select});i.MarkupTemplate.add("cellsline.preview",['<table width="#{width}" cellPadding="0" style="line-height:0"><tbody><tr>','<td valign="center" height="#{height}">','<div style="border-bottom:#{value};width:#{width}px;height:2px;overflow:hidden;"></div>',"</td>","</tr></tbody></table>"].join(""));r.addTool("cellslinepreview",{sync:d,status:w,options:[{label:i.MarkupTemplate.get("cellsline.preview").evaluate({value:"1pt solid #ccc",width:70,height:14}),title:"1pt solid #ccc",data:"#ccc 1 solid"},{label:i.MarkupTemplate.get("cellsline.preview").evaluate({value:"2pt solid #c54",width:70,height:14}),title:"2pt solid #c54",data:"#c54 2 solid"},{label:i.MarkupTemplate.get("cellsline.preview").evaluate({value:"2pt solid #67f",width:70,height:14}),title:"2pt solid #67f",data:"#67f 2 solid"},{label:i.MarkupTemplate.get("cellsline.preview").evaluate({value:"3pt solid #000",width:70,height:14}),title:"3pt solid #000",data:"#000 3 solid"},{label:i.MarkupTemplate.get("cellsline.preview").evaluate({value:"1pt dashed #d4c",width:70,height:14}),title:"1pt dashed #d4c",data:"#d4c 1 dashed"}]});
i.Tool.Cellslinepreview=i.Class.create({$const:{__Identity:"cellslinepreview"},$extend:i.Tool,oninitialized:function(z){var e=this;this.data={color:"",height:0,type:""};this.weave(new i.Button.CellslinepreviewList(this.buttonCfg),new i.Menu.Select(this.menuCfg),this.handler);this.toolbar.observeJob(i.Ev.__TOOL_CELL_LINE_CHANGE,function(A){e.setData(A);e.refreshPreview()})},setData:function(e){if("color" in e){this.data.color=e.color}if("height" in e){this.data.height=e.height}if("type" in e){this.data.type=e.type}},refreshPreview:function(){var e;e=this.data;text=e.height+"pt "+e.type+" "+e.color;this.setPreview(text)},setPreview:function(e){this.button.elText.innerHTML=i.MarkupTemplate.get("cellsline.preview").evaluate({value:e,width:43,height:14})},addBorderHistory:function(e){this.setData(e);this.refreshPreview()},handler:function(A,B){var e=this,z=e.canvas;z.execute(function(D){var C;if(D.table){C=A.split(" ");D.table.setBorderButtons(C[0],C[1],C[2])}})}});i.Button.CellslinepreviewList=i.Class.create({$extend:i.Button.Select,setText:function(e){this.tool.setPreview(e)
}});r.addTool("tablebackcolor",{defaultcolor:"#9aa5ea",wysiwygonly:w,sync:d,status:w,useFavorite:w,thumbs:i.__CONFIG_COMMON.thumbs,needRevert:w});i.Tool.Tablebackcolor=i.Class.create({$const:{__Identity:"tablebackcolor"},$extend:i.Tool,oninitialized:function(){var A=this.canvas;var e=this;e.button=new i.Button(this.buttonCfg);var z=function(C){A.query(function(D){if(D.table){D.table.tableBackground(C)}});B(C)};var B=function(C){try{if(C){v.setStyle(e.button.elButton,{backgroundColor:C})}}catch(D){}};this.weave.bind(this)(e.button,new i.Menu.ColorPallete(this.menuCfg),z)}});r.addTool("tableedittool",{sync:d,status:w,opened:d});i.Tool.TableEditTool=i.Class.create({$const:{__Identity:"tableedittool"},$extend:i.Tool,oninitialized:function(z){var e=this.toolbar;var D=e.el;var C=y.collect(D.parentNode,"div.tx-toolbar-advanced");if(!C){return}e.observeJob("toolbar.advanced.fold",function(){v.hide(C);v.removeClassName(D,"tx-toolbar-basic-open")});e.observeJob("toolbar.advanced.spread",function(){v.show(C);
v.addClassName(D,"tx-toolbar-basic-open")});var B=d;var A=function(){if(B){e.fireJobs("toolbar.advanced.fold")}else{e.fireJobs("toolbar.advanced.spread")}B=!B};this.weave.bind(this)(new i.Button(this.buttonCfg),k,A);if(z.opened==w){C.show();v.addClassName(D,"tx-toolbar-basic-open");B=w}}});r.addTool("tabletemplate",{sync:d,status:w,rows:5,cols:9,options:[{label:"image",data:1,klass:"tx-tabletemplate-1"},{label:"image",data:2,klass:"tx-tabletemplate-2"},{label:"image",data:3,klass:"tx-tabletemplate-3"},{label:"image",data:4,klass:"tx-tabletemplate-4"},{label:"image",data:5,klass:"tx-tabletemplate-5"},{label:"image",data:6,klass:"tx-tabletemplate-6"},{label:"image",data:7,klass:"tx-tabletemplate-7"},{label:"image",data:8,klass:"tx-tabletemplate-8"},{label:"image",data:9,klass:"tx-tabletemplate-9"},{label:"image",data:10,klass:"tx-tabletemplate-10"},{label:"image",data:11,klass:"tx-tabletemplate-11"},{label:"image",data:12,klass:"tx-tabletemplate-12"},{label:"image",data:13,klass:"tx-tabletemplate-13"},{label:"image",data:14,klass:"tx-tabletemplate-14"},{label:"image",data:15,klass:"tx-tabletemplate-15"},{label:"image",data:16,klass:"tx-tabletemplate-16"},{label:"image",data:17,klass:"tx-tabletemplate-17"},{label:"image",data:18,klass:"tx-tabletemplate-18"},{label:"image",data:19,klass:"tx-tabletemplate-19"},{label:"image",data:20,klass:"tx-tabletemplate-20"},{label:"image",data:21,klass:"tx-tabletemplate-21"},{label:"image",data:22,klass:"tx-tabletemplate-22"},{label:"image",data:23,klass:"tx-tabletemplate-23"},{label:"image",data:24,klass:"tx-tabletemplate-24"},{label:"image",data:25,klass:"tx-tabletemplate-25"},{label:"image",data:26,klass:"tx-tabletemplate-26"},{label:"image",data:27,klass:"tx-tabletemplate-27"},{label:"image",data:28,klass:"tx-tabletemplate-28"},{label:"image",data:29,klass:"tx-tabletemplate-29"},{label:"image",data:30,klass:"tx-tabletemplate-30"},{label:"image",data:31,klass:"tx-tabletemplate-31"},{label:"image",data:32,klass:"tx-tabletemplate-32"},{label:"image",data:33,klass:"tx-tabletemplate-33"},{label:"image",data:34,klass:"tx-tabletemplate-34"},{label:"image",data:35,klass:"tx-tabletemplate-35"},{label:"image",data:36,klass:"tx-tabletemplate-36"},{label:"image",data:37,klass:"tx-tabletemplate-37"},{label:"image",data:38,klass:"tx-tabletemplate-38"},{label:"image",data:39,klass:"tx-tabletemplate-39"},{label:"image",data:40,klass:"tx-tabletemplate-40"},{label:"image",data:41,klass:"tx-tabletemplate-41"},{label:"image",data:42,klass:"tx-tabletemplate-42"},{label:"image",data:43,klass:"tx-tabletemplate-43"},{label:"image",data:44,klass:"tx-tabletemplate-44"},{label:"image",data:45,klass:"tx-tabletemplate-45"}]});
i.Tool.Tabletemplate=i.Class.create({$const:{__Identity:"tabletemplate"},$extend:i.Tool,oninitialized:function(z){var e=this;var B=this.canvas;var C={};z.options.each(function(D){C[D.data]={type:D.type}});var A=function(E){if(!C[E]){return}var D=k;B.execute(function(F){if(F.table){D=F.findNode("table");F.table.setTemplateStyle(D,E)}})};this.weave.bind(this)(new i.Button(this.buttonCfg),new i.Menu.List(this.menuCfg),A)}});r.addTool("lineheight",{sync:d,status:w,options:[{label:"50%",title:"50%",data:"0.5"},{label:"80%",title:"80%",data:"0.8"},{label:"100%",title:"100%",data:"1.0"},{label:"120%",title:"120%",data:"1.2"},{label:"150%",title:"150%",data:"1.5"},{label:"180%",title:"180%",data:"1.8"},{label:"200%",title:"200%",data:"2.0"}]});i.Tool.LineHeight=i.Class.create({$const:{__Identity:"lineheight"},$extend:i.Tool,oninitialized:function(e){var B=this.canvas;var D=B.getStyleConfig().lineHeight;var z=(e.options||[]);var C={};z.each(function(E){C[E.data]=E.title});var A=function(E){B.execute(function(F){var G=F.blocks(function(){return"%paragraph"
});F.apply(G,{style:{lineHeight:E}})})};this.weave.bind(this)(new i.Button.Select(r.merge(this.buttonCfg,{selectedValue:D})),new i.Menu.Select(this.menuCfg),A)}});l.addMsg({"@styledlist.subtitle1":"\ucde8\uc18c","@styledlist.subtitle2":"\ub3d9\uadf8\ub77c\ubbf8","@styledlist.subtitle3":"\ub124\ubaa8","@styledlist.subtitle4":"\uc22b\uc790","@styledlist.subtitle5":"\ub85c\ub9c8\uc22b\uc790","@styledlist.subtitle6":"\uc54c\ud30c\ubcb3"});r.addTool("styledlist",{status:w,options:[{label:TXMSG("@styledlist.subtitle1"),title:"cancel",type:"cancel",data:"cancel",klass:"tx-styledlist-0"},{label:TXMSG("@styledlist.subtitle2"),title:"disc",type:"ul",data:"disc",klass:"tx-styledlist-1"},{label:TXMSG("@styledlist.subtitle3"),title:"square",type:"ul",data:"square",klass:"tx-styledlist-2"},{label:TXMSG("@styledlist.subtitle4"),title:"decimal",type:"ol",data:"decimal",klass:"tx-styledlist-3"},{label:TXMSG("@styledlist.subtitle5"),title:"upper-roman",type:"ol",data:"upper-roman",klass:"tx-styledlist-4"},{label:TXMSG("@styledlist.subtitle6"),title:"upper-alpha",type:"ol",data:"upper-alpha",klass:"tx-styledlist-5"}],hotKey:{ul:{ctrlKey:w,altKey:w,keyCode:85},ol:{ctrlKey:w,altKey:w,keyCode:79}}});
i.Tool.StyledList=i.Class.create({$const:{__Identity:"styledlist"},$extend:i.Tool,oninitialized:function(z){var e=this;e.createListStyleMap(z);e.weave(new i.Button.StyledList(e.buttonCfg),new i.Menu.Select(e.menuCfg),e.handler,e.menuInitHandler.bind(e));e.indentHelper=i.Tool.Indent.Helper;e.bindKeyboard(z.hotKey.ul,e.handler.bind(e,"disc"));e.bindKeyboard(z.hotKey.ol,e.handler.bind(e,"decimal"));e.startSyncButtonWithStyle()},createListStyleMap:function(e){var z=this.listStyleMap={};e.options.each(function(A){z[A.data]={type:A.type,klass:A.klass}})},handler:function(A){var z=this;if(!z.listStyleMap[A]){return}var e=z.listStyleMap[A].type;var B={listStyleType:A};z.canvas.execute(function(C){if(e=="cancel"){z.outdentListItem(C)}else{z.createListFromSelection(C,e,B)}})},outdentListItem:function(e){e.executeUsingCaret(function(z,B){var A=i.Tool.Indent.Helper.findBlocksToIndentFromRange(z,e,B);A.each(function(C){i.Tool.Indent.Operation.OutdentListItem(C,e)})})},createListFromSelection:function(A,z,B){var e=this;
A.executeUsingCaret(function(C,F){var E=e.indentHelper.findBlocksToIndentFromRange(C,A,F);var D=e.groupEachList(E);D.each(function(H){var G=new i.Tool.StyledList.ListBuilder(A,z,B);G.createListForNodes(H)})})},groupEachList:function(z){var e=this.indentHelper;var C=[];var B=[];var A=k;z.each(function(D){var E=e.findCurrentCell(D);if(E!=A){if(B.length>0){C.push(B);B=[]}A=E}B.push(D)});if(B.length>0){C.push(B)}return C},menuInitHandler:function(){var e=this.canvas.query(function(A){return !!A.findNode("%listhead")});var z=y.collect(this.menu.elMenu,"li");if(e){v.show(z)}else{v.hide(z)}},startSyncButtonWithStyle:function(){var e=this;var z=e.canvas;var A=e.getDefaultProperty();z.observeJob(i.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){var C=z.query(function(D){var E=D.findNode("%listhead");return D.queryStyle(E,"listStyleType")});C=C||e.getDefaultProperty();if(A==C){return}var B=e.getButtonClassByValue(C);e.button.setText(B);A=C})},getDefaultProperty:function(){return"decimal"},getButtonClassByValue:function(z){var e=this.listStyleMap;
if(e[z]){return e[z].klass}else{return e[this.getDefaultProperty()].klass}}});i.Button.StyledList=i.Class.create({$extend:i.Button.Select,setText:function(e){this.elIcon.className="tx-icon "+e}});i.Tool.StyledList.ListBuilder=i.Class.create({currentDepth:k,prepared:d,listElement:k,uselessListCandidate:[],processor:k,initialize:function(z,e,A){this.processor=z;this.listTag=e;this.listStyle=A},createListForNodes:function(z){var e=this;var A=e.getNodeDepthList(z);A.each(function(B){var C=B.node;var D=B.depth;if(!e.prepared){e.prepareRootList(C,D)}e.adjustDepth(C,D);e.appendAsListItem(C)});e.cleanupEmptyList()},getNodeDepthList:function(z){var e=this;return z.map(function(A){return{node:A,depth:e.countDepthOfList(A)}})},countDepthOfList:function(A){var z=0;var e=y.parent(A);while(e&&!y.isBody(e)){if(y.kindOf(e,"ol,ul")){z++}else{if(y.kindOf(e,"th,td")){break}}e=y.parent(e)}return(z||1)},prepareRootList:function(A,B){var e=this;e.listElement=e.createNewList();var z;if(A.tagName=="LI"){e.uselessListCandidate.push(A.parentNode);
z=y.divideNode(A.parentNode,y.indexOf(A))}else{z=A}y.insertAt(e.listElement,z);e.currentDepth=B;e.listDepth=B;e.prepared=w},adjustDepth:function(z,A){var e=this;while(A!=e.currentDepth){if(A>e.currentDepth){e.increaseDepth()}else{e.decreaseDepth()}}},increaseDepth:function(){var z=this;var A=z.listElement;z.currentDepth++;var e=z.createNewList();A.appendChild(e);z.listElement=e},decreaseDepth:function(){var e=this;var A=e.listElement;e.currentDepth--;if(e.listDepth>e.currentDepth){e.uselessListCandidate.push(A.parentNode);var B=y.divideNode(A.parentNode,y.indexOf(A));var z=e.createNewList();y.insertAt(z,B);z.appendChild(A)}e.listElement=A.parentNode},createNewList:function(){var e=this;var z=e.processor.newNode(e.listTag);v.setStyle(z,e.listStyle);return z},cleanupEmptyList:function(){this.uselessListCandidate.each(function(e){y.removeListIfEmpty(e)})},wrapWithListItem:function(A){if(A.tagName=="LI"){return A}else{if(A.tagName=="P"||(v.webkit&&A.tagName=="DIV")){var z=this.createListItem();
y.applyStyles(A,{marginLeft:k});if(y.getStyleText(A)){y.wrap(z,A);return z}else{return y.replace(A,z)}}else{var e=this.createListItem();e.appendChild(A);return e}}},createListItem:function(){return this.processor.newNode("li")},appendAsListItem:function(z){var e=this.wrapWithListItem(z);if(y.kindOf(z.parentNode,"%listhead")){this.uselessListCandidate.push(z.parentNode)}this.listElement.appendChild(e)}});r.addTool("link",{wysiwygonly:w,sync:d,status:w});l.addMsg({"@insertlink.cancel.image":"#iconpath/btn_cancel.gif?v=2","@insertlink.confirm.image":"#iconpath/btn_confirm.gif?v=2","@insertlink.invalid.url":"URL\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.","@insertlink.link.alt":"[#{title}]\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.","@insertlink.remove.image":"#iconpath/btn_remove.gif?v=2","@insertlink.title":"\uc120\ud0dd\ub41c \ubd80\ubd84\uc5d0 \uac78\ub9b4 URL\uc8fc\uc18c\ub97c \ub123\uc5b4\uc8fc\uc138\uc694.","@insertlink.onclick.target":"\ud074\ub9ad \uc2dc","@insertlink.target.blank":"\uc0c8 \ucc3d","@insertlink.target.self":"\ud604\uc7ac\ucc3d","@insertlink.class.name":"tx-link"});
i.Tool.Link=i.Class.create({$const:{__Identity:"link"},$extend:i.Tool,oninitialized:function(){var e=this;var D=this.canvas;var B=function(E){if(D.isWYSIWYG()){if(E){D.execute(function(F){var I={href:E.link,target:E.target?E.target:"_blank",className:E.className};var H,G;if(F.findNode("a")){H=F.findNode("a");y.applyAttributes(H,I)}else{if(F.hasControl()){G=F.controls(function(){return"img"});y.wrap(F.create("a",I),G)}else{if(F.isCollapsed()){H=F.create("a",I);H.innerHTML=E.link;F.pasteNode(H,d)}else{G=F.inlines(function(){return"%text,img,a,%inline"});G.each(function(J){if(y.hasUsefulChildren(J,w)){if(y.kindOf(J,"a")){y.applyAttributes(J,I)}else{if(y.kindOf(J,"img")){y.wrap(F.create("a",I),[J])}else{var L=y.getStyleText(J);var M=y.collectAll(J,"a");M.each(function(N){y.moveChildToParent(N);y.remove(N)});var K=F.create("a",I);y.setStyleText(K,L);y.replace(J,K)}}}else{y.remove(J)}})}}}})}else{D.execute(function(G){var F=G.findNode("a");if(F){G.unwrap(F)}})}}else{D.execute(function(F){F.insertTag('<a href="'+E.link+'" target="'+E.target+'" >',"</a>")
})}};var A="";var z=function(){if(D.isWYSIWYG()){return D.query(function(E){var F,G,H,I;F=E.findNode("a");if(F){G=y.getAttribute(F,"href");if(G){H=y.getAttribute(F,"target");return{exist:w,value:G,target:H}}}else{I=E.getText();if(/^\w+\:\/\/\S+/.test(I)){return{exist:d,value:I}}}return{exist:d,value:A}})}else{return{exist:d,value:A}}};this.weave.bind(this)(new i.Button(this.buttonCfg),new i.Menu.Link(this.menuCfg),B,z);var C=function(E){e.button.onMouseDown(E)};this.bindKeyboard({ctrlKey:w,keyCode:75},C)}});i.MarkupTemplate.add("menu.insertlink",['<div class="tx-menu-inner">',"    <dl>","        <dt>","            @insertlink.title","        </dt>","        <dd>",'            <input type="text" class="tx-text-input"/>',"        </dd>",'        <dd class="tx-rp">','            <span class="tx-text tx-first">@insertlink.onclick.target</span>','            <span><input type="radio" name="tx-insertlink-win" value="_blank"/><span class="tx-text">@insertlink.target.blank</span></span>','            <span><input type="radio" name="tx-insertlink-win" value="_top"/><span class="tx-text">@insertlink.target.self</span></span>',"        </dd>",'        <dd class="tx-hr">',"            <hr/>","        </dd>","        <dd>",'            <img width="32" height="21" src="@insertlink.confirm.image"/>','            <img width="32" height="21" src="@insertlink.cancel.image"/>','            <img width="51" height="21" src="@insertlink.remove.image" style="display: none;"/>',"        </dd>","    </dl>","</div>"].join(""));
i.Menu.Link=i.Class.create({$extend:i.Menu,ongenerated:function(){var E=this.elMenu;i.MarkupTemplate.get("menu.insertlink").evaluateToDom({},E);var e=y.collectAll(E,".tx-rp input");var z=this.newInput=e[0];v.observe(z,"click",function(){z.checked="checked";C.checked=""});var C=this.currInput=e[1];v.observe(C,"click",function(){C.checked="checked";z.checked=""});var B=this.urlValidator;var D=this.elInput=y.collect(E,"input.tx-text-input");v.observe(D,"keydown",function(H){if(H.keyCode==13){var I=B(D.value);if(!I){alert(TXMSG("@insertlink.invalid.url"));v.stop(H);return}var G=z.checked?z.value:C.value;this.onSelect(H,{link:I,target:G,className:TXMSG("@insertlink.class.name")});v.stop(H)}}.bindAsEventListener(this));var F=y.collectAll(E,"img");v.observe(F[0],"click",function(H){var I=B(D.value);if(!I){alert(TXMSG("@insertlink.invalid.url"));v.stop(H);return}var G=z.checked?z.value:C.value;this.onSelect(H,{link:I,target:G,className:TXMSG("@insertlink.class.name")});v.stop(H)}.bind(this));v.observe(F[1],"click",function(){this.onCancel()
}.bindAsEventListener(this));var A=v(F[2]);v.observe(A,"click",function(G){this.onSelect(G,k)}.bindAsEventListener(this));this.toggleRemoveBtn=function(G){A.style.display=((G)?"":"none")}},onregenerated:function(){var z=this.elInput;var e=this.initHandler();z.value=e.value;if(e.target=="_self"||e.target=="_top"){this.currInput.checked="checked";this.newInput.checked=""}else{this.newInput.checked="checked";this.currInput.checked=""}this.toggleRemoveBtn(e.exist);z.focus();if(v.msie_nonstd){setTimeout(function(){try{z.focus();var A=c.selection.createRange();A.move("character",z.value.length);A.select()}catch(B){}},100)}},urlValidator:function(z){if(!z){return d}z=z.trim();if(z.length==0){return d}var e=/^[a-z0-9+.-]+:|^\/\//i;if(e.test(z)){return z}else{return"http://"+z}}});r.addTool("richtextbox",{sync:d,status:w,rows:4,cols:6,borderwidth:1,bordercolor:"#cbcbcb",bgcolor:"#ffffff",padding:"10px",styles:[{klass:"",image:"#iconpath/textbox/thum_line01.gif?v=2",data:"solid"},{klass:"",image:"#iconpath/textbox/thum_line02.gif?v=2",data:"double"},{klass:"",image:"#iconpath/textbox/thum_line03.gif?v=2",data:"dashed"},{klass:"",image:"#iconpath/textbox/thum_line04.gif?v=2",data:"none"}],options:i.__CONFIG_COMMON.textbox.options,thumbs:i.__CONFIG_COMMON.thumbs});
l.addMsg({"@richtextbox.add":"\ub354\ud558\uae30","@richtextbox.sub":"\ube7c\uae30","@richtextbox.alert":"1 \uc774\uc0c1 20 \uc774\ud558\uc758 \uc22b\uc790\ub9cc \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4.","@richtextbox.bg.color":"\ubc30\uacbd\uc0c9","@richtextbox.border.color":"\uc120 \uc0c9","@richtextbox.border.style":"\uc120 \uc2a4\ud0c0\uc77c","@richtextbox.border.width":"\uc120 \uad75\uae30"});i.Tool.RichTextBox=i.Class.create({$const:{__Identity:"richtextbox"},$extend:i.Tool,oninitialized:function(){var B=this.canvas;var z=this.toolbar;var e=this;var A=this.handler=function(){var D=e.menu;var C={borderStyle:D.elPreview.style.borderStyle,borderWidth:D.elPreview.style.borderWidth,borderColor:D.elPreview.style.borderColor,backgroundColor:D.elPreview.style.backgroundColor,padding:D.padding};B.execute(function(F){var G=F.blocks(function(){return"%wrapper,p,dd,dt,h1,h2,h3,h4,h5,h6,div,caption"});var E=F.wrap(G,"div",{className:"txc-textbox",style:C});z.fireJobs("cmd.textbox.added",E)
})};this.weave.bind(this)(new i.Button(this.buttonCfg),new i.Menu.RichTextbox(this.menuCfg),A)}});i.MarkupTemplate.add("richtextbox.colorpallete",['<dd class="#{wrapClass}">','	<div class="tx-color-box">','		<a href="javascript:;" class="tx-color-bg-thumb" style="background-color:#{color}"></a>',"	</div>",'	<a href="javascript:;" class="tx-color-arrow-down"></a>','	<div class="tx-colorpallete" unselectable="on" style="display:none;z-index:15000;"></div>',"</dd>"].join(""));i.Menu.RichTextbox=i.Class.create({$extend:i.Menu,ongenerated:function(S){var G=this;var C={};S.options.each(function(V){C[V.data]=V.style});this.borderWidth=S.borderWidth||1;this.borderColor=S.borderColor||"#cbcbcb";this.bgColor=S.bgColor||"#ffffff";this.padding=S.padding;var R=this.generateBorderStyle.bind(this);var J=this.generateBorderWidth.bind(this);var M=this.generateBorderColor.bind(this);var F=this.generateBgColor.bind(this);var E=this.elMenu;var Q=y.collect(E,"div.tx-menu-header");var A=y.collect(Q,"div.tx-menu-preview-area");
this.elPreview=y.collect(A,"div.tx-menu-preview");var U=this.elSwitch=y.collect(Q,"div.tx-menu-switch");var N=y.collect(U,"div.tx-menu-simple");var P=y.collect(U,"div.tx-menu-advanced");var z=y.collect(E,"div.tx-menu-inner");var H=y.collect(E,"div.tx-menu-footer");var K=y.collect(H,"img.tx-menu-confirm");var e=y.collect(H,"img.tx-menu-cancel");(function L(){var X=G.simplePalette=tx.div({className:"tx-menu-list"});z.appendChild(X);var V=S.rows;var W=S.cols;X.innerHTML=i.HtmlCreator.createTableMarkup(V,W,S.options);v.observe(X,"click",function(Y){var Z=v.element(Y);m.fire(Z,{span:function(){var ab;if(Z.firstChild&&Z.firstChild.nodeType==1&&Z.firstChild.tagName.toLowerCase()=="img"){ab=Z.firstChild.title}else{ab=Z.innerText}var aa=C[ab];D(aa)}});v.stop(Y)})})();(function B(){var V=G.advancedPalette=tx.div({className:"tx-advanced-list"});z.appendChild(V);V.appendChild(tx.dl({style:{height:"24px"}},tx.dt(TXMSG("@richtextbox.border.style")),R()));V.appendChild(tx.dl(tx.dt(TXMSG("@richtextbox.border.width")),J()));
V.appendChild(tx.dl(tx.dt(TXMSG("@richtextbox.border.color")),M()));V.appendChild(tx.dl(tx.dt(TXMSG("@richtextbox.bg.color")),F()))})();var O=function(){G.borderWidthInput.value=parseInt(G.elPreview.style.borderWidth);G.borderColorInput.style.backgroundColor=G.elPreview.style.borderTopColor;G.bgColorInput.style.backgroundColor=G.elPreview.style.backgroundColor};var D=function(V){G.elPreview.style.border=V.border;G.elPreview.style.backgroundColor=V.backgroundColor};var T=function(V){if(V=="simple"){v.addClassName(N,"tx-selected");v.show(G.simplePalette);v.removeClassName(P,"tx-selected");v.hide(G.advancedPalette)}else{if(V=="advanced"){v.removeClassName(N,"tx-selected");v.hide(G.simplePalette);v.addClassName(P,"tx-selected");v.show(G.advancedPalette);O()}}};(function I(){v.observe(N,"click",T.bind(G,"simple"));v.observe(P,"click",T.bind(G,"advanced"));v.observe(K,"click",G.onSelect.bind(G));v.observe(e,"click",function(){G.onCancel()})})();T("simple");D(C["txc-textbox13"])},generateBorderStyle:function(){var z=this;
var e=tx.dd({className:"tx-border-area"});v.observe(e,"click",function(A){var B=v.element(A);m.fire(B,{img:function(C){var D=C.getAttribute("data");z.elPreview.style.borderStyle=D;if(D=="double"&&z.borderWidthInput.value.toNumber()<3){z.elPreview.style.borderWidth="3px";z.borderWidthInput.value="3"}}});v.stop(A)});e.innerHTML=i.HtmlCreator.createTableMarkup(1,4,this.config.styles);return e},generateBorderWidth:function(){var D=this;var z=tx.dd({className:"tx-border-area"});var C=this.borderWidthInput=tx.input({type:"text",value:this.borderWidth});z.appendChild(C);var A=function(E){if(E>20){alert(TXMSG("@richtextbox.alert"));C.value=20}else{if(E<1){alert(TXMSG("@richtextbox.alert"));C.value=1}else{D.elPreview.style.borderWidth=E+"px";C.value=E}}};v.observe(C,"blur",function(E){A(C.value.toNumber(),E)});v.observe(C,"keydown",function(E){if(E.keyCode==v.KEY_RETURN){v.stop(E)}});var B=tx.a({href:"javascript:;",className:"btn_add"},TXMSG("@richtextbox.add"));z.appendChild(B);v.observe(B,"click",function(E){A(C.value.toNumber()+1);
v.stop(E)});var e=tx.a({href:"javascript:;",className:"btn_sub"},TXMSG("@richtextbox.sub"));z.appendChild(e);v.observe(e,"click",function(E){A(C.value.toNumber()-1);v.stop(E)});return z},generateBorderColor:function(){var F=this;var B=i.MarkupTemplate.get("richtextbox.colorpallete").evaluateAsDom({color:this.borderColor,wrapClass:"tx-color-wrap"});var C=y.collect(B,"div.tx-colorpallete");var e=function(G){F.elPreview.style.borderColor=E.style.backgroundColor=F.borderColor=G};var A=k;var D=function(){if(A==k){A=F.createColorPallete(C,e);A.show()}else{if(!v.visible(C)){A.show()}else{A.hide()}}};this.externalBorderColorToggler=function(){if(v.visible(C)){A.hide()}};var E=this.borderColorInput=y.collect(B,".tx-color-box a");v.observe(E,"click",function(G){F.externalBgColorToggler();D();v.stop(G)});var z=y.collect(B,"a.tx-color-arrow-down");v.observe(z,"click",function(G){F.externalBgColorToggler();D();v.stop(G)});return B},createColorPallete:function(e,A){var z=new i.Menu.ColorPallete({el:e,thumbs:this.config.thumbs});
z.setCommand(A);return z},generateBgColor:function(){var F=this;var A=i.MarkupTemplate.get("richtextbox.colorpallete").evaluateAsDom({color:this.bgColor});var B=y.collect(A,"div.tx-colorpallete");var D=function(G){F.elPreview.style.backgroundColor=E.style.backgroundColor=F.bgColor=G};var z=k;var C=function(){if(z==k){z=F.createColorPallete(B,D);z.show()}else{if(!v.visible(B)){z.show()}else{z.hide()}}};this.externalBgColorToggler=function(){if(v.visible(B)){z.hide()}};var E=this.bgColorInput=y.collect(A,".tx-color-box a");v.observe(E,"click",function(G){F.externalBorderColorToggler();C();v.stop(G)});var e=y.collect(A,"a.tx-color-arrow-down");v.observe(e,"click",function(G){F.externalBorderColorToggler();C();v.stop(G)});return A}});r.addTool("quote",{sync:d,status:w,rows:2,cols:3,options:[{type:"image",data:"tx-quote1",image:"#iconpath/quote/citation01.gif?v=2"},{type:"image",data:"tx-quote2",image:"#iconpath/quote/citation02.gif?v=2"},{type:"image",data:"tx-quote3",image:"#iconpath/quote/citation03.gif?v=2"},{type:"image",data:"tx-quote4",image:"#iconpath/quote/citation04.gif?v=2"},{type:"image",data:"tx-quote5",image:"#iconpath/quote/citation05.gif?v=2"},{type:"cancel",data:"tx-quote6",image:"#iconpath/quote/citation06.gif?v=2"}]},function(e){var z=r.getTool("quote",e);
z.options.each(function(A){A.image=r.getIconPath(A.image,"quote")})});i.Tool.Quote=i.Class.create({$const:{__Identity:"quote"},$extend:i.Tool,oninitialized:function(z){var e=this;var C=this.canvas;var D={};z.options.each(function(E){D[E.data]={type:E.type}});var A=function(G){if(!D[G]){return}var F=D[G].type;var E="blockquote";var H={className:G};if(C.isWYSIWYG()){C.execute(function(J){var I=J.findNode(E);if(I){if(F=="cancel"){J.unwrap(I)}else{J.apply(I,H)}}else{if(F!="cancel"){var K=J.blocks(function(){return"%wrapper,%paragraph"});K=K.findAll(function(L){if(y.kindOf(L,"%innergroup")){J.wrap(y.children(L),E,H);return d}else{return w}});J.wrap(K,E,H)}}})}else{C.execute(function(I){I.insertTag("<blockquote>","</blockquote>")})}};this.weave.bind(this)(new i.Button(this.buttonCfg),new i.Menu.List(this.menuCfg),A);var B=function(E){e.button.onMouseDown(E)};this.bindKeyboard({ctrlKey:w,keyCode:81},B)}});r.addTool("table",{borderStyle:"1px solid #ccc",sync:d,status:w},function(z){var e=r.get("canvas",z).styles.backgroundColor;
if(e!="transparent"){r.getTool("table",z).bgcolor=e}});l.addMsg({"@table.alert":"1 \uc774\uc0c1 99 \uc774\ud558\uc758 \uc22b\uc790\ub9cc \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4."});i.Tool.Table=i.Class.create({$const:{__Identity:"table",__DEFAULT_TABLE_PROPERTY:{cellSpacing:0,cellPadding:1,border:0,style:{border:"none",borderCollapse:"collapse"}},__DEFAULT_TABLE_PROPERTY_STR:'cellspacing="0" cellpadding="0" border="0"',__DEFAULT_TABLE_STYLE:"border:none;border-collapse:collapse;",__DEFAULT_TABLE_CLASS:"txc-table"},$extend:i.Tool,oninitialized:function(z){var e=this;this.tableSize={row:0,col:0};var B=this.canvas;var A=this.handler=function(D){var C=e.makeEmptyTable(D.row,D.col);B.execute(function(F){var E=F.pasteContent(C,w);F.bookmarkInto(E);if(e.toolbar.tools.advanced){e.toolbar.tools.advanced.forceOpen()}})};this.weave.bind(this)(new i.Button(this.buttonCfg),new i.Menu.Table(this.menuCfg),A)},makeEmptyTable:function(H,e){var G=[];var E=this._createDefaultTableWidth();G.push('<table class="'+i.Tool.Table.__DEFAULT_TABLE_CLASS+'" width="'+E+'" ');
G.push(i.Tool.Table.__DEFAULT_TABLE_PROPERTY_STR);G.push(' style="');G.push(i.Tool.Table.__DEFAULT_TABLE_STYLE);G.push(";font-family:");G.push(this.editor.canvas.getStyle("fontFamily"));G.push(";font-size:");G.push(this.editor.canvas.getStyle("fontSize"));G.push('"><tbody>');var F=this.config.borderStyle;var D=parseInt(E/e);var z=["border-bottom:",F,";border-right:",F,";"].join("");for(var C=0;C<H;C++){G.push("<tr>");for(var B=0;B<e;B++){var A=[z];G.push('<td style="width:');G.push(D);G.push(";");G.push("height:",24,";");G.push(z);if(C==0){G.push("border-top:",F,";")}if(B==0){G.push("border-left:",F,";")}G.push(';"><p>&nbsp;</p></td>\n')}G.push("</tr>\n")}G.push("</tbody></table>");return G.join("")},_createDefaultTableWidth:function(){var e=this.config.tableWidth;if(!e){var z=this.canvas.getSizeConfig().contentPadding||8;e=(this.canvas.getSizeConfig().contentWidth||600)-z*2-20}return e}});i.Tool.Table.TemplateWizard=i.Class.create({initialize:function(){this.templateList=(typeof getTableTemplateList=="function")?getTableTemplateList():[{klass:"ex1",common:{backgroundColor:"transparent",borderTop:"none",borderLeft:"none",borderRight:"1px solid #d9d9d9",borderBottom:"1px solid #d9d9d9"},firstRow:{borderTop:"1px solid #000"},firstCol:{borderLeft:"1px solid #000"},lastCol:{borderRight:"1px solid #000"},lastRow:{borderBottom:"1px solid #000"},evenRow:{},oddRow:{}}];
this.currentTemplate=k},applyStyle:function(C,B){if(isNaN(B)){return}var A=new i.Tool.Table.TableCellMatrixer(C);var D=A.getTdMatrix();this.currentTemplate=this.templateList[B];for(var z=0;z<D.length;z++){for(var e=0;e<D[z].length;e++){this.setCellStyle(D[z][e],{isEvenRow:(z%2)==1,isFirstRow:z==0,isLastRow:z==D.length-1,isFirstCol:e==0,isLastCol:(e==D[z].length-1)})}}},setCellStyle:function(z,e){var A=this.currentTemplate;var B=Object.extend({},A.common);Object.extend(B,(e.isEvenRow)?A.evenRow:A.oddRow);Object.extend(B,(e.isFirstRow)?A.firstRow:(e.isLastRow)?A.lastRow:{});Object.extend(B,(e.isLastCol)?A.lastCol:{});Object.extend(B,(e.isFirstCol)?A.firstCol:{});txlib.setStyle(z,B)},getTemplateList:function(){return this.templateList}});i.Tool.Table.TableCellMatrixer=i.Class.create({initialize:function(B){this.rowSize=this.initRowSize(B);this.colSize=this.initColSize(B);var A=y.first(B,"tbody")||B;this.tdMatrix=this.createTdMatrix(A);for(var z=0;z<this.tdMatrix.length;z++){for(var e=0;e<this.tdMatrix[z].length;
e++){var C=this.tdMatrix[z][e];if(C.cols>1){C.cols--;this.tdMatrix[z].splice(e+1,0,C)}}}for(var z=0;z<this.tdMatrix.length;z++){for(var e=0;e<this.tdMatrix[z].length;e++){var C=this.tdMatrix[z][e];if(C.rows>1){C.rows--;this.tdMatrix[z+1].splice(e,0,C)}}}},createTdMatrix:function(z){var B=[];var C=y.children(z,"tr");for(var A=0,e=C.length;A<e;A++){B.push(this.createTdArray(C[A]))}return B},createTdArray:function(C){var B=[];var A=y.children(C,"td");for(var z=0,e=A.length;z<e;z++){B.push(this.decorateSingleTd(A[z]))}return B},decorateSingleTd:function(A){var z=parseInt(A.getAttribute("colSpan")||1);var e=parseInt(A.getAttribute("rowSpan")||1);A.cols=z;A.rows=(e-1)*z+1;return A},initRowSize:function(e){return e.rows.length},initColSize:function(z){var e=0;var A=y.children(y.collect(z,"tr"),"td");A.each(function(B){e+=parseInt(B.getAttribute("colSpan")||1)});return e},getRowSize:function(){return this.rowSize},getColSize:function(){return this.colSize},getTdMatrix:function(){return this.tdMatrix
}});l.addMsg({"@table.title.insert":"\ud45c\uc0bd\uc785 &nbsp;","@table.title.setDirectly":"\ud45c \uc9c1\uc811\uc124\uc815","@table.title.row":"\uc5f4 \uac1c\uc218","@table.title.col":"\ud589 \uac1c\uc218"});i.MarkupTemplate.add("menu.table.direct",["<div>@table.title.setDirectly</div>",'<div class="tx-table-input-area">','<div class="tx-field tx-col-field">@table.title.row<input type="text" value="1"><a class="tx-btn tx-btn-add" href="javascript:;">@table.title.row+</a><a class="tx-btn tx-btn-sub" href="javascript:;">@table.title.row-</a></div>','<div class="tx-field tx-row-field">@table.title.col<input type="text" value="1"><a class="tx-btn tx-btn-add" href="javascript:;">@table.title.col+</a><a class="tx-btn tx-btn-sub" href="javascript:;">@table.title.col-</a></div>',"</div>"].join(""));i.Menu.Table=i.Class.create({$const:{MAX_ROW:99,MAX_COL:99},$extend:i.Menu,ongenerated:function(){this.rowSize=1;this.colSize=1;this.elInnerPreview=y.collect(this.elMenu,"div.tx-menu-inner .tx-menu-preview");
this.dynamicSizer=this.generateDynamicSizer(this.elInnerPreview);this.elInnerRowCol=y.collect(this.elMenu,"div.tx-menu-inner .tx-menu-rowcol");this.generateTextSizer(this.elInnerRowCol);this.elButtonArea=y.collect(this.elMenu,"div.tx-menu-inner .tx-menu-enter");this.generateButtonArea(this.elButtonArea)},onregenerated:function(){this.showDynamicSizer()},showDynamicSizer:function(){this.dynamicSizer.clear();v.show(this.elInnerPreview);v.hide(this.elInnerRowCol);v.hide(this.elButtonArea)},showTextSizer:function(){v.hide(this.elInnerPreview);v.show(this.elInnerRowCol);v.show(this.elButtonArea)},generateDynamicSizer:function(B){var z=this;var E=tx.span();var C=tx.div({className:"tx-dynamic-sizer-display"},TXMSG("@table.title.insert"),E);B.appendChild(C);var D=new i.DynamicSizer({el:B,clickHandler:this.onSelect.bind(this),moveHandler:function(G,F){E.innerHTML=G+"x"+F}});var e=tx.a({href:"javascript:;"},TXMSG("@table.title.setDirectly"));v.observe(e,"click",function(F){z.showTextSizer();v.stop(F)
});var A=tx.div({className:"tx-more-button"});A.appendChild(e);B.appendChild(A);return D},generateTextSizer:function(z){var e=this;i.MarkupTemplate.get("menu.table.direct").evaluateToDom({},z);var B={calculate:function(F,D,E){F=parseInt(F);if(F+E>D||F+E<1){alert(TXMSG("@table.alert"));return F}else{return F+E}},getValidValue:function(F,E,D){if(F<=0||F>D){alert(TXMSG("@table.alert"));return E}else{return F}}};var A=y.collect(z,"div.tx-col-field input");v.observe(A,"blur",function(){A.value=e.colSize=B.getValidValue(A.value,e.colSize,i.Menu.Table.MAX_COL)});v.observe(y.collect(z,"div.tx-col-field a.tx-btn-add"),"click",function(){A.value=e.colSize=B.calculate(e.colSize,i.Menu.Table.MAX_COL,1);return d});v.observe(y.collect(z,"div.tx-col-field a.tx-btn-sub"),"click",function(){A.value=e.colSize=B.calculate(e.colSize,i.Menu.Table.MAX_COL,-1);return d});var C=y.collect(z,"div.tx-row-field input");v.observe(C,"blur",function(){C.value=e.rowSize=B.getValidValue(C.value,e.rowSize,i.Menu.Table.MAX_ROW)
});v.observe(y.collect(z,"div.tx-row-field a.tx-btn-add"),"click",function(){C.value=e.rowSize=B.calculate(e.rowSize,i.Menu.Table.MAX_ROW,1);return d});v.observe(y.collect(z,"div.tx-row-field a.tx-btn-sub"),"click",function(){C.value=e.rowSize=B.calculate(e.rowSize,i.Menu.Table.MAX_ROW,-1);return d})},generateButtonArea:function(A){var e=this;var B=tx.div();var C=tx.a({href:"javascript:;",className:"tx-btn-confirm"},"\ud655\uc778");var z=tx.a({href:"javascript:;",className:"tx-btn-cancel"},"\ucde8\uc18c");v.observe(C,"click",function(D){e.onSelect(D,{row:e.rowSize,col:e.colSize})});v.observe(z,"click",function(){this.onCancel();return d}.bindAsEventListener(this));B.appendChild(C);B.appendChild(z);A.appendChild(B)}});(function(){l.addMsg({"@emoticon.subtitle.person":"\uc0ac\ub78c","@emoticon.subtitle.animal":"\ub3d9\uc2dd\ubb3c","@emoticon.subtitle.thing":"\uc0ac\ubb3c","@emoticon.subtitle.etc":"\uae30\ud0c0"});var e=function(C,B){var D=[];for(var A=1;A<=B;A++){D.push("#decopath/emoticon/"+C+"_"+z(A)+".gif?v=2")
}return D};var z=function(A){return(A<10)?"0"+A:String(A)};r.addTool("emoticon",{sync:d,status:w,rows:5,cols:7,matrices:[{title:TXMSG("@emoticon.subtitle.person"),klass:"tx-menu-matrix-per",options:e("per",29)},{title:TXMSG("@emoticon.subtitle.animal"),klass:"tx-menu-matrix-ani",options:e("ani",28)},{title:TXMSG("@emoticon.subtitle.thing"),klass:"tx-menu-matrix-things",options:e("things",35),defaultshow:w},{title:TXMSG("@emoticon.subtitle.etc"),klass:"tx-menu-matrix-etc",options:e("etc",29)}],asyncUrl:"trex/tool/async/emoticon.js"},function(A){var B=r.getTool("emoticon",A);B.matrices.each(function(D){for(var E=0,C=D.options.length;E<C;E++){D.options[E]=r.getDecoPath(D.options[E])}})});i.Tool.Emoticon=i.Class.create({$const:{__Identity:"emoticon"},$extend:i.AsyncTool,oninitialized:function(){this.weave.bind(this)(new i.Button(this.buttonCfg),k,this.onLoadModule)}})})();r.addTool("redo",{sync:d,status:d});i.Tool.ReDo=i.Class.create({$const:{__Identity:"redo"},$extend:i.Tool,oninitialized:function(){var z=this.canvas;
var e=function(){z.getProcessor().blur();z.focus();setTimeout(function(){z.fireJobs("canvas.panel.redo")},0)};this.weave.bind(this)(new i.Button(this.buttonCfg),k,e);this.bindKeyboard({ctrlKey:w,keyCode:89},function(){z.fireJobs("canvas.panel.redo");z.triggerQueryStatus()})}});r.addTool("undo",{sync:d,status:d});i.Tool.UnDo=i.Class.create({$const:{__Identity:"undo"},$extend:i.Tool,oninitialized:function(){var z=this.canvas;var e=function(){z.getProcessor().blur();z.focus();setTimeout(function(){z.fireJobs("canvas.panel.undo")},20)};this.weave.bind(this)(new i.Button(this.buttonCfg),k,e);this.bindKeyboard({ctrlKey:w,keyCode:90},function(){z.fireJobs("canvas.panel.undo");z.triggerQueryStatus()})}});r.addTool("horizontalrule",{wysiwygonly:w,sync:d,status:w,top:k,left:k,options:[{data:"tx-hr-border-1",image:"#iconpath/horizontalrule/line01.gif?v=2",html:'<hr style="display:block; border: black 0 none; border-top: black 1px solid; height: 1px"/>'},{data:"tx-hr-border-2",image:"#iconpath/horizontalrule/line02.gif?v=2",html:'<hr style="display:block; border: black 0 none; border-top: black 1px solid; border-bottom: black 3px solid; height: 7px"/>'},{data:"tx-hr-border-3",image:"#iconpath/horizontalrule/line04.gif?v=2",html:'<hr style="display:block; border: black 0 none; border-top: black 1px dotted; height: 1px"/>'},{data:"tx-hr-image-1",image:"#iconpath/horizontalrule/line03.gif?v=2",html:'<div style="background: url(#decopath/horizontalrule/line03.gif?v=2) repeat-x scroll left;  width: 99%; height: 15px"><hr style="border: black 0 none; left: -9999px; position: relative; top: -9999px"></div>'},{data:"tx-hr-image-2",image:"#iconpath/horizontalrule/line05.gif?v=2",html:'<div style="background: url(#decopath/horizontalrule/line05.gif?v=2) repeat-x scroll left;  width: 99%; height: 15px"><hr style="border: black 0 none; left: -9999px; position: relative; top: -9999px"></div>'},{data:"tx-hr-image-3",image:"#iconpath/horizontalrule/line06.gif?v=2",html:'<div style="background: url(#decopath/horizontalrule/line06.gif?v=2) repeat-x scroll left;  width: 99%; height: 15px"><hr style="border: black 0 none; left: -9999px; position: relative; top: -9999px"></div>'},{data:"tx-hr-image-4",image:"#iconpath/horizontalrule/line07.gif?v=2",html:'<div style="background: url(#decopath/horizontalrule/line08.gif?v=2) repeat-x scroll left;  width: 99%; height: 15px"><hr style="border: black 0 none; left: -9999px; position: relative; top: -9999px"></div>'}]},function(e){var z=r.getTool("horizontalrule",e);
z.options.each(function(A){A.image=r.getIconPath(A.image);if(A.html){A.html=r.getDecoPath(A.html)}})});i.Tool.HorizontalRule=i.Class.create({$const:{__Identity:"horizontalrule"},$extend:i.Tool,oninitialized:function(e){var A=this.canvas;var B={};e.options.each(function(C){B[C.data]={html:C.html}});var z=function(D){if(!B[D]){return}var C=B[D];if(A.isWYSIWYG()){A.execute(function(E){E.pasteContent(C.html,w)})}else{A.execute(function(E){E.insertTag("",C.html)})}};this.weave.bind(this)(new i.Button(this.buttonCfg),new i.Menu.List(this.menuCfg),z)}});(function(){l.addMsg({"@specialchar.subtitle1":"\uc77c\ubc18\uae30\ud638","@specialchar.subtitle2":"\uc218\ud559\ubd80\ud638, \ud1b5\ud654\ub2e8\uc704","@specialchar.subtitle3":"\uc6d0 \uae30\ud638, \uad04\ud638","@specialchar.subtitle4":"\uc77c\ubcf8\uc5b4","@specialchar.subtitle5":"\ub85c\ub9c8\uc790, \uadf8\ub9ac\uc2a4"});r.addTool("specialchar",{sync:d,status:w,rows:9,cols:20,top:k,left:k,matrices:[{title:TXMSG("@specialchar.subtitle1"),options:["\uff03","\uff06","\uff0a","\uff20","\xa7","\u203b","\u2606","\u2605","\u25cb","\u25cf","\u25ce","\u25c7","\u25c6","\u25a1","\u25a0","\u25b3","\u25b2","\u25bd","\u25bc","\u2192","\u2190","\u2191","\u2193","\u2194","\u3013","\u25c1","\u25c0","\u25b7","\u25b6","\u2664","\u2660","\u2661","\u2665","\u2667","\u2663","\u2299","\u25c8","\u25a3","\u25d0","\u25d1","\u2592","\u25a4","\u25a5","\u25a8","\u25a7","\u25a6","\u25a9","\u2668","\u260f","\u260e","\u261c","\u261e","\xb6","\u2020","\u2021","\u2195","\u2197","\u2199","\u2196","\u2198","\u266d","\u2669","\u266a","\u266c","\u327f","\u321c","\u2116","\u33c7","\u2122","\u33c2","\u33d8","\u2121","\xae","\xaa","\xba","\uff02","\uff08","\uff09","\uff3b","\uff3d","\uff5b","\uff5d","\u2018","\u2019","\u201c","\u201d","\u3014","\u3015","\u3008","\u3009","\u300a","\u300b","\u300c","\u300d","\u300e","\u300f","\u3010","\u3011","\uff01","\uff07","\uff0c","\uff0e","\uff0f","\uff1a","\uff1b","\uff1f","\uff3e","\uff3f","\uff40","\uff5c","\uffe3","\u3001","\u3002","\xb7","\u2025","\u2026","\xa8","\u3003","\u2015","\u2225","\uff3c","\u223c","\xb4","\uff5e","\u02c7","\u02d8","\u02dd","\u02da","\u02d9","\xb8","\u02db","\xa1","\xbf","\u02d0"]},{title:TXMSG("@specialchar.subtitle2"),options:["\uff0b","\uff0d","\uff1c","\uff1d","\uff1e","\xb1","\xd7","\xf7","\u2260","\u2264","\u2265","\u221e","\u2234","\u2642","\u2640","\u2220","\u22a5","\u2312","\u2202","\u2207","\u2261","\u2252","\u226a","\u226b","\u221a","\u223d","\u221d","\u2235","\u222b","\u222c","\u2208","\u220b","\u2286","\u2287","\u2282","\u2283","\u222a","\u2229","\u2227","\u2228","\uffe2","\u21d2","\u21d4","\u2200","\u2203","\u222e","\u2211","\u220f","\uff04","\uff05","\uffe6","\uff26","\u2032","\u2033","\u2103","\u212b","\uffe0","\uffe1","\uffe5","\xa4","\u2109","\u2030","?","\u3395","\u3396","\u3397","\u2113","\u3398","\u33c4","\u33a3","\u33a4","\u33a5","\u33a5","\u33a6","\u3399","\u339a","\u339b","\u339c","\u339d","\u339e","\u339f","\u33a0","\u33a1","\u33a2","\u33ca","\u338d","\u338e","\u338f","\u33cf","\u3388","\u3389","\u33c8","\u33a7","\u33a8","\u33b0","\u33b1","\u33b2","\u33b3","\u33b4","\u33b5","\u33b6","\u33b7","\u33b8","\u33b9","\u3380","\u3381","\u3382","\u3383","\u3384","\u33ba","\u33bb","\u33bc","\u33bd","\u33be","\u33bf","\u3390","\u3391","\u3392","\u3393","\u3394","\u2126","\u33c0","\u33c1","\u338a","\u338b","\u338c","\u33d6","\u33c5","\u33ad","\u33ae","\u33af","\u33db","\u33a9","\u33aa","\u33ab","\u33ac","\u33dd","\u33d0","\u33d3","\u33c3","\u33c9","\u33dc","\u33c6"]},{title:TXMSG("@specialchar.subtitle3"),options:["\u3260","\u3261","\u3262","\u3263","\u3264","\u3265","\u3266","\u3267","\u3268","\u3269","\u326a","\u326b","\u326c","\u326d","\u326e","\u326f","\u3270","\u3271","\u3272","\u3273","\u3274","\u3275","\u3276","\u3277","\u3278","\u3279","\u327a","\u327b","\u3200","\u3201","\u3202","\u3203","\u3204","\u3205","\u3206","\u3207","\u3208","\u3209","\u320a","\u320b","\u320c","\u320d","\u320e","\u320f","\u3210","\u3211","\u3212","\u3213","\u3214","\u3215","\u3216","\u3217","\u3218","\u3219","\u321a","\u321b","\u24d0","\u24d1","\u24d2","\u24d3","\u24d4","\u24d5","\u24d6","\u24d7","\u24d8","\u24d9","\u24da","\u24db","\u24dc","\u24dd","\u24de","\u24df","\u24e0","\u24e1","\u24e2","\u24e3","\u24e4","\u24e5","\u24e6","\u24e7","\u24e8","\u24e9","\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246a","\u246b","\u246c","\u246d","\u246e","\u249c","\u249d","\u249e","\u249f","\u24a0","\u24a1","\u24a2","\u24a3","\u24a4","\u24a5","\u24a6","\u24a7","\u24a8","\u24a9","\u24aa","\u24ab","\u24ac","\u24ad","\u24ae","\u24af","\u24b0","\u24b1","\u24b2","\u24b3","\u24b4","\u24b5","\u2474","\u2475","\u2476","\u2477","\u2478","\u2479","\u247a","\u247b","\u247c","\u247d","\u247e","\u247f","\u2480","\u2481","\u2482"]},{title:TXMSG("@specialchar.subtitle4"),options:["\u3041","\u3042","\u3043","\u3044","\u3045","\u3046","\u3047","\u3048","\u3049","\u304a","\u304b","\u304c","\u304d","\u304e","\u304f","\u3050","\u3051","\u3049","\u3053","\u3054","\u3055","\u3056","\u3057","\u3058","\u3059","\u305a","\u305b","\u305c","\u305d","\u305e","\u305f","\u3060","\u3061","\u3062","\u3063","\u3064","\u3065","\u3066","\u3067","\u3068","\u3069","\u306a","\u306b","\u306c","\u306d","\u306e","\u306f","\u3070","\u3071","\u3072","\u3073","\u3074","\u3075","\u3076","\u3077","\u3078","\u3079","\u307a","\u307b","\u307c","\u307d","\u307e","\u307f","\u3080","\u3081","\u3082","\u3083","\u3084","\u3085","\u3086","\u3087","\u3088","\u3089","\u308a","\u308b","\u308c","\u308d","\u308e","\u308f","\u3090","\u3091","\u3092","\u3093","\u30a1","\u30a2","\u30a3","\u30a4","\u30a5","\u30a6","\u30a7","\u30a8","\u30a9","\u30aa","\u30ab","\u30ac","\u30ad","\u30ae","\u30af","\u30b0","\u30b1","\u30b2","\u30b3","\u30b4","\u30b5","\u30b6","\u30b7","\u30b8","\u30b9","\u30ba","\u30bb","\u30bc","\u30bd","\u30be","\u30bf","\u30c0","\u30c1","\u30c2","\u30c3","\u30c4","\u30c5","\u30c6","\u30c7","\u30c8","\u30c9","\u30ca","\u30cb","\u30cc","\u30cd","\u30ce","\u30cf","\u30d0","\u30d1","\u30d2","\u30d3","\u30d4","\u30d5","\u30d6","\u30d7","\u30d8","\u30d9","\u30da","\u30db","\u30dc","\u30dd","\u30de","\u30df","\u30e0","\u30e1","\u30e2","\u30e3","\u30e4","\u30e5","\u30e6","\u30e7","\u30e8","\u30e9","\u30ea","\u30eb","\u30ec","\u30ed","\u30ee","\u30ef","\u30f0","\u30f1","\u30f2","\u30f3","\u30f4","\u30f5","\u30f6"]},{title:TXMSG("@specialchar.subtitle5"),options:["\uff10","\uff11","\uff12","\uff13","\uff14","\uff15","\uff16","\uff17","\uff18","\uff19","\u2170","\u2171","\u2172","\u2173","\u2174","\u2175","\u2176","\u2177","\u2178","\u2179","\u2160","\u2161","\u2162","\u2163","\u2164","\u2165","\u2166","\u2167","\u2168","\u2169","\u0391","\u0392","\u0393","\u0394","\u0395","\u0396","\u0397","\u0398","\u0399","\u039a","\u039b","\u039c","\u039d","\u039e","\u039f","\u03a0","\u03a1","\u03a3","\u03a4","\u03a5","\u03a6","\u03a7","\u03a8","\u03a9","\u03b1","\u03b2","\u03b3","\u03b4","\u03b5","\u03b6","\u03b7","\u03b8","\u03b9\u03ba","\u03bb","\u03bc","\u03bd","\u03be","\u03bf","\u03c0","\u03c1","\u03c3","\u03c4","\u03c5","\u03c6","\u03c7","\u03c8","\u03c9"]}],asyncUrl:"trex/tool/async/specialchar.js"});
i.Tool.SpecialChar=i.Class.create({$const:{__Identity:"specialchar"},$extend:i.AsyncTool,oninitialized:function(e){this.config=e;this.weave.bind(this)(new i.Button(this.buttonCfg),k,this.onLoadModule)}})})();r.addTool("dictionary",{url:"http://engdic.daum.net/dicen/small_view_top.do",sync:d,status:d});i.Tool.Dictionary=i.Class.create({$const:{__Identity:"dictionary"},$extend:i.Tool,oninitialized:function(e){var A=this.canvas;var z=function(){var D=A.query(function(E){return encodeURI(E.getText())});var B=(D.length>0)?"http://engdic.daum.net/dicen/small_search.do":e.url;var C=j.open(B+"?q="+D,"dicWin","width=410,height=550,scrollbars=yes");C.focus()};this.weave.bind(this)(new i.Button(this.buttonCfg),k,z)}});(function(){r.addTool("background",{wysiwygonly:w,sync:d,status:w,needRevert:true,thumbs:i.__CONFIG_COMMON.thumbs});var e;i.Tool.Background=i.Class.create({$const:{__Identity:"background"},$extend:i.Tool,oninitialized:function(){this.weave(new i.Button(this.buttonCfg),new i.Menu.ColorPallete(this.menuCfg),this.handler)
},handler:function(A){var z=this;var B=z.canvas;B.fireJobs("canvas.apply.backgroundcolor",A);B.history.saveHistory({backgroundColor:e,backgroundImage:B.getStyle("backgroundImage")},{backgroundColor:A,backgroundImage:B.getStyle("backgroundImage")},function(C){z._restoreColor(C)});if(A===null){B.addStyle({backgroundColor:B.getConfig().styles?B.getConfig().styles.backgroundColor||"":"",backgroundImage:B.getConfig().styles?B.getConfig().styles.backgroundImage||"":""});e="";B.getConfig().hasUserBgcolor=d}else{B.addStyle({backgroundColor:A,backgroundImage:""});e=A;B.getConfig().hasUserBgcolor=w}},_restoreColor:function(A){var z=this.canvas;z.addStyle({backgroundColor:A.backgroundColor});if(A.backgroundImage){z.addStyle({backgroundImage:A.backgroundImage})}e=A.backgroundColor}});i.install("canvas.getBgColor & canvas.setBgColor & editor.getContentWithBg",function(C,D,E,B,A){e=A.canvas.styles.backgroundColor;B.getBgColor=function(){var F=e||B.getPanel("html").getStyle("backgroundColor");if(F){return i.Color.getHexColor(F)
}else{return""}};B.setBgColor=function(F){B.getPanel("html").addStyle({backgroundColor:F||"transparent"})};C.getContentWithBg=function(){var F=B.getBgColor().toLowerCase();if(F=="transparent"){return C.getContent()}else{return['<table class="txc-wrapper" border="0" cellspacing="0" cellpadding="0"><tr>','<td bgcolor="',F,'">',C.getContent(),"</td>","</tr></table>"].join("")}};var z=B.initContent.bind(B);B.initContent=function(G){if(G.search(/<table[^>]*txc-wrapper[^>]*>/i)>-1){var F;G=G.replace(/<table[^>]*txc-wrapper[^>]*><tr><td([^>]*)>([\s\S]*?)<\/td><\/tr><\/table>/i,function(J,H,I){F=H.replace(/\sbgcolor="([#\w]*)"/,"$1");return I});B.setBgColor(F)}z(G)};B.history.initHistory({backgroundColor:A.canvas.styles.backgroundColor,backgroundImage:A.canvas.styles.backgroundImage||"none"});B.reserveJob(i.Ev.__IFRAME_LOAD_COMPLETE,function(){var F=B.config.articleBackgroundColor;if(F&&F!="transparent"){B.addStyle({backgroundColor:F,backgroundImage:""})}});B.observeJob("canvas.apply.letterpaper",function(F){if(F.id){B.getPanel("html").addStyle({backgroundColor:"transparent"})
}})})})();r.addTool("advanced",{sync:d,status:w,opened:d});i.Tool.Advanced=i.Class.create({$const:{__Identity:"advanced"},$extend:i.Tool,oninitialized:function(A){var e=this;var z=this.toolbar;var D=z.el;e.opened=d;var C=y.collect(D.parentNode,"div.tx-toolbar-advanced");if(!C){return}z.observeJob("toolbar.advanced.fold",function(){v.hide(C);v.removeClassName(D,"tx-toolbar-basic-open")});z.observeJob("toolbar.advanced.spread",function(){v.show(C);v.addClassName(D,"tx-toolbar-basic-open")});var B=function(){if(e.opened){z.fireJobs("toolbar.advanced.fold")}else{z.fireJobs("toolbar.advanced.spread")}e.opened=!e.opened};this.weave.bind(this)(new i.Button(this.buttonCfg),k,B);if(A.opened==w){C.show();v.addClassName(D,"tx-toolbar-basic-open");e.opened=w}},forceOpen:function(){this.button.pushedState();this.toolbar.fireJobs("toolbar.advanced.spread");this.opened=w}});i.module("add drop-down menu button if extra buttons exist.",function(z,A,B,e){e.observeJob(i.Ev.__IFRAME_LOAD_COMPLETE,function(){var C=y.collectAll(z.getWrapper(),"li.tx-list-extra div.tx-extra");
if(C.length==0){return}C.each(function(E){var D=y.next(E,".tx-extra-menu");if(!D){return}A.makeWidget(new i.Button({el:E,sync:d,status:w}),new i.Menu({el:D}),function(){})})})});(function(){r.addTool("fullscreen",{wysiwygonly:d,status:d,switched:d,minHeight:200,minWidth:766,asyncUrl:"trex/tool/async/fullscreen.js"});i.Tool.FullScreen=i.Class.create({$const:{__Identity:"fullscreen"},$extend:i.AsyncTool,oninitialized:function(z){this.weave.bind(this)(new i.Button(this.buttonCfg),k,this.onLoadModule);var e=this;this.bindKeyboard({ctrlKey:w,keyCode:77},function(){if(!e.loaded){e.onLoadModule()}})}})})();r.addTool("image",{disabledonmobile:w,wysiwygonly:w,sync:d,status:d});l.addMsg({"@image.title":"\uc0ac\uc9c4"});i.Tool.Image=i.Class.create({$const:{__Identity:"image"},$extend:i.Tool,oninitialized:function(){var e=this.editor;this.weave.bind(this)(new i.Button(this.buttonCfg),k,function(){e.getSidebar().getAttacher("image").execute()})}});r.addAttacher("image",{multiple:w,multipleuse:d,checksize:d,boxonly:d,wysiwygonly:w,objattr:{},features:{left:250,top:65,width:797,height:644},popPageUrl:"#host#path/pages/trex/image.html"},function(e){var z=r.getAttacher("image",e);
z.popPageUrl=r.getUrl(z.popPageUrl);z.features=r.getPopFeatures(z.features)});i.Attacher.Image=i.Class.create({$const:{__Identity:"image"},$extend:i.Attacher,name:"image",title:TXMSG("@image.title"),canModified:d,canResized:w,oninitialized:function(){},getKey:function(e){return e.imageurl},getDataForEntry:function(A){A.imageurl=this.encodeSpaceInUrl(A.imageurl);A.originalurl=this.encodeSpaceInUrl(A.originalurl);A.attachurl=this.encodeSpaceInUrl(A.attachurl);A.thumburl=A.thumburl||A.imageurl.replace(/\/image\//gm,"/P150x100/");if(!A.dispElId){A.dispElId=i.Util.getDispElId()}var e=((A.tmpSeq)?this.entryBox.syncSeq(A.tmpSeq):this.entryBox.newSeq());var z=Object.extend({dataSeq:e},A);return z},createEntry:function(z,e){return this.createAttachment(z,e)},encodeSpaceInUrl:function(e){if(!e){return}return e.replace(/ /g,"%20")},execAttach:function(A,z){var e=this.createEntry(this.getDataForEntry(A),z);e.execRegister()},execReload:function(B,A,z){var e=this.createEntry(this.getDataForEntry(B,A),z);
e.execReload()}});i.Attachment.Image=i.Class.create({$const:{__Identity:"image"},$extend:i.Attachment,getFieldAttr:function(e){return{name:"tx_attach_image",value:[e.thumburl,e.imageurl,e.originalurl,e.exifurl,e.filename,e.filesize].join("|")}},getBoxAttr:function(z){var e=z.width?z.width+"x"+z.height+" / ":"";return{name:z.filename+" ("+e+z.filesize.toByteUnit()+")",image:z.thumburl}},getObjectAttr:function(z){var e=Object.extend({},this.actor.config.objattr);if(z.width){if(!e.width||e.width>z.width){e.width=z.width}}else{e.width=k}if(z.height){if(!e.height||e.height>z.height){e.height=z.height}}else{e.height=k}return e},getObjectStyle:function(A){var z={};if(this.actor.config.objstyle){z=Object.extend(z,this.actor.config.objstyle)}if(A.imagealign){var e={L:i.Tool.AlignLeft,C:i.Tool.AlignCenter,FL:i.Tool.AlignRight,FR:i.Tool.AlignFull}[A.imagealign];if(e&&e.__ImageModeProps&&e.__ImageModeProps.image){z=Object.extend(z,e.__ImageModeProps.image["style"])}}return z},getParaStyle:function(z){var A=Object.extend({},this.actor.config.parastyle||this.actor.config.defaultstyle);
if(z.imagealign){var e={L:i.Tool.AlignLeft,C:i.Tool.AlignCenter,FL:i.Tool.AlignRight,FR:i.Tool.AlignFull}[z.imagealign];if(e&&e.__ImageModeProps&&e.__ImageModeProps.paragraph){A=Object.extend(A,e.__ImageModeProps.paragraph["style"])}}return A},getSaveHtml:function(e){return'<img src="'+e.imageurl+'" class="txc-image"/>'},getDispHtml:function(e){return'<img id="'+e.dispElId+'" src="'+e.imageurl+'" class="txc-image"/>'},getDispText:function(e){return'<img src="'+e.imageurl+'" class="txc-image"/>'},getRegLoad:function(e){return new RegExp('<(?:img|IMG)[^>]*src="?'+e.imageurl.getRegExp()+'"?[^>]*/?>',"gim")},getRegHtml:function(e){return new RegExp('<(?:img|IMG)[^>]*src="?'+e.imageurl.getRegExp()+'"?[^>]*/?>',"gim")},getRegText:function(e){return new RegExp('<(?:img|IMG)[^>]*src="?'+e.imageurl.getRegExp()+'"?[^>]*/?>',"gim")}});r.addTool("file",{disabledonmobile:w,wysiwygonly:w,sync:d,status:d});l.addMsg({"@file.title":"\ud30c\uc77c"});i.Tool.File=i.Class.create({$const:{__Identity:"file"},$extend:i.Tool,oninitialized:function(){var e=this.editor;
this.weave.bind(this)(new i.Button(this.buttonCfg),k,function(){e.getSidebar().getAttacher("file").execute()})}});r.addAttacher("file",{multiple:w,multipleuse:d,checksize:w,boxonly:d,wysiwygonly:d,features:{left:250,top:65,width:450,height:404},popPageUrl:"#host#path/pages/trex/file.html"},function(e){var z=r.getAttacher("file",e);z.popPageUrl=r.getUrl(z.popPageUrl);z.features=r.getPopFeatures(z.features)});i.Attacher.File=i.Class.create({$const:{__Identity:"file"},$extend:i.Attacher,name:"file",title:TXMSG("@file.title"),canModified:w,canResized:d,oninitialized:function(){},getKey:function(e){return e.key||e.attachurl},getDataForEntry:function(C){if(!C.dispElId){C.dispElId=i.Util.getDispElId()}var e=((C.tmpSeq)?this.entryBox.syncSeq(C.tmpSeq):this.entryBox.newSeq());var B=C.filename.split(".").pop().toLowerCase();var z;switch(B){case"jpg":case"gif":case"png":case"bmp":z=C.attachurl.replace("/attach/","/thumbnail/");break;default:z=i.Util.thumburl(B)}var A=Object.extend({dataSeq:e,thumburl:z,prevurl:i.Util.prevurl(C.filename.split(".").pop().toLowerCase())},C);
return A}});i.Attachment.File=i.Class.create({$const:{__Identity:"file"},$extend:i.Attachment,getFieldAttr:function(e){return{name:"tx_attach_file",value:[e.attachurl,e.filesize,e.filename].join("|")}},getBoxAttr:function(C){var z=56;var A=C.filename;if(A.getRealLength()>z){if(/\./.test(A)){var D=A.split(".");var B=D.pop().cutRealLength(z-4);var e=D.join(".").cutRealLength(z-1-B.length);A=e+"."+B}else{A=A.cutRealLength(z)}}return{name:A+" ("+C.filesize.toByteUnit()+")",image:C.thumburl}},getObjectStyle:function(A){var z={};if(this.actor.config.objstyle){z=Object.extend(z,this.actor.config.objstyle)}if(A.imagealign){var e={L:i.Tool.AlignLeft,C:i.Tool.AlignCenter,FL:i.Tool.AlignRight,FR:i.Tool.AlignFull}[A.imagealign];if(e&&e.__TextModeProps&&e.__TextModeProps.image){z=Object.extend(z,e.__TextModeProps.button["style"])}}return z},getParaStyle:function(z){var A=Object.extend({},this.actor.config.parastyle||this.actor.config.defaultstyle);if(z.imagealign){var e={L:i.Tool.AlignLeft,C:i.Tool.AlignCenter,FL:i.Tool.AlignFull,FR:i.Tool.AlignRight}[z.imagealign];
if(e&&e.__TextModeProps&&e.__TextModeProps.paragraph){A=Object.extend(A,e.__TextModeProps.paragraph["style"])}}return A},getSaveHtml:function(e){return'<a href="'+e.attachurl+'"><img src="'+e.prevurl+'"/> '+e.filename+"</a>"},getDispHtml:function(e){return'<button id="'+e.dispElId+'" class="txc-file"><img class="tx-unresizable" src="'+e.prevurl+'" ld="'+e.attachurl+'"/> '+e.filename+"</button>"},getDispText:function(e){return"["+TXMSG("@file.title")+":"+e.dataSeq+"]"},getRegLoad:function(e){return new RegExp('<(?:a|A)\\s*href="?'+e.attachurl.getRegExp()+'[^"]*"?[^>]*><(?:img|IMG)[^>]*/?>[\\S\\s]*?</(?:a|A)>',"gm")},getRegHtml:function(e){return new RegExp('<(?:button|BUTTON)[^>]*id="?'+e.dispElId+'"?[^>]*>[\\S\\s]*?'+e.attachurl.getRegExp()+"[\\S\\s]*?</(?:button|BUTTON)>","gm")},getRegText:function(e){return new RegExp("\\["+TXMSG("@file.title")+":"+e.dataSeq+"\\]","gm")}});r.addTool("media",{wysiwygonly:w,sync:d,status:d});l.addMsg({"@media.title":"\uba40\ud2f0\ubbf8\ub514\uc5b4","@media.prev.url":"#iconpath/spacer2.gif?v=2","@media.prev.url.tvpot":"#iconpath/img_multi_tvpot.gif?v=2","@media.prev.url.wmp":"#iconpath/spacer2.gif?v=2"});
i.Tool.Media=i.Class.create({$const:{__Identity:"media"},$extend:i.Tool,oninitialized:function(){var e=this.editor;this.weave.bind(this)(new i.Button(this.buttonCfg),k,function(){e.getSidebar().getEmbeder("media").execute()})}});r.addEmbeder("media",{wysiwygonly:w,useCC:d,features:{left:250,top:65,width:458,height:568,resizable:"yes"},popPageUrl:"#host#path/pages/trex/multimedia.html",allowNetworkingFilter:d,allowNetworkingSites:[]},function(e){var z=e.sidebar.embeder.media;z.popPageUrl=r.getUrl(z.popPageUrl);z.features=r.getPopFeatures(z.features)});(function(){i.Embeder.Media=i.Class.create({$const:{__Identity:"media"},$extend:i.Embeder,name:"media",title:TXMSG("@media.title"),canResized:w,getCreatedHtml:function(I){var H=I.code||e(I.url,this.config);return D(H)},getDataForEntry:function(){}});i.register("filter > media ",function(H,I,K){var J=K.embeders.media.config;H.getDocParser().registerFilter("filter/embeder/media",{"text@load":function(L){return L},"source@load":function(L){return D(L)
},"html@load":function(L){return D(L)},text4save:function(L){return L},source4save:function(L){L=F(L);L=B(L,J);return L},html4save:function(L){L=F(L);L=B(L,J);return L},text2source:function(L){return L},text2html:function(L){return L},source2text:function(L){return L},source2html:function(L){return D(L)},html2text:function(L){return F(L)},html2source:function(L){return F(L)}})});function C(K,J){var I,M,L,H;M="";I=/[\/]*\/\/([^\/]+)\//i.exec(K);if(I&&I[1]){M=I[1]}H=J.allowNetworkingSites.length;for(L=0;L<H;L+=1){if(M==J.allowNetworkingSites[L].host){return w}}return d}function B(J,I){var H;if(I.allowNetworkingFilter==d){return J}H=J.replace(/(<object[^>]*>)((?:\n|.)*?)(<\/object>)/gi,function(M,Q,O,K){var L,N;var P=d;L=/data[\s]*=[\s"']*(http:\/\/[^\/]+\/)[^("'\s)]+/i.exec(Q);if(L&&L.length==2){N=L[1];if(C(N,I)===d){P=w}}L=/<param[^>]*=[^\w]*movie[^\w]+[^>]*>/i.exec(O);if(L&&L[0]){N=/\s+value=["']?([^\s"']*)["']?/i.exec(L[0]);if(N&&N[1]){if(C(N[1],I)===d){P=w}}}L=/<param[^>]*=[^\w]*src[^\w]+[^>]*>/i.exec(O);
if(L&&L[0]){N=/\s+value=["']?([^\s"']*)["']?/i.exec(L[0]);if(N&&N[1]){if(C(N[1],I)===d){P=w}}}if(P===w){O=O.replace(/<param[^>]*=[^\w]*allowNetworking[^\w]+[^>]*>/i,"");O='<param name="allowNetworking" value="internal" />'.concat(O)}return Q+O+K});H=H.replace(/(<embed)([^>]*)(><\/embed>|\/>)/gi,function(N,O,K,L){var M=/\s+src=["']?([^\s"']*)["']?/i.exec(K);if(M&&M[1]){if(C(M[1],I)){return O+K+L}}K=K.replace(/\s+allowNetworking=["']?[\w]*["']?/i,"").concat(' allowNetworking="internal"');return O+K+L});return H}function F(M){var J;var L=new RegExp("<(?:img|IMG)[^>]*txc-media[^>]*/?>","gim");var K=M;while((J=L.exec(K))!=k){var I=J[0];var H=z(I);if(!v.msie&&H.indexOf("$")>-1){H=H.replace(/\$/g,"$$$$")}M=M.replace(I,H)}return M}function D(O){if(v.msie){O=O.replace(/<iframe[^>]*src=("|'|)https?:\/\/www\.youtube\.com\/embed\/(\w+)\1[^>]*><\/iframe>/i,function(T,S,R){var Q,U,P;Q=T.match(/\swidth=['"]?(\d+)/);U=(Q&&Q[1])||"560";Q=T.match(/\sheight=['"]?(\d+)/);P=(Q&&Q[1])||"315";return'<object width="'+U+'" height="'+P+'"><param name="movie" value="https://www.youtube.com/v/'+R+'?version=3&amp;hl=ko_KR"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><param name="wmode" value="transparent"></param><embed src="https://www.youtube.com/v/'+R+'?version=3&amp;hl=ko_KR" type="application/x-shockwave-flash" width="'+U+'" height="'+P+'" allowscriptaccess="always" allowfullscreen="true" wmode="transparent"></embed></object>'
});O=O.replace(/(<object[^>]*>)((?:\n|.)*?)(<\/object>)/gi,function(Q,S,R,P){R=R.replace(/<param[^>]*=[^\w]*wmode[^\w]+[^>]*>/i,"");R=R.replace(/<param[^>]*=[^\w]*play[^\w]+[^>]*>/i,"");R='<param name="wmode" value="transparent" />'.concat(R);return S+R+P});O=O.replace(/(<embed)([^>]*)(>)/gi,function(R,S,P,Q){P=P.replace(/\s+wmode=("|'|)\w*\1/i,"");P+=" wmode=transparent";return S+P+Q});return O}else{var K,H,J,M;var L=O;var I=new RegExp("<(?:script)[^>]*>[\\S\\s]*?(<(?:embed|EMBED)[^>]*src=[^>]*>)[\\S\\s]*?</(?:script)>","gim");while((K=I.exec(L))!=k){H=K[0];J=H.replace(/<embed/i,"<xxembed");O=O.replace(H,J)}var N=new RegExp("<(?:object|OBJECT)[^>]*>[\\S\\s]*?(<(?:embed|EMBED)[^>]*src=[^>]*>)[\\S\\s]*?</(?:object|OBJECT)>","gim");while((K=N.exec(L))!=k){H=K[0];M=K[1];J=G(H,M);O=O.replace(H,J)}N=new RegExp("<(?:embed|EMBED)[^>]*src=[^>]*(?:/?>|></(?:embed|EMBED)>)","gim");while((K=N.exec(L))!=k){H=K[0];M=K[0];J=G(H,M);O=O.replace(H,J)}O=O.replace(/<xxembed/i,"<embed");return O}}function G(J,R){var I=i.Util.getAllAttributesFromEmbed(R);
var M=I.src;var N=(I.width||" ").parsePx();var O=(I.height||" ").parsePx();if(isNaN(N)||isNaN(O)){var S=A(M);N=S.width;O=S.height}var L="<embed";for(var K in I){L+=" "+K+'="'+I[K]+'"'}L+=">";var Q=J.split(R);J=Q[0]+L;for(var P=1;P<Q.length;P++){J+=Q[P]}var H=E(M);return'<img src="'+H.imageSrc+'" width="'+N+'" height="'+O+'" border="0" class="tx-entry-embed txc-media'+H.className+'" ld="'+encodeURIComponent(J)+'"/>'}function z(M){var H=i.Util.getAllAttributes(M);var L=H.ld;if(!L||L.length==0){return""}var J=H.width;var K=H.height;var N=decodeURIComponent(L);var Q=N;if(N.indexOf("object")>-1||N.indexOf("OBJECT")>-1){var O;var R=new RegExp("<(?:embed|EMBED)[^>]*src=[^>]*(?:/?>|></(?:embed|EMBED)>)","gim");while((O=R.exec(N))!=k){Q=O[0]}}H=i.Util.getAllAttributes(Q);var I=H.src;var P=A(I);if(isNaN(J)){N=i.String.changeAttribute(N,"width",J,P.width)}else{N=i.String.changeAttribute(N,"width",J,J)}if(isNaN(K)){N=i.String.changeAttribute(N,"height",K,P.height)}else{N=i.String.changeAttribute(N,"height",K,K)
}return N}function e(L,K){var M,I,N,J,H;M=L.split(".").pop().split("?")[0].toLowerCase();I=A(L);if(L.indexOf("http://flvs.daum.net")==0){N=" allowScriptAccess='always'"}else{N=" allowScriptAccess='never'";if(K.allowNetworkingFilter&&C(L,K)==d){N+=" allowNetworking='internal'"}}J="http://tvpot.daum.net/clip/ClipViewByVid.do?vid=";if(L.indexOf(J)==0){H=L.substr(J.length);L="http://flvs.daum.net/flvPlayer.swf?vid="+H;M="swf";N=" allowScriptAccess='always'"}switch(M){case"swf":return'<embed src="'+L+"\" quality='high' "+N+" type='application/x-shockwave-flash' allowfullscreen='true' pluginspage='http://www.macromedia.com/go/getflashplayer' wmode='transparent' width='"+I.width+"' height='"+I.height+"'></embed>";case"mp3":case"wma":case"asf":case"asx":case"mpg":case"mpeg":case"wmv":case"avi":return'<embed src="'+L+'" type="application/x-mplayer2" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/" width=\''+I.width+"' height='"+I.height+"'></embed>";case"mov":return'<embed src="'+L+'" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/indext.html" width=\''+I.width+"' height='"+I.height+"'></embed>";
case"jpg":case"bmp":case"gif":case"png":return'<img src="'+L+'" border="0"/>';default:return'<embed src="'+L+"\" width='"+I.width+"' height='"+I.height+"' "+N+" ></embed>"}}function A(I){var H,J;if(I.indexOf("api.bloggernews.media.daum.net/static/recombox1")>-1){H=400;J=80}else{if(I.indexOf("flvs.daum.net/flvPlayer")>-1){H=502;J=399}else{var K=I.split(".").pop().split("?")[0].toLowerCase();switch(K){case"mp3":case"wma":case"asf":case"asx":H=280;J=45;break;case"mpg":case"mpeg":case"wmv":case"avi":H=320;J=285;break;default:H=400;J=300;break}}}return{width:H,height:J}}function E(J){var H="";var I="";if(J.indexOf("api.bloggernews.media.daum.net/static/recombox1")>-1){H="";I=TXMSG("@media.prev.url")}else{if(J.indexOf("flvs.daum.net/flvPlayer")>-1){H=" txc-media-tvpot";I=TXMSG("@media.prev.url.tvpot")}else{var K=J.split(".").pop().split("?")[0].toLowerCase();switch(K){case"mp3":case"wma":case"asf":case"asx":H=" txc-media-wmp";I=TXMSG("@media.prev.url.wmp");break;case"mpg":case"mpeg":case"wmv":case"avi":H=" txc-media-wmp";
I=TXMSG("@media.prev.url.wmp");break;default:H="";I=TXMSG("@media.prev.url");break}}}return{className:H,imageSrc:I}}})();l.addMsg({"@canvas.unload.message":"\uc791\uc131\ud558\uc2e0 \ub0b4\uc6a9\uc774 \uc800\uc7a5\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \ud398\uc774\uc9c0\ub97c \ub5a0\ub098\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","@canvas.unload.message.at.modify":"\uc791\uc131\ud558\uc2e0 \ub0b4\uc6a9\uc774 \uc800\uc7a5\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \ud398\uc774\uc9c0\ub97c \ub5a0\ub098\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"});i.install("editor.isDisableUnloadHandler & editor.setDisableUnloadHandler",function(e){var z=w;e.isDisableUnloadHandler=function(){return z};e.setDisableUnloadHandler=function(){z=d};e.setEnableUnloadHandler=function(){z=w}});i.module("observing beforeunload event",function(C,D,E,A,z){var e=z.events;var B=new i.Validator();v.observe(window,"beforeunload",function(F){if(C.isDisableUnloadHandler()){if(e.preventUnload){A.fireJobs(i.Ev.__CANVAS_BEFORE_UNLOAD);if(B.exists(A.getContent())){F.returnValue=TXMSG("@canvas.unload.message");
return TXMSG("@canvas.unload.message")}}}},d)});l.addMsg({"@align.image.align.center":"\uac00\uc6b4\ub370\uc815\ub82c","@align.image.align.full":"\uc624\ub978\ucabd\uae00\ud750\ub984","@align.image.align.left":"\uc67c\ucabd\uc815\ub82c","@align.image.align.right":"\uc67c\ucabd\uae00\ud750\ub984","@align.text.align.center":"\uac00\uc6b4\ub370\uc815\ub82c (Ctrl+.)","@align.text.align.full":"\uc591\ucabd\uc815\ub82c","@align.text.align.left":"\uc67c\ucabd\uc815\ub82c (Ctrl+,)","@align.text.align.right":"\uc624\ub978\ucabd\uc815\ub82c (Ctrl+/)"});i.module("Register an eventhandler in order to change align icons upon toolbar when user click a specific image or not.",function(B,D,E,A){var F="tx-selected-image";var z=[D.tools.alignleft,D.tools.aligncenter,D.tools.alignright,D.tools.alignfull];var e=["txc-2image-c","txc-3image-c","txc-footnote","txc-jukebox","txc-movie","txc-gallery","txc-imazing","txc-map","txc-file","txc-emo","tx-entry-embed","txc-bgm","txc-pie"];var C=function(G){var H=function(I,K,M){if(!I){return
}var L=k;var J=k;if(!L){L=y.find(I.button.elButton,"li")}if(!J){J=v(I.button.elIcon)}J.title=M;if(K=="image"){if(!v.hasClassName(L,F)){v.addClassName(L,F)}I.imageAlignMode=w}else{if(v.hasClassName(L,F)){v.removeClassName(L,F)}I.imageAlignMode=d}};H(z[0],G,G=="image"?TXMSG("@align.image.align.left"):TXMSG("@align.text.align.left"));H(z[1],G,G=="image"?TXMSG("@align.image.align.center"):TXMSG("@align.text.align.center"));H(z[2],G,G=="image"?TXMSG("@align.image.align.right"):TXMSG("@align.text.align.right"));H(z[3],G,G=="image"?TXMSG("@align.image.align.full"):TXMSG("@align.text.align.full"))};A.observeElement([{tag:"body"},{tag:"table"},{tag:"hr"}],function(){C("text")});A.observeElement({tag:"img"},function(H){var G=i.Util.getMatchedClassName(H,e);if(G){C("text")}else{if(y.find(H,"button")){C("text")}else{C("image")}}})});i.module("make padding area inside Canvas with editor width",function(D,N,P,B){var J=B.getPanel(i.Canvas.__WYSIWYG_MODE);if(!J){return}var R=J.el;var O=16;var G=28;var V=2;
var H;var A;var E;var U;var Y=B.getSizeConfig();var X=B.getContainerWidth();var S=Y.contentWidth.toNumber();var W=Y.contentPadding.toNumber();var C=(X>S);B.observeJob("canvas.apply.background",function(ab){aa({top:(ab&&ab.topLeftHeight)?ab.topLeftHeight.parsePx():0,right:(ab&&ab.midRightWidth)?ab.midRightWidth.parsePx():0,bottom:(ab&&ab.botLeftHeight)?ab.botLeftHeight.parsePx():0,left:(ab&&ab.midLeftWidth)?ab.midLeftWidth.parsePx():0})});B.observeJob("canvas.apply.letterpaper",function(ab){aa({top:(ab&&ab.topHeight)?ab.topHeight.parsePx():0,right:(ab&&(ab.midColor||ab.midUrl))?W:0,bottom:(ab&&ab.botHeight)?ab.botHeight.parsePx():0,left:(ab&&(ab.midColor||ab.midUrl))?W:0})});if(C){B.observeJob(i.Ev.__IFRAME_LOAD_COMPLETE,function(){aa();e();I()});B.observeJob(i.Ev.__CANVAS_MODE_CHANGE,function(){K();I()});B.observeJob(i.Ev.__CANVAS_WRAP_WIDTH_CHANGE,F);B.observeJob("canvas.normalscreen.change",F);B.observeJob("canvas.fullscreen.change",F);if(!v.msie_nonstd){if(v.gecko){v.setStyle(R,{overflowX:"auto",overflowY:"auto"})
}else{v.setStyle(R,{overflowX:"auto",overflowY:"scroll"})}}}B.getCanvasGuideSize=function(){return L().leftWidth.parsePx()};function aa(ab){J.addStyle(Q(ab))}function Q(ab){var ae={};var af=["top","bottom","left","right"];for(var ad=0;ad<af.length;ad++){var ac=af[ad];ae[ac]=(ab&&ab[ac])||W}if(C){ae.left=Math.max(Math.ceil(z()),0);ae.right=Math.max(Math.floor(z()),0);return{width:S,paddingLeft:"0",paddingRight:"0",paddingTop:ae.top.toPx(),paddingBottom:ae.bottom.toPx(),marginLeft:ae.left.toPx(),marginRight:ae.right.toPx()}}else{return{paddingTop:ae.top.toPx(),paddingRight:ae.right.toPx(),paddingBottom:ae.bottom.toPx(),paddingLeft:ae.left.toPx()}}}function z(){return(X-S-V-O)/2}function L(){var ab=z();if(ab<G){return{leftWidth:"0",rightWidth:"0",rightPos:"0"}}else{return{leftWidth:Math.ceil(ab-W).toPx(),rightWidth:Math.max(0,(Math.floor(ab-W))).toPx(),rightPos:(S+Math.ceil(ab+W)).toPx()}}}function Z(){return H&&A}var M;function F(){clearTimeout(M);M=setTimeout(function(){X=B.getContainerWidth();
T()},4)}function T(){aa();K();I()}function e(){var ab=B.getStyleConfig().color;H=tx.div({className:"tx-wysiwyg-padding"});E=tx.div({className:"tx-wysiwyg-padding-divL",style:{borderColor:ab}});A=tx.div({className:"tx-wysiwyg-padding"});U=tx.div({className:"tx-wysiwyg-padding-divR",style:{borderColor:ab}});var ac=B.wysiwygEl;H.appendChild(E);ac.insertBefore(H,R);A.appendChild(U);ac.insertBefore(A,R);K()}function K(){if(Z()){var ac=L();v.setStyle(H,{width:ac.leftWidth});v.setStyle(A,{width:ac.rightWidth,left:ac.rightPos});var ab=ac.leftWidth.parsePx()>G;var ad=B.getConfig().showGuideArea;var ae=ab&&ad?"1px solid":"0 none";v.setStyle(E,{borderRight:ae,borderBottom:ae});v.setStyle(U,{borderLeft:ae,borderBottom:ae})}}function I(){if(Z()){if(B.mode==i.Canvas.__WYSIWYG_MODE){v.show(H);v.show(A)}else{v.hide(H);v.hide(A)}}}});i.module("Register an eventhandler in order to resize block and edit search results & some images in wysiwig panel.",function(B,C,D,z){if(v.msie_nonstd){var e=function(E){if(E.onresizestart==k){E.onresizestart=function(){return d
}}};z.observeElement({tag:"img",klass:"tx-unresizable"},e);z.observeElement({tag:"img",klass:"tx-entry-attach"},e);z.observeElement({tag:"img",klass:"txc-footnote"},e);z.observeElement({tag:"iframe",klass:"txc-map"},e)}var A;if(v.msie_nonstd){A=function(E){E.setAttribute("unselectable","on");$A(E.getElementsByTagName("*")).each(function(G){if(G.nodeName.charAt(0)!="/"){G.setAttribute("unselectable","on")}});var F=z.getProcessor();F.selectControl(E)}}else{A=function(E){var F=z.getProcessor();F.selectControl(E);throw $stop}}z.observeElement({tag:"button"},A);z.observeElement({tag:"img"},function(E){var F=y.find(E,"button");if(F){A(F);throw $stop}})});i.module("in order to save history for image resizing on IE",function(B,C,D,z){var A=z.history;var e={};var E=k;z.observeJob(i.Ev.__CANVAS_PANEL_MOUSEDOWN,function(G){var F=v.element(G);if(F&&F.tagName&&F.tagName.toLowerCase()=="img"){E=F;e=y.getPosition(F)}});z.observeJob(i.Ev.__CANVAS_PANEL_MOUSEUP,function(){if(E){var G=d;try{var H=y.getPosition(E);
for(var F in H){if(H[F]!=e[F]){G=w}}if(G){A.saveHistory()}}catch(I){}finally{E=k}}})});i.module("Add layer to display notice message on editor area before editing",function(A,B,C,z,e){if(e.initializedMessage){z.observeJob(i.Ev.__IFRAME_LOAD_COMPLETE,function(){var H=tx.div({id:"tx-canvas-notice",className:"tx-canvas-notice"},e.initializedMessage);var E=v("tx_loading");var D=E.parentNode;D.insertBefore(H,E);var G=false;var F=function(){if(!G&&v("tx-canvas-notice")){G=true;D.removeChild(H);z.focus()}};setTimeout(function(){v.observe(z.getPanel("html").getWindow(),"focus",F)},30);v.observe(H,"click",F);z.observeJob(i.Ev.__CANVAS_DATA_INITIALIZE,F);B.observeJob(i.Ev.__TOOL_CLICK,F)})}});i.MarkupTemplate.add("table.col.resize.dragger",'<div class="tx-table-col-resize-dragger" style="position:absolute; overflow:hidden; top: 0; left: 0; width: 3px; height: 100%; cursor:col-resize;"></div>');i.MarkupTemplate.add("table.row.resize.dragger",'<div class="tx-table-row-resize-dragger" style="position:absolute; overflow:hidden; top: 0; left: 0; width: 100%; height: 3px; cursor:row-resize;"></div>');
l.addMsg({"@table.noselect.alert":"\ud14c\uc774\ube14\uc744 \uc120\ud0dd\ud558\uc2e0 \ud6c4 \uc0ac\uc6a9\uac00\ub2a5\ud569\ub2c8\ub2e4."});i.Table={};i.module("table selector",function(B,C,D,A,z){var e;e=function(G){var F,E,H;F=i.MarkupTemplate.get("table.col.resize.dragger").evaluateAsDom({});E=i.MarkupTemplate.get("table.row.resize.dragger").evaluateAsDom({});H=G.wysiwygEl;y.insertFirst(H,F);y.insertFirst(H,E);v.hide(F);v.hide(E)};A.observeJob(i.Ev.__IFRAME_LOAD_COMPLETE,function(){var K,F,H,J,M,G;K=new i.Table.Selector(B,z);F=new i.Table.Merge(B,z);H=new i.Table.Insert(B,z);J=new i.Table.Delete(B,z);M=new i.Table.Border(B,z);G=new i.Table.TemplateLoader();e(A);var P=A.getPanel(i.Canvas.__WYSIWYG_MODE);var I=P.getProcessor();var L=function(){var Q,R;if(K.getSelected().isValid()===d){Q=I.getNode();R=i.TableUtil.getClosestByTagNames(["td","th"],Q);if(R){K.selectByTd(R,R)}}};A.observeElement({tag:"table"},function(Q){if(C.tools.advanced){C.tools.advanced.forceOpen()}});var E={range:"all",color:"",height:1,type:"solid"};
var O=function(){var Q=C.tools.cellslinecolor;if(Q){E.color=Q.config.defaultcolor}};O();var N=function(){alert(TXMSG("@table.noselect.alert"))};I.table={getTdArr:function(){return K.getSelectedTdArr()},isDuringSelection:function(){return K.isDuringSelection()},execute:function(R,Q){if(!Q){L()}if(K.getSelected().isValid()){R();A.history.saveHistory()}else{N()}},merge:function(){this.execute(function(){F.merge(K)},w)},resetMerge:function(){this.execute(function(){F.resetMerge(K)})},insertRowAbove:function(){this.execute(function(){H.insertRowAbove(K)})},insertRowBelow:function(){this.execute(function(){H.insertRowBelow(K)})},insertColLeft:function(){this.execute(function(){H.insertColLeft(K)})},insertColRight:function(){this.execute(function(){H.insertColRight(K)})},deleteRow:function(){this.execute(function(){J.deleteRow(K)})},deleteCol:function(){this.execute(function(){J.deleteCol(K)})},setBorderRange:function(Q){E.range=Q},setBorderColor:function(Q){E.color=Q;C.fireJobs(i.Ev.__TOOL_CELL_LINE_CHANGE,{color:Q})
},setBorderHeight:function(Q){E.height=Q;C.fireJobs(i.Ev.__TOOL_CELL_LINE_CHANGE,{height:Q})},setBorderType:function(Q){E.type=Q;C.fireJobs(i.Ev.__TOOL_CELL_LINE_CHANGE,{type:Q})},setNoBorder:function(){var Q=this;this.execute(function(){M.setTableSelect(K);M.setBorderRange("all");M.changeBorderColor(Q.getTdArr(),"");M.changeBorderHeight(Q.getTdArr(),"0");M.changeBorderType(Q.getTdArr(),"none")})},setBorderButtons:function(R,Q,T){var S;S=C.tools.cellslinecolor;if(S){S.execute(R)}S=C.tools.cellslineheight;if(S){S.execute(Q)}S=C.tools.cellslinestyle;if(S){S.execute(T)}},getBorderProperty:function(){return{color:E.color,height:E.height,type:E.type}},applyBorder:function(){var Q=this;this.execute(function(){M.setTableSelect(K);M.setBorderRange(E.range);M.changeBorderColor(Q.getTdArr(),E.color);M.changeBorderHeight(Q.getTdArr(),E.height);M.changeBorderType(Q.getTdArr(),E.type);Q.addBorderHistory()})},addBorderHistory:function(){var Q;Q=C.tools.cellslinepreview;if(Q){Q.addBorderHistory(E)}},tableBackground:function(R){var Q=this;
this.execute(function(){var U,V,T,S;U={backgroundColor:R};V=Q.getTdArr();S=V.length;for(T=0;T<S;T+=1){v.setStyle(V[T],U)}K.reset()})},setTemplateStyle:function(R,Q){if(R){G.getTemplate(Q,function(S){S.apply(R);K.reset()})}else{N()}}};C.fireJobs(i.Ev.__TOOL_CELL_LINE_CHANGE,{color:E.color,height:E.height,type:E.type,fromInit:w});C.observeJob(i.Ev.__TOOL_CLICK,function(Q){if(["fontfamily","fontsize","bold","underline","italic","strike","forecolor","backcolor","indent","outdent","alignleft","aligncenter","alignright","alignfull","mergecells","splitcells","insertcells","deletecells","cellsoutline","cellslinecolor","cellslineheight","cellslinestyle","cellslinepreview","tablebackcolor","tabletemplate"].contains(Q)===d){K.reset()}if(Q==="tablebackcolor"){L()}})})});i.Table.Selector=i.Class.create({SELECTED_CLASS_NAME:"tx_table_selected_cell",SELECTED_CSS_TEXT:"{background:#e9eeff !important}",initialize:function(e){this.canvas=e.getCanvas();this.wysiwygPanel=this.canvas.getPanel(i.Canvas.__WYSIWYG_MODE);
this.htmlBody=this.getHtmlBody();this.isDragging=d;this.currentTable=k;this.currentTd=k;this.paintedTdArr=[];this.startCellBoundary=new i.TableUtil.Boundary();this.endCellBoundary=this.startCellBoundary;this.selectedBoundary=new i.TableUtil.Boundary();this.tableIndexer=k;this.applyCss();this.observeEvent()},getHtmlBody:function(){var e;e=this.wysiwygPanel.getDocument();return e.body},applyCss:function(){var e;e=this.wysiwygPanel.getDocument();v.applyCSSText(e,"."+this.SELECTED_CLASS_NAME+this.SELECTED_CSS_TEXT)},observeEvent:function(){var e;e=this;this.canvas.observeJob(i.Ev.__CANVAS_PANEL_MOUSEDOWN,function(A){var z;z=v.element(A);e.onmousedown(z)});v.observe(this.htmlBody,"mousemove",function(A){var z;z=v.element(A);e.onmousemove(z)});this.canvas.observeJob(i.Ev.__CANVAS_PANEL_MOUSEUP,function(z){e.onmouseup()});v.observe(j.top,"mouseup",function(z){e.onmouseup()});this.canvas.observeJob(i.Ev.__CANVAS_PANEL_KEYDOWN,function(z){if(e.isDragging){v.stop(z);e.reset()}else{e.onkeydown(z.ctrlKey,z.keyCode)
}});this.canvas.observeJob(i.Ev.__CANVAS_DATA_INITIALIZE,function(z){if(z===i.Canvas.__WYSIWYG_MODE){e.clearSelected()}})},onmousedown:function(z){var A,e;this.reset();if(this.canvas.config.readonly===d){A=i.TableUtil.getClosestByTagNames(["td","th"],z);e=y.find(A,".txc-info");if(A&&!e){this.selectStart(A);this.turnOnDragging()}}},onmousemove:function(z){var B,e,A;if(this.isDragging){B=i.TableUtil.getClosestByTagNames(["td","th"],z);if(B){e=i.TableUtil.getClosestByTagNames(["table"],B);if(e===this.currentTable&&B!==this.currentTd){this.selectEnd(B);this.applySelected();i.TableUtil.collapseCaret(this.wysiwygPanel,z)}}else{A=(this.endCellBoundary===this.startCellBoundary);if(this.currentTd&&A){this.selectEnd(this.currentTd);this.applySelected();i.TableUtil.collapseCaret(this.wysiwygPanel,z)}}}},onmouseup:function(){if(this.isDragging){this.turnOffDragging()}},onkeydown:function(C,B){var A,e,z;if(C===d){if(B===v.KEY_DELETE){A=this.getSelectedTdArr();e=A.length;for(z=0;z<e;z+=1){i.TableUtil.emptyTd(A[z])
}}this.reset()}},selectStart:function(e){this.currentTable=i.TableUtil.getClosestByTagNames(["table"],e);this.tableIndexer=new i.TableUtil.Indexer(this.currentTable);this.startCellBoundary=this.tableIndexer.getBoundary(e);this.endCellBoundary=this.startCellBoundary;this.currentTd=e},selectEnd:function(e){this.endCellBoundary=this.tableIndexer.getBoundary(e);this.currentTd=e},applySelected:function(){this.calculateSelectedBoundary();this.extendSelectedBoundary();this.paint()},calculateSelectedBoundary:function(){this.selectedBoundary=new i.TableUtil.Boundary();this.selectedBoundary.merge(this.startCellBoundary);this.selectedBoundary.merge(this.endCellBoundary)},extendSelectedBoundary:function(){var e;e=this.selectedBoundary.isValid();while(e){e=this.oneTimeExtendBoundary()}},oneTimeExtendBoundary:function(){var B,A,z,C,e;B=this.tableIndexer.getTdArr(this.selectedBoundary);z=B.length;for(A=0;A<z;A+=1){C=this.tableIndexer.getBoundary(B[A]);e=this.selectedBoundary.merge(C);if(e){return w}}return d
},paint:function(){var z,e;z=this.tableIndexer.getTdArr(this.selectedBoundary);e=Array.prototype.without.apply(this.paintedTdArr,z);this.paintSelected(z);this.eraseSelected(e)},paintSelected:function(z){var e;e=this;this.paintedTdArr=[];z.each(function(A){v.addClassName(A,e.SELECTED_CLASS_NAME);e.paintedTdArr.push(A)})},eraseSelected:function(e){this.removeClassName(e);this.paintedTdArr=Array.prototype.without.apply(this.paintedTdArr,e)},removeClassName:function(z){var e;e=this;z.each(function(B){var A;v.removeClassName(B,e.SELECTED_CLASS_NAME);if(B.className===""){A=B.removeAttribute("class");if(A===d){B.removeAttribute("className")}}})},clearSelected:function(){var e;e=y.collectAll(this.htmlBody,"."+this.SELECTED_CLASS_NAME);this.removeClassName(e);this.paintedTdArr=[]},resetBoundary:function(){this.startCellBoundary=new i.TableUtil.Boundary();this.endCellBoundary=this.startCellBoundary;this.selectedBoundary=new i.TableUtil.Boundary()},turnOnDragging:function(){this.isDragging=w},turnOffDragging:function(){this.isDragging=d
},resetDragging:function(){this.isDragging=d;this.currentTable=k;this.currentTd=k},isDuringSelection:function(){return this.isDragging},getIndexer:function(){return this.tableIndexer},getSelected:function(){return this.selectedBoundary},getSelectedTdArr:function(){if(this.selectedBoundary.isValid()){return this.tableIndexer.getTdArr(this.selectedBoundary)}return[]},selectByBoundary:function(e){this.resetBoundary();this.selectedBoundary=e;this.paint()},selectByTd:function(e,z){this.selectStart(e);this.selectEnd(z);this.applySelected()},reset:function(){this.clearSelected();this.resetBoundary();this.resetDragging();this.reloadIndexer()},reloadIndexer:function(){if(this.tableIndexer){this.tableIndexer.reload()}},getSizeOfSelected:function(){var z,A,B,e,C;z=this.getSelectedTdArr();if(0<z.length){A=z[0];B=z[z.length-1];e=y.getPosition(A);C=y.getPosition(B);return{width:C.x+C.width-e.x,height:C.y+C.height-e.y}}return{width:0,height:0}}});i.Table.Merge=i.Class.create({initialize:function(z){var e;
e=z.getCanvas();this.wysiwygPanel=e.getPanel(i.Canvas.__WYSIWYG_MODE)},merge:function(A){var z,B,e;A.reloadIndexer();z=A.getSelectedTdArr();if(1<z.length){e=A.getSizeOfSelected();B=z[0];this.deleteCellForMerge(z);this.extendCellForMerge(B,A,e);A.reset();A.selectByTd(B,B);i.TableUtil.collapseCaret(this.wysiwygPanel,B)}else{alert("\ub450\uac1c \uc774\uc0c1\uc758 \uc140\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.")}},deleteCellForMerge:function(B){var A,C,z,e;A=B[0].innerHTML;e=B.length;for(z=1;z<e;z+=1){C=A.replace(i.__WORD_JOINER_REGEXP,"").trim();if(C===""||C==="&nbsp;"){A=B[z].innerHTML}y.remove(B[z])}B[0].innerHTML=A},extendCellForMerge:function(B,A,z){var e;e=A.getSelected();B.colSpan=e.right-e.left+1;B.rowSpan=e.bottom-e.top+1;if(B.style.width){y.setWidth(B,z.width+"px")}if(B.style.height){y.setHeight(B,z.height+"px")}},resetMerge:function(A){var z,e;A.reloadIndexer();z=this.splitCol(A);A.reloadIndexer();e=this.splitRow(A);if(z===d&&e===d){alert("\uc774\ubbf8 \ud569\uccd0\uc9c4 \uc140\ub9cc \ubd84\ud560 \uac00\ub2a5\ud569\ub2c8\ub2e4.")
}else{A.reloadIndexer()}},splitCol:function(C){var D,B,E,A,e,z;D=d;B=C.getSelectedTdArr();e=B.length;if(0<e){for(A=0;A<e;A+=1){E=B[A];z=this.splitTdByColSpan(E);D=D||z}}return D},splitRow:function(C){var D,B,E,A,e,z;D=d;B=C.getSelectedTdArr();e=B.length;if(0<e){for(A=0;A<e;A+=1){E=B[A];z=this.splitTdByRowSpan(E);D=D||z}}return D},splitTdByColSpan:function(B){var z,e,A;z=B.colSpan-1;A=0<z;i.TableUtil.splitWidthByColSpan(B);B.colSpan=1;while(0<z){e=i.TableUtil.cloneNodeForEmptyTd(B);y.insertNext(e,B);z-=1}return A},splitTdByRowSpan:function(A){var z,e;e=A.rowSpan-1;z=0<e;i.TableUtil.splitHeightByRowSpan(A);while(0<e){this.splitTdOneByOne(A);e-=1}return z},splitTdOneByOne:function(B){var e,z,A;e=this.getTrForInsert(B);z=this.getTdForInsert(B,e);A=i.TableUtil.cloneNodeForEmptyTd(B);A.rowSpan=1;B.rowSpan-=1;if(z){y.insertAt(A,z)}else{y.append(e,A)}},getTrForInsert:function(B){var A,e,z;z=y.parent(B);e=B.rowSpan-1;for(A=0;A<e;A+=1){z=y.next(z,"tr")}return z},getTdForInsert:function(A,E){var C,G,z,H,D,B,F,e;
C=i.TableUtil.getTableIndexerFromTd(A);G=C.getBoundary(A);z=G.left;H=E.cells;D=H.length;for(B=0;B<D;B+=1){F=H[B];e=C.getBoundary(F);if(z<=e.left){return F}}return k}});i.Table.Insert=i.Class.create({COL_DIRECTION:{LEFT:"left",RIGHT:"right"},initialize:function(z){var e;e=z.getCanvas();this.wysiwygPanel=e.getPanel(i.Canvas.__WYSIWYG_MODE)},insertRowAbove:function(z){var A,e;z.reloadIndexer();A=z.getSelected();if(A.isValid()){e=z.getIndexer();this.insertRowAboveByBoundary(A,e);z.reset()}},insertRowAboveByBoundary:function(E,A){var B,z,e,C,D;B=A.table;z=E.bottom-E.top+1;e=E.top;C=A.getTdArr(new i.TableUtil.Boundary({top:E.top,right:A.getColSize()-1,bottom:E.top,left:0}));D=A.getTdArrHasTop(E.top);this.addRow(B,z,e,C,D)},addRow:function(D,A,e,E,F){var C,B,z;C=function(H){var G;if(F.contains(H)){G=i.TableUtil.cloneNodeForEmptyTd(H);i.TableUtil.splitHeightByRowSpan(G);G.rowSpan=1;z.appendChild(G)}else{H.rowSpan+=1}};for(B=0;B<A;B+=1){z=D.insertRow(e);E.each(C)}},insertRowBelow:function(z){var A,e;
z.reloadIndexer();A=z.getSelected();if(A.isValid()){e=z.getIndexer();this.insertRowBelowByBoundary(A,e);z.reset()}},insertRowBelowByBoundary:function(E,A){var B,z,e,C,D;B=A.table;z=E.bottom-E.top+1;e=E.bottom+1;C=A.getTdArr(new i.TableUtil.Boundary({top:E.bottom,right:A.getColSize()-1,bottom:E.bottom,left:0}));D=A.getTdArrHasBottom(E.bottom);this.addRow(B,z,e,C,D)},insertColLeft:function(z){var A,e;z.reloadIndexer();A=z.getSelected();if(A.isValid()){e=z.getIndexer();this.insertColLeftByBoundary(A,e);z.reset()}},insertColLeftByBoundary:function(C,e){var z,A,B;z=C.right-C.left+1;A=e.getTdArr(new i.TableUtil.Boundary({top:0,right:C.left,bottom:e.getRowSize()-1,left:C.left}));B=e.getTdArrHasLeft(C.left);this.addCol(z,A,B,this.COL_DIRECTION.LEFT)},addCol:function(B,C,E,D){var e,A,z;e=this;A=function(G){var F;if(E.contains(G)){F=i.TableUtil.cloneNodeForEmptyTd(G);i.TableUtil.splitWidthByColSpan(F);F.colSpan=1;if(D===e.COL_DIRECTION.LEFT){y.insertAt(F,G)}else{y.insertNext(F,G)}}else{G.colSpan+=1
}};for(z=0;z<B;z+=1){C.each(A)}},insertColRight:function(z){var A,e;z.reloadIndexer();A=z.getSelected();if(A.isValid()){e=z.getIndexer();this.insertColRightByBoundary(A,e);z.reset()}},insertColRightByBoundary:function(C,e){var z,A,B;z=C.right-C.left+1;A=e.getTdArr(new i.TableUtil.Boundary({top:0,right:C.right,bottom:e.getRowSize()-1,left:C.right}));B=e.getTdArrHasRight(C.right);this.addCol(z,A,B,this.COL_DIRECTION.RIGHT)}});i.Table.Delete=i.Class.create({initialize:function(z){var e;e=z.getCanvas();this.wysiwygPanel=e.getPanel(i.Canvas.__WYSIWYG_MODE)},deleteRow:function(e){var z;z=e.getSelected();if(z.isValid()){this.deleteRowOneByOne(e);e.reset();this.deleteEmptyTableByTableSelector(e)}},deleteRowOneByOne:function(B){var e,A,C,z;C=B.getSelected();e=C.top;A=C.bottom-C.top+1;while(0<A){B.reloadIndexer();z=B.getIndexer();this.deleteRowByIndex(z,e);A-=1}if(e===0){this.drawTopBorder(B)}},drawTopBorder:function(C){var A,B,e,z,D;C.reloadIndexer();A=C.getIndexer();B=A.getTdArrHasTop(0);e=B.length;
for(z=0;z<e;z+=1){D=B[z];if(D.style.borderTop===""&&D.style.borderBottom!==""){D.style.borderTop=D.style.borderBottom}}},deleteRowByIndex:function(B,A){var D,z,e,C;D=this.getTdArrByRowIndex(B,A);z=this.getTdArrByHasTop(B,A);e=D.length;if(0<e){C=y.parent(D[0]);this.deleteTdInDeleteRow(D,z,C,B);y.remove(C)}},getTdArrByRowIndex:function(z,e){return z.getTdArr(new i.TableUtil.Boundary({top:e,right:z.getColSize()-1,bottom:e,left:0}))},getTdArrByHasTop:function(z,e){return z.getTdArrHasTop(e)},deleteTdInDeleteRow:function(D,z,C,B){var e,A,E;e=D.length;for(A=0;A<e;A+=1){E=D[A];if(1<E.rowSpan){E.rowSpan-=1;this.reduceHeightAsRow(E,C);if(z.contains(E)){this.shiftRowOfTd(E,B)}}else{y.remove(E)}}},reduceHeightAsRow:function(B,z){var A,e;if(B.style.height){A=parseInt(B.style.height,10);e=A-z.offsetHeight;if(0<e){y.setStyles(B,{height:e+"px"},w)}}},shiftRowOfTd:function(C,A){var B,e,z;B=y.parent(C);e=y.next(B,"tr");z=this.getTdForInsert(C,e,A);if(z){y.insertAt(C,z)}else{y.append(e,C)}},getTdForInsert:function(A,E,C){var G,z,H,D,B,F,e;
G=C.getBoundary(A);z=G.left;H=E.cells;D=H.length;for(B=0;B<D;B+=1){F=H[B];e=C.getBoundary(F);if(z<=e.left){return F}}return k},deleteEmptyTableByTableSelector:function(A){var e,z;e=A.getIndexer();z=e.table;if(z.rows.length===0){y.remove(z)}},deleteCol:function(e){var z;z=e.getSelected();if(z.isValid()){this.deleteColOneByOne(e);e.reset();this.deleteEmptyTableByTableSelector(e)}},deleteColOneByOne:function(B){var e,A,C,z;C=B.getSelected();e=C.left;A=C.right-C.left+1;while(0<A){B.reloadIndexer();z=B.getIndexer();this.deleteColByIndex(z,e);A-=1}if(e===0){this.drawLeftBorder(B)}},drawLeftBorder:function(C){var A,B,e,z,D;C.reloadIndexer();A=C.getIndexer();B=A.getTdArrHasLeft(0);e=B.length;for(z=0;z<e;z+=1){D=B[z];if(D.style.borderLeft===""&&D.style.borderRight!==""){D.style.borderLeft=D.style.borderRight}}},deleteColByIndex:function(B,z){var C,e,A,D;C=this.getTdArrByColIndex(B,z);e=C.length;for(A=0;A<e;A+=1){D=C[A];if(1<D.colSpan){D.colSpan-=1}else{y.remove(D)}}},getTdArrByColIndex:function(z,e){return z.getTdArr(new i.TableUtil.Boundary({top:0,right:e,bottom:z.getRowSize()-1,left:e}))
}});i.Table.Border=i.Class.create({$const:{BORDER_STYLE:"1px solid #ccc"},initialize:function(A,z){var e;e=A.getCanvas();this.wysiwygPanel=e.getPanel(i.Canvas.__WYSIWYG_MODE);this.borderRange="all";this.borderColor="#4174D9";this.tableSelect=k;this.selectedBoundary=k},setBorderRange:function(e){this.borderRange=e},setTableSelect:function(e){this.tableSelect=e;this.selectedBoundary=e.getSelected()},changeTopBorderStyle:function(C,G,F){var z={};var A=this.selectedBoundary;var H,e;var E=this.tableSelect.getIndexer();var B;if(A.top==0){H="borderTop"+G;B=new i.TableUtil.Boundary({top:A.top,bottom:A.top,left:A.left,right:A.right})}else{H="borderBottom"+G;B=new i.TableUtil.Boundary({top:A.top-1,bottom:A.top-1,left:A.left,right:A.right})}e=E.getTdArr(B);z[H]=F;for(var D=0;D<e.length;D++){v.setStyle(e[D],z)}},changeBottomBorderStyle:function(B,G,F){var z={};var A=this.selectedBoundary;var H,e,C;var E=this.tableSelect.getIndexer();H="borderBottom"+G;C=new i.TableUtil.Boundary({top:A.bottom,bottom:A.bottom,left:A.left,right:A.right});
e=E.getTdArr(C);z[H]=F;for(var D=0;D<e.length;D++){v.setStyle(e[D],z)}},changeLeftBorderStyle:function(C,G,F){var z={};var A=this.selectedBoundary;var H,e;var E=this.tableSelect.getIndexer();var B;if(A.left==0){H="borderLeft"+G;B=new i.TableUtil.Boundary({top:A.top,bottom:A.bottom,left:A.left,right:A.left})}else{H="borderRight"+G;B=new i.TableUtil.Boundary({top:A.top,bottom:A.bottom,left:A.left-1,right:A.left-1})}e=E.getTdArr(B);z[H]=F;for(var D=0;D<e.length;D++){v.setStyle(e[D],z)}},changeRightBorderStyle:function(C,G,F){var z={};var A=this.selectedBoundary;var H,e;var E=this.tableSelect.getIndexer();var B;H="borderRight"+G;B=new i.TableUtil.Boundary({top:A.top,bottom:A.bottom,left:A.right,right:A.right});e=E.getTdArr(B);z[H]=F;for(var D=0;D<e.length;D++){v.setStyle(e[D],z)}},changeInBorderStyle:function(E,K,J){var F={};var C={};var B=this.selectedBoundary;var L,e,I,A;var D,z;var H=this.tableSelect.getIndexer();I="borderBottom"+K;D=new i.TableUtil.Boundary({top:B.top,bottom:B.bottom-1,left:B.left,right:B.right});
L=H.getTdArr(D);F[I]=J;for(var G=0;G<L.length;G++){v.setStyle(L[G],F)}A="borderRight"+K;z=new i.TableUtil.Boundary({top:B.top,bottom:B.bottom,left:B.left,right:B.right-1});e=H.getTdArr(z);C[A]=J;for(var G=0;G<e.length;G++){v.setStyle(e[G],C)}},changeOutBorderStyle:function(A,e,z){this.changeTopBorderStyle(A,e,z);this.changeBottomBorderStyle(A,e,z);this.changeLeftBorderStyle(A,e,z);this.changeRightBorderStyle(A,e,z)},changeNoneBorderStyle:function(A,e,z){},changeBorderStyle:function(A,e,z){var B=this.borderRange;switch(B){case"top":this.changeTopBorderStyle(A,e,z);break;case"bottom":this.changeBottomBorderStyle(A,e,z);break;case"left":this.changeLeftBorderStyle(A,e,z);break;case"right":this.changeRightBorderStyle(A,e,z);break;case"in":this.changeInBorderStyle(A,e,z);break;case"out":this.changeOutBorderStyle(A,e,z);break;case"all":this.changeInBorderStyle(A,e,z);this.changeOutBorderStyle(A,e,z);break;case"none":this.changeInBorderStyle(A,e,z);this.changeOutBorderStyle(A,e,z);break;default:break
}},changeBorderColor:function(z,e){if(e!=k){this.borderColor=e}this.changeBorderStyle(z,"Color",this.borderColor)},changeBorderType:function(z,e){this.changeBorderStyle(z,"Style",e);this.changeBorderColor(z)},changeBorderHeight:function(A,z){var e=z.toPx();this.changeBorderStyle(A,"Width",e);this.changeBorderColor(A)}});(function(){i.Table.TemplateLoader=i.Class.create({initialize:function(){this.templateList=k},getTemplate:function(A,B){if(isNaN(A)){return}if(this.templateList){B(new e(this.templateList[A]))}else{var z=this;this.loadTemplate(function(C){z.templateList=C;B(new e(z.templateList[A]))})}},loadTemplate:function(A){var z=this.getJSBasePath()+"trex/modules/table/async/template_data.js";EditorJSLoader.asyncLoadModule({url:r.getUrl(z),callback:function(){var B=getTableTemplateList();A(B)}})},getJSBasePath:function(){var A;try{A=EditorJSLoader.getJSBasePath("editor.js")}catch(z){A=EditorJSLoader.getJSBasePath()}return A}});var e=i.Class.create({initialize:function(z){this.templateData=z
},apply:function(D){var C=new i.Tool.Table.TableCellMatrixer(D);var E=C.getTdMatrix();var z=this;for(var B=0;B<E.length;B++){for(var A=0;A<E[B].length;A++){z.setCellStyle(E[B][A],{isEvenRow:(B%2)==1,isFirstRow:B==0,isLastRow:B==E.length-1,isFirstCol:A==0,isLastCol:(A==E[B].length-1)})}}},setCellStyle:function(A,z){var B=this.templateData;var C=Object.extend({},B.common);Object.extend(C,(z.isEvenRow)?B.evenRow:B.oddRow);Object.extend(C,(z.isFirstRow)?B.firstRow:(z.isLastRow)?B.lastRow:{});Object.extend(C,(z.isLastCol)?B.lastCol:{});Object.extend(C,(z.isFirstCol)?B.firstCol:{});txlib.setStyle(A,C)}})})();i.module("table resize dragger",function(z,A,B,e){e.observeJob(i.Ev.__IFRAME_LOAD_COMPLETE,function(){var aa=e.getPanel(i.Canvas.__WYSIWYG_MODE);var L=aa.getDocument();var aG=aa.getWindow();var af=L.body;var aJ=20;var aD;var aR=y.collect(e.wysiwygEl,".tx-table-col-resize-dragger");var aP=y.collect(e.wysiwygEl,".tx-table-row-resize-dragger");var ac=d;var aO,ab,ax,au;var aN,aS,aM;var ar,T,S;
var aE,C;var H,F;var V,aC,aH;var am,N,ae;var Z,Y,aK;var aL={TOP:"EDGE_TOP",BOTTOM:"EDGE_BOTTOM",LEFT:"EDGE_LEFT",RIGHT:"EDGE_RIGHT",NONE:"NONE"};var ah=aL.NONE;var O=function(){ac=d;aE=k;C=k;aO=ab=k;ax=au=k;aC=V=aH=k;am=N=ae=k;H=F=0;ar=T=S=0;aN=aS=aM=0};var ak=function(){aO=y.find(aE,"table");if(aO==k){return k}ac=w;ar=aO.offsetWidth;if(ah!=aL.NONE){v.stop(aK);G()}switch(ah){case aL.LEFT:aA();al();break;case aL.RIGHT:aI();al();break;case aL.TOP:P();aB();break;case aL.BOTTOM:I();aB();break}};var aA=function(){var aU=new i.TableUtil.Indexer(aO);var aT=aU.getBoundary(aE);if(aT.left>0){V=aU.getTdArrHasRight(aT.left-1);aC=aU.getTdArrHasLeft(aT.left)}};var aI=function(){var aU=new i.TableUtil.Indexer(aO);var aT=aU.getBoundary(aE);var aV=aU.getColSize();V=aU.getTdArrHasRight(aT.right);if(aT.right<aV-1){aC=aU.getTdArrHasLeft(aT.right+1)}};var P=function(){var aU=new i.TableUtil.Indexer(aO);var aT=aU.getBoundary(aE);aH=aU.getTdArrHasBottom(aT.top-1)};var I=function(){var aU=new i.TableUtil.Indexer(aO);
var aT=aU.getBoundary(aE);aH=aU.getTdArrHasTop(aT.bottom)};var aw=function(){switch(ah){case aL.LEFT:case aL.RIGHT:J();break;case aL.TOP:case aL.BOTTOM:R();break}if(ah!=aL.NONE){e.history.saveHistory()}};var U=function(){if(ac){C=K();av()}else{ad()}};var av=function(){switch(ah){case aL.LEFT:case aL.RIGHT:ap();break;case aL.TOP:case aL.BOTTOM:aF();break}};var ad=function(){var aU=y.find(v.element(aK),"td");var aT=y.find(aU,".txc-info");if(aU&&!aT){aE=aU;ah=W(aE);G()}else{ah=aL.NONE;G()}};var K=function(){var aT=k;switch(ah){case aL.LEFT:case aL.RIGHT:aT=aR;break;case aL.TOP:case aL.BOTTOM:aT=aP;break}return aT};var al=function(){ac=w;am=[];N=[];var aT=0;if(V){for(aT=0;aT<V.length;aT++){am.push(V[aT].offsetWidth)}aN=aQ(am);for(aT=0;aT<V.length;aT++){if(aN==am[aT]){ax=V[aT];break}}}if(aC){for(aT=0;aT<aC.length;aT++){N.push(aC[aT].offsetWidth)}aS=aQ(N);for(aT=0;aT<aC.length;aT++){if(aS==N[aT]){au=aC[aT];break}}}T=v.getCoordsTarget(C).left};var ap=function(){if(ac){var aT=parseInt(Z-y.getScrollLeft(L)-T);
var aU;if(ax&&au){aU=E(ax,aT)}if(ax&&au==k){aU=ao(ax,aT)}if(ax==k&&au){aU=az(au,aT)}if(aU){v.setStyle(C,{left:aU.toPx()})}}};var E=function(aV,aU){var aX,aY,aT,aW,aZ;aX=aN+aS;aY=aN+aU;aT=aS-aU;aW=v.getCoordsTarget(aV);if(aY>=aJ&&aT>=aJ){aZ=Z-y.getScrollLeft(L)}else{if(aY<=aJ){aY=aJ;aT=aX-aY;aZ=aW.left-y.getScrollLeft(L)+aY}else{if(aT<=aJ){aT=aJ;aY=aX-aT;aZ=aW.left-y.getScrollLeft(L)+aY}}}H=aY-aN;return aZ};var ao=function(aU,aT){var aW,aV,aX;aW=aN+aT;aV=v.getCoordsTarget(aU);if(aW<aJ){aW=aJ}aX=aV.left-y.getScrollLeft(L)+aW;H=aW-aN;return aX};var az=function(aW,aU){var aT,aV,aX;aT=aS-aU;aV=v.getCoordsTarget(aW);if(aT<aJ){aT=aJ}aX=aV.left+aT;H=aS-aT;return aX};var J=function(){M();O();ad()};var M=function(){var aT;if(V){for(aT=0;aT<V.length;aT++){V[aT].style.width=am[aT]+H}}if(aC){for(aT=0;aT<aC.length;aT++){aC[aT].style.width=N[aT]-H}}if(V&&aC==k){Q()}};var aB=function(){ac=w;aM=aE.offsetHeight;ae=[];if(aH){var aT;for(aT=0;aT<aH.length;aT++){ae.push(parseInt(aH[aT].offsetHeight))}aM=aQ(ae);
for(aT=0;aT<aH.length;aT++){if(aM==ae[aT]){ab=aH[aT]}}}S=v.getCoordsTarget(C).top};var aF=function(){if(ac){var aT=Y-y.getScrollTop(L)-S;var aU=aM+parseInt(aT);var aV=v.getCoordsTarget(ab);var aW=k;if(aU<0){aU=0;aW=aV.top+aU-y.getScrollTop(L)}else{aW=Y-y.getScrollTop(L)}if(aW){v.setStyle(C,{top:aW.toPx()})}F=aU-aM}};var R=function(){ag();O();ad()};var ag=function(){if(aH){for(var aU=0;aU<aH.length;aU++){var aT=ae[aU]+F;if(aT<0){aT=20}aH[aU].style.height=aT.toPx()}}};(function X(){var aT=L.createElement("div");af.appendChild(aT);aT.style.width=aT.style.paddingLeft="1px";aD=aT.offsetWidth===2;af.removeChild(aT)})();var W=function(aW){var a5,a7=aL.NONE;if("getBoundingClientRect" in document.documentElement){try{var a6=aW.ownerDocument,aU=a6.documentElement,a0=a6.body;var aZ=aW.getBoundingClientRect(),a1=a6.defaultView||a6.parentWindow,aY=aU.clientTop||a0.clientTop||0,a3=aU.clientLeft||a0.clientLeft||0,aT=a1.pageYOffset||aD&&aU.scrollTop||a0.scrollTop,aX=a1.pageXOffset||aD&&aU.scrollLeft||a0.scrollLeft,a4=aZ.top+aT-aY,aV=aZ.left+aX-a3;
a5={top:a4,left:aV,bottom:a4+aW.offsetHeight,right:aV+aW.offsetWidth}}catch(a2){a5=k}}if(!a5){a5=v.getCoordsTarget(aW)}if((Z-a5.left)<5&&aW.cellIndex!=0){a7=aL.LEFT}else{if((a5.right-5)<Z){a7=aL.RIGHT}else{if((Y-a5.top)<5&&aW.parentNode.rowIndex!=0){a7=aL.TOP}else{if((a5.bottom-5)<Y){a7=aL.BOTTOM}}}}return a7};var G=function(){e.query(function(aT){if(aT.table){if(aT.table.isDuringSelection()||e.config.readonly){ah=aL.NONE}switch(ah){case aL.LEFT:case aL.RIGHT:v.hide(aP);v.show(aR);aj(aR);C=aR;break;case aL.TOP:case aL.BOTTOM:v.hide(aR);v.show(aP);ai(aP);C=aP;break;case aL.NONE:v.hide(aR);v.hide(aP);break}}})};var aj=function(aU){if(aU==k){return}var aT;if(ac){aT=v.getCoordsTarget(aU).left;v.setStyle(aU,{width:"2px",height:aa.el.clientHeight,border:"1px dotted #81aFFC",background:"",left:aT.toPx()});v.setOpacity(aR,1)}else{aT=Z-y.getScrollLeft(L);v.setStyle(aU,{width:"2px",height:aa.el.clientHeight,border:"",background:"#fff",left:aT.toPx()});v.setOpacity(aR,0)}};var ai=function(aU){if(aU==k){return
}var aT=k;if(ac){aT=v.getCoordsTarget(aU).top;v.setStyle(aU,{height:"2px",border:"1px dotted #81aFFC",background:"",top:aT.toPx()});v.setOpacity(aP,1)}else{aT=Y-y.getScrollTop(L);v.setStyle(aU,{height:"2px",border:"",background:"#fff",top:aT.toPx()});v.setOpacity(aP,0)}};var Q=function(){var aT=0;if(ar){aT=parseInt(ar)+H;aO.width=aT;aO.style.width=aT.toPx()}};var D=function(){v.observe(c.body,"mouseup",function(aT){ay(aT);aw()});if(v.msie){v.observe(af,"mousemove",function(aT){ay(aT);U()});v.observe(af,"mouseup",function(aT){ay(aT);aw()})}else{v.observe(aG,"mousemove",function(aT){ay(aT);U()});v.observe(aG,"mouseup",function(aT){ay(aT);aw()})}if(v.safari){v.observe(c.body,"mousemove",function(aT){if(ac){an(aT);U()}})}v.observe(aR,"mousedown",function(aT){ay(aT);ak()});v.observe(aP,"mousedown",function(aT){ay(aT);ak()})};var ay=function(aT){aK=aT;Z=at(aK);Y=aq(aK)};var an=function(aT){aK=aT;Z=at(aK)-v.getCoords(e.wysiwygEl).left+L.body.scrollLeft;Y=aq(aK)-v.getCoords(e.wysiwygEl).top+L.body.scrollTop
};var at=function(aU){var aT=0;aU=aU||aG.event;if(aU.pageX){aT=aU.pageX}else{if(aU.clientX){aT=aU.clientX+L.body.scrollLeft+L.documentElement.scrollLeft}}return aT};var aq=function(aT){var aU=0;aT=aT||aG.event;if(aT.pageY){aU=aT.pageY}else{if(aT.clientY){aU=aT.clientY+L.body.scrollTop+L.documentElement.scrollTop}}return aU};function aQ(aT){return Math.min.apply(Math,aT)}O();D()})});j.__TX_GLOBAL={domain:"daum.net",notSetDomain:w,session_id:k};if(c&&__TX_GLOBAL.domain&&!j.Jaxer&&(new RegExp("^(.+\\.)?"+__TX_GLOBAL.domain+"$")).test(c.domain)){c.domain=__TX_GLOBAL.domain;__TX_GLOBAL.notSetDomain=d}i.I.FHRequester=i.Faculty.create({sendRequest:function(e,z,B,D,E,G,F){var H=this;var A=i.Flash.get("tx_fhr");if(A){H.sendFhrRequest(e,z,B,D,E,G,F)}else{var C=r.getUrl("#cdnhost/swf/FHR3.swf?v=2");i.Flash.load(C,"tx_fhr_target","tx_fhr",{width:1,height:1},function(){H.waitFhr(function(){H.sendFhrRequest(e,z,B,D,E,G,F)})})}},waitFhr:function(A){var z=50;(function e(){var B=i.Flash.get("tx_fhr");if(B){A()
}else{if(z>0){setTimeout(e,Math.max(10*z,100))}else{}}})()},sendFhrRequest:function(e,A,B,D,H,L,K){var z=i.Flash.get("tx_fhr");var J=i.Responder.register(H);var G='Trex.Responder.callbacks["'+J+'"]';var I="Trex.Responder.process";if(L){var F=i.Responder.register(function(N,M){if(N==-1){L(N,M)}else{if(typeof K=="function"){K(N,M)}}});I='Trex.Responder.callbacks["'+F+'"]'}if(A.charAt(0)==="/"){A="http://"+c.location.host+A}if(e.toUpperCase()=="GET"){if(!B){B=""}else{A=A+((A.indexOf("?")>-1)?"&":"?")+B}}if(A){var C=50;(function E(){if(z.send){z.send(e,A,B,G,I)}else{if(C>0){C=C-1;setTimeout(E,Math.max(10*C,100))}}})()}}});(function(){var A={yyyy:/(\d{4})/,MM:/(\d{2})/,dd:/(\d{2})/,HH:/(\d{2})/,mm:/(\d{2})/,ss:/(\d{2})/,yy:/(\d{2})/,M:/([0-1]*\d)/,d:/([0-3]*\d)/,EEE:/(\uc77c|\uc6d4|\ud654|\uc218|\ubaa9|\uae08|\ud1a0)/};var e=["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"];function z(B){this.pattern=B}z.prototype={parse:function(B){var C={};this.pattern.replace(/(\w)\1*/g,function(D){if(A[D]){B=B.replace(A[D],function(E,F){C[D]=F;
return""})}return D});return new Date(Date.parse([Math.max(1,parseInt(C.MM||C.M||"01",10)),"/",Math.max(1,parseInt(C.dd||C.d||"01",10)),"/",(C.yyyy||C.yy||new Date().getFullYear())," ",C.HH||"00",":",C.mm||"00",":",C.ss||"00"].join("")))},format:function(B){return this.pattern.replace("yyyy",B.getFullYear()).replace("MM",(B.getMonth()+1).toPaddedString(2)).replace("dd",B.getDate().toPaddedString(2)).replace("HH",B.getHours().toPaddedString(2)).replace("mm",B.getMinutes().toPaddedString(2)).replace("ss",B.getSeconds().toPaddedString(2)).replace("yy",B.getYear()).replace("M",B.getMonth()+1).replace("d",B.getDate()).replace("EEE",e[B.getDay()])}};j.DateFormat=z})();j.swfobject=function(){var ab=s+"",P="object",aq="Shockwave Flash",av="ShockwaveFlash.ShockwaveFlash",O="application/x-shockwave-flash",ap="SWFObjectExprInst",V="onreadystatechange",am=j,H=c,R=navigator,ar=d,at=[F],M=[],al=[],ag=[],J,ao,ac,Z,ah=d,e=d,L,ae,K=w,ak=function(){var az=typeof H.getElementById!=ab&&typeof H.getElementsByTagName!=ab&&typeof H.createElement!=ab,aG=R.userAgent.toLowerCase(),ax=R.platform.toLowerCase(),aD=ax?/win/.test(ax):/win/.test(aG),aB=ax?/mac/.test(ax):/mac/.test(aG),aE=/webkit/.test(aG)?parseFloat(aG.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):d,aw=!+"\v1",aF=[0,0,0],aA=k;
if(typeof R.plugins!=ab&&typeof R.plugins[aq]==P){aA=R.plugins[aq].description;if(aA&&!(typeof R.mimeTypes!=ab&&R.mimeTypes[O]&&!R.mimeTypes[O].enabledPlugin)){ar=w;aw=d;aA=aA.replace(/^.*\s+(\S+\s+\S+$)/,"$1");aF[0]=parseInt(aA.replace(/^(.*)\..*$/,"$1"),10);aF[1]=parseInt(aA.replace(/^.*\.(.*)\s.*$/,"$1"),10);aF[2]=/[a-zA-Z]/.test(aA)?parseInt(aA.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof am.ActiveXObject!=ab){try{var aC=new ActiveXObject(av);if(aC){aA=aC.GetVariable("$version");if(aA){aw=w;aA=aA.split(" ")[1].split(",");aF=[parseInt(aA[0],10),parseInt(aA[1],10),parseInt(aA[2],10)]}}}catch(ay){}}}return{w3:az,pv:aF,wk:aE,ie:aw,win:aD,mac:aB}}(),I=function(){if(!ak.w3){return}if((typeof H.readyState!=ab&&H.readyState=="complete")||(typeof H.readyState==ab&&(H.getElementsByTagName("body")[0]||H.body))){D()}if(!ah){if(typeof H.addEventListener!=ab){H.addEventListener("DOMContentLoaded",D,d)}if(ak.ie&&ak.win){H.attachEvent(V,function(){if(H.readyState=="complete"){H.detachEvent(V,arguments.callee);
D()}});if(am==top){(function(){if(ah){return}try{H.documentElement.doScroll("left")}catch(aw){setTimeout(arguments.callee,0);return}D()})()}}if(ak.wk){(function(){if(ah){return}if(!/loaded|complete/.test(H.readyState)){setTimeout(arguments.callee,0);return}D()})()}Q(D)}}();function D(){if(ah){return}try{var ay=H.getElementsByTagName("body")[0].appendChild(aa("span"));ay.parentNode.removeChild(ay)}catch(az){return}ah=w;var aw=at.length;for(var ax=0;ax<aw;ax++){at[ax]()}}function ai(aw){if(ah){aw()}else{at[at.length]=aw}}function Q(ax){if(typeof am.addEventListener!=ab){am.addEventListener("load",ax,d)}else{if(typeof H.addEventListener!=ab){H.addEventListener("load",ax,d)}else{if(typeof am.attachEvent!=ab){G(am,"onload",ax)}else{if(typeof am.onload=="function"){var aw=am.onload;am.onload=function(){aw();ax()}}else{am.onload=ax}}}}}function F(){if(ar){au()}else{af()}}function au(){var aw=H.getElementsByTagName("body")[0];var az=aa(P);az.setAttribute("type",O);var ay=aw.appendChild(az);if(ay){var ax=0;
(function(){if(typeof ay.GetVariable!=ab){var aA=ay.GetVariable("$version");if(aA){aA=aA.split(" ")[1].split(",");ak.pv=[parseInt(aA[0],10),parseInt(aA[1],10),parseInt(aA[2],10)]}}else{if(ax<10){ax++;setTimeout(arguments.callee,10);return}}aw.removeChild(az);ay=k;af()})()}else{af()}}function af(){var aF=M.length;if(aF>0){for(var aE=0;aE<aF;aE++){var ax=M[aE].id;var aA=M[aE].callbackFn;var az={success:d,id:ax};if(ak.pv[0]>0){var aD=A(ax);if(aD){if(ad(M[aE].swfVersion)&&!(ak.wk&&ak.wk<312)){U(ax,w);if(aA){az.success=w;az.ref=X(ax);aA(az)}}else{if(M[aE].expressInstall&&Y()){var aH={};aH.data=M[aE].expressInstall;aH.width=aD.getAttribute("width")||"0";aH.height=aD.getAttribute("height")||"0";if(aD.getAttribute("class")){aH.styleclass=aD.getAttribute("class")}if(aD.getAttribute("align")){aH.align=aD.getAttribute("align")}var aG={};var aw=aD.getElementsByTagName("param");var aB=aw.length;for(var aC=0;aC<aB;aC++){if(aw[aC].getAttribute("name").toLowerCase()!="movie"){aG[aw[aC].getAttribute("name")]=aw[aC].getAttribute("value")
}}an(aH,aG,ax,aA)}else{N(aD);if(aA){aA(az)}}}}}else{U(ax,w);if(aA){var ay=X(ax);if(ay&&typeof ay.SetVariable!=ab){az.success=w;az.ref=ay}aA(az)}}}}}function X(az){var aw=k;var ax=A(az);if(ax&&ax.nodeName=="OBJECT"){if(typeof ax.SetVariable!=ab){aw=ax}else{var ay=ax.getElementsByTagName(P)[0];if(ay){aw=ay}}}return aw}function Y(){return !e&&ad("6.0.65")&&(ak.win||ak.mac)&&!(ak.wk&&ak.wk<312)}function an(az,aA,aw,ay){e=w;ac=ay||k;Z={success:d,id:aw};var aD=A(aw);if(aD){if(aD.nodeName=="OBJECT"){J=E(aD);ao=k}else{J=aD;ao=aw}az.id=ap;if(typeof az.width==ab||(!/%$/.test(az.width)&&parseInt(az.width,10)<310)){az.width="310"}if(typeof az.height==ab||(!/%$/.test(az.height)&&parseInt(az.height,10)<137)){az.height="137"}H.title=H.title.slice(0,47)+" - Flash Player Installation";var aC=ak.ie&&ak.win?"ActiveX":"PlugIn",aB="MMredirectURL="+am.location.toString().replace(/&/g,"%26")+"&MMplayerType="+aC+"&MMdoctitle="+H.title;if(typeof aA.flashvars!=ab){aA.flashvars+="&"+aB}else{aA.flashvars=aB}if(ak.ie&&ak.win&&aD.readyState!=4){var ax=aa("div");
aw+="SWFObjectNew";ax.setAttribute("id",aw);aD.parentNode.insertBefore(ax,aD);aD.style.display="none";(function(){if(aD.readyState==4){aD.parentNode.removeChild(aD)}else{setTimeout(arguments.callee,10)}})()}S(az,aA,aw)}}function N(ax){if(ak.ie&&ak.win&&ax.readyState!=4){var aw=aa("div");ax.parentNode.insertBefore(aw,ax);aw.parentNode.replaceChild(E(ax),aw);ax.style.display="none";(function(){if(ax.readyState==4){ax.parentNode.removeChild(ax)}else{setTimeout(arguments.callee,10)}})()}else{ax.parentNode.replaceChild(E(ax),ax)}}function E(aA){var az=aa("div");if(ak.win&&ak.ie){az.innerHTML=aA.innerHTML}else{var ax=aA.getElementsByTagName(P)[0];if(ax){var aB=ax.childNodes;if(aB){var aw=aB.length;for(var ay=0;ay<aw;ay++){if(!(aB[ay].nodeType==1&&aB[ay].nodeName=="PARAM")&&!(aB[ay].nodeType==8)){az.appendChild(aB[ay].cloneNode(w))}}}}}return az}function S(aH,aF,ax){var aw,az=A(ax);if(ak.wk&&ak.wk<312){return aw}if(az){if(typeof aH.id==ab){aH.id=ax}if(ak.ie&&ak.win){var aG="";for(var aD in aH){if(aH[aD]!=Object.prototype[aD]){if(aD.toLowerCase()=="data"){aF.movie=aH[aD]
}else{if(aD.toLowerCase()=="styleclass"){aG+=' class="'+aH[aD]+'"'}else{if(aD.toLowerCase()!="classid"){aG+=" "+aD+'="'+aH[aD]+'"'}}}}}var aE="";for(var aC in aF){if(aF[aC]!=Object.prototype[aC]){aE+='<param name="'+aC+'" value="'+aF[aC]+'" />'}}az.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+aG+">"+aE+"</object>";al[al.length]=aH.id;aw=A(aH.id)}else{var ay=aa(P);ay.setAttribute("type",O);for(var aB in aH){if(aH[aB]!=Object.prototype[aB]){if(aB.toLowerCase()=="styleclass"){ay.setAttribute("class",aH[aB])}else{if(aB.toLowerCase()!="classid"){ay.setAttribute(aB,aH[aB])}}}}for(var aA in aF){if(aF[aA]!=Object.prototype[aA]&&aA.toLowerCase()!="movie"){C(ay,aA,aF[aA])}}az.parentNode.replaceChild(ay,az);aw=ay}}return aw}function C(ay,aw,ax){var az=aa("param");az.setAttribute("name",aw);az.setAttribute("value",ax);ay.appendChild(az)}function W(ax){var aw=A(ax);if(aw&&aw.nodeName=="OBJECT"){if(ak.ie&&ak.win){aw.style.display="none";(function(){if(aw.readyState==4){z(ax)
}else{setTimeout(arguments.callee,10)}})()}else{aw.parentNode.removeChild(aw)}}}function z(ay){var ax=A(ay);if(ax){for(var aw in ax){if(typeof ax[aw]=="function"){ax[aw]=k}}ax.parentNode.removeChild(ax)}}function A(ay){var aw=k;try{aw=H.getElementById(ay)}catch(ax){}return aw}function aa(aw){return H.createElement(aw)}function G(ay,aw,ax){ay.attachEvent(aw,ax);ag[ag.length]=[ay,aw,ax]}function ad(ay){var ax=ak.pv,aw=ay.split(".");aw[0]=parseInt(aw[0],10);aw[1]=parseInt(aw[1],10)||0;aw[2]=parseInt(aw[2],10)||0;return(ax[0]>aw[0]||(ax[0]==aw[0]&&ax[1]>aw[1])||(ax[0]==aw[0]&&ax[1]==aw[1]&&ax[2]>=aw[2]))?w:d}function T(aB,ax,aC,aA){if(ak.ie&&ak.mac){return}var az=H.getElementsByTagName("head")[0];if(!az){return}var aw=(aC&&typeof aC=="string")?aC:"screen";if(aA){L=k;ae=k}if(!L||ae!=aw){var ay=aa("style");ay.setAttribute("type","text/css");ay.setAttribute("media",aw);L=az.appendChild(ay);if(ak.ie&&ak.win&&typeof H.styleSheets!=ab&&H.styleSheets.length>0){L=H.styleSheets[H.styleSheets.length-1]
}ae=aw}if(ak.ie&&ak.win){if(L&&typeof L.addRule==P){L.addRule(aB,ax)}}else{if(L&&typeof H.createTextNode!=ab){L.appendChild(H.createTextNode(aB+" {"+ax+"}"))}}}function U(ay,aw){if(!K){return}var ax=aw?"visible":"hidden";if(ah&&A(ay)){A(ay).style.visibility=ax}else{T("#"+ay,"visibility:"+ax)}}function aj(ax){var ay=/[\\\"<>\.;]/;var aw=ay.exec(ax)!=k;return aw&&typeof encodeURIComponent!=ab?encodeURIComponent(ax):ax}var B=function(){if(ak.ie&&ak.win){j.attachEvent("onunload",function(){var aB=ag.length;for(var aA=0;aA<aB;aA++){ag[aA][0].detachEvent(ag[aA][1],ag[aA][2])}var ay=al.length;for(var az=0;az<ay;az++){W(al[az])}for(var ax in ak){ak[ax]=k}ak=k;for(var aw in swfobject){swfobject[aw]=k}swfobject=k})}}();return{registerObject:function(aA,aw,az,ay){if(ak.w3&&aA&&aw){var ax={};ax.id=aA;ax.swfVersion=aw;ax.expressInstall=az;ax.callbackFn=ay;M[M.length]=ax;U(aA,d)}else{if(ay){ay({success:d,id:aA})}}},getObjectById:function(aw){if(ak.w3){return X(aw)}},embedSWF:function(aA,aG,aD,aF,ax,az,ay,aC,aE,aB){var aw={success:d,id:aG};
if(ak.w3&&!(ak.wk&&ak.wk<312)&&aA&&aG&&aD&&aF&&ax){U(aG,d);ai(function(){aD+="";aF+="";var aI={};if(aE&&typeof aE===P){for(var aK in aE){aI[aK]=aE[aK]}}aI.data=aA;aI.width=aD;aI.height=aF;var aL={};if(aC&&typeof aC===P){for(var aJ in aC){aL[aJ]=aC[aJ]}}if(ay&&typeof ay===P){for(var aH in ay){if(typeof aL.flashvars!=ab){aL.flashvars+="&"+aH+"="+ay[aH]}else{aL.flashvars=aH+"="+ay[aH]}}}if(ad(ax)){var aM=S(aI,aL,aG);if(aI.id==aG){U(aG,w)}aw.success=w;aw.ref=aM}else{if(az&&Y()){aI.data=az;an(aI,aL,aG,aB);return}else{U(aG,w)}}if(aB){aB(aw)}})}else{if(aB){aB(aw)}}},switchOffAutoHideShow:function(){K=d},ua:ak,getFlashPlayerVersion:function(){return{major:ak.pv[0],minor:ak.pv[1],release:ak.pv[2]}},hasFlashPlayerVersion:ad,createSWF:function(ay,ax,aw){if(ak.w3){return S(ay,ax,aw)}else{return s}},showExpressInstall:function(ay,az,aw,ax){if(ak.w3&&Y()){an(ay,az,aw,ax)}},removeSWF:function(aw){if(ak.w3){W(aw)}},createCSS:function(az,ay,ax,aw){if(ak.w3){T(az,ay,ax,aw)}},addDomLoadEvent:ai,addLoadEvent:Q,getQueryParamValue:function(az){var ay=H.location.search||H.location.hash;
if(ay){if(/\?/.test(ay)){ay=ay.split("?")[1]}if(az==k){return aj(ay)}var ax=ay.split("&");for(var aw=0;aw<ax.length;aw++){if(ax[aw].substring(0,ax[aw].indexOf("="))==az){return aj(ax[aw].substring((ax[aw].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(e){var aw=A(ap);if(aw&&J){aw.parentNode.replaceChild(J,aw);if(ao){U(ao,w);if(ak.ie&&ak.win){J.style.display="block"}}if(ac){ac(Z)}}e=d}}}}();i.Flash={DEFAULT:{flashvar:{debug:d+""},paraObj:{allowScriptAccess:"always",quality:"low",menu:d+"",scale:"noscale",salign:"tl",loop:d+""},attrObj:{bgcolor:"#FFFFFF"}},minFlashVer:"9.0.45",load:function(e,A,E,H,z){var G=v.extend({},i.Flash.DEFAULT.flashvar);var B=v.extend({},i.Flash.DEFAULT.paraObj);var C=v.extend({},i.Flash.DEFAULT.attrObj);var F=H?H:{};v.extend(G,F.flashvarObj);v.extend(B,F.paraObj);v.extend(C,F.attrObj);C.id=E;if(!v(A)){c.body.appendChild(tx.div({id:A}))}var D=k;if(z){D=function(I){z(I.success)}}swfobject.embedSWF(e,A,F.width?F.width:"0",F.height?F.height:"0",this.minFlashVer,d,G,B,C,D)
},get:function(e){return swfobject.getObjectById(e)},getPlayerVersion:function(){return swfobject.getFlashPlayerVersion()},hasPlayerVersion:function(e){return swfobject.hasFlashPlayerVersion(e)},ready:function(z,e){if(!i.Flash.get(z)){setTimeout(function(){i.Flash.ready(z,e)},500);return}setTimeout(e,500)}};j.$txSWF=function(e){return i.Flash.get(e)};(function(){i.ScriptLoader=i.Class.create({$mixins:[i.I.FHRequester],isJsHolding:d,jsQueue:[],imported:[],initialize:function(e){this.win=e},execScript:function(){if(this.jsQueue.length==0){return}if(!this.isJsHolding){this.isJsHolding=w;try{var e=this.jsQueue.shift();if(this.win["eval"]){txEval(e.script,this.win)}else{this.win.document.getElementById("txScriptForEval").text=e.script}}catch(z){}finally{if(typeof(e.callback)==="function"){e.callback()}this.isJsHolding=d}}setTimeout(this.execScript.bind(this),5)},runBy:function(e,z){this.jsQueue.push({script:e,callback:z});this.execScript()},importBy:function(e,z){if(e.indexOf("cia.daum.net")<0&&this.imported.contains(e)){if(typeof(z)==="function"){z()
}return}this.imported.push(e);this.sendRequest("get",e,"",d,function(A){this.runBy(A,z)}.bind(this),function(){})}})})();i.Logger={reportToMagPie:function(e){var z;if(typeof(Editor)!==s+""){z=Editor}else{if(typeof(PopupUtil)!==s+""){var A=PopupUtil.getOpener();if(!A){return}z=opener.Editor}}if(z){z.fireJobs(i.Ev.__REPORT_TO_MAGPIE,e)}},confirmUpdateFlashPlayer:function(){var e=confirm("\uc774 \ud398\uc774\uc9c0\ub294 Adobe Flash Player 9.0  \uc774\uc0c1\uc758\n\ubc84\uc804\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.\nFlash Player \uc5c5\ub370\uc774\ud2b8 \uc0ac\uc774\ud2b8\ub85c \uc774\ub3d9\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?");if(e){j.moveTo(screen.availWidth*0.1,screen.availHeight*0.1);j.resizeTo(screen.availWidth*0.8,screen.availHeight*0.8);j.open("http://get.adobe.com/kr/flashplayer/","_blank");j.close()}},checkFlashLoading:function(z,G,A){A=A||5;var D=i.Flash.getPlayerVersion();if(!D){i.Logger.reportToMagPie("N_FLASH_NOT_DETECTED");return}(function e(){c.body.appendChild(tx.div({id:"tx_empty_wrap",style:{position:"absolute",top:"0",left:"0"}},tx.div({id:"tx_empty_div"})));
i.Flash.load("//s1.daumcdn.net/editor/coca/test.swf","tx_empty_div","empty",{width:"1",height:"1",paraObj:{quality:"low",swLiveConnect:w.toString()},attrObj:{bgcolor:"#484848"}})})();var E=0;var B=d;var F=d;var C=function(){try{if(!B){var H=i.Flash.get("empty");if(H){B=w}}if(!F){var J=i.Flash.get(z);if(J&&J.checkValidate){if(J.checkValidate()!=1){throw new Error("N_EDITOR_"+G+"_FLASH_INVALID_RETURN")}else{F=w}}}if(B&&F){return}if(++E==A){if(B&&!F){throw new Error("N_EDITOR_"+G+"_FLASH_NOTLOADED")}else{if(!B&&F){throw new Error("N_EDITOR_TEST_FLASH_NOTLOADED")}else{throw new Error("N_EDITOR_BOTH_FLASH_NOTLOADED")}}}else{setTimeout(C,2000)}}catch(I){i.Logger.reportToMagPie(I.message||G)}};setTimeout(C,3000)}};(function(){j.onerror=function(z){return d}})();i.module("Error Event Binding",function(e){j.onerror=function(z){e.fireJobs(i.Ev.__RUNTIME_EXCEPTION,z);return d}});i.MarkupTemplate.add("blackbox",'<div class="tx-blackbox">		<div class="tx-blackbox-panel"></div>		<div class="tx-content"></div>	</div>');
i.BlackBox=i.Class.create({initialize:function(){},make:function(A){var z=this.elBlackbox=i.MarkupTemplate.get("blackbox").evaluateAsDom({});var B=this.holder=A||c.body;y.insertFirst(B,z);this.elBlackboxPanel=y.collect(z,"div.tx-blackbox-panel");this.elContentArea=y.collect(z,"div.tx-content");var e=this.calculatePanelSize();this.panelWidth=e[0];this.panelHeight=e[1]},show:function(e){this.makeScrollbar();this._append(e)},_append:function(z){if(this.elContentArea.firstChild!=k){return}y.append(this.elContentArea,z);var e=this.calculatePanelSize();this.panelWidth=e[0];this.panelHeight=e[1];v.setStyle(this.elBlackbox,{width:this.panelWidth.toPx(),height:this.panelHeight.toPx()});v.setStyle(this.elBlackboxPanel,{width:this.panelWidth.toPx(),height:this.panelHeight.toPx()});v.show(this.elBlackbox);this.alignCenter()},hide:function(){v.hide(this.elBlackbox);this.elContentArea.removeChild(this.elContentArea.firstChild);this.removeScrollbar()},makeScrollbar:function(){if(v.msie){c.body.scroll="yes"
}else{c.body.style.overflow="scroll"}},removeScrollbar:function(){if(v.msie){c.body.scroll=""}else{c.body.style.overflow=""}},calculatePanelSize:function(){var e=y.getPosition(this.holder);return[e.width,e.height]},resizeBlackbox:function(e){this.panelHeight=e;v.setStyle(this.elBlackbox,{height:this.panelHeight.toPx()});v.setStyle(this.elBlackboxPanel,{height:this.panelHeight.toPx()});this.alignCenter()},alignCenter:function(){var D=v.getStyle(this.elBlackbox,"width");var e=v.getStyle(this.elBlackbox,"height");var A=this.calculatePanelSize();this.panelWidth=A[0];this.panelHeight=A[1];var C=y.getPosition(this.elContentArea.firstChild);var z=C.width.parsePx();var E=C.height.parsePx();var B=(this.panelWidth-z)/2;v.setStyle(this.elContentArea,{marginLeft:B.toPx(),marginTop:"30px"})}});i.install("editor.getBlackBox & canvas.getBlackBox",function(z,A,B,e){var C=new i.BlackBox();z.getBlackBox=function(){return C};e.getBlackBox=function(){return C}});i.module("generate blackbox",function(A,B,C,e){var D=A.getBlackBox();
var z=A.getWrapper();D.make(z);e.observeKey({ctrlKey:d,altKey:d,shiftKey:d,keyCode:27},D.hide.bind(D));A.observeKey({ctrlKey:d,altKey:d,shiftKey:d,keyCode:27},D.hide.bind(D));e.observeJob(i.Ev.__CANVAS_HEIGHT_CHANGE,function(E){D.resizeBlackbox(E.parsePx())})});i.MarkupTemplate.add("noticebox",'<div class="tx-noticebox">	<dl>		<dt>			<span>#{head}</span>			<a href="javascript:;">close</a>		</dt>		<dd>			<p>#{body}</p>			<div>				<a href="javascript:return false;"><img src="#{confirm}" border="0"/></a>				<a href="javascript:return false;"><img src="#{cancel}" border="0" /></a>			</div>		</dd>	</dl></div>');i.NoticeBox=i.Class.create({initialize:function(z,e){this.make({head:z.head,body:z.body,confirm:z.confirm||"//i1.daumcdn.net/icon/editor/btn_confirm_s1.gif?v=2",cancel:z.cancel||"//i1.daumcdn.net/icon/editor/btn_cancel_s1.gif?v=2"});this.blackbox=e},make:function(e){if(this.elBox){return this}e=e||{};var z=this.elBox=i.MarkupTemplate.get("noticebox").evaluateAsDom(e);v.observe(y.collect(z,"dt a"),"click",this.cancel.bind(this));
v.observe(y.collectAll(z,"dd div a")[0],"click",this.confirm.bind(this));v.observe(y.collectAll(z,"dd div a")[1],"click",this.cancel.bind(this));return this},weave:function(A,z,e){this.confirmHandler=A;this.cancelHandler=z;this.completeHandler=e;return this},show:function(){this.blackbox.show(this.elBox)},hide:function(){this.blackbox.hide()},confirm:function(e){if(this.confirmHandler){this.confirmHandler()}v.stop(e)},cancel:function(e){if(this.cancelHandler){this.cancelHandler()}this.hide();v.stop(e)},complete:function(e){if(this.completeHandler){this.completeHandler()}this.hide();v.stop(e)}});i.install("editor.newNoticeBox",function(e){e.newNoticeBox=function(z){return new i.NoticeBox(z,e.getBlackBox())}});i.DaumLogin=i.Class.create({$const:{__GET_LOGIN_URL:function(){var e="https://logins.daum.net/accounts/loginform.do?popup=1&url=";var z=opener;if(z&&z.Editor&&z.Editor.getConfig().loginUrl){e=z.Editor.getConfig().loginUrl}return e},__RETURN_URL:"#host#path/pages/daumx/login.html?key=#key",__GET_FINALDEST:function(){try{var B=j.top.location.protocol;
var z=j.top.location.host;return B+"//"+z}catch(A){return k}}},$extend:i.NoticeBox,key:k,weave:function(e,A){this.key="_"+Math.floor(Math.random()*100000)+"_";var z=this;j["txLOGIN"+this.key]=function(){e();z.hide()};this.$super.weave(this.openPopup.bind(this),A);return this},openPopup:function(){var A=this.constructor.__GET_LOGIN_URL();A+=encodeURIComponent(r.getUrl(this.constructor.__RETURN_URL,{key:this.key}));var z=this.constructor.__GET_FINALDEST();if(z){A+="&finaldest="+encodeURIComponent(z)}var e=j.open(A,"minilogin","width=400,height=280,scrollbar=no,menubar=no");e.focus();return d}});i.install("editor.newLoginBox",function(e){e.newLoginBox=function(z){return new i.DaumLogin(z,e.getBlackBox())}});r.addParameter("service","txService");r.addParameter("ip","txIP");r.addParameter("pgver","txVersion");r.addParameter("farmCode","txFarmCode");r.add({txIconPath:"//i1.daumcdn.net/icon/editor/",txDecoPath:"//i1.daumcdn.net/deco/contents/"});i.ResultBox=i.Class.create({$extend:i.EntryBox,initialize:function(){this.typeMapper={};
this.sectionMapper={}},searchTypeBySection:function(A){var z=k;for(var e in this.typeMapper){if((z=this.typeMapper[e](A))!=k){break}}return z||A},searchSectionByType:function(z){var A=k;for(var e in this.sectionMapper){if((A=this.sectionMapper[e](z))!=k){break}}return A||z}});i.install("editor.getResultBox & sidebar.getResults",function(B,C,D,A,z){var e=new i.ResultBox(z,A,B);D.entryboxRegistry.search=e;B.getResultBox=function(){return e};D.getResults=e.getEntries.bind(e)});i.register("filter > searchers",function(C,D,E){var e=C.getResultBox();var A=C.getDocParser();var z=function(G){var F=e.datalist;F.each(function(H){G=G.replace(H.regHtml,function(J,I){return[I.replace(/<\/?table[^>]*>/gi,"").replace(/<\/?tbody[^>]*>/gi,"").replace(/<\/?tr[^>]*>/gi,"").replace(/<\/?td[^>]*>/gi,""),H.saveScript,H.dispText].join("\n")})});return G};var B=function(G){var F=e.datalist;F.each(function(H){G=G.replace(H.regText,function(){return(H.dataHtml||"")})});return G};A.registerFilter("filter/search",{"text@load":function(F){return F
},"source@load":function(F){return F},"html@load":function(I){var J=[];var K=/id="?txc_([a-zA-Z]+)_([a-zA-Z]+)_([^"\s>]+)"?/;var H=/title="?([^"]+)"?/;var G=/image="?([^"]+)"?/;I=I.replace(/(<(?:blockquote|BLOCKQUOTE|div|DIV)[^>]*txc-info[^>]*>[\s\S]*?<\/(?:blockquote|BLOCKQUOTE|div|DIV)>)\s*<(?:x-)?(?:x)?(?:script|SCRIPT)[^>]*src="(http:\/\/editor\.[^"]+)"[^>]*><\/(?:x-)?(?:x)?(?:script|SCRIPT)>\s*<(?:x-)?(?:x)?(?:script|SCRIPT)[^>]*src="(http:\/\/cia\.[^"]+)"[^>]*><\/(?:x-)?(?:x)?(?:script|SCRIPT)>\s*<!--DB_EMBEDDING_START-->([\s\S]*?)<!--DB_EMBEDDING_END-->/gm,function(R,Q,T,U,N){var S;var W,L,M;if((S=K.exec(Q))!=k){W=S[1];L=S[2];M=S[3]}var P,V;if((S=H.exec(N))!=k){V=S[1]}if((S=G.exec(N))!=k){P=S[1]}var O=e.searchTypeBySection(W);J.push({_meta:{type:O,section:W,kind:L,dataUrl:U,viewUrl:T},key:M,title:V,image:P});return['<button class="tx-search tx-'+O+"-"+L+'">',Q,"</button>"].join("")});var F;J.each(function(L){if((F=E.searchers[L._meta.type])!=k){F.execReload(L,I)}});return I},text4save:function(F){return F
},source4save:function(F){F=B(F);return z(F)},html4save:function(F){return z(F)},text2source:function(F){return F},text2html:function(F){return F},source2text:function(G){var F=e.datalist;F.each(function(H){G=H.getChangedContent(G,H.regText,"")});return G},source2html:function(F){return B(F)},html2text:function(G){var F=e.datalist;F.each(function(H){G=H.getChangedContent(G,H.regHtml,"")});return G},html2source:function(G){var F=e.datalist;F.each(function(H){G=G.replace(H.regHtml,function(I){H.dataHtml=I;return H.dispText})});return G}})});i.ResultEntry=i.Class.create({$extend:i.Entry,attrs:{align:"left"},initialize:function(e,z){this.actor=e;this.canvas=e.canvas;this.entryBox=e.entryBox;this.type=e.constructor.__Identity;this.setProperties(z)},setProperties:function(B){var A=Object.extend({},B._meta);var z=this.data=Object.extend({},B);z._meta=A;var e={type:this.actor.name,section:A.section,catename:this.actor.title,kind:A.kind,key:B.key,title:B.title,image:B.image,dataUrl:A.dataUrl,viewUrl:A.viewUrl};
this.dataUrl=A.dataUrl;this.viewUrl=A.viewUrl;this.dispHtml=(new Template(function(){return['<button class="tx-search tx-#{type}-#{kind}">',(A.viewHtml||'<div id="txc_#{section}_#{kind}_#{key}" class="txc-info"></div>'),"</button>"].join("")}())).evaluate(e);this.regHtml=new RegExp((new Template(function(){return["<(?:button|BUTTON)[^>]*>\\s*","(<(?:blockquote|BLOCKQUOTE|div|DIV)[^>]*txc_#{section}_#{kind}_#{key}[^>]*>","[\\S\\s]*?","</(?:blockquote|BLOCKQUOTE|div|DIV)>)","\\s*</(?:button|BUTTON)>"].join("")}())).evaluate(e),"gm");this.dispText=(new Template(function(){return["<!--DB_EMBEDDING_START-->",'<TXDB name="#{catename}" id="txd_#{section}_#{kind}_#{key}">','\t<TXDBITEM title="#{title}"></TXDBITEM>','\t<TXDBITEM image="#{image}"></TXDBITEM>',"</TXDB>","<!--DB_EMBEDDING_END-->"].join("\n")}())).evaluate(e);this.regText=new RegExp((new Template(function(){return["<!--DB_EMBEDDING_START-->\\s*","<(?:txdb|TXDB)[^>]*txd_#{section}_#{kind}_#{key}[^>]*>","[\\S\\s]*?","\\s*<!--DB_EMBEDDING_END-->"].join("")
}())).evaluate(e),"gm");this.saveScript=(new Template(function(){return['<script src="#{viewUrl}" charset="utf-8" type="text/javascript"><\/script>','<script src="#{dataUrl}" charset="utf-8" type="text/javascript"><\/script>'].join("")}())).evaluate(e)},remove:function(){var e=this.canvas.getContent();if(this.canvas.isWYSIWYG()){e=e.replace(this.regHtml,"");this.canvas.setContent(e)}else{e=e.replace(this.regText,"");this.canvas.setContent(e)}},register:function(){if(this.canvas.isWYSIWYG()){this.canvas.pasteContent(this.dispHtml,w)}else{this.canvas.pasteContent(this.dispText+"\n")}this.reload()},reload:function(){var e=this;this.imports(this.viewUrl,function(){e.imports(e.dataUrl)})},imports:function(e,z){this.canvas.importScript(e,z)}});r.addAdaptor("alxa",{xaHost:"http://editor.daum.net",xaPath:"/alxa/1.42",use:true},function(e){var z=r.getAdaptor("alxa",e);z.xaHost=r.getUrl(z.xaHost);z.xaService=r.getUrl("#service");z.xaIP=r.getUrl("#ip")});i.install("sidebar.getSearcher",function(z,A,B){var e=B.searchers={};
B.getSearcher=function(D){if(e[D]!=k){return e[D]}else{return e}};var C=r.getAdaptor("alxa");if(C.use){new (i.Class.create({$mixins:[i.I.JSRequester],initialize:function(){this.importScript(C.xaHost+C.xaPath+"/js/searcher.js","utf-8",document,this.runAlxa.bind(this))},runAlxa:function(){new Searcher(C).onClick(function(D){if(e[D._meta.type]){e[D._meta.type].insertHandler(D)}})}}))()}});i.install("new searchers",function(D,E,e,z,A){var B=D.getResultBox();var G=e.searchers;for(var C in i.Searcher){var F=i.Searcher[C]["__Identity"];if(F){G[F]=new i.Searcher[C](D,B,A)}}});l.addMsg({"@searcher.popup.load.error":"\ud398\uc774\uc9c0\ub97c \ub85c\ub4dc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."});i.Searcher=i.Class.draft({$extend:i.Actor,$mixins:[i.I.FHRequester],initialize:function(z,A,e){this.editor=z;this.canvas=z.getCanvas();this.entryBox=A;this.config=r.getSearcher(this.constructor.__Identity,e);this.alxaCfg=r.getAdaptor("alxa");this.getDataForEntry=function(B){return B};this.imported=d;this.insertHandler=this.insertHandler.bind(this);
this.popWin=k},execute:function(){if(this.wysiwygonly&&!this.canvas.isWYSIWYG()){alert(TXMSG("@attacher.insert.alert"));return}try{if(typeof __TX_GLOBAL==s+""){j.__TX_GLOBAL={}}if(__TX_GLOBAL.notSetDomain){try{if(this.popWin&&this.popWin.closed!=w){this.popWin.close()}}catch(B){}var A=Searcher.getPopupFeature();var z=window.open(this.alxaCfg.popupEmptyPage||"","xa_searcher",A);this.popWin=z;var e=Searcher.getPopupUrl(this.name);this.sendRequest("post",e,"",w,function(C){var D,E;D=C.replace(/"\.\.\//g,'"'+e.split("/pages/")[0]+"/");E=z.document.open("text/html","replace");E.write(D);E.close();z.focus()},function(){alert(TXMSG("@searcher.popup.load.error"))})}else{Searcher.click(this.name)}}catch(B){}return d},insertHandler:function(z){var e=z._meta;this.execAttach(z);this.editor.fireJobs(i.Ev.__PASTE_SEARCHRESULT,e.type,e.kind,z.key,z)},createEntry:function(z,e){var A=this.constructor.__Identity;if(e){A=e}return new i.ResultEntry(this,z)}});l.addMsg({"@book.title":"\ucc45","@cinema.title":"\uc601\ud654","@music.title":"\uc74c\uc545","@people.title":"\uc778\ubb3c","@play.title":"\uacf5\uc5f0","@restaurant.title":"\ub9db\uc9d1","@shopping.title":"\uc0c1\ud488","@travel.title":"\uc5ec\ud589\uc9c0","@tv.title":"TV"});
i.register("different sectionid of searcher",function(z){var e=z.getResultBox();e.typeMapper.book=function(A){return(A==="book")?"book":k};e.sectionMapper.book=function(A){return(A==="book")?"book":k};e.typeMapper.cinema=function(A){return(A==="movie")?"cinema":k};e.sectionMapper.cinema=function(A){return(A==="cinema")?"movie":k};e.typeMapper.music=function(A){return(A==="album"||A==="song"||A==="artist")?"music":k};e.sectionMapper.music=function(A){return(A==="music")?"music":k};e.typeMapper.people=function(A){return(A==="person")?"people":k};e.sectionMapper.people=function(A){return(A==="people")?"person":k};e.typeMapper.play=function(A){return(A==="play")?"play":k};e.sectionMapper.play=function(A){return(A==="play")?"play":k};e.typeMapper.restaurant=function(A){return(A==="place"||A==="location")?"restaurant":k};e.sectionMapper.restaurant=function(A){return(A==="restaurant")?"location":k};e.typeMapper.shopping=function(A){return(A==="product")?"shopping":k};e.sectionMapper.shopping=function(A){return(A==="shopping")?"product":k
};e.typeMapper.travel=function(A){return(A==="place"||A==="location")?"travel":k};e.sectionMapper.travel=function(A){return(A==="travel")?"location":k};e.typeMapper.tv=function(A){return(A==="tv")?"tv":k};e.sectionMapper.tv=function(A){return(A==="tv")?"tv":k}});(function(){var B=["book","cinema","music","people","play","restaurant","shopping","travel","tv"];var A=function(D){r.addTool(D,{disabledonmobile:w,wysiwygonly:w,sync:d,status:d});r.addSearcher(D,{});var C=D.camelize();i.Tool[C]=i.Class.create({$const:{__Identity:D},$extend:i.Tool,oninitialized:function(){var E=this.editor;this.weave.bind(this)(new i.Button(this.buttonCfg),k,function(){E.getSidebar().getSearcher(this.constructor.__Identity).execute()})}});i.Searcher[C]=i.Class.create({$const:{__Identity:D},$extend:i.Searcher,name:D,title:TXMSG("@"+D+".title")})};for(var z=0,e=B.length;z<e;z++){A(B[z])}})();i.install("editor.getAutoSaver",function(B,C,D,A,z){var e;if(z.save.autosave.use){e=new i.AutoSave(B,C,D,A,z)}B.getAutoSaver=function(){return e
}});r.addSave("autosave",{use:w,adaptor:"fanta",avkey:"test",avMaxCnt:10,listSize:10,useAutoLoad:w,term:30000,fireonunload:w,excludeFields:[],linkSelector:"p a",countFormat:"({count})",countSelector:"p span",notiSelector:"p"},function(e){var z=r.getSave("autosave",e);z.term=z.term?z.term:30000;z.url=r.getUrl(z.url);z.param=r.getUrl(z.param);z.initializedId=e.initializedId||"";z.avMaxCnt=z.avMaxCnt||20;var A=z.excludeFields||[];z.excludeFields=(typeof A=="string")?[A]:A});l.addMsg({"@saver.autosave.message":"\uc790\ub3d9 \uc800\uc7a5 \uc644\ub8cc (#{time})","@saver.confirm.loading":"\uc790\ub3d9 \uc800\uc7a5 \uae00\uc744 \ubd88\ub7ec\uc624\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","@saver.loading.message":"\uc790\ub3d9 \uc800\uc7a5 \ub85c\ub529 \uc911","@saver.auth.error.message":"\uc790\ub3d9 \uc800\uc7a5 \uc2e4\ud328 (\ub85c\uadf8\uc778 \ud544\uc694)"});i.AutoSave=i.Class.create({$const:{__LIST_TPL:["<ul>","#{for:list}","<li><p>","<button>\uc0ad\uc81c</button>","<span>#{upddate}</span>","<strong>#{category}</strong>",'<a href="javascript:;">#{title}</a>',"</p></li>","#{/for:list}","</ul>","<div></div>"].join("\n"),__NAVI_TPL:["#{for:pages}","<span class='#{className}'><a href='javascript:;'>#{page}</a></span>","#{/for:pages}"].join("")},$mixins:[i.I.JobObservable,i.I.Runnable],editor:k,toolbar:k,sidebar:k,canvas:k,config:k,form:k,initialize:function(G,J,e,A,B){var F=this;
var I=r.getSave("autosave",B);this.config=I;if(!I.use){return}this.editor=G;this.toolbar=J;this.sidebar=e;this.canvas=A;this.form=G.getForm();this.avMaxCnt=I.avMaxCnt;this.listSize=I.listSize;this.isChanged=w;this.isDisplayed=d;this.isWorking=d;this.checkedOver=d;this.curCount=0;this.curSeq=0;this.curList=[];this.curPage=1;this.initAdaptor(this.config.adaptor,B);var E=((B.initializedId)?B.initializedId:"");this.elHolder=$must("tx_canvas"+E);this.el=$must("tx_autosave"+E,"Trex.AutoSave");this.elListBox=y.collect(this.el,"dl");this.elMsg=$must("tx_autosave_msg"+E,"Trex.AutoSave");this.msgTimer=new i.Timer(function(){F.hideMessage()});var K="";var H=function(){var L=A.getContent().trim();if(L!=K){F.save();K=L}};var D=function(){F.save()};A.observeKey({ctrlKey:w,altKey:d,shiftKey:d,keyCode:83},D);G.observeKey({ctrlKey:w,altKey:d,shiftKey:d,keyCode:83},D);if(I.fireonunload){A.observeJob(i.Ev.__CANVAS_BEFORE_UNLOAD,this.save.bind(this))}var C=function(){F.hideList()};A.observeJob(i.Ev.__CANVAS_PANEL_CLICK,C);
A.observeJob(i.Ev.__CANVAS_SOURCE_PANEL_CLICK,C);A.observeJob(i.Ev.__CANVAS_TEXT_PANEL_CLICK,C);J.observeJob(i.Ev.__TOOL_CLICK,C);var z=y.collect(this.el,this.config.linkSelector);v.observe(z,"click",function(L){F.toggleList();v.stop(L)});A.reserveJob(i.Ev.__IFRAME_LOAD_COMPLETE,function(){F.count();new i.Repeater(H).start(I.term)},1500)},initAdaptor:function(e,A){var z=this.config;switch(e){case"stub":this.adaptor=new i.AutoSave.Stub();break;case"fanta":this.adaptor=new i.AutoSave.Fanta(r.getAdaptor("fanta",A));break;case"service":this.adaptor=new i.AutoSave.Service(z);break;default:break}if(this.adaptor){this.adaptor.$callee=this}},getAdaptor:function(){return this.adaptor},getCurSeq:function(){return this.curSeq},count:function(){if(!this.adaptor.count){return}var A=this;var z=y.collect(this.el,this.config.notiSelector);if(z){z.className="loading"}try{this.adaptor.count({success:function(e){if(z){z.className=""}A.curCount=Math.min(e,A.avMaxCnt);A.drawCount()},failure:function(){if(z){z.className=""
}}})}catch(B){this.editor.fireJobs(i.Ev.__RUNTIME_EXCEPTION,B);return d}return w},list:function(){if(!this.adaptor.list){return}if(!this.isChanged){this.drawList();return}var C=y.collect(this.elListBox,"dd");y.html(C,"");var z=y.collect(this.elListBox,"dt span");y.html(z,this.avMaxCnt);var A=this;try{this.adaptor.list({success:function(F){var E,D,e;D=Math.min(F.length,A.avMaxCnt);A.curCount=D;E=[];for(e=0;e<D;e+=1){E.push(F.shift())}A.curList=E;A.isChanged=w;A.drawCount();A.drawList();if(F.length>0){if(!A.checkedOver){F.each(function(G){A.throwOver(G)});A.checkedOver=w;A.startThread(20000)}}},retry:function(){A.count();A.list()},failure:function(){A.curList=[]}})}catch(B){this.editor.fireJobs(i.Ev.__RUNTIME_EXCEPTION,B);return d}return w},load:function(z,B){if(!this.adaptor.load){return}if(!B){if(!confirm(TXMSG("@saver.confirm.loading"))){return}this.save()}var A=this;try{this.adaptor.load({seq:z},{success:function(H){if(!H){return}if(typeof beforePostAutoLoad=="function"){beforePostAutoLoad(H)
}A.curSeq=z;A.setDataByJSON(H);var e=k;var G=[];for(var F=0,E=A.curList.length;F<E;F++){var D=A.curList.shift();if(D.seq==z){e=D}else{G.push(D)}}G.unshift(e);A.curList=G;A.hideList();A.isChanged=w;A.drawList();A.showMessage(TXMSG("@saver.loading.message"));A.msgTimer.start(1500);if(typeof postAutoLoad=="function"){postAutoLoad(H)}},retry:function(){A.load(z)},failure:function(){A.curSeq=0}})}catch(C){this.editor.fireJobs(i.Ev.__RUNTIME_EXCEPTION,C);return d}return w},save:function(){if(!this.adaptor.save){return w}if(this.isWorking){return w}var B=this.curSeq;var C=this.getMetaAsJSON();var A=this.getDataAsJSON();if(A==k){return w}var z=this;try{this.isWorking=w;this.adaptor.save({seq:B,content:JSON.stringify(A,v.JSONHelper.encodeURIComponentReplacer),meta:JSON.stringify(C,v.JSONHelper.encodeURIComponentReplacer)},{success:function(e){var E=new DateFormat("yyyyMMddHHmmss").format(new Date());var F=(z.curList||[]).find(function(H){return(H.seq==e)});if(F){Object.extend(F,{upddate:E,meta:C})
}else{z.curList.unshift({seq:e,credate:E,upddate:E,meta:C});z.curSeq=e;z.curCount++;if(z.curCount>z.avMaxCnt){z.throwOver(z.curList.pop());z.curCount--}z.drawCount();z.isChanged=w}if(z.isDisplayed){z.drawList()}var G=new Template(TXMSG("@saver.autosave.message")).evaluate({time:new DateFormat("HH:mm:ss").format(new Date())});z.showMessage(G);z.msgTimer.start(1500);if(typeof completeAutoSave=="function"){completeAutoSave(G)}z.isWorking=d},retry:function(){z.isWorking=d;z.count();z.save()},failure:function(){z.isWorking=d}})}catch(D){this.editor.fireJobs(i.Ev.__RUNTIME_EXCEPTION,D);return d}return w},discard:function(z){if(!this.adaptor.discard){return}var A=this;try{this.adaptor.discard({seq:z},{success:function(){A.curList=(A.curList||[]).findAll(function(e){return(e.seq!=z)});if(A.curSeq==z){A.curSeq=0}A.curCount=A.curList.length;A.drawCount();A.isChanged=w;if(A.isDisplayed){A.drawList()}},retry:function(){A.count();A.discard(z)},failure:function(){}})}catch(B){this.editor.fireJobs(i.Ev.__RUNTIME_EXCEPTION,B);
return d}return w},throwOver:function(z){if(!this.adaptor.discard){return}var e=this;this.putThread(function(){e.adaptor.discard({seq:z.seq},{success:function(){},retry:function(){},failure:function(){}})})},toggleList:function(){if(this.isDisplayed){this.hideList()}else{this.showList()}},showList:function(){this.list();v.show(this.elListBox);this.isDisplayed=w;this.fireJobs(i.Ev.__AUTOSAVER_LIST_OPENED)},hideList:function(){v.hide(this.elListBox);this.isDisplayed=d},showMessage:function(z){var A=this.elMsg;var e=y.getPosition(this.elHolder);A.innerHTML=z;A.style.left=(e.width-168).toPx();v.show(A)},hideMessage:function(){v.hide(this.elMsg)},showAuthErrorMessage:function(){this.showMessage(TXMSG("@saver.auth.error.message"));this.msgTimer.start(3000)},drawCount:function(){var e=y.collect(this.el,this.config.countSelector);var z=Math.min(this.curCount,this.avMaxCnt);e.innerHTML=this.config.countFormat.replace("{count}",z)},drawList:function(B){var e=this.curList.length;if(e==0){y.collect(this.elListBox,"dd").innerHTML="<div></div>";
v.addClassName(y.collect(this.elListBox,"dd"),"tx-autosave-empty");return}v.removeClassName(y.collect(this.elListBox,"dd"),"tx-autosave-empty");var A=B||1;var z=this.listSize;if(this.isChanged||this.curPage!=A){this.createList(A);if(e>z){this.createNavi(A)}this.isChanged=d}else{this.updateList(A)}},getSlices:function(B){var A=this.curList.length;var z=this.listSize;var C=Math.max(z*(B-1),0);var e=Math.min(C+z,A);return this.curList.slice(C,e)},createList:function(A){var z=this;var e=this.getSlices(A);var B=y.collect(this.elListBox,"dd");new Template(this.constructor.__LIST_TPL).evaluateToDom({list:e},B);var C=0;y.collectAll(B,"li").each(function(D){z.updateItem(D,e[C]);v.observe(y.collect(D,"a"),"click",function(E){z.load(e[E].seq);return d}.bind(z,C));v.observe(y.collect(D,"button"),"click",function(E){z.discard(e[E].seq)}.bind(z,C));if(C++==e.length-1){D.className="last"}});this.curPage=A},createNavi:function(F){var A=this;var H=this.curList.length;var e=this.listSize;var D=1;var G=Math.ceil(H/e);
var B=[];for(var C=D;C<G+1;C++){B.push({page:C,className:((C==F)?"current":"")})}var z=y.collect(this.elListBox,"div");new Template(this.constructor.__NAVI_TPL).evaluateToDom({pages:B},z);var E=0;y.collectAll(z,"a").each(function(I){v.observe(I,"click",function(J){A.drawList(J+1);return d}.bind(A,E));E++});v.show(z)},updateList:function(A){var z=this;var e=this.getSlices(A);var C=0;var B=y.collect(this.elListBox,"dd");y.collectAll(B,"li").each(function(D){z.updateItem(D,e[C]);C++})},updateItem:function(z,A){y.collect(z,"span").innerHTML=new DateFormat("yyyy.MM.dd HH:mm").format(new DateFormat("yyyyMMddHHmmss").parse(A.upddate));if(A.meta.title){var e=""+A.meta.title;e=e.trim();e=i.String.htmlspecialchars(e);if(22<e.length){e=e.substr(0,20)+"..."}if(!e){e="\uc81c\ubaa9\uc5c6\uc74c"}y.collect(z,"a").innerHTML=e}if(A.meta.category){y.collect(z,"strong").innerHTML=i.String.htmlspecialchars(A.meta.category);v.show(y.collect(z,"strong"))}else{v.hide(y.collect(z,"strong"))}},getMetaAsJSON:function(){var e;
if(typeof makeAutoSaveMeta=="function"){e=makeAutoSaveMeta()}else{if(typeof makeAutoSaveMate=="function"){e=makeAutoSaveMate()}else{e={title:"\uc81c\ubaa9\uc5c6\uc74c"}}}return e||{}},getDataAsJSON:function(){var e=this.excludeFieldData(this.editor.getDataAsJSON());if(e&&e.formfield&&e.formfield.isAutosave){e.formfield.isAutosave=w}return e},setDataByJSON:function(e){this.editor.setDataByJSON(this.excludeFieldData(e))},excludeFieldData:function(e){if(e&&e.formfield){this.config.excludeFields.each(function(z){e.formfield[z]=k;delete e.formfield[z]})}return e}});r.addAdaptor("fanta",{url:"http://file.uf.daum.net/autosave_list",param:"service=#farmCode&filename=#avkey&asid=#avkey"},function(e){var z=r.getSave("autosave",e);var A=r.getAdaptor("fanta",e);if(A.authUrl){A.param+="&daum_cookie=#daumCookie"}A.useAutoLoad=z.useAutoLoad;A.param=r.getUrl(A.param,{avkey:z.avkey})});l.addMsg({"@saver.login.head":"\uc790\ub3d9 \uc800\uc7a5 \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","@saver.login.body":"\ub85c\uadf8\uc544\uc6c3 \ub418\uc5b4, \ud574\ub2f9 \uae00\uc744 \uc790\ub3d9 \uc800\uc7a5 \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.<br>\ub85c\uadf8\uc778 \ud6c4 \uc774\uc6a9\ud574 \uc8fc\uc2dc\uae38 \ubc14\ub78d\ub2c8\ub2e4."});
i.AutoSave.Fanta=i.Class.create({$const:{__ERROR_MAP:{"321":"WRONG_PARAMETER","403":"AUTH_FORBIDDEN","404":"FILE_NOT_EXISTS","521":"I/O error"}},$mixins:[i.I.FHRequester],$callee:k,initialize:function(e){this.param=e.param;this.url=e.url;if(e.authUrl){this.daumCookieTime=0;this.daumCookie="";this.authUrl=e.authUrl;this.authInterval=e.authInterval||(60*10*1000)}},sendRequestWithAuth:function(e,z,B,C,D,F,E){if(this.authUrl){var A,G,H;A=this;G=+new Date();H=function(){B=r.getUrl(B,{daumCookie:A.daumCookie});A.sendRequest.apply(A,[e,z,B,C,D,F,E])};if(!this.daumCookie||this.authInterval<=G-this.daumCookieTime){this.sendRequest("post",this.authUrl,"",w,function(I){if(/^tistory\./i.test(I)){A.daumCookie=I;A.daumCookieTime=G;H()}else{A.$callee.showAuthErrorMessage();F()}},function(){A.$callee.showAuthErrorMessage();F()})}else{H()}}else{this.sendRequest.apply(this,arguments)}},count:function(e){this.sendRequestWithAuth("post",this.url,this.param+"&type=count",w,function(A){var z=(A||"0").toNumber();
if(e.success){e.success(z)}},function(){if(e.failure){e.failure()}})},list:function(e){var z=this;this.sendRequestWithAuth("post",this.url,this.param+"&type=list",w,function(B){var D=[];var A=xCreate(B);var C=xGetty(A,"/result/header/response_code").xText("500");if(C=="200"){xGetties(A,"/result/items/item").each(function(E){var G;try{G=JSON.parse(xGetty(E,"meta").xText("{}"),v.JSONHelper.decodeURIComponentReviver)}catch(F){G={title:"\uc81c\ubaa9\uc5c6\uc74c",category:""}}D.push({seq:xGetty(E,"seq").xText(0),credate:xGetty(E,"credate").xText(""),upddate:xGetty(E,"upddate").xText(""),meta:G})});if(e.success){e.success(D)}}else{if(C=="403"){z.goLogin(e.retry,e.failure)}else{if(e.failure){e.failure()}z.reportError("list",C)}}},function(){if(e.failure){e.failure()}})},load:function(B,e){var A=this;var z=((B.seq>0)?B.seq:"");this.sendRequestWithAuth("post",this.url,this.param+"&type=load&seq="+z,w,function(D){var C=xCreate(D);var E=xGetty(C,"/result/header/response_code").xText("500");if(E=="200"){var F=xGetty(C,"/result/contents").xText("{}");
if(e.success){e.success(JSON.parse(F,v.JSONHelper.decodeURIComponentReviver))}}else{if(E=="403"){A.goLogin(e.retry,e.failure)}else{if(e.failure){e.failure()}A.reportError("load",E)}}},function(){if(e.failure){e.failure()}})},save:function(D,e){var C=this;var A=((D.seq>0)?D.seq:"");var z=D.content;var B=D.meta;this.sendRequestWithAuth("post",this.url,this.param+"&type=save&seq="+A+"&contents="+encodeURIComponent(z)+"&meta="+encodeURIComponent(B),w,function(G){var F=xCreate(G);var H=xGetty(F,"/result/header/response_code").xText("500");if(H=="200"){var E=xGetty(F,"/result/seq").xText(0);if(e.success){e.success(E)}}else{if(H=="403"){C.goLogin(e.retry,e.failure)}else{if(e.failure){e.failure()}C.reportError("save",H)}}},function(){if(e.failure){e.failure()}})},discard:function(B,e){var A=this;var z=((B.seq>0)?B.seq:"");this.sendRequestWithAuth("post",this.url,this.param+"&type=delete&seq="+z,w,function(D){var C=xCreate(D);var E=xGetty(C,"/result/header/response_code").xText("500");if(E=="200"){if(e.success){e.success()
}}else{if(E=="403"){A.goLogin(e.retry,e.failure)}else{if(e.failure){e.failure()}A.reportError("delete",E)}}},function(){if(e.failure){e.failure()}})},goLogin:function(z,e){if(!z){return}if(this.authUrl){this.$callee.showAuthErrorMessage();return}if(!this.login){this.login=this.$callee.editor.newLoginBox({head:TXMSG("@saver.login.head"),body:TXMSG("@saver.login.body"),confirm:"//i1.daumcdn.net/icon/editor/btn_a_login.gif?v=2"}).weave(z,e)}this.login.show()},reportError:function(A,z){var e=i.AutoSave.Fanta.__ERROR_MAP[z]||z;i.Logger.reportToMagPie("AUTOSAVE_ERROR+"+A+"+"+e+"&param="+this.param.replace(/=/g,">").replace(/&/g,"+"))}});i.Class.overwrite(i.Canvas.WysiwygPanel,{runScript:function(e,A){var z=new i.ScriptLoader(this.wysiwygWindow);z.runBy(e,A)},importScript:function(e,A){var z=new i.ScriptLoader(this.wysiwygWindow);z.importBy(e,A)},installScripts:function(){function z(D,C){D.txImportScript=function(E,F){C.importScript(E,F)}}function e(D){var C=function(){};D.UI={toolTip:C};D.ciaCallback=C;
D.ShowOrgImage=C}var B=this.wysiwygWindow;var A=this.wysiwygDoc;installHyperscript(B,A);z(B,this);e(B)}});i.module("installScripts for the wysiwygpanel",function(A,B,C,z,e){z.observeJob(i.Ev.__IFRAME_LOAD_COMPLETE,function(){var D=z.getPanel(i.Canvas.__WYSIWYG_MODE);D.installScripts(D.wysiwygWindow,D.wysiwygDoc)})});i.register("filter > clear dummy markup",function(F){function E(L){L=L.replace(/<\?xml[^>]*microsoft[^>]*>/g,"");if(L.indexOf("<o:p>")>-1){L=L.replace(/<o:p>|<\/o:p>/g,"")}if(L.indexOf("lang=")>-1){L=L.replace(/lang="?EN-US"?/g,"")}if(L.indexOf("MsoNormal")>-1){L=L.replace(/class="?MsoNormal"?/g,"")}if(L.indexOf("mso-bidi-font-size")>-1){L=L.replace(/mso-bidi-font-size:\s*[\d\.]+pt/g,"")}return L}function B(L){if(L.indexOf("<body")>-1||L.indexOf("<BODY")>-1){L=L.replace(/<body[^>]*>|<\/body>/g,"")}if(L.indexOf("<html")>-1||L.indexOf("<HTML")>-1){L=L.replace(/<html[^>]*>|<\/html>/g,"")}if(L.indexOf("</>")>-1){L=L.replace(/<\/>/g,"")}return L}function G(L){if(L.indexOf("</td></tr></tbody></table>")>-1||L.indexOf("</TD></TR></TBODY></TABLE>")>-1){L=L.replace(/(<\/TD><\/TR><\/TBODY><\/TABLE>\s*){4,}/gi,"</td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table>")
}return L}function H(L){if(L.search(/<style/i)>-1){return i.__WORD_JOINER+L}if(L.search(/<script/i)>-1){return i.__WORD_JOINER+L}return L}function z(L){if(L.indexOf("tx-entry-attach")>-1){return L.replace(/<(?:img|IMG)[^>]*class="?[^"]*tx-entry-attach[^"]*"?[^>]*style="?[^"]+"?[^>]*\/?>/g,function(M){return M.replace(/\s*style="?[^"]+"?/i,"")})}if(L.indexOf("tx-unresizable")>-1){return L.replace(/<(?:img|IMG)[^>]*class="?[^"]*tx-unresizable[^"]*"?[^>]*style="?[^"]+"?[^>]*\/?>/g,function(M){return M.replace(/\s*style="?[^"]+"?/i,"")})}return L}function C(L){if(L.indexOf("<hr")>-1||L.indexOf("<HR")>-1){L=L.replace(/<p([^>]*)>\s*(<hr[^>]*>)\s*<\/p>/gi,"<div$1>$2</div>")}return L}function A(L){if(L.indexOf("@font-face")>-1){return L.replace(/@font-face\s*\{[^\}]*\};?/g,function(M){return"/* "+M+" */"})}return L}function I(L){if(L.indexOf("@font-face")>-1){return L.replace(/\/\*\s*(@font-face\s*\{[^\}]*\};?)\s*\*\//g,function(M,N){return N})}return L}function J(L){return L.replace(new RegExp('<PARAM NAME="Play" VALUE="0">',"gi"),"")
}function D(M){var L=["frameset"];L.each(function(N){M=M.replace(new RegExp("</?"+N+"s*/?>","gim"),"")});return M}function K(L){L=L.replace(/\s*class="Apple-style-span"/g,"");L=L.replace(/font-size:\s*-webkit-xxx-large/g,"font-size:36pt");L=L.replace(/font-size:\s*xx-large/g,"font-size:24pt");L=L.replace(/font-size:\s*x-large/g,"font-size:18pt");L=L.replace(/font-size:\s*large/g,"font-size:14pt");L=L.replace(/font-size:\s*medium/g,"font-size:12pt");L=L.replace(/font-size:\s*small/g,"font-size:10pt");L=L.replace(/font-size:\s*x-small/g,"font-size:8pt");return L}var e=F.getDocParser();e.registerFilter("filter/dummymarkup",{"text@load":function(L){return L},"source@load":function(L){return L},"html@load":function(L){L=B(L);L=E(L);L=A(L);L=G(L);L=C(L);return L},text4save:function(L){return L},source4save:function(L){L=E(L);L=I(L);L=z(L);L=J(L);L=K(L);return L},html4save:function(L){L=E(L);L=I(L);L=z(L);L=J(L);L=K(L);return L},text2source:function(L){return L},text2html:function(L){return L},source2text:function(L){return L
},source2html:function(L){L=B(L);L=E(L);L=A(L);L=H(L);L=D(L);return L},html2text:function(L){return L},html2source:function(L){L=I(L);L=K(L);return L}})});r.addTool("layout",{wysiwygonly:w,sync:d,status:w,borderClass:"tx-btn-layoutbg",listseturl:EditorJSLoader.getJSBasePath()+"daumx/tool/async/layout_template.js",parastyle:{textAlign:"center"},pastescope:"table.txc-layout-wz",asyncUrl:EditorJSLoader.getJSBasePath()+"daumx/tool/async/layout.js"},function(e){var z=r.getTool("layout",e);z.listseturl=r.getUrl(z.listseturl)});i.Tool.Layout=i.Class.create({$const:{__Identity:"layout",__Message:{IMAGE:{"$":"img",src:"//i1.daumcdn.net/icon/editor/spacer2.gif?v=2","class":"txc-image"},TITLE:{"$":"h3","#":"<b>\ub300\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694</b>"},SUBTITLE:{"$":"h4","#":"<b>\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694</b>"},CONTENTS:{"$":"p","#":"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694"},LIST:{"$":"ul","#":"<li>\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694</li>"}}},$extend:i.AsyncTool,oninitialized:function(e){this.config=e;
this.weave.bind(this)(new i.Button(this.buttonCfg),k,this.onLoadModule)}});r.addAttacher("image",{imagemaxwidth:1024,adaptor:"pastel",applyEscape:w},function(){var B=r.getAttacher("image");var e=r.getAdaptor(B.adaptor);B.popPageUrl=r.getUrl(e.popPageUrl);B.features=r.getPopFeatures(e.features);var A=B.imagemaxwidth;if(r.get("maxwidth")){A=parseInt(r.get("maxwidth"),10)}else{var z=r.get("size");if(z.contentWidth){if(z.fixed){A=z.contentWidth-2*2}else{}}}B.imagemaxwidth=A;B.param=r.getUrl(B.param,{maxwidth:A})});i.Class.overwrite(i.Attacher.Image,{getDataForEntry:function(D){var e=r.getAttacher("image");if(e.applyEscape){D.filename=unescape(D.filename)}if(/^http:\/\/cfile\d+\.uf\.(?:[\w\.]+)\/image\//.test(D.imageurl)){D.originalurl=D.originalurl||D.imageurl.replace(/\/image\//,"/original/");D.attachurl=D.attachurl||D.imageurl.replace(/\/image\//,"/attach/");D.exifurl=D.exifurl||D.imageurl.replace(/\/image\//,"/info/");D.thumburl=D.thumburl||D.imageurl.replace(/\/image\//,"/P150x100/")}var z=this;
var C=this.config.replacePattern;var B=(C&&C.find&&C.replace&&new RegExp(C.find));["imageurl","originalurl","attachurl","thumburl","exifurl"].map(function(E){D[E]=z.encodeSpaceInUrl(D[E]);if(B){D[E]=D[E].replace(B,C.replace)}});if(!D.dispElId){D.dispElId=i.Util.getDispElId()}var A=((D.tmpSeq)?this.entryBox.syncSeq(D.tmpSeq):this.entryBox.newSeq());return Object.extend({dataSeq:A},D)},imageScale:function(e){new i.ImageScale(e.data,function(z){var F,C,D,A;F=z;C=Math.min(e.actor.config.imagemaxwidth,z);try{D=e.data.dispElId;if(D){A=e.canvas.panels.html.getDocument().getElementById(D);if(A){var B=y.getAttribute(A,"width");if(B){C=B}e.data.actualwidth=F;e.data.width=C;A.actualwidth=F;A.width=C}}}catch(E){}e.dispHtml=e.dispHtml.replace(/<img /i,'<img actualwidth="'+F+'" width="'+C+'"')})},execAttach:function(A,z){var e=this.createEntry(this.getDataForEntry(A),z);e.execRegister();if(!(e.data.actualwidth>0)){this.imageScale(e)}this.canvas.fireJobs("canvas."+(z||this.constructor.__Identity)+".added",e)
},execReload:function(E,D,C){var z=this.createEntry(this.getDataForEntry(E,D),C);z.execReload();if(!(z.data.actualwidth>0)){var B;if((B=z.regLoad.exec(D))!=k){var A=B[0];var F=i.Util.getMatchValue(/actualwidth=\"?([0-9]*)\"?/i,A,1);if(F){z.data.actualwidth=F;var e=i.Util.getMatchValue(/width=\"?([0-9]*)\"?/i,A,1);if(e&&e==F){z.data.isoriginalsize=w}z.dispHtml=z.dispHtml.replace(/<img /i,'<img actualwidth="'+z.data.actualwidth+'" width="'+e+'" ');return}}this.imageScale(z)}}});i.Class.overwrite(i.Attachment.Image,{getObjectAttr:function(z){var e=Object.extend({},this.actor.config.objattr);if(z.actualwidth>0){if(z.isoriginalsize){e.actualwidth=z.actualwidth;e.width=z.width>=0?z.width:z.actualwidth}else{e.actualwidth=z.actualwidth;e.width=z.width>=0?z.width:Math.min(this.actor.config.imagemaxwidth,z.actualwidth)}}if(z.exifselecteddata){e.exif=z.exifselecteddata}return e}});i.module("apply new imageeditor - pastel",function(B,C,D){var z=D.getAttacher("image");if(!z){return}var e=r.getAttacher("image");
var A=r.getAdaptor(e.adaptor);z.getFlashVars=function(){var E={};A.param.split("&").each(function(G){var F=G.split("=");E[F[0]]=F[1]});if(e.applyEscape){E.apply_escape=w}return E};z.getPepURL=function(){var E=r.getAdaptor("pep");return E.popPageUrl}});r.addTool("file",{wysiwygonly:d});r.addAttacher("file",{useCC:d,features:{left:250,top:65,width:450,height:547},popPageUrl:"#host#path/pages/daumx/file.html",adaptor:"coca",enableCloudImport:w,retransmitUrl:"http://cloud.daum.net/file/api/0/retransmit.json?attacher=file&extype=fromcloud&service=#service",cloudPopupUrl:"http://cloud.daum.net/disk/popup/export.daum?callFunc=HandriveImport&type=TYPE1&service=#service",applyEscape:w},function(e){var z=r.getAttacher("file",e);z.popPageUrl=r.getUrl(z.popPageUrl);z.retransmitUrl=r.getUrl(z.retransmitUrl);z.cloudPopupUrl=r.getUrl(z.cloudPopupUrl)});l.addMsg({"@file.invalid.copyright":" <strong>[\uc800\uc791\uad8c \uc704\ubc18 \uc758\uc2ec, \ubcf8\uc778\ub9cc \ud655\uc778\uac00\ub2a5]</strong>"});i.Class.overwrite(i.Attacher.File,{getDataForEntry:function(C){if(!C.dispElId){C.dispElId=i.Util.getDispElId()
}var e=((C.tmpSeq)?this.entryBox.syncSeq(C.tmpSeq):this.entryBox.newSeq());var B=C.filename.split(".").pop().toLowerCase();var z;switch(B){case"jpg":case"gif":case"png":case"bmp":z=C.attachurl.replace("/attach/","/P150x100/");break;default:z=i.Util.thumburl(B)}var A=Object.extend({dataSeq:e,thumburl:z,prevurl:i.Util.prevurl(C.filename.split(".").pop().toLowerCase())},C);A.isInvalidRight=d;if(C.copyright){A.isInvalidRight=(C.copyright.ccresult=="100"||C.copyright.ccresult=="110");A.copyright=Object.extend({},C.copyright)}return A},changeCocaServer:function(z){var e=this.config.adaptor;var B=this.editor.config.adaptor[e].cocaCode;var A=this.editor.config.adaptor[e].param;this.editor.config.adaptor[e].param=A.replace("="+B,"="+z);this.editor.config.adaptor[e].cocaCode=z}});i.Class.overwrite(i.Attachment.File,{getBoxAttr:function(C){var z=56;if(C.isInvalidRight){z=40}var A=C.filename;if(A.getRealLength()>z){if(/\./.test(A)){var D=A.split(".");var B=D.pop().cutRealLength(z-4);var e=D.join(".").cutRealLength(z-1-B.length);
A=e+"."+B}else{A=A.cutRealLength(z)}}return{name:A+" ("+C.filesize.toByteUnit()+")"+((C.isInvalidRight)?TXMSG("@file.invalid.copyright"):""),image:C.thumburl}},getDispHtml:function(e){return'<button id="'+e.dispElId+'" class="txc-file tx-unresizable"><img src="'+e.prevurl+'" ld="'+e.attachurl+'"/> '+e.filename+((e.isInvalidRight)?TXMSG("@file.invalid.copyright"):"")+"</button>"}});l.addMsg({"@mypeoplesticker.title":"\ub9c8\uc774\ud53c\ud50c \uc2a4\ud2f0\ucee4"});r.addTool("mypeoplesticker",{wysiwygonly:true,sync:false,status:false});i.Tool.MypeopleSticker=i.Class.create({$const:{__Identity:"mypeoplesticker"},$extend:i.Tool,oninitialized:function(e){var z=this.editor;this.weave(new i.Button(this.buttonCfg),null,function(){z.getSidebar().getEmbeder("mypeoplesticker").execute()})}});r.addEmbeder("mypeoplesticker",{popPageUrl:"http://mypeople.daum.net/mypeople/api/daumEditorStickerCategoryList.do",proxyPath:null,features:{left:250,top:65,width:464,height:504,resizable:"yes"}},function(e){var z=e.sidebar.embeder.mypeoplesticker;
if(z.proxyPath){z.popPageUrl+="?url=http://"+location.host+z.proxyPath}z.popPageUrl=r.getUrl(z.popPageUrl);z.features=r.getPopFeatures(z.features)});(function(){i.Embeder.MypeopleSticker=i.Class.create({$const:{__Identity:"mypeoplesticker"},$extend:i.Embeder,name:"mypeoplesticker",title:TXMSG("@mypeoplesticker.title"),clickHandler:function(){var e=this.config.popPageUrl;window.open(e,"at"+this.name,this.config.features)},createImageTag:function(A){var z="<img";for(var e in A){if(A.hasOwnProperty(e)){if(A[e]){z+=" "+e+'="'+A[e]+'"'}}}z+=">";return z},getCreatedHtml:function(A){var B=[];for(var z=0;z<A.length;z++){var e=this.createImageTag(A[z]);B.push(e)}return B.join("")},getDataForEntry:function(e){},execAttach:function(A){var z=this.pastescope;var e=this.getCreatedHtml(A);this.canvas.execute(function(B){B.moveCaretWith(z);B.pasteContent(e,false)})}})})();r.addAdaptor("coca",{version:"1.1.24",url:"#cdnhost/coca_service/#version/coca.swf",param:"coca_service=#cocaCode&service=#farmCode&service_farm=#uploadServiceFarm&single_selection=#singleSelection",elements:[{id:"tx_file",width:"86",height:"25",background:"#ffffff"}],cocaCode:"TestCoca",serviceFarm:d,singleSelection:d},function(e){var C=r.getAttacher("file",e);
var B=r.getAdaptor("coca",e);B.usecc=C.useCC;B.upsource=C.upSource;B.sname=C.sname||e.txService;B.sid=C.sid||C.upSource;var z=B.param+(C.param?"&"+C.param:"");var A=C.server||B.cocaCode;B.param=r.getUrl(z,{cocaCode:A,uploadServiceFarm:B.serviceFarm?"use":"not_use",singleSelection:B.singleSelection});if(B.authType){B.param+="&coca_auth_type="+B.authType}if(B.authUrl){B.param+="&coca_auth_url="+B.authUrl}B.url=r.getUrl(B.url,{version:B.version});B.initializedId=e.initializedId?e.initializedId:""});r.addAdaptor("pep",{popPageUrl:"#host#path/pages/daumx/image.html",pepCode:"TestPep",version:"1.1.21",url:"#cdnhost/coca_service/#version/ImageEditor.swf",param:"coca_service=#pepCode&service=#farmCode&service_farm=#uploadServiceFarm",features:{left:0,top:0,width:784,height:642,resizable:"yes",scrollbars:"yes"},serviceFarm:d},function(){var e=r.getAttacher("image");var z=r.getAdaptor("pep");z.url=r.getUrl(z.url,{version:z.version});z.param+=e.param?"&"+e.param:"";z.param=r.getUrl(z.param,{pepCode:z.pepCode,uploadServiceFarm:z.serviceFarm?"use":"not_use"});
z.popPageUrl=r.getUrl(z.popPageUrl)});r.addAdaptor("pastel",{popPageUrl:"http://fp.daum.net/fp/service_nc/pastel/PastelWrapper2.html",pastelCode:"PastelPep",cloudImport:d,param:"coca_service=#pastelCode&service=#farmCode&service_farm=#uploadServiceFarm&handrive_import=#cloudImport&single_selection=#singleSelection",features:{left:0,top:0,width:900,height:730,resizable:"yes",scrollbars:"no"},serviceFarm:d,singleSelection:d},function(z){var e=r.getAttacher("image");var A=r.getAdaptor("pastel");A.param+=e.param?"&"+e.param:"";if(A.authType){A.param+="&coca_auth_type="+A.authType}if(A.authUrl){A.param+="&coca_auth_url="+A.authUrl}A.param=r.getUrl(A.param,{pastelCode:A.pastelCode,uploadServiceFarm:A.serviceFarm?"use":"not_use",cloudImport:A.cloudImport,singleSelection:A.singleSelection})});i.module("register double click event listeners on image",function(G,I,e,z,B){var F=e.getAttacher("image");if(!F){return}var M=r.getAttacher("image");if(M.adaptor!="pastel"){return}var L=k;var E=k;F.getRemoteImage=function(){var T="";
if(L){T=L.src;var R=F.getDatalist().find(function(U){return(U.key==T)});if(R){T+="|"+R.data.filename;var P="",Q=R.data.exifselecteddata||L.getAttribute("exif"),O="{}",S=",";if(Q&&Q!=O){P=Q.replace(/'/g,"").match(/[a-zA-Z]+:/g).join(S).replace(/:/g,"")}T+="|"+P}}E=L;L=k;return T};z.observeJob(i.Ev.__CANVAS_PANEL_DBLCLICK,function(P){var O=v.element(P);if(y.kindOf(O,"img.txc-image")){if(y.kindOf(O,"img.txc-notexists")){z.fireJobs(i.Ev.__CANVAS_IMAGE_PLACEHOLDER_DBLCLICK,P)}else{L=O;F.execute()}}});z.observeJob(i.Ev.__CANVAS_PANEL_MOUSEDOWN,function(O){L=k});var C=function(O){O.thumburl=O.thumburl||O.imageurl.replace(/\/image\//gm,"/P150x100/");O.width=O.width||O.actualwidth;O.height=O.height||O.actualheight;if(typeof a==="object"&&a.getTTMLUrl){O.key=a.getTTMLUrl(O)}};var K=["key","exifselecteddata","filesize","actualwidth","actualheight","width","height","attachurl","exifurl","imageurl","originalurl","thumburl"];var A=function(P,O){for(name in O){if(O.hasOwnProperty(name)){if(K.contains(name)){P[name]=O[name]||""
}}}};var D=function(O,P){O.setAttribute("src",P.imageurl);if(0<P.actualwidth){O.setAttribute("actualwidth",P.actualwidth);O.setAttribute("width",P.actualwidth);O.removeAttribute("height");O.style.width="";O.style.height="";if(P.exifselecteddata){O.setAttribute("exif",P.exifselecteddata)}}};var J=function(P){if(v.msie){var O=y.find(P,"%paragraph");if(O){z.getProcessor().moveCaretTo(y.next(O,"%paragraph"),w)}}};F.attach=function(R){var Q,P,O;if(E){Q=E;E=k;P=F.getDatalist().find(function(S){return(S.key==Q.src)});if(P){if(!R.infourl&&P.data.infourl){delete P.data.infourl}C(R);A(P.data,R);D(Q,R);J(Q);P.refreshProperties();P.entryBox.modify(P)}return}F.execAttach(R)};var H=(v.msie)?"alt":"title";var N=k;z.observeJob(i.Ev.__CANVAS_PANEL_MOUSEOVER,function(P){var O=v.element(P);if(N==O){return}if(y.kindOf(O,"img.txc-image")){O.setAttribute(H,"\ub354\ube14\ud074\ub9ad\uc744 \ud558\uc2dc\uba74 \uc774\ubbf8\uc9c0\ub97c \uc218\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4");N=O}});z.observeJob(i.Ev.__CANVAS_PANEL_MOUSEOUT,function(P){var O=v.element(P);
if(y.kindOf(O,"img.txc-image")){O.removeAttribute(H);N=k}})});r.addTool("movie",{disabledonmobile:w,wysiwygonly:w,sync:d,status:d});l.addMsg({"@movie.title":"\ub3d9\uc601\uc0c1","@movielink.title":"\ub3d9\uc601\uc0c1 \ucca8\ubd80","@movie.message":"\ub3d9\uc601\uc0c1\uc774 \ucca8\ubd80\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","@movielink.prev.url":"//i1.daumcdn.net/icon/editor/img_multi.gif?v=2"});i.Tool.Movie=i.Class.create({$const:{__Identity:"movie"},$extend:i.Tool,oninitialized:function(){var e=this.editor;this.weave.bind(this)(new i.Button(this.buttonCfg),k,function(){e.getSidebar().getAttacher("movie").execute()})}});r.addAttacher("movie",{multiple:w,multipleuse:d,checksize:d,boxonly:d,wysiwygonly:w,features:{left:250,top:65,width:458,height:370,resizable:"yes",scrollbars:"no"},flashPageUrl:"#host#path/pages/daumx/movie.html",webCamFlashUrl:"http://flvs.daum.net/webcamOut.swf?service=#service",flashUrl:"http://flvs.daum.net/uploaderOut.swf?service=#tvpotCode&tvpotopen=#tvpotOpen&cate=#showCategory",uploadFlashUrl:{oldUploader:"http://flvs.daum.net/uploaderOut.swf?service=#tvpotCode&tvpotopen=#tvpotOpen&cate=#showCategory",newUploader:"http://videofarm.daum.net/controller/uploader/Uploader_V1.swf?service=#videofarmCode&cate=#showCategory&showTvpotOpen=#showTvpotOpen&isOpen=#tvpotOpen&showShareVideo=#showShareVideo&isSharingVideo=#isSharingVideo"},searchUrl:"http://tvpot.daum.net/clip/search.swf",searchMyUrl:"http://tvpot.daum.net/clip/searchMy.swf",tvpotOpen:w,showCategory:d,showTvpotOpen:d,isSharingVideo:d,showShareVideo:w,shareVideo:w,tvpotCode:"test",uploaderFlashVars:{}},function(e){var z=r.getAttacher("movie",e);
z.popPageUrl=r.getUrl(z.flashPageUrl);z.flashPageUrl=r.getUrl(z.flashPageUrl);z.webCamFlashUrl=r.getUrl(z.webCamFlashUrl,{tvpotOpen:z.tvpotOpen,tvpotCode:z.tvpotCode,showCategory:z.showCategory});if(z.videofarmCode){z.flashUrl=z.uploadFlashUrl.newUploader;z.uploaderFlashVars={service:z.videofarmCode}}z.flashUrl=r.getUrl(z.flashUrl,{tvpotOpen:z.tvpotOpen,videofarmCode:z.videofarmCode,tvpotCode:z.tvpotCode,showCategory:z.showCategory,showShareVideo:z.showShareVideo,shareVideo:z.shareVideo,showTvpotOpen:z.showTvpotOpen,isSharingVideo:z.isSharingVideo});z.searchUrl=r.getUrl(z.searchUrl,{});z.searchMyUrl=r.getUrl(z.searchMyUrl,{});z.features=r.getPopFeatures(z.features)});i.Attacher.Movie=i.Class.create({$const:{__Identity:"movie"},$extend:i.Attacher,name:"movie",title:TXMSG("@movie.title"),canModified:d,canResized:d,getKey:function(e){return e.moviekey},getDataForEntry:function(z){if(!z.dispElId){z.dispElId=i.Util.getDispElId()}if(location.protocol=="https:"){["thumburl","prevurl"].map(function(A){z[A]&&(z[A]=z[A].replace(/^http:\/\/i1\.(tvpot\.)?daumcdn\.net\//,"https://i1.daumcdn.net/"))
})}var e=((z.tmpSeq)?this.entryBox.syncSeq(z.tmpSeq):this.entryBox.newSeq());return Object.extend({dataSeq:e},z)}});i.Attachment.Movie=i.Class.create({$const:{__Identity:"movie"},$extend:i.Attachment,getFieldAttr:function(e){return{name:"tx_attach_movie",value:[e.moviekey,e.prevurl,e.playtime].join("|")}},getBoxAttr:function(e){return{name:TXMSG("@movie.message"),image:e.thumburl,className:"tx-thumb-movie"}},getSaveHtml:function(e){return'<img class="txc-movie" src="'+e.prevurl+'" moviekey="'+e.moviekey+'" type="vi"/>'},getDispHtml:function(e){return'<img id="'+e.dispElId+'" src="'+e.prevurl+'" type="vi" class="txc-movie"/>'},getDispText:function(e){return"["+TXMSG("@movie.title")+":"+e.dataSeq+"]"},getRegLoad:function(e){return new RegExp('<(?:img|IMG)[^>]*src="?'+e.prevurl.getRegExp()+'"?[^>]*/?>',"gim")},getRegHtml:function(e){return new RegExp('<(?:img|IMG)[^>]*src="?'+e.prevurl.getRegExp()+'"?[^>]*/?>',"gim")},getRegText:function(e){return new RegExp("\\["+TXMSG("@movie.title")+":"+e.dataSeq+"\\]","gim")
}});(function(e){r.addTool("map",{id:"tx_map",disabledonmobile:w,wysiwygonly:w,sync:d,status:d});l.addMsg({"@map.title":"\uc9c0\ub3c4","@map.message":"\uc9c0\ub3c4\uac00 \ucca8\ubd80\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","@map.not.support.version.ie":"\uc9c0\ub3c4 \ucca8\ubd80\ub294 IE 6.0 \uc774\uc0c1\ubc84\uc804\ubd80\ud130 \uac00\ub2a5\ud569\ub2c8\ub2e4.","@map.not.insert.position":"\ud574\ub2f9 \uc704\uce58\uc5d0\ub294 \uc9c0\ub3c4\ub97c \ucca8\ubd80\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."});e.Tool.Map=e.Class.create({$const:{__Identity:"map"},$extend:e.Tool,oninitialized:function(z){var A=this.editor;this.weave.bind(this)(new e.Button(z),k,function(){A.getSidebar().getAttacher("map").execute()})}});r.addAttacher("map",{multiple:w,multipleuse:d,checksize:d,boxonly:d,wysiwygonly:w,features:{left:250,top:65,width:808,height:540,resizable:"yes"},pageUrl:"http://attach.map.daum.net/?mode=F&appendType=O&target=opener.EditorManager.getSidebar().getAttacher('map').fAttach",iframeUrl:"http://dmaps.daum.net/map_include/map_editor/v3/iframe.html",ieSupportVer:6,mapWidthMargin:10},function(z){var A=r.getAttacher("map",z);
A.popPageUrl=r.getUrl(A.pageUrl);A.prevPageUrl=r.getUrl(A.iframeUrl);A.features=r.getPopFeatures(A.features)});e.Attacher.Map=e.Class.create({$const:{__Identity:"map"},$extend:e.Attacher,name:"map",title:TXMSG("@map.title"),canModified:d,canResized:d,oninitialized:function(){var z=this.config;this.clickHandler=function(){if(v.msie&&v.msie_ver<z.ieSupportVer){alert(TXMSG("@map.not.support.version.ie"));return}try{var C=this.canvas.getRootConfig().size;var B=C.contentWidth-(C.contentPadding*2)-(z.mapWidthMargin*2);var A=z.popPageUrl+"&attachWidth="+(B||"570");var E=j.open(A,"at"+this.name,z.features);E.focus()}catch(D){}}.bind(this);this.fAttach=this.attachHandler.bind(this)},getKey:function(z){return z.mapkey},getDataForEntry:function(A,E){A=Object.extend({},A);var C="";if(A.mapkey){if(A.mapInfo){C=v.objectToQueryString(A)}else{var D;var G=new RegExp('<(?:iframe|IFRAME)[^>]*id="?'+A.mapkey+'"?[^>]*mapdata="?([^"]+)"?[^>]*></(?:iframe|IFRAME)>',"gm");if((D=G.exec(E))!==k){C=D[1]}if(C!==""){var B=decodeURIComponent(C).toQueryParams();
if(typeof(B.mapInfo)==="string"){B=C.toQueryParams();B.mapInfo=txEval("("+B.mapInfo+")")}var H={};for(var F in B){if(F.indexOf("amp;")===0){H[F.substring(4)]=B[F]}else{H[F]=B[F]}}A=Object.extend(A,H)}else{return k}}}else{A.toJSONString=k;C=v.objectToQueryString(A);Object.extend(A,{mapkey:"emap_"+(function(){var J="";for(var I=0;I<6;I+=1){J+=Math.floor(Math.random()*(10-1+1))}return J}())})}if(!A.dispElId){A.dispElId=A.mapkey}var z=((A.tmpSeq)?this.entryBox.syncSeq(A.tmpSeq):this.entryBox.newSeq());return Object.extend({dataSeq:z,mapdata:C,prevurl:"//i1.daumcdn.net/icon/editor/img_map_"+(function(I){switch(+I){case 1:return"490360";case 2:return"400300";case 3:return"250200"}return"45035"}(A.idx))+".gif",thumburl:"//i1.daumcdn.net/icon/editor/pn_map.gif",pageUrl4View:this.config.prevPageUrl+"?id="+A.mapkey+"&amp;mapGb=V",pageUrl4Edit:this.config.prevPageUrl+"?id="+A.mapkey+"&amp;mapGb=E"},A)}});e.Attachment.Map=e.Class.create({$const:{__Identity:"map"},$extend:e.Attachment,getFieldAttr:function(z){return{name:"tx_attach_map",value:[z.mapkey].join("|")}
},getBoxAttr:function(z){return{name:TXMSG("@map.message"),image:z.thumburl}},getSaveHtml:function(B){var z=B.mapWidth,A=B.mapHeight;return'<iframe id="'+B.mapkey+'" class="txc-map" src="'+B.pageUrl4View+'" width="100%" height="'+A.toPx()+'" frameborder="0" scrolling="auto" mapdata="'+B.mapdata+'"></iframe>'},getDispHtml:function(B){var z=B.mapWidth,A=B.mapHeight;if(v.msie){return'<iframe id="'+B.mapkey+'" src="'+B.pageUrl4Edit+'" class="txc-map tx-unresizable" width="100%" height="'+A.toPx()+'" frameborder="0" scrolling="auto" mapdata="'+B.mapdata+'"></iframe>'}else{return'<img id="'+B.mapkey+'" src="'+B.prevurl+'" type="map" class="txc-map tx-unresizable"/>'}},getDispText:function(z){return"["+TXMSG("@map.title")+":"+z.dataSeq+"]"},getRegLoad:function(z){return new RegExp('<(?:iframe|IFRAME)[^>]*id="?'+z.mapkey+'"?[^>]*mapdata="?([^"]+)"?[^>]*></(?:iframe|IFRAME)>',"gm")},getRegHtml:function(z){if(v.msie){return new RegExp('<(?:iframe|IFRAME)[^>]*id="?'+z.mapkey+'"?[^>]*mapdata="?([^"]+)"?[^>]*></(?:iframe|IFRAME)>',"gm")
}else{return new RegExp('<(?:img|IMG)[^>]*id="?'+z.mapkey+'"?[^>]*type="?map"?[^>]*/?>',"gm")}},getRegText:function(z){return new RegExp("\\["+TXMSG("@map.title")+":"+z.dataSeq+"\\]","gm")},exchangeHandlerAtReload:function(){if(!this.data.mapkey||!this.canvas.isWYSIWYG()){return}var A;var z=this.canvas.getContent();if(v.msie){A=new RegExp('<(?:img|IMG)[^>]*id="?'+this.data.mapkey+'"?[^>]*type="?map"?[^>]*/?>',"gm")}else{A=new RegExp('<(?:iframe|IFRAME)[^>]*id="?'+this.data.mapkey+'"?[^>]*></(?:iframe|IFRAME)>',"gm")}if(z.search(A)>-1){z=z.replace(A,this.dispHtml);this.canvas.setContent(z)}}});j.EditorManager={getSidebar:function(){return Editor.getSidebar()}}})(i);r.addEmbeder("media",{popPageUrl:"#host#path/pages/daumx/multimedia.html",allowNetworkingFilter:w,allowNetworkingSites:[{host:"www.youtube.com"},{host:"youtube.com"},{host:"api.v.daum.net"},{host:"tvpot.daum.net"},{host:"dmaps.daum.net"},{host:"flvs.daum.net"},{host:"photo-contents.daum-img.net"},{host:"serviceapi.nmv.naver.com"},{host:"v.nate.com"},{host:"flvr.pandora.tv"},{host:"videofarm.daum.net"}]});
l.addMsg({"@canvas.unload.message":"\uc9c0\uae08\uae4c\uc9c0 \uc791\uc131\ub41c \uae00\uc740 \uc548\uc804\ud558\uac8c \uc790\ub3d9 \uc800\uc7a5\ub418\uc5b4, \ud68c\uc6d0\ub2d8\uc774 \ub2e4\uc2dc \uae00\uc4f0\uae30 \ud558\uc2e4 \ub54c \ubd88\ub7ec\uc62c \uc218 \uc788\uc2b5\ub2c8\ub2e4.","@canvas.unload.message.at.modify":"\uc9c0\uae08\uae4c\uc9c0 \uc791\uc131\ub41c \uae00\uc740 \uc548\uc804\ud558\uac8c \uc790\ub3d9 \uc800\uc7a5\ub418\uc5b4, \ud68c\uc6d0\ub2d8\uc774 \ub2e4\uc2dc \uc218\uc815\ud558\uc2e4 \ub54c \ubd88\ub7ec\uc62c \uc218\uc788\uc2b5\ub2c8\ub2e4."});i.module("fixed editor height for tistory UI",function(D,G,e,z,A){var B=false,E=-1,F=100,C;C=function(){var H,K,I,J;if(B||E<F){return}H=D.getWrapper().offsetHeight;K=E-H;if(K){I=z.getCurrentPanel();J=I.getPosition().height;J+=K;I.setPanelHeight(J);if(D.__PANEL_LOADED){z.fireJobs(i.Ev.__CANVAS_HEIGHT_CHANGE,J)}}};z.observeJob("canvas.fullscreen.change",function(){B=true});z.observeJob("canvas.normalscreen.change",function(){B=false;
C()});z.observeJob(i.Ev.__CANVAS_MODE_CHANGE,function(){setTimeout(C,1)});G.observeJob("toolbar.advanced.spread",C);G.observeJob("toolbar.advanced.fold",C);D.setFixedEditorHeight=function(H){E=H;C()}});i.module("prolong the session",function(){setInterval(function(){try{var z=v("tx_daumtrans");z.src="https://logins.daum.net/accounts/auth.gif?dummy="+new Date().getTime()}catch(A){}},15*60*1000)});(function(){var E="http://tiara.daum.net/tiara.front/front/click/";var B="http://group1.magpie.daum.net/magpie/put/daumeditor_runtime";var A="http://group1.magpie.daum.net/magpie/opencounter/Open.do?service=daum_editor&key=";if(typeof __TX_GLOBAL==s+""){j.__TX_GLOBAL={}}var C=Math.floor(Math.random()*100000);__TX_GLOBAL.session_id=C;function D(F){if(location.protocol=="https:"&&F.indexOf("http:")==0){return}setTimeout(function(){var G=new Image();G.onerror=function(){G=k};G.onload=function(){G=k};G.src=F},50)}var z=false;function e(G,F,J,I){I=I||false;if(z||I){var H=Math.floor(Math.random()*100000);
D([E,H,"?dummy=",H,"&referer=http%3A%2F%2Feditor.daum.net%2F",G,"%2F&url=http://editor.daum.net/?","t__nil_"+F+"="+J].join(""))}}i.module("Logging for editor stat",function(H,I,J,G,F){var K=F.txProject||F.txService||"sample";G.observeJob(i.Ev.__IFRAME_LOAD_COMPLETE,function(){e(K,"editor_stat","loading");if(Editor.version){e("_version",K,(Editor.version||"").replace(/-/g,"."),true)}});G.observeJob(i.Ev.__ON_SUBMIT,function(){e(K,"editor_stat","submit")})});i.module("Error Logging for editor",function(H,I,K,G,F){var L=F.txProject||F.txService||"sample";function J(M){if(M){return encodeURIComponent(M.replace(/\//g,"-"))}else{return""}}H.observeJob(i.Ev.__RUNTIME_EXCEPTION,function(N){var M;if(N&&N.message){M=J(N.fileName+"["+N.lineNumber+"]_"+N.message)}else{M=J(N+"")}try{}catch(O){}D([B,"?http_user-agent&http_referer&req_remoteip","&service="+L,"&message="+M,"&txsid="+C].join(""))});H.observeJob(i.Ev.__IFRAME_LOADING_TIME,function(M){e(L,"loadingtime",M)})});i.module("Click Logging for editor",function(H,I,J,G,F){var K=F.txProject||F.txService||"sample";
I.observeJob(i.Ev.__TOOL_CLICK,function(L,N){var M="";if(J.attachers&&!!J.attachers[L]){M="multimedia"}else{if(J.embeders&&!!J.embeders[L]){M="multimedia"}else{if(J.searchers&&!!J.searchers[L]){M="info"}else{if(I.tools&&!!I.tools[L]){if(N&&N.type&&N.type.indexOf("key")>-1){return}M="toolbar"}}}}e(K,M,L)})});i.module("Tool executed by shortcut key Logging",function(H,I,J,G,F){I.observeJob(i.Ev.__TOOL_SHORTCUT_KEY,function(K){var L=F.txProject||F.txService||"sample";e(L,"toolbar",K)})});i.module("Searching Logging for editor",function(H,I,J,G,F){var K=F.txProject||F.txService||"sample";H.observeJob(i.Ev.__PASTE_SEARCHRESULT,function(N,L){var M="infoinsert";e(K,M,N+"_"+L)})});i.module("Magpie Reporting for editor",function(H,I,J,G,F){var K=F.txProject||F.txService||"sample";H.observeJob(i.Ev.__REPORT_TO_MAGPIE,function(L){D([A,L,"&referer=http%3A%2F%2Feditor.daum.net%2F",K].join(""))})})})();i.install("editor.interceptSearcher & editor.interceptAttacher",function(e,z,A){e.interceptSearcher=function(E,C){if(C){var F=A.getSearcher(C);
F.insertHandler=E}else{var B=A.getSearcher();for(var D in B){B[D].insertHandler=E}}};e.interceptAttacher=function(E,F){if(F){var C=A.getAttacher(F);C.attachHandler=E}else{var B=A.getAttacher();for(var D in B){B[D].attachHandler=E}}}});i.module("change attachment input handler",function(A,B,C,e){var z={};e.observeJob(i.Ev.__IFRAME_LOAD_COMPLETE,function(){var E=C.getAttacher();var F;for(F in E){z[F]=E[F].attachHandler}var D=C.getSearcher();for(F in D){z[F]=D[F].insertHandler}});B.observeJob(i.Ev.__TOOL_CLICK,function(){var E=C.getAttacher();var F;for(F in E){if(z[F]){E[F].attachHandler=z[F]}}var D=C.getSearcher();for(F in D){D[F].insertHandler=z[F]}})});i.module("apply background to wysiwyg holder",function(A,B,C,e){var z=A.getConfig().skin;if(!z){return}var D;e.observeJob(i.Ev.__IFRAME_LOAD_COMPLETE,function(){D=tx.div({style:{position:"absolute",top:(v.msie6?"1px":"0"),left:"0",width:"100%",height:"400px",zIndex:"-200",overflow:"hidden"}});var F=e.getPanel(i.Canvas.__WYSIWYG_MODE);F.el.parentNode.insertBefore(D,F.el);
try{v.setStyle(D,z)}catch(E){}});e.observeJob(i.Ev.__CANVAS_HEIGHT_CHANGE,function(E){v.setStyle(D,{height:E.toPx()})})});i.module("setting width at layout with editor width",function(C,F,e,A){var z=A.getSizeConfig();if(!z){return}var E=z.contentWidth;var B=z.contentPadding;var D=(E-B)-2*2;var G=C.getSidebar().getEmbeder("layout");if(!G){return}G.config.tablewidth=D});i.module("observe event at upload button in layout table",function(B,J,K,A,T){var L=56;var Q=21-1;var M;var P=0;var S=0;var H=k;var C=k;var F=k;var O=function(U,V){M.style.top=(U+S).toPx();M.style.left=V.toPx()};var N=function(X){if(!X){return}if(y.kindOf(X,"img.txc-image")){var Y=y.find(X,"td,th");if(Y&&Y.className=="txc-layout-image"){var V=y.find(X,"table.txc-layout-wz")||y.find(X,"table.txc-layout-tb");if(V&&V.className=="txc-layout-wz"){var U=A.getPositionByNode(X);if(U.width>0&&U.height>0){var W=d;if(U.y<0&&U.y+U.height>P){O((P-Q)/2,U.x+(U.width-L)/2);W=w}else{if(U.y>0&&U.y+U.height<P){O(U.y+(U.height-Q)/2,U.x+(U.width-L)/2);
W=w}else{if(U.y<0&&U.height+U.y-Q>0){O((U.height+U.y-Q)/2,U.x+(U.width-L)/2);W=w}else{if(U.y>0&&P-U.y-Q>0){O(U.y+(P-U.y-Q)/2,U.x+(U.width-L)/2);W=w}}}}if(W){H=X;F=V;v.show(M);return}}}}}H=k;F=k;v.hide(M)};var e=i.Tool.Layout.__Message;var z=(e.IMAGE)?e.IMAGE.src:"#";var R=k;var D=k;var I=K.getAttacher("image");if(I){var E=I.execAttach.bind(I);I.execAttach=function(aa,Y){var ab=function(ad,ac){ad.src=ac;y.removeAttributes(ad,"height");v.removeClassName(ad,"txc-notexists");if(ad.style.height){ad.style.height=""}};if(!D||!D.firstChild||!D.offsetParent){D=k;R=k;E(aa,Y);return}if(D&&!R){var Z=y.collectAll(D,"img.txc-image");if(Z){for(var W=0;W<Z.length;W++){if(Z[W].src==z){R=Z[W];break}}}}if(R&&R.offsetParent){var V=I.createEntry(I.getDataForEntry(aa),Y);var U=V.register;V.register=function(){ab(R,aa.imageurl)};V.execRegister();V.register=U}else{var X=A.getProcessor();X.moveCaretTo(y.top(y.next(D,"%element")));D=k;E(aa,Y)}R=k}}var G=function(){if(!I){return}if(!H||!F){return}R=H;D=F;I.execute();
return d};A.observeElement({tag:"body"},function(){D=k;R=k});A.observeJob(i.Ev.__CANVAS_HEIGHT_CHANGE,function(U){P=U.parsePx()});A.observeJob("canvas.apply.background",function(){var V=A.getPanel(i.Canvas.__WYSIWYG_MODE);var U=y.getPosition(V.el);S=U.y});A.reserveJob(i.Ev.__IFRAME_LOAD_COMPLETE,function(){var W=A.getPanel(i.Canvas.__WYSIWYG_MODE);P=W.getPanelHeight().parsePx()||T.canvas.initHeight;var U=y.getPosition(W.el);S=U.y;var V=A.wysiwygEl;M=tx.a({href:"javascript:;",className:"tx-layout-upload-btn"},"\uc774\ubbf8\uc9c0\uc5c5\ub85c\ub4dc");V.insertBefore(M,V.firstChild);v.observe(M,"click",G,d)},300);A.observeJob(i.Ev.__CANVAS_PANEL_SCROLLING,function(){if(H){N(H)}else{if(C){N(C)}}});A.observeJob(i.Ev.__CANVAS_PANEL_MOUSEOVER,function(V){var U=v.element(V);if(H!=U){N(U)}});A.observeJob(i.Ev.__CANVAS_IMAGE_PLACEHOLDER_DBLCLICK,function(W){var U=v.element(W);if(U){H=U;var V=v.findElement(W,"table");if(V){F=V;G()}}})});i.module("observe event at text field in layout table",function(E,G,e,B){var z=new i.Validator();
var D=i.Tool.Layout.__Message;var C="";var A=function(I){I.innerHTML=new LayoutTemplate(C).evaluate(D,w);var J=B.getProcessor();setTimeout(function(){J.moveCaretTo(I)})};var F=d;B.observeElement({tag:"body"},function(){F=d});var H=function(I,J){B.observeElement(I,function(K){F=w;var M=k;if(D[J]){M="#{"+J;if(K.firstChild&&K.firstChild.className){var L=K.firstChild.className.replace(/txc-notexists/,"");M+="|class="+L}M+="}"}C=M;if(z.equals(K.innerHTML,D[J]["#"])){A(K)}})};H({tag:"td",klass:"txc-layout-details"},"CONTENTS");H({tag:"td",klass:"txc-layout-list"},"LIST");if(v.msie){B.observeElement({tag:"p",klass:"txc-index"},function(I){var J=B.getProcessor();J.moveCaretTo(I)})}});i.module("getting content with background and loading content with background",function(B,C,D,A,z){var F="";var e=function(G){if(Editor.__PANEL_LOADED){B.getToolbar().tools.back.execute(G)}else{setTimeout(function(){e(G)},300)}};B.getContentWithBackground=function(){var T=B.getContent();var G=C.tools.back.getBackConfig();
var N=C.tools.back.getBasicCellStyle();var X=function(Y){if(!Y||Y=="none"){return""}else{return"url("+Y+")"}};var Q=tx.div({id:"tx_background_container",className:"tx-content-container",style:{padding:0,margin:0,color:F||A.getStyleConfig().color||"#333"}});var V=tx.table({cellSpacing:0,cellPadding:0,width:"100%"});var M=tx.tr();var K=tx.td({colSpan:"3"},tx.div({id:"tx_background_cell1",style:Object.extend(N.cell1.style,{width:G.topLeftWidth||0,height:G.topLeftHeight||0,backgroundImage:X(G.topLeftImage)})}),tx.div({id:"tx_background_cell2",style:Object.extend(N.cell2.style,{width:G.topRightWidth||0,height:G.topRightHeight||0,backgroundImage:X(G.topRightImage)})}),tx.div({id:"tx_background_cell3",style:Object.extend(N.cell3.style,{paddingTop:G.topCenterHeight||0,marginLeft:G.topLeftWidth||0,marginRight:G.topRightWidth||0,backgroundImage:X(G.topCenterImage)})}));M.appendChild(K);var U=tx.tr();var I=tx.td({id:"tx_background_cell4",style:{backgroundRepeat:"repeat-y",width:G.midLeftWidth||0,display:(X(G.midLeftImage))?"":"none",backgroundImage:X(G.midLeftImage)}},tx.div({style:{width:G.midLeftWidth||0}}));
var P=tx.td({id:"tx_background_cell5",style:{backgroundColor:"transparent",backgroundRepeat:G.backgroundRepeat||"repeat",backgroundImage:X(G.midCenterImage),backgroundPosition:G.backgroundPosition||"0 50%"}});var H=tx.div({id:"tx_background_content",style:{position:"relative"}},tx.div({id:"tx_background_content_inner",style:{padding:"0"}},"#CONTENT"),"#OPACITY");var R='<div id="tx_background_opacity"  style="position:absolute; left:0; top:0; height:100%; z-index:-1; width: 100%;background-color:'+(G.backgroundColor||"transparent")+";background-image:"+X(G.backgroundImage)+";background-repeat:"+(G.backgroundRepeat||"repeat")+";background-position:"+(G.backgroundPosition||"left top")+";opacity: "+(G.opacity||"")+";filter: "+(G.opacity?"alpha(opacity="+100*G.opacity+")":"")+";border-color: "+(G.borderColor||"transparent")+";border-width: "+(G.borderWidth||"0")+";border-style: "+(G.borderStyle||"")+';"></div>';P.appendChild(H);var S=tx.td({id:"tx_background_cell6",style:{backgroundRepeat:"repeat-y",width:G.midRightWidth||0,display:(X(G.midRightImage))?"":"none",backgroundImage:X(G.midRightImage)}},tx.div({style:{width:G.midRightWidth||0}}));
U.appendChild(I);U.appendChild(P);U.appendChild(S);var L=tx.tr();var J=tx.td({colSpan:"3"},tx.div({id:"tx_background_cell7",style:Object.extend(N.cell7.style,{width:G.botLeftWidth||0,height:G.botLeftHeight||0,backgroundImage:X(G.botLeftImage)})}),tx.div({id:"tx_background_cell8",style:Object.extend(N.cell8.style,{width:G.botRightWidth||0,height:G.botRightHeight||0,backgroundImage:X(G.botRightImage)})}),tx.div({id:"tx_background_cell9",style:Object.extend(N.cell9.style,{paddingTop:G.botCenterHeight||0,marginLeft:G.botLeftWidth||0,marginRight:G.botRightWidth||0,backgroundImage:X(G.botCenterImage)})}));L.appendChild(J);V.appendChild(M);V.appendChild(U);V.appendChild(L);Q.appendChild(V);var W=tx.div();W.appendChild(Q);var O=W.innerHTML;return O.replaceAll("#OPACITY",R).replaceAll("#CONTENT",T)};B.getBackgroundAttr=function(){var G=C.tools.back.getBackConfig();return JSON.stringify(G)};var E={findFirstIndexOfContent:function(H){var G=/tx_background_content_inner[^>]*>/gim;G.exec(H);return G.lastIndex
},findLastIndexOfContent:function(H){var G=/<\/div><div[^>]*id="?tx_background_opacity/gim;G.exec(H);return G.lastIndex},getContent:function(J){var I=J;var G=this.findFirstIndexOfContent(I);var K=this.findLastIndexOfContent(I);if(!G&&!K){return""}else{I=I.substring(G,K);var H=/<\/div><div[^>]*id="?tx_background_opacity/gim;I=I.replace(H,"");return I}}};B.modifyWithBackground=function(N){var H=E.getContent(N.content);if(H){var J=N.content;N.content=H;try{J=J.replace(H,"");var G=tx.div({style:{display:"none"}},J);c.body.appendChild(G)}catch(K){}var M={container:v("tx_background_container"),cell1:v("tx_background_cell1"),cell2:v("tx_background_cell2"),cell3:v("tx_background_cell3"),cell4:v("tx_background_cell4"),cell5:v("tx_background_cell5"),cell6:v("tx_background_cell6"),cell7:v("tx_background_cell7"),cell8:v("tx_background_cell8"),cell9:v("tx_background_cell9"),opacity:v("tx_background_opacity")};var I={topLeftImage:v.getStyle(M.cell1,"backgroundImage")||"",topLeftWidth:v.getStyle(M.cell1,"width")||"",topLeftHeight:v.getStyle(M.cell1,"height")||"",topCenterImage:v.getStyle(M.cell3,"backgroundImage")||"",topCenterHeight:v.getStyle(M.cell3,"paddingTop")||"",topRightImage:v.getStyle(M.cell2,"backgroundImage")||"",topRightWidth:v.getStyle(M.cell2,"width")||"",topRightHeight:v.getStyle(M.cell2,"height")||"",midLeftImage:v.getStyle(M.cell4,"backgroundImage")||"",midLeftWidth:v.getStyle(M.cell4,"width")||"",midCenterImage:v.getStyle(M.cell5,"backgroundImage")||"",midRightImage:v.getStyle(M.cell6,"backgroundImage")||"",midRightWidth:v.getStyle(M.cell6,"width")||"",botLeftImage:v.getStyle(M.cell7,"backgroundImage")||"",botLeftWidth:v.getStyle(M.cell7,"width")||"",botLeftHeight:v.getStyle(M.cell7,"height")||"",botCenterImage:v.getStyle(M.cell9,"backgroundImage")||"",botCenterHeight:v.getStyle(M.cell9,"paddingTop")||"",botRightImage:v.getStyle(M.cell8,"backgroundImage")||"",botRightWidth:v.getStyle(M.cell8,"width")||"",botRightHeight:v.getStyle(M.cell8,"height")||"",backgroundImage:v.getStyle(M.opacity,"backgroundImage")||"",backgroundRepeat:v.getStyle(M.opacity,"backgroundRepeat")||"",backgroundPosition:v.getStyle(M.opacity,"backgroundPosition")||"",backgroundColor:v.getStyle(M.opacity,"backgroundColor")||"transparent",borderColor:v.getStyle(M.opacity,"borderTopColor")||"transparent",borderStyle:v.getStyle(M.opacity,"borderTopStyle")||"",borderWidth:v.getStyle(M.opacity,"borderTopWidth")||"0",opacity:v.getStyle(M.opacity,"opacity")||1};
var L=parseInt(I.borderWidth);if(L==0||isNaN(L)){I.borderWidth=0;I.borderColor="transparent"}["topLeftImage","topCenterImage","topRightImage","midLeftImage","midCenterImage","midRightImage","botLeftImage","botCenterImage","botRightImage","backgroundImage"].each(function(O){var P=/^url\((.*)\)$/i;I[O]=I[O].replace(P,"$1")});e(I)}else{if(z.toolbar.back.oldBackgroundColor){e({backgroundColor:z.toolbar.back.oldBackgroundColor,backgroundImage:"",borderStyle:"none",borderColor:"transparent",borderWidth:"0",opacity:"1"})}}try{c.body.removeChild(G)}catch(K){}Editor.modify(N);return w}});(function(){var e="#cdnhost/view/webfont/5.7/";r.addTool("fontfamily",{webfont:{use:d,options:[{label:'\ub9ad\uc2a4\uaf2c\uaf2c\ub9c8 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ub9ad\uc2a4\uaf2c\uaf2c\ub9c8",data:"RixKidD",klass:"tx-RixKidD",url:e+"RixKidD.css"},{label:'\ub9ad\uc2a4\uc77c\uc694\uc77c\ub9d1\uc74c <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ub9ad\uc2a4\uc77c\uc694\uc77c\ub9d1\uc74c",data:"RixShinySundayD",klass:"tx-RixShinySundayD",url:e+"RixShinySundayD.css"},{label:'\uc724\ub9c8\uc774\ub2ec\ub9c1 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc724\ub9c8\uc774\ub2ec\ub9c1",data:"YDmydarling",klass:"tx-YDmydarling",url:e+"YDmydarling.css"},{label:'\uc724\ubd80\ub044\ubd80\ub044 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc724\ubd80\ub044\ubd80\ub044",data:"YDboo",klass:"tx-YDboo",url:e+"YDboo.css"},{label:'\uc724\uc18c\ub140\uc9c0\ubabd <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc724\uc18c\ub140\uc9c0\ubabd",data:"YDgirl",klass:"tx-YDgirl",url:e+"YDgirl.css"},{label:'\ud55c\uc591\uaf2c\ub9c8\ub3d9\ubb34 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\uaf2c\ub9c8\ub3d9\ubb34",data:"HYchild",klass:"tx-HYchild",url:e+"HYchild.css"},{label:'\ud55c\uc591\ub2ec\ucf64\ubc00\ud06c\ud2f0 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\ub2ec\ucf64\ubc00\ud06c\ud2f0",data:"HYmilk",klass:"tx-HYmilk",url:e+"HYmilk.css"},{label:'\ud55c\uc591\ubaa8\ub358\ud0c0\uc7842 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\ubaa8\ub358\ud0c0\uc7842",data:"HYmodern2",klass:"tx-HYmodern2",url:e+"HYmodern2.css"},{label:'\ud55c\uc591\ubc1c\uafb8\ub77d <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\ubc1c\uafb8\ub77d",data:"HYtoe",klass:"tx-HYtoe",url:e+"HYtoe.css"},{label:'\ud55c\uc591\ubca0\uc774\ube44\ud551\ud06c <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\ubca0\uc774\ube44\ud551\ud06c",data:"HYbaby",klass:"tx-HYbaby",url:e+"HYbaby.css"},{label:'\ud55c\uc591\uc218\ud638\ucc9c\uc0ac <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\uc218\ud638\ucc9c\uc0ac",data:"HYangela",klass:"tx-HYangela",url:e+"HYangela.css"},{label:'\ud55c\uc591\uc548\ub155\ubd04\uc544 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\uc548\ub155\ubd04\uc544",data:"HYhispring",klass:"tx-HYhispring",url:e+"HYhispring.css"},{label:'\ud55c\uc591\uc5ec\uc6b0\ube44 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\uc5ec\uc6b0\ube44",data:"HYfox",klass:"tx-HYfox",url:e+"HYfox.css"},{label:'\ud55c\uc591\uc824\ub9ac\ucfe0\ud0a4 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\uc824\ub9ac\ucfe0\ud0a4",data:"HYcookie",klass:"tx-HYcookie",url:e+"HYcookie.css"},{label:'\ud55c\uc591\uccad\ubc14\uc9c0 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\uccad\ubc14\uc9c0",data:"HYcheongbaji",klass:"tx-HYcheongbaji",url:e+"HYcheongbaji.css"},{label:'\ud55c\uc591\ud589\ubcf5\ub0a0\uac1c <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\ud589\ubcf5\ub0a0\uac1c",data:"HYwing",klass:"tx-HYwing",url:e+"HYwing.css"},{label:'\ud55c\uc591\ud5c8\ub2c8\ub808\ubaac <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\ud5c8\ub2c8\ub808\ubaac",data:"HYhoney",klass:"tx-HYhoney",url:e+"HYhoney.css"},{label:'\uc0b0\ub3cc\uad11\uc218\ub610\ub798 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uad11\uc218\ub610\ub798",data:"SDWebKSDdorae",klass:"tx-SDWebKSDdorae",url:e+"SDWebKSDdorae.css"},{label:'\uc0b0\ub3cc\ub098\ubb34\uc5f0\ud544 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ub098\ubb34\uc5f0\ud544",data:"SDWebTreePencil",klass:"tx-SDWebTreePencil",url:e+"SDWebTreePencil.css"},{label:'\uc0b0\ub3cc\ub2e4\uc774\uc5b4\ub9ac <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ub2e4\uc774\uc5b4\ub9ac",data:"SDWebDiary2",klass:"tx-SDWebDiary2",url:e+"SDWebDiary2.css"},{label:'\uc0b0\ub3cc\ub7ec\ube14\ub9ac\uac78 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ub7ec\ube14\ub9ac\uac78",data:"SDWebLovelyGirl",klass:"tx-SDWebLovelyGirl",url:e+"SDWebLovelyGirl.css"},{label:'\uc0b0\ub3cc\ub8f0\ub8e8\ub784\ub77c <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ub8f0\ub8e8\ub784\ub77c",data:"SDWebLuluLala",klass:"tx-SDWebLuluLala",url:e+"SDWebLuluLala.css"},{label:'\uc0b0\ub3cc\ub9c8\ub2c8\ub610 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ub9c8\ub2c8\ub610",data:"SDWebManitto",klass:"tx-SDWebManitto",url:e+"SDWebManitto.css"},{label:'\uc0b0\ub3cc\ubabd\uae00\ubabd\uae00 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ubabd\uae00\ubabd\uae00",data:"SDWebMonggle",klass:"tx-SDWebMonggle",url:e+"SDWebMonggle.css"},{label:'\uc0b0\ub3cc\ubbfc\ub4e4\ub808 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ubbfc\ub4e4\ub808",data:"SDWebMindlre",klass:"tx-SDWebMindlre",url:e+"SDWebMindlre.css"},{label:'\uc0b0\ub3cc\ubca0\uc774\ube44\ub85c\uc158 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ubca0\uc774\ube44\ub85c\uc158",data:"SDWebBabyLotion",klass:"tx-SDWebBabyLotion",url:e+"SDWebBabyLotion.css"},{label:'\uc0b0\ub3cc\ube68\uac04\ud48d\uc120 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ube68\uac04\ud48d\uc120",data:"SDWebRedBalloon",klass:"tx-SDWebRedBalloon",url:e+"SDWebRedBalloon.css"},{label:'\uc0b0\ub3cc\ubf40\uc1a1\ub0a0\uac1c <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ubf40\uc1a1\ub0a0\uac1c",data:"SDWebBbosongWing",klass:"tx-SDWebBbosongWing",url:e+"SDWebBbosongWing.css"},{label:'\uc0b0\ub3cc\uc058\ub760\uacf5\uc8fc <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc058\ub760\uacf5\uc8fc",data:"SDWebPetitPrincess",klass:"tx-SDWebPetitPrincess",url:e+"SDWebPetitPrincess.css"},{label:'\uc0b0\ub3cc\uc0ac\ub791\ube44 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc0ac\ub791\ube44",data:"SDWebLoveRain",klass:"tx-SDWebLoveRain",url:e+"SDWebLoveRain.css"},{label:'\uc0b0\ub3cc\uc0ac\ub791\uc1a1\uc774 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc0ac\ub791\uc1a1\uc774",data:"SDWebSongi",klass:"tx-SDWebSongi",url:e+"SDWebSongi.css"},{label:'\uc0b0\ub3cc\uc0c8\uc2f9\ud558\ud2b8 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc0c8\uc2f9\ud558\ud2b8",data:"SDWebSeassak",klass:"tx-SDWebSeassak",url:e+"SDWebSeassak.css"},{label:'\uc0b0\ub3cc\uc0c8\uce68\uc219\ub140 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc0c8\uce68\uc219\ub140",data:"SDWebSaechimGirl",klass:"tx-SDWebSaechimGirl",url:e+"SDWebSaechimGirl.css"},{label:'\uc0b0\ub3cc\uc138\uac00\uc9c0\uc18c\uc6d0 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc138\uac00\uc9c0\uc18c\uc6d0",data:"SDWebWish",klass:"tx-SDWebWish",url:e+"SDWebWish.css"},{label:'\uc0b0\ub3cc\uc544\uce68\ud587\uc0b4 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc544\uce68\ud587\uc0b4",data:"SDWebMorning",klass:"tx-SDWebMorning",url:e+"SDWebMorning.css"},{label:'\uc0b0\ub3cc\uc5b4\ub9b0\uc774\ub9cc\ud654 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc5b4\ub9b0\uc774\ub9cc\ud654",data:"SDWebKidsCartoon",klass:"tx-SDWebKidsCartoon",url:e+"SDWebKidsCartoon.css"},{label:'\uc0b0\ub3cc\uc694\uc220\uc9c0\ud321\uc774 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc694\uc220\uc9c0\ud321\uc774",data:"SDWebMagicStick",klass:"tx-SDWebMagicStick",url:e+"SDWebMagicStick.css"},{label:'\uc0b0\ub3cc\uc77c\uae30\uc608\ubcf4 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc77c\uae30\uc608\ubcf4",data:"SDWebWeather",klass:"tx-SDWebWeather",url:e+"SDWebWeather.css"},{label:'\uc0b0\ub3cc\uc885\uc774\ud559 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc885\uc774\ud559",data:"SDWebHak",klass:"tx-SDWebHak",url:e+"SDWebHak.css"},{label:'\uc0b0\ub3cc\ud478\ub978\ub9c8\uc74c <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ud478\ub978\ub9c8\uc74c",data:"SDWebGreenMind",klass:"tx-SDWebGreenMind",url:e+"SDWebGreenMind.css"},{label:'\uc0b0\ub3cc\ud574\ud53c\ub370\uc774 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ud574\ud53c\ub370\uc774",data:"SDWebHappy",klass:"tx-SDWebHappy",url:e+"SDWebHappy.css"},{label:'\uc0b0\ub3cc\ud574\ud53c\uc2a4\uc704\ud2f0 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ud574\ud53c\uc2a4\uc704\ud2f0",data:"SDWebSweety",klass:"tx-SDWebSweety",url:e+"SDWebSweety.css"},{label:'\uc0b0\ub3cc\ubd90\ubd90 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ubd90\ubd90",data:"nSDWebBoom09",klass:"tx-nSDWebBoom09",expired:w,url:e+"SDWebBoom.css"},{label:'\uc0b0\ub3cc\ub610\ub798\ub625 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ub610\ub798\ub625",data:"nSDWebKSDdong09",klass:"tx-nSDWebKSDdong09",expired:w,url:e+"SDWebKDdong.css"},{label:'\ud55c\uc591\uccad\ubc14\uc9c0 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\uccad\ubc14\uc9c0",data:"061129_HYCBJ",klass:"tx-061129_HYCBJ",expired:w,url:e+"HYcbj.css"},{label:'\ud55c\uc591\ud734\uba3c\uc5fd\uc11c <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\ud734\uba3c\uc5fd\uc11c",data:"HMYS",klass:"tx-HMYS",expired:w,url:e+"HYhmpost.css"},{label:'MD\uc5ec\uc6b0\ubcc4 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"MD\uc5ec\uc6b0\ubcc4",data:"MD_foxstar_9",klass:"tx-MD_foxstar_9",expired:w,url:e+"MD_foxstar.css"},{label:'MD\ub7ec\ube0c\uc9f1 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"MD\ub7ec\ube0c\uc9f1",data:"MD_lovejjang_9",klass:"tx-MD_lovejjang_9",expired:w,url:e+"MD_lovejjang.css"},{label:'\uc0b0\ub3cc\ubd90\ubd90 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ubd90\ubd90",data:"SDWebBoom",klass:"tx-nSDWebBoom09",expired:w,url:e+"SDWebBoom.css"},{label:'\uc0b0\ub3cc\ub610\ub798\ub625 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ub610\ub798\ub625",data:"SDWebKDdong",klass:"tx-nSDWebKSDdong09",expired:w,url:e+"SDWebKDdong.css"},{label:'\ud55c\uc591\uccad\ubc14\uc9c0 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\uccad\ubc14\uc9c0",data:"HYcbj",klass:"tx-HYcbj",expired:w,url:e+"HYcbj.css"},{label:'\ud55c\uc591\ud734\uba3c\uc5fd\uc11c <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\ud734\uba3c\uc5fd\uc11c",data:"HYhmpost",klass:"tx-HMYS",expired:w,url:e+"HYhmpost.css"},{label:'MD\uc5ec\uc6b0\ubcc4 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"MD\uc5ec\uc6b0\ubcc4",data:"MD_foxstar",klass:"tx-MD_foxstar",expired:w,url:e+"MD_foxstar.css"},{label:'MD\ub7ec\ube0c\uc9f1 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"MD\ub7ec\ube0c\uc9f1",data:"MD_lovejjang",klass:"tx-MD_lovejjang",expired:w,url:e+"MD_lovejjang.css"},{label:'\ub9ad\uc2a4\ub3c5\ub3c4 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ub9ad\uc2a4\ub3c5\ub3c4",data:"RixDokdo",klass:"tx-RixDokdo",expired:w,url:e+"RixDokdo.css"},{label:'\ub9ad\uc2a4\ud558\ud2b8 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ub9ad\uc2a4\ud558\ud2b8",data:"RixHeart",klass:"tx-RixHeart",expired:w,url:e+"RixHeart.css"},{label:'\uc724\uccad\ucd98 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc724\uccad\ucd98",data:"YDChungchun",klass:"tx-YDChungchun",expired:w,url:e+"YDChungchun.css"},{label:'\uc724\ud310\ud654 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc724\ud310\ud654",data:"YDPanhwa",klass:"tx-YDPanhwa",expired:w,url:e+"YDPanhwa.css"}]}})
})();i.module("reloading web font at canvas mode to 'wysiwyg'",function(A,B,C,z,e){z.observeJob(i.Ev.__CANVAS_MODE_CHANGE,function(D,E){if(D===i.Canvas.__HTML_MODE&&E===i.Canvas.__WYSIWYG_MODE){z.includeWebfontCss(z.getContent())}})});r.addTool("formula",{disabledonmobile:w,wysiwygonly:w,sync:d,status:d});l.addMsg({"@formula.title":"\uc218\uc2dd\ud3b8\uc9d1\uae30","@formula.not.support.ver":"\uc218\uc2dd \ud3b8\uc9d1\uae30\ub294 \uc775\uc2a4\ud50c\ub85c\ub7ec \uc5d0\uc11c \uc0ac\uc6a9\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.","@formula.modify.tooltip":"\ub354\ube14\ud074\ub9ad\uc744 \ud558\uc2dc\uba74 \uc218\uc2dd\uc744 \uc218\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."});i.Tool.Formula=i.Class.create({$const:{__Identity:"formula"},$extend:i.Tool,oninitialized:function(){var e=this.editor;this.weave.bind(this)(new i.Button(this.buttonCfg),k,function(){e.getSidebar().getEmbeder("formula").execute()})}});r.addEmbeder("formula",{wysiwygonly:w,features:{left:250,top:65,width:960,height:730,scrollbars:"no"},popPageUrl:"http://fp.daum.net/fp/service_nc/pencil/Pencil.html?ver="+Editor.version},function(e){var z=e.sidebar.embeder.formula;
z.popPageUrl=r.getUrl(z.popPageUrl);z.features=r.getPopFeatures(z.features)});i.Embeder.Formula=i.Class.create({$const:{__Identity:"formula"},$extend:i.Embeder,name:"formula",title:TXMSG("@formula.title"),oninitialized:function(){this.clickHandler=function(){try{var A=j.open(this.config.popPageUrl,"at"+this.name,this.config.features);A.focus()}catch(z){}}},getConfig:function(e){var z=e.sidebar.embeder.formula;return{wysiwygonly:z.wysiwygonly,popPageUrl:r.getUrl(e,z.popPageUrl),features:r.getPopFeatures(z.features)}},getCreatedHtml:function(e){return'<img class="txc-formula" src="'+e.imageurl+'" '+(e.historydata?'historydata="'+e.historydata+'" ':"")+'width="'+e.actualwidth+'" height="'+e.actualheight+'">'},getDataForEntry:function(){},getDataListByParsing:function(){return[]},getFlashVars:function(){var z=r.get("txFarmCode"),B=r.get("size").contentWidth,e={service:z,service_width:B};var A=this.config;if(A.authType){e.coca_auth_type=A.authType}if(A.authUrl){e.coca_auth_url=A.authUrl}return e
}});i.module("register double click event listeners on formula for modify",function(D,G,e,A,B){var z=e.getEmbeder("formula");if(!z){return}var C=k;var F=k;z.getHistoryData=function(){var H="";if(C){H=C.getAttribute("historydata")}F=C;C=k;return H};A.observeJob(i.Ev.__CANVAS_PANEL_DBLCLICK,function(J){var I,H;I=v.element(J);if(y.kindOf(I,"img.txc-formula")){H=I.getAttribute("historydata");if(H){C=I;z.execute()}}});A.observeJob(i.Ev.__CANVAS_PANEL_MOUSEDOWN,function(H){C=k});z.embedHandler=function(H){var I;if(F){F.src=H.imageurl;F.setAttribute("historydata",H.historydata);F.width=H.actualwidth;F.height=H.actualheight;if(v.msie){I=y.find(F,"%paragraph");if(I){A.getProcessor().moveCaretTo(y.next(I,"%paragraph"),w)}}F=k}else{z.execAttach(H)}};var E=(v.msie)?"alt":"title";A.observeJob(i.Ev.__CANVAS_PANEL_MOUSEOVER,function(J){var I,H;I=v.element(J);if(y.kindOf(I,"img.txc-formula")){H=I.getAttribute("historydata");if(H){I.setAttribute(E,TXMSG("@formula.modify.tooltip"))}}});A.observeJob(i.Ev.__CANVAS_PANEL_MOUSEOUT,function(I){var H=v.element(I);
if(y.kindOf(H,"img.txc-formula")){H.removeAttribute(E)}})});r.add({adaptor:{alxa:{xaSection:[]},coca:{elements:[{coca_skin:"http://i1.daumcdn.net/icon/editor/file/bt_filesearch.png?rv=1.0.1",coca_over_skin:"http://i1.daumcdn.net/icon/editor/file/bt_filesearch.png?rv=1.0.1"}]}}});var a={tplEval:function(e,z){return(new Template(e)).evaluate(z)},getTTMLUrl:function(B){if(B.key){return B.key}var z,C,e,A;z=B.attachurl;e=z.match(/^[a-z]+:\/\/([\w\d\.]+)\.tistory\.com\/.+\/([\w\d]+)$/);if(e&&e[2]){C=B.filename;A=this.getExtFromFileName(C);if(A){A="."+A}return e[1]+"@"+e[2]+A}return z},getPreviewUrl:function(z){var e,A="/admin/entry/filePreview/";try{A=Editor.getConfig().ttml.propertyFilePath}catch(B){}e=z.match(/\[##_1[NCLR]\|([^\|]*)\|/);if(e&&e[1]){return A+e[1]}return""},getFileNameFromAttr:function(z){var e=z.match(/filename=((?:"[^"]*")|(?:\S+))/);if(e&&e[1]){return e[1].replace(/^"/,"").replace(/"$/,"")}return""},getExtFromFileName:function(z){var e=z.match(/\.([^\.]+)$/);if(e&&e[1]){return e[1]
}return""},getAttr:function(z,B){var e,A,C;e=z.match(/(\|[^\|]*)\|[^\|]*_##\]$/);if(e&&e[1]){A=e[1];e=A.match(new RegExp("[\\s\\|]"+B+"=((?:\"[^\"]+\")|(?:'[^']+')|(?:[^\\s\"']+))","i"));if(e&&e[1]){C=e[1];C=C.replace(/^['"]/,"").replace(/['"]$/,"");return C}}return""},isImportTTMLType:function(e){return["source2html","source2text","source4save","html@load","source@load","text@load"].contains(e)},isImportHTMLType:function(e){return["html4save","html2text","html2source"].contains(e)},ttml2data:function(C,z,e){var A,B;for(A in e){if(e.hasOwnProperty(A)){B=this.getAttr(z,A);if(B){C[A]=B}}}},ttml2filesCaption:function(B,e){if(!B){return}var A,C,z;A=e.split("|");C=Math.floor((A.length-2)/2);for(z=0;z<C;z+=1){if(B[z]){B[z][1]=A[z*2+2]}}},ttml2dataCaption:function(A,e){var z={};this.ttml2dataTitle(z,e);if(z.hasOwnProperty("title")){A.caption=z.title}},ttml2dataTitle:function(A,z){var e,B;e=z.match(/\|([^\|]*)_##\]$/);if(e){B=e[1]||"";A.title=B}},data2attrStr:function(D,z,C){var e,A,B;e=[];for(A in z){if(z.hasOwnProperty(A)){if(z[A]==="number"){B=parseInt(D[A],10);
if(!isNaN(B)){if(C){B='"'+B+'"'}e.push(A+"="+B)}}else{B=D[A];if(B){B=B.replace(/\|/g,"_");if(C){B='"'+B+'"'}e.push(A+"="+B)}}}}return e.join(" ")}};var h=function(z){this.propertyFilePath="/admin/entry/filePreview/";var e;for(e in z){if(z.hasOwnProperty(e)){this[e]=z[e]}}};h.filters2html=[];h.filters2ttml=[];h.filters2htmlWithoutAttach=[];h.filters2ttmlWithoutAttach=[];h.prototype={legacyFreeImage2html:function(A){var B,z,e;B=A;z=new RegExp("src=[\"']?(\\[##_ATTACH_PATH_##\\][a-z.0-9/@]*)","i");e=z.exec(B);while(e!==null){B=B.replaceAll(e[0],'class="txc-image-free" longDesc="'+e[1]+'" src="'+this.propertyFilePath+e[1].replaceAll("[##_ATTACH_PATH_##]/",""));e=z.exec(B)}return B},ttml2html:function(z){if(!z){return""}var B,e,A;B=z;e=h.filters2html.length;for(A=0;A<e;A+=1){B=this[h.filters2html[A]](B)}return B},toXmlBr:function(e){e=e.replaceAll("<br>","<br />");e=e.replaceAll("<BR>","<br />");return e},removeEmptyAnchor:function(z){var B,A,e;B=z;A=new RegExp("<a>(((?!<a>).)*?)</a>","i");e=A.exec(B);
while(e!==null){B=B.replaceAll(e[0],e[1]);e=A.exec(B)}return B},legacyFreeImage2ttml:function(B){var D,A,z,e,C,E;D=B;A=new RegExp("<img[^>]*?class=[\"']?txc-image-free[^>]*?>","i");z=A.exec(D);while(z!==null){e=z[0];C=i.String.parseAttribute(e,"longDesc");E=i.String.parseAttribute(e,"align").toLowerCase();if(E==="left"||E==="right"||E==="center"){D=D.replaceAll(e,'<img src="'+C+'"'+this.getSizeStrByHtml(e)+'align="'+E+'"/>')}else{D=D.replaceAll(e,'<img src="'+C+'"'+this.getSizeStrByHtml(e)+"/>")}z=A.exec(D)}return D},getSizeStrByHtml:function(e){var z=" ";z+=this.getSizeStrByHtml_process("width",e);if(1<z.length){z+=" "}z+=this.getSizeStrByHtml_process("height",e);if(1<z.length){z+=" "}return z},getSizeStrByHtml_process:function(B,A){var C,z,e;C=new RegExp(B+"\\s*:\\s*(\\d+)","i");z=new RegExp(B+"=[\"']?(\\d+)","i");e=A.match(C);if(e&&e[1]){return B+'="'+e[1]+'"'}else{e=A.match(z);if(e&&e[1]){return B+'="'+e[1]+'"'}}return""},html2ttml:function(A){if(!A){return""}var B,e,z;B=A;e=h.filters2ttml.length;
for(z=0;z<e;z+=1){B=this[h.filters2ttml[z]](B)}return B},ttml2htmlWithoutAttach:function(z){if(!z){return""}var B,e,A;B=z;e=h.filters2htmlWithoutAttach.length;for(A=0;A<e;A+=1){B=this[h.filters2htmlWithoutAttach[A]](B)}return B},html2ttmlWithoutAttach:function(A){if(!A){return""}var B,e,z;B=A;e=h.filters2ttmlWithoutAttach.length;for(z=0;z<e;z+=1){B=this[h.filters2ttmlWithoutAttach[z]](B)}return B}};h.filters2ttml.push("toXmlBr");h.filters2ttml.push("removeEmptyAnchor");h.filters2htmlWithoutAttach.push("legacyFreeImage2html");h.filters2ttmlWithoutAttach.push("legacyFreeImage2ttml");r.addTool("bgm",{disabledonmobile:w,wysiwygonly:w,sync:d,status:d});l.addMsg({"@bgm.title":"\ubc30\uacbd\uc74c\uc545","@bgm.message":"\ubc30\uacbd\uc74c\uc545\uc774 \ucca8\ubd80\ub418\uc5c8\uc2b5\ub2c8\ub2e4. / #{title} - #{artist}","@bgm.prev.url":"//i1.daumcdn.net/icon/editor/p_bgm2.gif?v=2","@bgm.thumb.url":"//i1.daumcdn.net/icon/editor/pn_music.gif?v=2"});i.Tool.Bgm=i.Class.create({$const:{__Identity:"bgm"},$extend:i.Tool,oninitialized:function(){var e=this.editor;
this.weave.bind(this)(new i.Button(this.buttonCfg),k,function(){e.getSidebar().getAttacher("bgm").execute()})}});r.addAttacher("bgm",{multiple:w,multipleuse:d,checksize:d,boxonly:d,wysiwygonly:w,features:{left:250,top:65,width:395,height:600},popPageUrl:"http://music.daum.net/my/depository/bgm_setup/list.popup?service=#service"},function(e){var z=r.getAttacher("bgm",e);if(z.proxyPath&&z.proxyPath!==""&&z.popPageUrl.indexOf("&form=")<0){z.popPageUrl+="&form=http://"+location.host+z.proxyPath}z.popPageUrl=r.getUrl(z.popPageUrl);z.features=r.getPopFeatures(z.features)});i.Attacher.Bgm=i.Class.create({$const:{__Identity:"bgm"},$extend:i.Attacher,name:"bgm",title:TXMSG("@bgm.title"),canModified:w,canResized:d,getKey:function(e){return e.bgmkey},getDataForEntry:function(A){var e,z;if(!A.dispElId){A.dispElId=i.Util.getDispElId()}e=((A.tmpSeq)?this.entryBox.syncSeq(A.tmpSeq):this.entryBox.newSeq());z=(A.bgmkey)?A.bgmkey:((A.bgmlist)?A.bgmlist[0]:"bgm_"+e);return Object.extend({dataSeq:e,bgmkey:z,prevurl:TXMSG("@bgm.prev.url"),thumburl:TXMSG("@bgm.thumb.url")},A)
}});(function x(){var e=i.Attacher.Bgm.prototype.execAttach;i.Class.overwrite(i.Attacher.Bgm,{execAttach:function(C,B){var D,A,z;D=C.bgmlist;C.bgmlist=[];z=D.length;for(A=0;A<z;A+=1){C.bgmlist[A]=D[A]}e.call(this,C,B)}})}());i.Attachment.Bgm=i.Class.create({$const:{__Identity:"bgm"},$extend:i.Attachment,getFieldAttr:function(e){return{name:"tx_attach_bgm",value:[e.bgmkey].join("|")}},getBoxAttr:function(z){var e=new Template(TXMSG("@bgm.message"));return{name:e.evaluate({title:z.title.cutRealLength(60),artist:z.artist.cutRealLength(30),bgmcnt:(z.bgmcnt-1)}),image:z.thumburl}},getSaveHtml:function(e){return this.getDispText(e)},getDispHtml:function(e){var z;z=a.tplEval('<img id="#{dispElId}" class="txc-bgm tx-entry-attach tx-unresizable" src="#{imgUrl}" />',{dispElId:e.dispElId,imgUrl:TXMSG("@bgm.prev.url")});return z},getDispText:function(z){var e,A;e="";z.visible=1;e+=a.data2attrStr(z,{visible:"number",color:"string"},false);A=a.tplEval("[##_Bgm|#{songid}|#{title}|#{artist}|lyrics|#{attrStr}|_##]",{songid:z.songid,title:(z.title||"").replace(/\|/g,""),artist:(z.artist||"").replace(/\|/g,""),attrStr:e});
return A},loadDataByContent:function(B,C){if(!a.isImportTTMLType(B)){return}var e,A,z;e=C.match(this.regLoad);if(e&&e[0]){A=e[0];z=A.split("|");if(z.length===7){this.data.title=z[2];this.data.artist=z[3]}a.ttml2data(this.data,A,{color:"string"});this.refreshProperties()}},getRegLoad:function(e){return this.getRegText(e)},getRegHtml:function(z){var e=a.tplEval("<img[^>]*id=(\"|'|)#{dispElId}\\1[^>]*>",{dispElId:z.dispElId.getRegExp()});return new RegExp(e,"gmi")},getRegText:function(z){var e;e=a.tplEval("\\[##_Bgm\\|#{songid}\\|(?:[^\\|]*\\|){4}[^\\|]*?_##\\]",{songid:z.songid.getRegExp()});return new RegExp(e,"gmi")}});i.module("observe canvas.bgm.added event and insert a lyrics to editor",function(A,B,C,z,e){z.observeJob("canvas.bgm.added",function(F){var E=F.data;if(E.lyrics){var D=["<p>",'<a href="http://music.daum.net/song/song.do?songId='+E.songid+'" target="_blank"><b>',E.title,"</b></a> - ",E.artist,"<br/><br/>",E.lyrics.replace(/\n/g,"<br/>"),"<br/><br/>","\uac00\uc0ac \ucd9c\ucc98 : ",'<a href="http://music.daum.net/" target="_blank" style="color:#0307c3">Daum\ubba4\uc9c1</a>',"</p>"].join("");
z.pasteContent(D,w,{})}})});(function(){var e=i.Attacher.File.prototype.execAttach;i.Class.overwrite(i.Attacher.File,{execAttach:function(B,A){var D,C,z;if(/^image/.test(B.filemime)&&/icon/.test(B.filemime)===false){D=this.editor.getSidebar().getAttacher("image");C=Object.extend({imageurl:B.attachurl.replace("/attach/","/image/"),originalurl:B.attachurl.replace("/attach/","/original/"),thumburl:B.attachurl.replace("/attach/","/P150x100/"),imagealign:"C",isoriginalsize:false,exifselecteddata:"{}",exifurl:B.infourl,alt:"",caption:""},B);if(this.boxonly&&D.boxonly!==true){D.boxonly=true;D.attachHandler(C);D.boxonly=false}else{D.attachHandler(C)}}else{e.apply(this,arguments)}}});i.Class.overwrite(i.Attachment.File,{getSaveHtml:function(z){return this.getDispText(z)},getDispHtml:function(z){var A,B;A=i.Util.prevurl(z.filename.split(".").pop().toLowerCase());B=a.tplEval('<button id="#{dispElId}" class="txc-file"><img class="tx-unresizable" src="#{prevurl}" ld="#{attachurl}"/> #{filename}</button>',{dispElId:z.dispElId,prevurl:A,attachurl:z.attachurl,filename:z.filename});
return B},getDispText:function(B){var A,z,C;A=a.getTTMLUrl(B);z=a.data2attrStr(B,{filename:"string",filemime:"string"},true);C=a.tplEval("[##_1N|#{file}|#{attrs}|_##]",{file:A,attrs:z});return C},loadDataByContent:function(B,C){if(!a.isImportTTMLType(B)){return}var z,A;z=C.match(this.regLoad);if(z&&z[0]){A=z[0];a.ttml2data(this.data,A,{filename:"string",filemime:"string"});this.refreshProperties()}},getRegLoad:function(z){return this.getRegText(z)},getRegHtml:function(A){var z=a.tplEval("<button[^>]*id=(\"|'|)#{dispElId}\\1[^>]*>[\\S\\s]*?<\\/button>",{dispElId:A.dispElId.getRegExp()});return new RegExp(z,"gmi")},getRegText:function(B){var A,z;A=a.getTTMLUrl(B);z=a.tplEval("\\[##_1[NCLR]\\|#{file}\\|[^\\|]*\\|[^\\|]*?_##\\]",{file:A.getRegExp()});return new RegExp(z,"gmi")}})}());(function(){var A,e,z;A=function(C){if(!C.filemime){var B=a.getExtFromFileName(C.filename);if(/gif$/.test(B)){C.filemime="image/gif"}else{C.filemime="image/jpeg"}}};e=i.Attacher.Image.prototype.execAttach;z=i.Attacher.Image.prototype.execReload;
i.Class.overwrite(i.Attacher.Image,{canResized:false,imageScale:function(B){new i.ImageScale(B.data,function(D,C){var I,F,G,E;I=D;actualHeightAttr=C;F=Math.min(B.actor.config.imagemaxwidth,D);heightAttr=Math.floor(F/D*C);B.dispHtml=B.dispHtml.replace(/<img /i,'<img actualwidth="'+I+'" width="'+F+'" actualheight="'+actualHeightAttr+'" height="'+heightAttr+'"');B.data.actualwidth=I;B.data.width=F;B.data.actualheight=actualHeightAttr;B.data.height=heightAttr;try{G=B.data.dispElId;if(G){E=B.canvas.panels.html.getDocument().getElementById(G);if(E){E.actualwidth=I;E.width=F;E.actualheight=actualHeightAttr;E.height=heightAttr}}}catch(H){}})},execAttach:function(C,B){if(!C.actualwidth&&C.actualWidth){C.actualwidth=C.actualWidth}if(!C.width){C.width=C.actualwidth;if(!C.height){C.height=C.actualheight}}if(!C.actualheight&&C.actualHeight){C.actualheight=C.actualHeight}A(C);e.call(this,C,B)},execReload:function(D,C,B){if(!D.actualwidth&&D.actualWidth){D.actualwidth=D.actualWidth}if(!D.width){D.width=D.actualwidth;
if(!D.height){D.height=D.actualheight}}if(!D.actualheight&&D.actualHeight){D.actualheight=D.actualHeight}A(D);z.call(this,D,C,B)}});i.Class.overwrite(i.Attachment.Image,{getChangedContent:function(C,G,F,E){var D,B;D=(G===this.regLoad||G===this.regText)&&F===this.dispHtml;if(D){return this.ttml2html(C)}B=G===this.regHtml&&F===this.dispText;if(B){return this.html2ttml(C)}return C},ttml2html:function(B){var C=this,D;D=B.replace(this.regText,function(E){var F={};v.extend(F,C.data);a.ttml2data(F,E,{width:"number",height:"number",alt:"string",filename:"string",filemime:"string",style:"string"});return C.getDispHtml(F)});return D},html2ttml:function(D){var C=this,B;B=D.replace(this.regHtml,function(E){var F={};v.extend(F,C.data);C.setDataByHtml(F,E);return C.getDispText(F)});return B},DATA_ATTR_NAMES:["width","height","style"],setDataByHtml:function(E,D){var B,C;B=i.Util.getAllAttributes(D);for(C in B){if(B.hasOwnProperty(C)){if(this.DATA_ATTR_NAMES.contains(C)){E[C]=B[C]}}}},getSaveHtml:function(B){return this.getDispText(B)
},getDispHtml:function(F){var C,B,E,D,G;C="";B=this.DATA_ATTR_NAMES.length;for(E=0;E<B;E+=1){D=this.DATA_ATTR_NAMES[E];if(F[D]){C+=D+'="'+F[D]+'" '}}G=a.tplEval('<img id="#{dispElId}" class="txc-image" src="#{imageurl}" #{attrs}/>',{dispElId:F.dispElId,imageurl:F.imageurl,attrs:C});return G},getDispText:function(E){var D,C,B,F;D=a.getTTMLUrl(E);A(E);C=a.data2attrStr(E,{width:"number",height:"number",alt:"string",filename:"string",filemime:"string",style:"string"},true);if(!E.caption){E.caption=""}B=E.caption;F=a.tplEval("[##_1N|#{file}|#{attrs}|#{caption}_##]",{file:D,attrs:C,caption:B.replace(/\|/g,"_")});return F},loadDataByContent:function(D,E){if(!a.isImportTTMLType(D)){return}var B,C;B=E.match(this.regLoad);if(B&&B[0]){C=B[0];a.ttml2data(this.data,C,{width:"number",height:"number",alt:"string",filename:"string",filemime:"string"});a.ttml2dataCaption(this.data,C);this.refreshProperties()}},getRegLoad:function(B){return this.getRegText(B)},getRegHtml:function(C){var B=a.tplEval("<img[^>]*id=(\"|'|)#{dispElId}\\1[^>]*>",{dispElId:C.dispElId.getRegExp()});
return new RegExp(B,"gmi")},getRegText:function(D){var C,B;C=a.getTTMLUrl(D);B=a.tplEval("\\[##_1[NCLR]\\|#{file}\\|[^\\|]*\\|[^\\|]*?_##\\]",{file:C.getRegExp()});return new RegExp(B,"gmi")}})}());r.addTool("jukebox",{disabledonmobile:w,wysiwygonly:w,sync:d,status:d});l.addMsg({"@jukebox.prev.url":"http://cfs.tistory.com/static/admin/editor/p_e_audio.gif"});i.Tool.Jukebox=i.Class.create({$const:{__Identity:"jukebox"},$extend:i.Tool,oninitialized:function(){var e=this.editor;this.weave.bind(this)(new i.Button(this.buttonCfg),k,function(){e.getSidebar().getAttacher("jukebox").execute()})}});r.addAttacher("jukebox",{multiple:w,checksize:d,boxonly:d,wysiwygonly:w,features:{left:250,top:65,width:400,height:400,resizable:"yes"}},function(e){var z=r.getAttacher("jukebox",e);z.popPageUrl=r.getUrl(z.popPageUrl);z.features=r.getPopFeatures(z.features)});i.Attacher.Jukebox=i.Class.create({$const:{__Identity:"jukebox"},$extend:i.Attacher,name:"jukebox",title:"\uc624\ub514\uc624",canModified:false,canResized:false,oninitialized:function(){},getConfig:function(e){var z=Object.extend({},e.sidebar.attacher.jukebox);
z.popPageUrl=e.getUrl(z.popPageUrl);z.features=e.getPopFeatures(z.features);z.iframeUrl=e.getUrl(z.iframeUrl);return z},getKey:function(e){return e.key||"K"+i.Util.generateKey()},getDataForEntry:function(A,z){if(!A.dispElId){A.dispElId=i.Util.getDispElId()}var e=((A.tmpSeq)?this.entryBox.syncSeq(A.tmpSeq):this.entryBox.newSeq());return Object.extend({dataSeq:e},A)}});(function(){var e=i.Attacher.Jukebox.prototype.execAttach;i.Class.overwrite(i.Attacher.Jukebox,{execAttach:function(E,B){var D,A,z,C;D=E.files;E.files=[];z=D.length;for(A=0;A<z;A+=1){C=D[A];E.files[A]=[C[0],C[1]]}e.call(this,E,B)}})}());i.Attachment.Jukebox=i.Class.create({$const:{__Identity:"jukebox"},$extend:i.Attachment,getFieldAttr:function(e){return{name:"tx_attach_jukebox",value:["jukebox"].join("|")}},getBoxAttr:function(e){return{name:"Jukebox\uac00 \uc0bd\uc785\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",image:e.thumburl,className:"tx-thumb-jukebox"}},getSaveHtml:function(e){return this.getDispText(e)},getDispHtml:function(A){var z,e,B;
z=311;e=27;B=a.tplEval('<img id="#{dispElId}" class="txc-jukebox tx-entry-attach tx-unresizable" src="#{imgUrl}" width="#{width}" height="#{height}" />',{dispElId:A.dispElId,imgUrl:TXMSG("@jukebox.prev.url"),width:z,height:e});return B},getDispText:function(B){var z,e,A,C;z="";e=B.files.length;for(A=0;A<e;A+=1){z+=B.files[A][0]+"|"+B.files[A][1]+"|"}z+=a.data2attrStr(B,{autoplay:"number",visible:"number"},false);C=a.tplEval("[##_Jukebox|#{attrStr}|_##]",{attrStr:z});return C},loadDataByContent:function(A,B){if(!a.isImportTTMLType(A)){return}var e,z;e=B.match(this.regLoad);if(e&&e[0]){z=e[0];a.ttml2data(this.data,z,{visible:"number",autoplay:"number"});a.ttml2filesCaption(this.data.files,z);this.refreshProperties()}},getRegLoad:function(e){return this.getRegText(e)},getRegHtml:function(z){var e=a.tplEval("<img[^>]*id=(\"|'|)#{dispElId}\\1[^>]*>",{dispElId:z.dispElId.getRegExp()});return new RegExp(e,"gmi")},getRegText:function(C){var B,e,A,z;B="";e=(C.files||[]).length;for(A=0;A<e;A+=1){B+=C.files[A][0].getRegExp()+"\\|[^\\|]*\\|"
}z=a.tplEval("\\[##_Jukebox\\|#{filesReg}[^\\|]*\\|[^\\|]*?_##\\]",{filesReg:B});return new RegExp(z,"gmi")}});(function(){function e(B,z){var A={"490px":{w:521,h:451},"400px":{w:431,h:389},"250px":{w:281,h:289},"518px":{w:521,h:451},"428px":{w:431,h:389},"278px":{w:281,h:289}};if(B in A){return A[B]}else{return{w:B.parsePx(),h:z.parsePx()}}}i.Class.overwrite(i.Attachment.Map,{getSaveHtml:function(A){var z=e(A.mapWidth.toPx(),A.mapHeight.toPx());return'<iframe id="'+A.mapkey+'" src="'+A.pageUrl4View+'" width="'+z.w+'" height="'+z.h+'" frameborder="0" scrolling="no" mapdata="'+A.mapdata+'"></iframe>'},getDispHtml:function(A){var z=e(A.mapWidth.toPx(),A.mapHeight.toPx());if(v.msie){return'<iframe id="'+A.mapkey+'" src="'+A.pageUrl4Edit+'" class="tx-entry-attach txc-map" width="'+z.w+'" height="'+z.h+'" frameborder="0" scrolling="no" mapdata="'+A.mapdata+'"></iframe>'}else{return'<img id="'+A.mapkey+'" src="'+A.prevurl+'" type="map" class="tx-entry-attach txc-map tx-unresizable"/>'}}})}());
(function(){i.Class.overwrite(i.Attachment.Movie,{getSaveHtml:function(e){return this.getDispText(e)},getDispHtml:function(e){var z=a.tplEval('<img id="#{dispElId}" class="txc-movie tx-unresizable" src="#{imgUrl}" />',{dispElId:e.dispElId,imgUrl:e.prevurl});return z},getDispText:function(e){var z=a.tplEval("[##_Movie|#{moviekey}|#{prevurl}_##]",{moviekey:e.moviekey,prevurl:e.prevurl.replace(/\.edit$/i,"").replace(/\.mini$/i,"")});return z},getRegLoad:function(e){return this.getRegText(e)},getRegHtml:function(z){var e=a.tplEval("<img[^>]*id=(\"|'|)#{dispElId}\\1[^>]*>",{dispElId:z.dispElId.getRegExp()});return new RegExp(e,"gmi")},getRegText:function(z){var e;e=a.tplEval("\\[##_Movie\\|#{moviekey}\\|[^|]*?_##\\]",{moviekey:z.moviekey.getRegExp()});return new RegExp(e,"gmi")}})}());r.addTool("slideshow",{disabledonmobile:w,wysiwygonly:w,sync:d,status:d});l.addMsg({"@imazing.prev.url":"http://cfs.tistory.com/static/admin/editor/spacer.gif","@gallery.prev.url":"http://cfs.tistory.com/static/admin/editor/spacer.gif"});
i.Tool.Slideshow=i.Class.create({$const:{__Identity:"slideshow"},$extend:i.Tool,oninitialized:function(){var e=this.editor;this.weave.bind(this)(new i.Button(this.buttonCfg),k,function(){e.getSidebar().getAttacher("slideshow").execute()})}});r.addAttacher("slideshow",{multiple:w,checksize:d,boxonly:d,wysiwygonly:w,features:{left:250,top:65,width:400,height:345,resizable:"yes"},imazing:{width:352,height:284},gallery:{width:400,height:300}},function(e){var z=r.getAttacher("slideshow",e);z.popPageUrl=r.getUrl(z.popPageUrl);z.features=r.getPopFeatures(z.features)});i.Attacher.Slideshow=i.Class.create({$const:{__Identity:"slideshow"},$extend:i.Attacher,name:"slideshow",title:"\uc2ac\ub77c\uc774\ub4dc\uc1fc",canModified:false,canResized:false,getKey:function(e){return e.key||"K"+i.Util.generateKey()},getDataForEntry:function(A,z){if(!A.dispElId){A.dispElId=i.Util.getDispElId()}var e=((A.tmpSeq)?this.entryBox.syncSeq(A.tmpSeq):this.entryBox.newSeq());return Object.extend({dataSeq:e},A)}});(function(){var e=i.Attacher.Slideshow.prototype.execAttach;
i.Class.overwrite(i.Attacher.Slideshow,{execAttach:function(F,C){var E,B,z,D,A;E=F.files;F.files=[];z=E.length;for(B=0;B<z;B+=1){D=E[B];F.files[B]=[D[0],D[1]]}if(!F.width||!F.height){A=r.getAttacher("slideshow")[C];if(A){F.width=A.width;F.height=A.height}}e.call(this,F,C)}})}());i.Attachment.Imazing=i.Class.create({$const:{__Identity:"imazing"},$extend:i.Attachment,getFieldAttr:function(e){return{name:"tx_attach_imazing",value:["imazing"].join("|")}},getBoxAttr:function(e){return{name:"iMazing\uc744 \ud074\ub9ad\ud558\uba74 \uc6d0\ubcf8\uc744 \ubcf4\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",image:e.thumburl,className:"tx-thumb-imazing"}},getChangedContent:function(z,D,C,B){var A,e;A=(D===this.regLoad||D===this.regText)&&C===this.dispHtml;if(A){return this.ttml2html(z)}e=D===this.regHtml&&C===this.dispText;if(e){return this.html2ttml(z)}return z},ttml2html:function(e){var z=this,A;A=e.replace(this.regText,function(B){var C={};v.extend(C,z.data);a.ttml2data(C,B,{width:"number",height:"number"});
return z.getDispHtml(C)});return A},html2ttml:function(A){var z=this,e;e=A.replace(this.regHtml,function(B){var C={};v.extend(C,z.data);z.setDataByHtml(C,B);return z.getDispText(C)});return e},DATA_ATTR_NAMES:["width","height"],setDataByHtml:function(B,A){var e,z;e=i.Util.getAllAttributes(A);for(z in e){if(e.hasOwnProperty(z)){if(this.DATA_ATTR_NAMES.contains(z)){B[z]=e[z]}}}},getSaveHtml:function(e){return this.getDispText(e)},getDispHtml:function(A){var z,e,B;z=A.width||r.getAttacher("slideshow").imazing.width;e=A.height||r.getAttacher("slideshow").imazing.height;B=a.tplEval('<img id="#{dispElId}" class="txc-imazing" src="#{imgUrl}" width="#{width}" height="#{height}" />',{dispElId:A.dispElId,imgUrl:TXMSG("@imazing.prev.url"),width:z,height:e});return B},getDispText:function(B){var z,e,A,C;z="";e=B.files.length;for(A=0;A<e;A+=1){z+=B.files[A][0]+"|"+B.files[A][1]+"|"}B.width=B.width||r.getAttacher("slideshow").imazing.width;B.height=B.height||r.getAttacher("slideshow").imazing.height;
z+=a.data2attrStr(B,{width:"number",height:"number",frame:"string",transition:"string",navigation:"string",slideshowInterval:"number",page:"number",align:"string",skinPath:"string"},true);C=a.tplEval("[##_iMazing|#{attrStr}|#{title}_##]",{attrStr:z,title:(B.title||"")});return C},loadDataByContent:function(A,B){if(!a.isImportTTMLType(A)){return}var e,z;e=B.match(this.regLoad);if(e&&e[0]){z=e[0];a.ttml2data(this.data,z,{width:"number",height:"number",frame:"string",transition:"string",navigation:"string",slideshowInterval:"number",page:"number",align:"string",skinPath:"string"});a.ttml2dataTitle(this.data,z);a.ttml2filesCaption(this.data.files,z);this.refreshProperties()}},getRegLoad:function(e){return this.getRegText(e)},getRegHtml:function(z){var e=a.tplEval("<img[^>]*id=(\"|'|)#{dispElId}\\1[^>]*>",{dispElId:z.dispElId.getRegExp()});return new RegExp(e,"gmi")},getRegText:function(C){var B,e,A,z;B="";e=(C.files||[]).length;for(A=0;A<e;A+=1){B+=""+C.files[A][0].getRegExp()+"\\|[^\\|]*\\|"
}z=a.tplEval("\\[##_iMazing\\|#{filesReg}[^\\|]*\\|[^\\|]*?_##\\]",{filesReg:B});return new RegExp(z,"gmi")}});i.Attachment.Gallery=i.Class.create({$const:{__Identity:"gallery"},$extend:i.Attachment,getFieldAttr:function(e){return{name:"tx_attach_gallery",value:["gallery"].join("|")}},getBoxAttr:function(e){return{name:"Gallery\ub97c \ud074\ub9ad\ud558\uba74 \uc6d0\ubcf8\uc744 \ubcf4\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",image:e.thumburl,className:"tx-thumb-gallery"}},getChangedContent:function(z,D,C,B){var A,e;A=(D===this.regLoad||D===this.regText)&&C===this.dispHtml;if(A){return this.ttml2html(z)}e=D===this.regHtml&&C===this.dispText;if(e){return this.html2ttml(z)}return z},ttml2html:function(e){var z=this,A;A=e.replace(this.regText,function(B){var C={};v.extend(C,z.data);a.ttml2data(C,B,{width:"number",height:"number"});return z.getDispHtml(C)});return A},html2ttml:function(A){var z=this,e;e=A.replace(this.regHtml,function(B){var C={};v.extend(C,z.data);z.setDataByHtml(C,B);return z.getDispText(C)
});return e},DATA_ATTR_NAMES:["width","height"],setDataByHtml:function(B,A){var e,z;e=i.Util.getAllAttributes(A);for(z in e){if(e.hasOwnProperty(z)){if(this.DATA_ATTR_NAMES.contains(z)){B[z]=e[z]}}}},getSaveHtml:function(e){return this.getDispText(e)},getDispHtml:function(A){var z,e,B;z=A.width||r.getAttacher("slideshow").gallery.width;e=A.height||r.getAttacher("slideshow").gallery.height;B=a.tplEval('<img id="#{dispElId}" class="txc-gallery" src="#{imgUrl}" width="#{width}" height="#{height}" />',{dispElId:A.dispElId,imgUrl:TXMSG("@gallery.prev.url"),width:z,height:e});return B},getDispText:function(B){var z,e,A,C;z="";e=B.files.length;for(A=0;A<e;A+=1){z+=B.files[A][0]+"|"+B.files[A][1]+"|"}B.width=B.width||r.getAttacher("slideshow").gallery.width;B.height=B.height||r.getAttacher("slideshow").gallery.height;z+=a.data2attrStr(B,{width:"number",height:"number"},false);C=a.tplEval("[##_Gallery|#{attrStr}_##]",{attrStr:z});return C},loadDataByContent:function(A,B){if(!a.isImportTTMLType(A)){return
}var e,z;e=B.match(this.regLoad);if(e&&e[0]){z=e[0];this.setAttrDataFromTtml(this.data,z);a.ttml2filesCaption(this.data.files,z);this.refreshProperties()}},setAttrDataFromTtml:function(B,z){var e,A;e=z.match(/\|([^\|]*)_##\]$/);if(e&&e[1]){A=e[1];e=A.match(/width=['"]?(\d+)/i);if(e&&e[1]){B.width=+e[1]}e=A.match(/height=['"]?(\d+)/i);if(e&&e[1]){B.height=+e[1]}}},getRegLoad:function(e){return this.getRegText(e)},getRegHtml:function(z){var e=a.tplEval("<img[^>]*id=(\"|'|)#{dispElId}\\1[^>]*>",{dispElId:z.dispElId.getRegExp()});return new RegExp(e,"gmi")},getRegText:function(C){var B,e,A,z;B="";e=(C.files||[]).length;for(A=0;A<e;A+=1){B+=C.files[A][0].getRegExp()+"\\|[^\\|]*\\|"}z=a.tplEval("\\[##_Gallery\\|#{filesReg}[^\\|]*_##\\]",{filesReg:B});return new RegExp(z,"gmi")}});i.module("select tistory custom attachment element by mousedown",function(A,C,D,z,e){var B={gallery:true,image:true,imazing:true,jukebox:true,movie:true};z.observeJob(i.Ev.__CANVAS_PANEL_MOUSEDOWN,function(L){var K,I,G,F,E,H,J;
K=v.element(L);if(K.tagName!=="IMG"){z.fireJobs("tistory.attachment.custom.clicked",K,null);return}if(K.outerHTML){I=K.outerHTML}else{G=document.createElement("div");G.appendChild(K.cloneNode(true));I=G.innerHTML;G=null}F=D.getAttachments();E=F.length;for(H=0;H<E;H+=1){J=F[H];if(B[J.type]&&J.checkExisted(I)){z.fireJobs("tistory.attachment.custom.clicked",K,J);return}}z.fireJobs("tistory.attachment.custom.clicked",K,null)})});i.Tool.AlignCenter.__ImageModeProps={paragraph:{style:{textAlign:"center",clear:"none","float":"none"}},image:{style:{marginLeft:"",marginRight:""}}};i.Tool.AlignFull.__ImageModeProps={paragraph:{style:{textAlign:k,clear:"both","float":"right"}},image:{style:{marginLeft:"10px",marginRight:""}}};i.Tool.AlignLeft.__ImageModeProps={paragraph:{style:{textAlign:"left",clear:"none","float":"none"}},image:{style:{marginLeft:"",marginRight:""}}};i.Tool.AlignRight.__ImageModeProps={paragraph:{style:{textAlign:k,clear:"both","float":"left"}},image:{style:{marginLeft:"",marginRight:"10px"}}};
i.module("backup legacy post for tistory",function(A,B,C,z,e){A.backupPost=function(D,G){var E,F,H;E=r.getAdaptor("fanta");F=E.param;E.param=E.param.replace(/filename=[^&]+/,"filename="+D);E.param=E.param.replace(/asid=[^&]+/,"asid="+D);H=new i.AutoSave.Fanta(E);E.param=F;H.save({seq:1,content:JSON.stringify(G,v.JSONHelper.encodeURIComponentReplacer),meta:JSON.stringify({title:"backup"},v.JSONHelper.encodeURIComponentReplacer)})};A.restorePost=function(D,H){var E,F,G;E=r.getAdaptor("fanta");F=E.param;E.param=E.param.replace(/filename=[^&]+/,"filename="+D);E.param=E.param.replace(/asid=[^&]+/,"asid="+D);G=new i.AutoSave.Fanta(E);E.param=F;G.load({seq:1},{success:H})}});i.module("paste ttml for tistory",function(A,B,C,z,e){A.pasteTtml=function(D,E,F){var G=D,H=new h(e.ttml);G=H.ttml2html(G);G=H.ttml2htmlWithoutAttach(G);z.pasteContent(G,E,F)}});i.Class.overwrite(h,{matchTtmlFootnote:function(e){var C,B,z=/\[footnote\]/i,A=/\[\/footnote\]/i;if(0<=(C=e.search(z))){if(0<=(B=e.search(A))){return[e.substr(C,B-C+11),e.substr(C+10,B-C-10)]
}}return null},footnote2html:function(z){var e,A;e=this.matchTtmlFootnote(z);while(e){A=a.tplEval('<img class="#{classname}" border="0" src="#{imgUrl}" data-footnote="#{dataStr}" />',{classname:TXMSG("@footnote.classname"),imgUrl:TXMSG("@footnote.icon.image"),dataStr:encodeURIComponent(e[1])});z=z.replace(e[0],A);e=this.matchTtmlFootnote(z)}return z},footnote2ttml:function(e){var z=new RegExp("<img [^>]*class=['\"]?"+TXMSG("@footnote.classname")+"['\"]?[^>]*>","gi");return e.replace(z,function(B){var C,A;C="";A=B.match(/data-footnote="?([^"\s]*)/);if(A&&A[1]){C=decodeURIComponent(A[1])}return"[footnote]"+C+"[/footnote]"})}});h.filters2html.push("footnote2html");h.filters2ttml.push("footnote2ttml");i.Class.overwrite(h,{moreless2html:function(z){var D,F,E,e,C,G,B,A;D=z;while(true){F=D.indexOf("[#M_");if(F>-1){E=D.indexOf("_M#]",F);if(E>-1){e=D.substring(F+4,E);while(true){if(e.indexOf("[#M_")===-1){break}else{e=e.substring(e.indexOf("[#M_")+4,e.length)}}C=e.substring(0,e.indexOf("|"));B=e.substring(e.indexOf("|")+1,e.length);
G=B.substring(0,B.indexOf("|"));B=B.substring(B.indexOf("|"),B.length);A=B.substring(B.indexOf("|")+1,B.length);D=D.replaceAll("[#M_"+e+"_M#]",'<div class="txc-moreless" data-more="'+encodeURIComponent(C)+'" data-less="'+encodeURIComponent(G)+'">'+A+"</div>")}else{break}}else{break}}return D},morelessConvert:function(e){while(new RegExp("<div[^>]*?class=['\"]?txc-moreless[^>]*>","i").test(e)){e=this.morelessConvert_process(e)}return e},indexOfCaseInsensitive:function(B,A,C){var z,e;z=(typeof C==="undefined")?B:B.substring(C,B.length);e=(typeof A==="string")?new RegExp(A.replace(new RegExp("(\\W)","g"),"\\$1"),"i").exec(z):A.exec(z);return e?e.index+((typeof C==="number")?C:0):-1},stringCount:function(A,e){var z;if(typeof e==="string"){z=A.match(new RegExp(e.replace(new RegExp("(\\W)","g"),"\\$1"),"g"))}else{z=A.match(e)}return z?z.length:0},morelessConvert_process:function(B){var e,F,E,D,A,z,C;e="";F=0;E=0;D=new RegExp("<div[^>]*?class=['\"]?txc-moreless[^>]*>","i");A=undefined;if((F=this.indexOfCaseInsensitive(B,D,E))>-1){e+=B.substring(0,F);
do{if((E=this.indexOfCaseInsensitive(B,new RegExp("</div>","i"),Math.max(F,E)))===-1){return e+B.substring(F,B.length).replace(D,"")}E+=6;A=B.substring(F,E)}while(A!==""&&this.stringCount(A,new RegExp("<div[>\\s]","gi"))!==this.stringCount(A,new RegExp("</div>","gi")));z=decodeURIComponent(i.String.parseAttribute(A,"data-less")||"");C=decodeURIComponent(i.String.parseAttribute(A,"data-more")||"");A=A.replace(D,"[#M_"+C+"|"+z+"|");A=A.replace(new RegExp("</div>$","i"),"_M#]");e+=A}return e+B.substring(E,B.length)}});h.filters2html.push("moreless2html");h.filters2ttml.push("morelessConvert");i.Class.overwrite(h,{ONE_ATTR_LEN:4,TWO_ATTR_LEN:7,THREE_ATTR_LEN:10,legacyTtml2html:function(A){var z=A.split("|"),e=z.length;if(e===this.ONE_ATTR_LEN){return this.alignTtml2html(z)}if(e===this.TWO_ATTR_LEN){return this.doubleTtml2html(z)}if(e===this.THREE_ATTR_LEN){return this.tripleTtml2html(z)}return z.join("|")},MARKUP_FOR_1L:'<p style="text-align: left;">#{ttml}</p>',MARKUP_FOR_1R:'<p style="text-align: right;">#{ttml}</p>',MARKUP_FOR_1C:'<p style="text-align: center;">#{ttml}</p>',alignTtml2html:function(z){var e,A;
e=z[0];z[0]="[##_1N";A={ttml:z.join("|")};if(/1L$/.test(e)){return a.tplEval(this.MARKUP_FOR_1L,A)}if(/1R$/.test(e)){return a.tplEval(this.MARKUP_FOR_1R,A)}if(/1C$/.test(e)){return a.tplEval(this.MARKUP_FOR_1C,A)}return A.ttml},removeHeaderFooterForMultiTttml:function(e){e.shift();e[e.length-1]=e[e.length-1].replace(/_##\]$/,"")},MARKUP_FOR_DOUBLE_TTML:'<div class="imageblock dual" style="text-align: center;"><table cellspacing="5" cellpadding="0" border="0" style="margin: 0 auto;"><tr><td>#{ttml1}</td><td>#{ttml2}</td></tr></table></div>',doubleTtml2html:function(e){var A,z;this.removeHeaderFooterForMultiTttml(e);A=e.splice(0,3);z=e;return a.tplEval(this.MARKUP_FOR_DOUBLE_TTML,{ttml1:"[##_1N|"+A.join("|")+"_##]",ttml2:"[##_1N|"+z.join("|")+"_##]"})},MARKUP_FOR_TRIPLE_TTML:'<div class="imageblock triple" style="text-align: center"><table cellspacing="5" cellpadding="0" border="0" style="margin: 0 auto;"><tr><td>#{ttml1}</td><td>#{ttml2}</td><td>#{ttml3}</td></tr></table></div>',tripleTtml2html:function(e){var A,z,B;
this.removeHeaderFooterForMultiTttml(e);A=e.splice(0,3);z=e.splice(0,3);B=e;return a.tplEval(this.MARKUP_FOR_TRIPLE_TTML,{ttml1:"[##_1N|"+A.join("|")+"_##]",ttml2:"[##_1N|"+z.join("|")+"_##]",ttml3:"[##_1N|"+B.join("|")+"_##]"})},multiTtml2html:function(A){var z,e,D,C,B;z=A.match(/\[##_[123][NCLR]\|[\s\S]*?_##\]/g);if(z){e=z.length;for(D=0;D<e;D+=1){C=z[D];B=this.legacyTtml2html(C);A=A.replace(C,B)}}return A}});h.filters2html.push("multiTtml2html");i.Class.overwrite(h,{matchForEntity:function(z){var A,e;A=z.indexOf("[##_");if(A<0){return null}e=z.indexOf("_##]",A+4);if(e<0){return null}return[z.substring(A,e+4),z.substring(A+4,e)]},replaceTempTtml:function(e){e=e.replace(/\[###_###_###_/g,"[##_");e=e.replace(/_###_###_###\]/g,"_##]");return e},attachmentTtml2html:function(z){var C,e,A,B;C=z;e=this.matchForEntity(C);while(e){A=e[1].split("|",2)[0];switch(A){case"Gallery":B=this.getGalleryHtmlFromTtml(e[0]);break;case"iMazing":B=this.getIMazingHtmlFromTtml(e[0]);break;case"Jukebox":B=this.getJukeboxHtmlFromTtml(e[0]);
break;case"Movie":B=this.getMovieHtmlFromTtml(e[0]);break;case"Bgm":B=this.getBgmHtmlFromTtml(e[0]);break;default:B=this.getAttachmentHtmlFromTtml(e[0])}C=C.replace(e[0],B);e=this.matchForEntity(C)}C=this.replaceTempTtml(C);return C},getGalleryHtmlFromTtml:function(A){var B,z,e,C;B=400;z=300;e=A.match(/width=['"]?(\d+)/i);if(e&&e[1]){B=+e[1]}e=A.match(/height=['"]?(\d+)/i);if(e&&e[1]){z=+e[1]}C=a.tplEval('<img class="txc-gallery tx-unresizable" src="#{imgUrl}" width="#{width}" height="#{height}" data-ttml="#{ttml}" />',{imgUrl:TXMSG("@gallery.prev.url"),width:B,height:z,ttml:encodeURIComponent(A)});return C},getIMazingHtmlFromTtml:function(z){var B,A,e,C;B={};a.ttml2data(B,z,{width:"number",height:"number"});A=B.width||352;e=B.height||284;C=a.tplEval('<img class="txc-imazing tx-unresizable" src="#{imgUrl}" width="#{width}" height="#{height}" data-ttml="#{ttml}" />',{imgUrl:TXMSG("@imazing.prev.url"),width:A,height:e,ttml:encodeURIComponent(z)});return C},getJukeboxHtmlFromTtml:function(z){var A,e,B;
A=311;e=27;B=a.tplEval('<img class="txc-jukebox tx-entry-attach tx-unresizable" src="#{imgUrl}" width="#{width}" height="#{height}" data-ttml="#{ttml}" />',{imgUrl:TXMSG("@jukebox.prev.url"),width:A,height:e,ttml:encodeURIComponent(z)});return B},getMovieHtmlFromTtml:function(z){var e,A;e=z.match(/\[##_Movie\|([^\|]*)\|([^\|]*)_##\]/);if(e&&e[2]){A=a.tplEval('<img class="txc-movie tx-unresizable" src="#{imgUrl}" data-ttml="#{ttml}" />',{imgUrl:e[2],ttml:encodeURIComponent(z)});return A}return z},getBgmHtmlFromTtml:function(z){var A,e,B;A=268;e=27;B=a.tplEval('<img class="txc-bgm tx-entry-attach tx-unresizable" src="#{imgUrl}" width="#{width}" height="#{height}" data-ttml="#{ttml}" />',{imgUrl:TXMSG("@bgm.prev.url"),width:A,height:e,ttml:encodeURIComponent(z)});return B},getAttachmentHtmlFromTtml:function(e){if(/^\[##_1N/.test(e)){if(this.isImageFileAttr(e)){return this.getImageAttachmentHtmlFromTtml(e)}return this.getFileAttachmentHtmlFromTtml(e)}return this.getTempTtml(e)},isImageFileAttr:function(A){var e,z;
e=a.getFileNameFromAttr(A);if(e){z=a.getExtFromFileName(e);return["png","gif","jpg","jpeg","bmp"].contains(z.toLowerCase())}return false},getImageAttachmentHtmlFromTtml:function(A){var z,B,e,C;z=a.getPreviewUrl(A);B={};a.ttml2data(B,A,{width:"number",height:"number"});e="";if(B.width){e+='width="'+B.width+'" '}if(B.height){e+='height="'+B.height+'" '}C=a.tplEval('<img class="txc-noattach-image tx-unresizable" src="#{imageurl}" #{attrs} data-ttml="#{ttml}"/>',{imageurl:z,attrs:e,ttml:encodeURIComponent(A)});return C},getFileAttachmentHtmlFromTtml:function(e){var z,A,B;z={filename:""};a.ttml2data(z,e,{filename:"string"});A=i.Util.prevurl(z.filename.split(".").pop().toLowerCase());B=a.tplEval('<button class="txc-file" data-ttml="#{ttml}"><img class="tx-unresizable" src="#{prevurl}" /> #{filename}</button>',{prevurl:A,filename:z.filename,ttml:encodeURIComponent(e)});return B},getTempTtml:function(e){e=e.replace(/^\[##_/,"[###_###_###_");e=e.replace(/_##\]$/,"_###_###_###]");return e},attachmentHtml2ttml:function(z){var B=z,A=/<button[^>]*data\-ttml=((?:"[^"]+")|(?:'[^']+')|(?:[^\s"']+))[^>]*>[\S\s]*?<\/button>/i,e=/<img[^>]*data\-ttml=((?:"[^"]+")|(?:'[^']+')|(?:[^\s"']+))[^>]*>/i;
[A,e].each(function(E){var C,D;C=B.match(E);while(C){D=decodeURIComponent(C[1].replace(/^['"]/,"").replace(/['"]$/,""));B=B.replace(C[0],D);C=B.match(E)}});return B}});h.filters2htmlWithoutAttach.push("attachmentTtml2html");h.filters2ttmlWithoutAttach.push("attachmentHtml2ttml");i.register("TTML",function(C){var E,B,A,z,e,D;z=C.getConfig().ttml;E=function(F){var G=new h(z);return G.ttml2html(F)};B=function(F){var G=new h(z);return G.html2ttml(F)};e=function(F){var G=new h(z);return G.ttml2htmlWithoutAttach(F)};D=function(F){var G=new h(z);return G.html2ttmlWithoutAttach(F)};A=C.getDocParser();A.registerFilter("filter/ttml",{"before html@load":function(G){var F=E(G);return F},"after html@load":function(G){var F=e(G);return F},"before html4save":function(G){var F=B(G);return F},"after html4save":function(G){var F=D(G);return F},"before source2html":function(G){var F=E(G);return F},"after source2html":function(G){var F=e(G);return F},"before html2source":function(G){var F=B(G);return F},"after html2source":function(G){var F=D(G);
return F}})});r.addTool("moreless",{sync:d,status:w,klass:"txc-moreless"});l.addMsg({"@moreless.less":"\uc811\uae30","@moreless.more":"\ub354\ubcf4\uae30","@moreless.cancel.image":"#iconpath/btn_cancel.gif?v=2","@moreless.confirm.image":"#iconpath/btn_confirm.gif?v=2"});i.Tool.MoreLess=i.Class.create({$const:{__Identity:"moreless"},$extend:i.Tool,oninitialized:function(){var A=this.toolbar;var C=this.canvas;var B=function(D){if(D.node){D.node.setAttribute("data-more",encodeURIComponent(D.more));D.node.setAttribute("data-less",encodeURIComponent(D.less))}else{if(C.isWYSIWYG()){C.execute(function(F){var E=F.findNode("div.txc-moreless");if(E){F.moveCaretTo(E,w)}else{var G=F.blocks(function(){return"%wrapper,%paragraph"});E=F.wrap(G,"div",{className:"txc-moreless"});E.setAttribute("data-more",encodeURIComponent(D.more));E.setAttribute("data-less",encodeURIComponent(D.less));A.fireJobs("cmd.moreless.added",E)}})}else{C.execute(function(E){E.insertTag('<div class="txc-moreless">',"</div>")})}}};
var z=function(){var D={node:k,more:TXMSG("@moreless.more"),less:TXMSG("@moreless.less")};if(C.isWYSIWYG()){return C.query(function(H){var G,F,E;G=H.findNode("div.txc-moreless");if(G){F=decodeURIComponent(G.getAttribute("data-more")||"");E=decodeURIComponent(G.getAttribute("data-less")||"");if(F&&0<F.length){return{node:G,more:F,less:E}}}return D})}return D};this.weave.bind(this)(new i.Button(this.buttonCfg),new i.Menu.Moreless(this.menuCfg),B,z);var e=this;A.reserveJob("cmd.moreless.click",function(){e.button.onMouseDown()},10);C.observeJob(i.Ev.__CANVAS_PANEL_MOUSEUP,function(E){var D=v.element(E);if(y.find(D,"div.txc-moreless")){if(!e.menu.visible()){A.fireJobs("cmd.moreless.click")}}})}});i.MarkupTemplate.add("menu.moreless",['<div class="tx-menu-inner">',"<dl>","<dt>\uc5f4\uae30 \ubb38\uad6c</dt>",'<dd><input type="text" class="tx-moreless-moreinput"></dd>',"<dt>\ub2eb\uae30 \ubb38\uad6c</dt>",'<dd><input type="text" class="tx-moreless-lessinput"></dd>','<dd class="tx-hr">',"<hr/>","</dd>","<dd>",'<img class="tx-menu-confirm" width="32" height="21" src="@insertlink.confirm.image"/>',"&nbsp;",'<img class="tx-menu-cancel" width="32" height="21" src="@insertlink.cancel.image"/>',"</dd>","</dl>","</div>"].join(""));
i.Menu.Moreless=i.Class.create({$extend:i.Menu,targetNode:k,regenerate:function(){if(this.regenerateHandler){var e=this.config;this.regenerateHandler(e,this.initHandler())}},ongenerated:function(){var A=this.elMenu;i.MarkupTemplate.get("menu.moreless").evaluateToDom({},A);var z=y.collect(A,"input.tx-moreless-moreinput");this.elMoreInput=z;var e=y.collect(A,"input.tx-moreless-lessinput");this.elLessInput=e;var B=y.collectAll(A,"img");v.observe(B[0],"click",function(C){this.onSelect(C,{node:this.targetNode,more:z.value,less:e.value})}.bind(this));v.observe(B[1],"click",function(){this.onCancel()}.bindAsEventListener(this))},onregenerated:function(z,A){var B=this.elMoreInput;var e=this.elLessInput;this.targetNode=A.node;B.value=A.more;e.value=A.less}});r.addTool("footnote",{wysiwygonly:w,sync:d,status:w});l.addMsg({"@footnote.classname":"txc-footnote","@footnote.title":"\uac01\uc8fc","@footnote.default.value":"","@footnote.icon.image":"//i1.daumcdn.net/icon/editor/ic_footnote.gif?v=2","@footnote.menu.title":"\uac01\uc8fc \ub0b4\uc6a9","@footnote.cancel.image":"#iconpath/btn_cancel.gif?v=2","@footnote.confirm.image":"#iconpath/btn_confirm.gif?v=2"});
i.Tool.Footnote=i.Class.create({$const:{__Identity:"footnote"},$extend:i.Tool,oninitialized:function(){var D,A,B,z,C;D=this.canvas;A=this.toolbar;B=function(E){if(D.isWYSIWYG()){if(E.node){if(E.value!==k){E.node.setAttribute("data-footnote",encodeURIComponent(E.value))}else{y.remove(E.node)}}else{D.execute(function(G){var F;F=G.win.img({src:TXMSG("@footnote.icon.image"),className:TXMSG("@footnote.classname"),border:"0",valign:"top"});F.setAttribute("data-footnote",encodeURIComponent(E.value));G.pasteNode(F,d);A.fireJobs("cmd.footnote.added",F)})}}else{D.execute(function(G){var F='<img class="'+TXMSG("@footnote.classname")+'" border="0" src="'+TXMSG("@footnote.icon.image")+'" data-footnote="'+encodeURIComponent(E.value)+'"/>';G.insertTag(F)})}};z=function(){var E={node:k,value:TXMSG("@footnote.default.value")};if(D.isWYSIWYG()){return D.query(function(H){var G,F;if(H.hasControl()){var I=H.controls(function(){return"img"});G=I[0]}if(G){F=G.getAttribute("data-footnote");if(F){F=decodeURIComponent(F);
return{node:G,value:F}}}return E})}return E};C=new i.Menu.Footnote(this.menuCfg);this.weave.bind(this)(new i.Button(this.buttonCfg),C,B,z);var e=this;A.reserveJob("cmd.footnote.click",function(){e.button.onMouseDown()},10);D.observeJob(i.Ev.__CANVAS_PANEL_MOUSEUP,function(F){var E=v.element(F);if(y.kindOf(E,"img.txc-footnote")){A.fireJobs("cmd.footnote.click")}})}});i.MarkupTemplate.add("menu.footnote",['<div class="tx-menu-inner">',"	<dl>","		<dt>","			@footnote.menu.title","		</dt>","		<dd>",'			<textarea class="tx-text-input"></textarea>',"		</dd>",'		<dd class="tx-hr">',"			<hr/>","		</dd>","		<dd>",'			<img class="tx-menu-confirm" width="32" height="21" src="@footnote.confirm.image"/>','			<img class="tx-menu-cancel" width="32" height="21" src="@footnote.cancel.image"/>',"		</dd>","	</dl>","</div>"].join(""));i.Menu.Footnote=i.Class.create({$extend:i.Menu,targetNode:k,regenerate:function(){if(this.regenerateHandler){var e=this.config;this.regenerateHandler(e,this.initHandler())}},ongenerated:function(){var z,e,A;
z=this.elMenu;i.MarkupTemplate.get("menu.footnote").evaluateToDom({},z);e=y.collect(z,"textarea.tx-text-input");this.elInput=e;A=y.collectAll(z,"img");v.observe(A[0],"click",function(B){this.onSelect(B,{node:this.targetNode,value:e.value})}.bind(this));v.observe(A[1],"click",function(){this.onCancel()}.bindAsEventListener(this))},onregenerated:function(e,z){var A;A=this.elInput;this.targetNode=z.node;A.value=z.value;A.focus();if(v.msie_nonstd){setTimeout(function(){try{A.focus();var B=document.selection.createRange();B.move("character",A.value.length);B.select()}catch(C){}},100)}}});if(typeof Editor!=="undefined"){Editor.version="7.3.51-7"}try{EditorJSLoader.readyState="complete";EditorJSLoader.finish()}catch(u){}})();